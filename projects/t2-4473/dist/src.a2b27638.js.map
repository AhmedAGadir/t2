{"version":3,"sources":["node_modules/ag-charts-community/dist/es6/util/padding.js","node_modules/ag-charts-community/dist/es6/scene/bbox.js","node_modules/ag-charts-community/dist/es6/scene/matrix.js","node_modules/ag-charts-community/dist/es6/util/id.js","node_modules/ag-charts-community/dist/es6/scene/node.js","node_modules/ag-charts-community/dist/es6/util/object.js","node_modules/ag-charts-community/dist/es6/scene/shape/shape.js","node_modules/ag-charts-community/dist/es6/canvas/hdpiCanvas.js","node_modules/ag-charts-community/dist/es6/scene/shape/text.js","node_modules/ag-charts-community/dist/es6/util/observable.js","node_modules/ag-charts-community/dist/es6/caption.js","node_modules/ag-charts-community/dist/es6/interpolate/constant.js","node_modules/ag-charts-community/dist/es6/interpolate/number.js","node_modules/ag-charts-community/dist/es6/interpolate/date.js","node_modules/ag-charts-community/dist/es6/interpolate/array.js","node_modules/ag-charts-community/dist/es6/interpolate/object.js","node_modules/ag-charts-community/dist/es6/util/color.js","node_modules/ag-charts-community/dist/es6/interpolate/color.js","node_modules/ag-charts-community/dist/es6/interpolate/value.js","node_modules/ag-charts-community/dist/es6/util/compare.js","node_modules/ag-charts-community/dist/es6/util/bisect.js","node_modules/ag-charts-community/dist/es6/scale/continuousScale.js","node_modules/ag-charts-community/dist/es6/util/ticks.js","node_modules/ag-charts-community/dist/es6/scale/linearScale.js","node_modules/ag-charts-community/dist/es6/scene/group.js","node_modules/ag-charts-community/dist/es6/scene/selection.js","node_modules/ag-charts-community/dist/es6/scene/shape/line.js","node_modules/ag-charts-community/dist/es6/util/angle.js","node_modules/ag-charts-community/dist/es6/scene/polyRoots.js","node_modules/ag-charts-community/dist/es6/scene/intersection.js","node_modules/ag-charts-community/dist/es6/scene/path2D.js","node_modules/ag-charts-community/dist/es6/scene/shape/path.js","node_modules/ag-charts-community/dist/es6/util/number.js","node_modules/ag-charts-community/dist/es6/scene/shape/arc.js","node_modules/ag-charts-community/dist/es6/axis.js","node_modules/ag-charts-community/dist/es6/chart/chartAxis.js","node_modules/ag-charts-community/dist/es6/chart/axis/numberAxis.js","node_modules/ag-charts-community/dist/es6/scale/bandScale.js","node_modules/ag-charts-community/dist/es6/chart/axis/categoryAxis.js","node_modules/ag-charts-community/dist/es6/util/array.js","node_modules/ag-charts-community/dist/es6/layout/tree.js","node_modules/ag-charts-community/dist/es6/chart/axis/groupedCategoryAxis.js","node_modules/ag-charts-community/dist/es6/util/time/interval.js","node_modules/ag-charts-community/dist/es6/util/time/millisecond.js","node_modules/ag-charts-community/dist/es6/util/time/duration.js","node_modules/ag-charts-community/dist/es6/util/time/second.js","node_modules/ag-charts-community/dist/es6/util/time/minute.js","node_modules/ag-charts-community/dist/es6/util/time/hour.js","node_modules/ag-charts-community/dist/es6/util/time/day.js","node_modules/ag-charts-community/dist/es6/util/time/week.js","node_modules/ag-charts-community/dist/es6/util/time/month.js","node_modules/ag-charts-community/dist/es6/util/time/year.js","node_modules/ag-charts-community/dist/es6/util/time/utcDay.js","node_modules/ag-charts-community/dist/es6/util/time/utcYear.js","node_modules/ag-charts-community/dist/es6/util/time/utcWeek.js","node_modules/ag-charts-community/dist/es6/util/time/format/locale.js","node_modules/ag-charts-community/dist/es6/util/time/format/defaultLocale.js","node_modules/ag-charts-community/dist/es6/scale/timeScale.js","node_modules/ag-charts-community/dist/es6/chart/axis/timeAxis.js","node_modules/ag-charts-community/dist/es6/scene/scene.js","node_modules/ag-charts-community/dist/es6/scene/gradient/gradient.js","node_modules/ag-charts-community/dist/es6/scene/gradient/linearGradient.js","node_modules/ag-charts-community/dist/es6/scene/shape/rect.js","node_modules/ag-charts-community/dist/es6/chart/marker/marker.js","node_modules/ag-charts-community/dist/es6/chart/marker/square.js","node_modules/ag-charts-community/dist/es6/chart/markerLabel.js","node_modules/ag-charts-community/dist/es6/chart/marker/circle.js","node_modules/ag-charts-community/dist/es6/chart/marker/cross.js","node_modules/ag-charts-community/dist/es6/chart/marker/diamond.js","node_modules/ag-charts-community/dist/es6/chart/marker/heart.js","node_modules/ag-charts-community/dist/es6/chart/marker/plus.js","node_modules/ag-charts-community/dist/es6/chart/marker/triangle.js","node_modules/ag-charts-community/dist/es6/chart/marker/util.js","node_modules/ag-charts-community/dist/es6/chart/legend.js","node_modules/ag-charts-community/dist/es6/util/sizeMonitor.js","node_modules/ag-charts-community/dist/es6/chart/series/series.js","node_modules/ag-charts-community/dist/es6/chart/series/seriesMarker.js","node_modules/ag-charts-community/dist/es6/chart/series/cartesian/cartesianSeries.js","node_modules/ag-charts-community/dist/es6/chart/chart.js","node_modules/ag-charts-community/dist/es6/scene/clipRect.js","node_modules/ag-charts-community/dist/es6/chart/shapes/rangeHandle.js","node_modules/ag-charts-community/dist/es6/chart/shapes/rangeMask.js","node_modules/ag-charts-community/dist/es6/chart/shapes/rangeSelector.js","node_modules/ag-charts-community/dist/es6/chart/navigator/navigatorMask.js","node_modules/ag-charts-community/dist/es6/chart/navigator/navigatorHandle.js","node_modules/ag-charts-community/dist/es6/chart/navigator/navigator.js","node_modules/ag-charts-community/dist/es6/chart/cartesianChart.js","node_modules/ag-charts-community/dist/es6/chart/hierarchyChart.js","node_modules/ag-charts-community/dist/es6/chart/groupedCategoryChart.js","node_modules/ag-charts-community/dist/es6/chart/series/polar/polarSeries.js","node_modules/ag-charts-community/dist/es6/chart/polarChart.js","node_modules/ag-charts-community/dist/es6/util/equal.js","node_modules/ag-charts-community/dist/es6/util/string.js","node_modules/ag-charts-community/dist/es6/chart/series/cartesian/areaSeries.js","node_modules/ag-charts-community/dist/es6/chart/label.js","node_modules/ag-charts-community/dist/es6/chart/series/cartesian/barSeries.js","node_modules/ag-charts-community/dist/es6/chart/series/cartesian/lineSeries.js","node_modules/ag-charts-community/dist/es6/chart/series/cartesian/scatterSeries.js","node_modules/ag-charts-community/dist/es6/chart/series/cartesian/histogramSeries.js","node_modules/ag-charts-community/dist/es6/chart/series/hierarchy/hierarchySeries.js","node_modules/ag-charts-community/dist/es6/scene/dropShadow.js","node_modules/ag-charts-community/dist/es6/layout/treemap.js","node_modules/ag-charts-community/dist/es6/layout/hierarchy.js","node_modules/ag-charts-community/dist/es6/chart/series/hierarchy/treemapSeries.js","node_modules/ag-charts-community/dist/es6/scene/shape/sector.js","node_modules/ag-charts-community/dist/es6/chart/series/polar/pieSeries.js","node_modules/ag-charts-community/dist/es6/util/time/utcMinute.js","node_modules/ag-charts-community/dist/es6/util/time/utcHour.js","node_modules/ag-charts-community/dist/es6/util/time/utcMonth.js","node_modules/ag-charts-community/dist/es6/chart/themes/chartTheme.js","node_modules/ag-charts-community/dist/es6/chart/themes/darkTheme.js","node_modules/ag-charts-community/dist/es6/chart/themes/materialLight.js","node_modules/ag-charts-community/dist/es6/chart/themes/materialDark.js","node_modules/ag-charts-community/dist/es6/chart/themes/pastelLight.js","node_modules/ag-charts-community/dist/es6/chart/themes/pastelDark.js","node_modules/ag-charts-community/dist/es6/chart/themes/solarLight.js","node_modules/ag-charts-community/dist/es6/chart/themes/solarDark.js","node_modules/ag-charts-community/dist/es6/chart/themes/vividLight.js","node_modules/ag-charts-community/dist/es6/chart/themes/vividDark.js","node_modules/ag-charts-community/dist/es6/chart/agChartMappings.js","node_modules/ag-charts-community/dist/es6/chart/agChart.js","node_modules/ag-charts-community/dist/es6/main.js","src/services-data.js","src/index.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["Padding","top","right","bottom","left","prototype","clear","BBox","x","y","width","height","isValid","isFinite","dilate","value","containsPoint","render","ctx","params","noParams","save","resetTransform","setTransform","strokeStyle","lineWidth","strokeRect","label","fillStyle","textBaseline","fillText","restore","Matrix","elements","setElements","e","setIdentityElements","Object","defineProperty","get","enumerable","configurable","set","AxB","A","B","C","m11","m12","m21","m22","m31","m32","o11","o12","o21","o22","o31","o32","multiplySelf","other","multiply","Array","preMultiplySelf","inverse","_a","a","b","c","d","f","rD","inverseTo","invertSelf","clone","slice","transformPoint","transformBBox","bbox","radius","target","xx","xy","yx","yy","h_w","h_h","cx","cy","w","h","sx","Math","sqrt","sy","abs","toContext","identity","transform","flyweight","matrix","createId","instance","constructor","className","Error","id","PointerEvents","Node","tag","NaN","isContainerNode","_children","childSet","inverseMatrix","_dirtyTransform","_scalingX","_scalingY","_scalingCenterX","_scalingCenterY","_rotationCenterX","_rotationCenterY","_rotation","_translationX","_translationY","_dirty","_visible","pointerEvents","All","isNode","node","undefined","_setScene","_scene","children","n","length","i","_setParent","_parent","countChildren","depth","MAX_SAFE_INTEGER","size","append","nodes","parent","scene","name","push","dirty","appendChild","removeChild","indexOf","splice","insertBefore","nextNode","index","inverseTransformPoint","dirtyTransform","rotation","PI","pickNode","visible","None","hit","computeBBox","computeBBoxCenter","computeTransformMatrix","bbcx","bbcy","scalingX","scalingY","scx","scy","scalingCenterX","scalingCenterY","r","cos","sin","rcx","rcy","rotationCenterX","rotationCenterY","tx","translationX","ty","translationY","tx4","ty4","pow","chainObjects","child","obj","create","prop","hasOwnProperty","getValue","object","path","parts","isArray","split","forEach","part","emptyTarget","cloneUnlessOtherwiseSpecified","options","isMergeableObject","deepMerge","defaultArrayMerge","source","concat","map","element","getMergeFunction","key","customMerge","getEnumerableOwnPropertySymbols","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","getKeys","keys","propertyIsOnObject","property","_","propertyIsUnsafe","call","mergeObject","destination","defaultIsMergeableObject","isNonNullObject","isSpecial","stringValue","toString","arrayMerge","sourceIsArray","targetIsArray","sourceAndTargetTypesMatch","isObject","__extends","extendStatics","setPrototypeOf","__proto__","p","__","Shape","_super","_this","apply","arguments","lastInstanceId","_fillOpacity","_strokeOpacity","_fill","defaultStyles","fill","_stroke","stroke","_strokeWidth","strokeWidth","_lineDash","lineDash","_lineDashOffset","lineDashOffset","_lineCap","lineCap","_lineJoin","lineJoin","_opacity","opacity","onShadowChange","_fillShadow","fillShadow","_strokeShadow","strokeShadow","createInstance","template","shape","String","restoreOwnStyles","styles","getOwnPropertyNames","restoreAllStyles","restoreOverriddenStyles","protoStyles","getPrototypeOf","floor","align","alignment","start","oldValue","identical","min","max","removeEventListener","addEventListener","fillStroke","pixelRatio","canvas","globalAlpha","fillOpacity","enabled","shadowColor","color","shadowOffsetX","xOffset","shadowOffsetY","yOffset","shadowBlur","blur","strokeOpacity","setLineDash","isPointInPath","HdpiCanvas","document","window","_container","_pixelRatio","createElement","context","getContext","style","userSelect","display","setPixelRatio","resize","remove","parentNode","destroy","_canvas","freeze","toImage","img","src","getDataURL","type","toDataURL","download","fileName","trim","dataUrl","navigator","msSaveOrOpenBlob","binary","atob","array","charCodeAt","blob","Blob","Uint8Array","href","body","click","ratio","devicePixelRatio","overrideScale","imageRendering","_width","_height","round","_textMeasuringContext","_svgText","xmlns","svg","createElementNS","setAttribute","classList","add","position","visibility","svgText","_has","textMetrics","textMeasuringContext","measureText","actualBoundingBoxDescent","test","userAgent","getTransform","text","font","textAlign","getTextSize","has","metrics","actualBoundingBoxAscent","measureSvgText","cache","textSizeCache","fontCache","size_1","textContent","getBBox","scale","overrides","$save","$restore","$setTransform","name_1","Text","_x","_y","lineBreakRegex","lines","_text","_dirtyFont","_fontSize","_fontFamily","_textAlign","_textBaseline","_lineHeight","splitText","str","dirtyFont","_font","fontStyle","fontWeight","fontSize","fontFamily","join","_fontStyle","_fontWeight","getPreciseBBox","getApproximateBBox","actualBoundingBoxLeft","point","isPointInStroke","_b","_c","strokeText","__assign","assign","t","s","Observable","allPropertyListeners","Map","allEventListeners","addPropertyListener","listener","scope","propertyListeners","scopes_1","Set","scopes","removePropertyListener","delete","notifyPropertyListeners","eventListeners","scopes_2","notifyEventListeners","types","listeners","fireEvent","event","privateKeyPrefix","reactive","events","_i","privateKey","privateKeyEvents","events_1","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","Caption","padding","date","Date","msA","msB","setTime","nb","na","k","Color","g","fromString","fromHexString","hex","nameToHex","fromRgbaString","values","match","hexRe","parseInt","shortHexRe","rgbRe","rgbaRe","fromArray","arr","fromHSB","alpha","rgb","HSBtoRGB","padHex","toHexString","toRgbaString","fractionDigits","components","toHSB","RGBtoHSB","S","H","delta","rc","gc","bc","isNaN","q","derive","hueShift","saturationFactor","brightnessFactor","opacityFactor","hsb","rgba","brighter","darker","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","valueOf","ascending","bisectLeft","list","comparator","lo","hi","mid","bisectRight","complexBisectLeft","ascendingComparator","complexBisectRight","item","constant","clamper","domain","ContinuousScale","unknown","_clamp","_domain","_range","untransform","_interpolate","interpolateValue","rescale","setDomain","v","getDomain","range","piecewise","polymap","bimap","output","input","normalize","interpolate","x0","x1","y0","y1","xt","reverse","dt","from","tr","convert","invert","interpolateNumber","count","step","tickStep","ceil","e10","e5","e2","rawStep","log","LN10","error","tickIncrement","power","NumericTicks","absStep","LinearScale","ticks","nice","i0","i1","stop","Group","Infinity","parent_1","EnterNode","datum","next","Selection","groups","parents","select","selectAll","Class","appendFn","creator","data","group","selector","numGroups","subgroups","j","groupSize","subgroup","subnode","selectByClass","selectByTag","selectAllByClass","selectAllByTag","selectNone","selectorAll","groupCount","groupLength","each","cb","merge","groups0","groups1","m0","m1","m","merges","group0","group1","attr","attrFn","enterGroups","exitGroups","setDatum","setData","data_1","updateGroups","parent_2","dataSize","enterGroup","updateGroup","exitGroup","bindKey","bindIndex","previous","result","enter","update","exit","keyValues","nodeByKeyValue","keyValue","keyPrefix","Line","_x1","_y1","_x2","_y2","x2","y2","beginPath","moveTo","lineTo","twoPi","normalizeAngle360","radians","normalizeAngle360Inclusive","normalizeAngle180","toRadians","degrees","toDegrees","sign","linearRoot","quadraticRoots","D","roots","t1","t2","cubicRoots","Q","R","third","T","Im","t_1","theta","acos","thirdA","twoSqrtQ","t3","segmentIntersection","ax1","ay1","ax2","ay2","bx1","by1","bx2","by2","ua","ub","cubicSegmentIntersections","px1","py1","px2","py2","px3","py3","px4","py4","intersections","bx","bezierCoefficients","by","tt","ttt","P1","P2","P3","P4","Path2D","commands","_closedPath","rect","closePath","arcTo","rx","ry","fA","fS","hdx","hdy","sinPhi","cosPhi","xp","yp","ratX","ratY","lambda","cpx","cpy","theta1","atan2","deltaTheta","cubicArc","phi","theta2","anticlockwise","temp","f90","sinTheta1","cosTheta1","rightAngle","lastX","sinPhi2","cosPhi2","C2x","C2y","deCasteljau","points","newPoints","last","approximateCurve","xy_1","quadraticCurveTo","cubicCurveTo","cx1","cy1","cx2","cy2","cn","ox","oy","px","py","intersectionCount","ci","pi","setFromString","parseSvgPath","splitCommandsRe","strParams","matchParamsRe","command","substr","parseFloat","prettifySvgPath","lastCommand","checkQuadraticCP","quadraticCommandRe","checkCubicCP","cubicCommandRe","out","toPrettyString","toSvg","xmlDeclaration","toDebugSvg","toCubicPaths","paths","cubicPathToString","Path","_dirtyPath","_svgPath","closedPath","updatePath","dirtyPath","appendPath","isEqual","epsilon","toFixed","fractionOrSignificantDigits","numberUnits","log10","LOG10E","toReadableNumber","prefix","thousands","ArcType","Arc","_centerX","_centerY","_radiusX","_radiusY","_startAngle","_endAngle","_counterClockwise","_type","Open","startAngle","endAngle","centerX","centerY","radiusX","radiusY","counterClockwise","Chord","Round","fullPie","Tags","AxisTick","AxisLabel","mirrored","parallel","_format","onFormatChange","Axis","lineNode","line","tick","translation","_visibleRange","_title","_gridLength","gridStyle","_radialGrid","requestedRange","groupSelection","onTickFormatChange","bind","getMeta","updateRange","rr","vr","visibleRange","span","shift","inRange","tolerance","inRangeEx","format","tickFormat","tickFormatter","oldTitle","requestedRangeMin","requestedRangeMax","parallelLabels","labelRotation","halfBandwidth","bandwidth","sideFlag","parallelFlipRotation","parallelFlipFlag","regularFlipRotation","regularFlipFlag","alignFlag","Tick","gridLength","radialGrid","GridLine","styleCount_1","gridLines","angularGridLength_1","arc","gridLine","meta","labelSelection","formatter","axis","labelX","autoRotation","title","titleVisible","titleNode","excludeTitle","titleRotationFlag","labels","labelBBox","ChartAxisDirection","flipChartAxisDirection","direction","X","Y","ChartAxisPosition","ChartAxis","boundSeries","_position","Top","Right","Bottom","Left","NumberAxis","_nice","_min","_max","clamp","BandScale","ordinalRange","_bandwidth","_paddingInner","_paddingOuter","_round","_align","reversed","CategoryAxis","paddingInner","paddingOuter","find","predicate","findIndex","extent","finiteExtent","numericExtent","calculatedExtent","getTime","findMinMax","values_1","copy","TreeNode","number","subtreeLeft","subtreeRight","screenX","screenY","leafCount","prelim","mod","ancestor","change","getLeftSibling","getLeftmostSibling","nextLeft","thread","nextRight","getSiblings","ticksToTree","pad","root","unshift","insertTick","pathParts","lastPartIndex","pathPart","partIndex","existingNode","isNotLeaf","moveSubtree","wm","wp","subtrees","vim","defaultAncestor","executeShifts","apportion","distance","vop","vip","vom","sip","sop","sim","som","firstWalk","defaultAncestor_1","midpoint","leftSibling","Dimensions","secondWalk","layout","thirdWalk","treeLayout","TreeLayout","dimensions","leafNodes","nonLeafNodes","shiftX","shiftY","flipX","xSteps","ySteps","existingSpacingX","desiredSpacingX","existingSpacingY","desiredSpacingY","screenDimensions","offsetX","offsetY","logTree","console","GroupedCategoryAxisLabel","grid","GroupedCategoryAxis","tickScale","longestSeparatorLength","labelColor","gridLineSelection","axisLineSelection","separatorSelection","tickTree","tickTreeLayout","resizeTickTree","lineHeight","rangeStart","rangeEnd","rangeLength","isHorizontal","treeLabels","isLabelTree","updateGridLines","enterGridLines","updateLabels","enterLabels","labelFormatter","maxLeafLabelWidth","labelGrid","separatorData","minX","updateSeparators","enterSeparators","lineCount","updateAxisLines","enterAxisLines","styles_1","includeTitle","t0","TimeInterval","offset","_floor","_offset","d0","d1","ms","CountableTimeInterval","field","_count","_field","end","every","field_1","milliseconds","millisecond","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","getMilliseconds","seconds","second","getSeconds","minutes","getMinutes","minute","hours","getHours","hour","setHours","days","setDate","getDate","tzMinuteDelta","getTimezoneOffset","day","weekday","getDay","weeks","msDelta","sunday","monday","tuesday","wednesday","thursday","friday","saturday","months","setMonth","getMonth","getFullYear","month","years","setFullYear","year","setUTCHours","setUTCDate","getUTCDate","utcDay","setUTCMonth","setUTCFullYear","getUTCFullYear","utcYear","getUTCDay","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","localDate","M","L","utcDate","UTC","formatLookup","names","toLowerCase","newYear","percentCharCode","numberRe","percentRe","requoteRe","requote","replace","formatRe","RegExp","pads","string","formatLocale","timeLocale","lDateTime","dateTime","lDate","lTime","time","lPeriods","periods","lWeekdays","lShortWeekdays","shortDays","lMonths","lShortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","formatShortWeekday","formatWeekday","formatShortMonth","formatMonth","formatDayOfMonth","formatMicroseconds","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMonthNumber","formatMinutes","formatPeriod","formatUnixTimestamp","formatUnixTimestampSeconds","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","formatYear","formatFullYear","formatZone","formatLiteralPercent","utcFormats","formatUTCShortWeekday","formatUTCWeekday","formatUTCShortMonth","formatUTCMonth","formatUTCDayOfMonth","formatUTCMicroseconds","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCPeriod","formatUTCSeconds","formatUTCWeekdayNumberMonday","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","parses","parseShortWeekday","parseWeekday","parseShortMonth","parseMonth","parseLocaleDateTime","parseDayOfMonth","parseMicroseconds","parseHour24","parseDayOfYear","parseMilliseconds","parseMonthNumber","parseMinutes","parsePeriod","parseUnixTimestamp","parseUnixTimestampSeconds","parseSeconds","parseWeekdayNumberMonday","parseWeekNumberSunday","parseWeekNumberISO","parseWeekdayNumberSunday","parseWeekNumberMonday","parseLocaleDate","parseLocaleTime","parseYear","parseFullYear","parseZone","parseLiteralPercent","newFormat","newParse","specifier","newDate","parseSpecifier","V","week","getUTCMonth","timeMonday","timeDay","u","W","U","Z","charAt","pad_1","code","char","parse","dayOfWeek","timeSunday","timeThursday","yearStart","z","getUTCMilliseconds","getUTCSeconds","getUTCMinutes","getUTCHours","exec","utcFormat","utcParse","locale","setDefaultLocale","definition","TimeScale","timeYear","timeMonth","timeWeek","timeHour","timeMinute","timeSecond","timeMillisecond","tickIntervals","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","defaultTickFormat","tickInterval","interval","tickCount","TimeAxis","Scene","animationFrameId","_root","debug","renderFrameIndex","renderBoundingBoxes","_frameIndex","pendingSize","clearRect","fillRect","frameIndex","container","requestAnimationFrame","cancelRender","cancelAnimationFrame","bezierCurveTo","Gradient","stops","LinearGradient","angle","generateGradient","l","atan","gradient_1","createLinearGradient","addColorStop","RectSizing","Rect","_radius","_crisp","_gradient","effectiveStrokeWidth","_sizing","Content","updateGradientInstance","gradient","gradientInstance","crisp","sizing","Border","borderSizing","halfWidth","halfHeight","al","Marker","_size","half","Square","hs","MarkerLabel","_marker","_markerSize","_spacing","marker","markerSize","spacing","Circle","Cross","Diamond","Heart","rad","degree","Plus","Triangle","getMarker","LegendOrientation","LegendPosition","LegendLabel","LegendMarker","LegendItem","paddingX","paddingY","changeListener","layoutChangeListener","Legend","itemSelection","oldSize","orientation","Vertical","onDataChange","onEnabledChange","onPositionChange","onMarkerShapeChange","Horizontal","performLayout","updateSelection","MarkerShape","itemId","enterSelection","itemCount","bboxes","itemMarker","itemLabel","markerLabel","itemHeight","rowCount","columnWidth","paddedItemsWidth","paddedItemsHeight","columnCount","itemsWidth","itemsHeight","columnCount_1","startX","startY","markerFill","markerStroke","markerStrokeWidth","markerFillOpacity","markerStrokeOpacity","getDatumForPoint","SizeMonitor","init","NativeResizeObserver","ResizeObserver","resizeObserver","entries","entries_1","entry","contentRect","checkSize","clientWidth","clientHeight","setInterval","ready","observe","unobserve","requestAnimationFrameId","SeriesTooltip","Series","directions","tooltipEnabled","showInLegend","scheduleLayout","scheduleData","setColors","fills","strokes","directionKeys","getNodeData","fireNodeClickEvent","toggleSeriesItem","onHighlightChange","fixNumericExtent","SeriesMarker","maxSize","CartesianSeries","CartesianSeriesMarker","defaultTooltipCss","toTooltipHtml","defaults","content","_d","backgroundColor","titleHtml","Chart","defaultTooltipClass","ChartTooltip","chart","class","delay","tracking","showTimeout","constrained","tooltipRoot","IntersectionObserver","target_1","observer","intersectionRatio","toggle","isVisible","contains","classes","getAttribute","updateClass","show","html","instantly","el","innerHTML","pageX","pageY","tooltipRect","getBoundingClientRect","minLeft","maxLeft","innerWidth","pageYOffset","setTimeout","clearTimeout","lastPick","dehighlightDatum","background","legend","legendAutoPadding","captionAutoPadding","_data","_autoSize","_tooltipClass","tooltipTracking","_axes","_series","_axesChanged","_seriesChanged","layoutCallbackId","_performLayout","layoutPending","dataCallbackId","_onMouseDown","onMouseDown","_onMouseUp","onMouseUp","_onMouseMove","onMouseMove","_onMouseOut","onMouseOut","_onClick","onClick","_element","autoSize","onLayoutChange","onLegendPositionChange","tooltip","tooltipDocuments","styleElement","head","querySelector","setupDomListeners","onCaptionChange","series","chart_1","cleanupDomListeners","detachAxis","linkedTo","attachAxis","axesChanged","seriesRoot","removeAllSeries","addSeries","dataPending","before","allSeries","canAdd","beforeIndex","initSeries","seriesChanged","updateLegend","onSeriesNodeClick","freeSeries","addSeriesAfter","after","afterIndex","removeSeries","assignSeriesToAxes","axes","axisName","assignAxesToSeries","force","directionToAxesMap","directionAxes","findMatchingAxis","xAxis","warn","yAxis","axisKeys","processData","legendData","listSeriesItems","positionCaptions","subtitle","subtitleVisible","paddingTop","titleBBox","subtitleBBox","positionLegend","legendGroup","legendSpacing","legendBBox","chartElement","getSeriesRect","seriesRect","pickSeriesNode","pickClosestSeriesNodeDatum","getDistance","p1","p2","minDistance","closestDatum","_loop_1","hitPoint","handleTooltip","pick","nodeDatum","onSeriesDatumPick","hideTooltip","canvasRect","pageXOffset","checkSeriesNodeClick","checkLegendClick","event_1","id_1","highlightDatum","getTooltipHtml","highlightedDatum","ClipRect","_enabled","clip","RangeHandle","_gripLineGap","_gripLineLength","ax","ay","axw","ayh","dx","gripLineGap","dy","gripLineLength","RangeMask","minRange","onRangeChange","computeVisibleRangeBBox","maxX","RangeSelector","minHandle","maxHandle","mask","updateHandles","NavigatorMask","rangeMask","rm","NavigatorHandle","rangeHandle","rh","Navigator","rs","minHandleDragging","maxHandleDragging","panHandleOffset","_margin","updateAxes","clipSeries","onDragStart","onDrag","getRatio","cursor","onDragStop","stopHandleDragging","CartesianChart","_seriesRoot","shrinkRect","legendPadding","margin","bottomAxesHeight","axisThickness","_onTouchStart","onTouchStart","_onTouchMove","onTouchMove","_onTouchEnd","onTouchEnd","_onTouchCancel","onTouchCancel","getTouchOffset","touch","touches","clientX","clientY","domains_1","HierarchyChart","GroupedCategoryChart","domains","isNumericX","domain_1","PolarSeries","PolarSeriesMarker","PolarChart","equal","length_1","flags","interpolatePattern","valueName","formatName","locales","toLocaleString","toDateString","AreaSeriesTooltip","AreaSeries","areaGroup","strokeGroup","markerGroup","areaSelection","strokeSelection","markerSelection","markerSelectionData","seriesItemEnabled","xData","yData","yDomain","_xKey","xName","_yKeys","yNames","highlightStyle","seriesItemEnabled_1","_normalizedTo","absValue","updateMarkerNodes","xKey","yKeys","keysFound","yKey","normalizedTo","yMinMax","yLargestMinMax","findLargestMinMax","yMin","yMax","stack","totals","totals_1","total","selectionData","generateSelectionData","areaSelectionData","updateAreaSelection","updateStrokeSelection","updateMarkerSelection","xScale","yScale","xDatum","yDatum","seriesDatum","prevMin","prevMax","curr","prev","yValue","areaDatum","areaPoints","shadow","updateAreas","enterAreas","updateStrokes","enterStrokes","updateMarkers","enterMarkers","markerFormatter","highlightFill","highlightStroke","highlighted","markerFormat","renderer","tooltipRenderer","tooltipFormat","xValue","yKeyIndex","yName","xString","yString","Label","BarSeriesNodeTag","BarSeriesLabel","BarSeriesTooltip","flat","BarSeries","rectGroup","textGroup","rectSelection","textSelection","flipXY","groupScale","_xName","cumYKeyCount","flatYKeys","hideInLegend","_grouped","_yNames","grouped","prevYKeyCount_1","visibleStacks_1","map_1","_shadow","updateRectNodes","tallestStackMin","tallestStackMax","groups_1","group_1","generateNodeData","labelFontStyle","labelFontWeight","labelFontSize","labelFontFamily","barWidth","nodeData","groupIndex","groupYs","stackIndex","stackYs","prevMinY","prevMaxY","levelIndex","currY","barX","prevY","bottomY","yValueIsNumber","labelText","colorIndex","updateRectSelection","updateTextSelection","updateTextNodes","updateRects","enterRects","Bar","rectFill","rectStroke","updateTexts","enterTexts","labelEnabled","yKeys_1","visibleStacks","LineSeriesTooltip","LineSeries","xDomain","nodeSelection","_yKey","onMarkerEnabledChange","isContinuousX","isContinuousY","updateNodes","updateLinePath","updateNodeSelection","getXYDatums","noDatum","linePath","prevXInRange","nextXYDatums","xyDatums","xInRange","nextXInRange","ScatterSeriesTooltip","ScatterSeries","sizeData","sizeScale","sizeName","labelName","sizeKey","labelKey","__spreadArrays","il","jl","HistogramSeriesNodeTag","HistogramSeriesLabel","defaultBinCount","aggregationFunctions","bin","sum","reduce","acc","mean","HistogramBin","domainMin","domainMax","aggregatedValue","frequency","addDatum","domainWidth","calculateAggregatedValue","aggregationName","aggregationFunction","getY","areaPlot","relativeHeight","HistogramSeriesTooltip","HistogramSeries","binnedData","_areaPlot","_bins","_aggregation","_binCount","_yName","bins","aggregation","binCount","deriveBins","binStarts","binSize","firstBinEnd","expandStartToBin","placeDataInBins","derivedBins","sortedData","sort","currentBin","loop","ln","Number","NEGATIVE_INFINITY","firstBin","lastBin","xMin","xMax","defaultLabelFormatter","binOfData","xDomainMin","xDomainMax","xMinPx","xMaxPx","yZeroPx","yMaxPx","selectionDatumLabel","Bin","rangeMin","rangeMax","HierarchySeries","DropShadow","dice","roundNode","squarifyRatio","rows","nodeValue","sumValue","minValue","maxValue","newRatio","minRatio","beta","row","squarify","custom","Treemap","paddingStack","tile","paddingRight","paddingBottom","paddingLeft","eachBefore","positionNode","HierarchyNode","countFn","eachAfter","callback","iterator","pop","compare","leastCommonAncestor","ancestors","descendants","leaves","links","current","doLoop","hierarchy","mapChildren","objectChildren","childs","computeHeight","aNodes","bNodes","TreemapSeriesTooltip","TreemapSeriesLabel","TextNodeTag","TreemapSeries","labelMap","large","medium","small","_nodePadding","colorKey","colorDomain","colorRange","colorParents","colorName","rootName","updateLayoutPadding","nodePadding","toUpperCase","textSize","innerNodeWidth","hasTitle","dataRoot","colorScale","traverse","colorValue","getLabelCenterX","getLabelCenterY","Name","Value","isLeaf","innerNodeHeight","textBBox","hasLabel","nameNode","Sector","_centerOffset","_innerRadius","_outerRadius","_angleOffset","outerRadius","angleOffset","midAngle","innerRadius","centerOffset","PieNodeTag","PieSeriesLabel","minAngle","PieSeriesCallout","colors","PieSeriesTooltip","PieSeries","radiusScale","groupSelectionData","angleScale","callout","angleKey","angleName","_fills","_strokes","outerRadiusOffset","innerRadiusOffset","radiusKey","angleData","angleDataTotal","angleDataRatios","labelData","radiusData","radiusMin","radiusMax","radii","min_1","delta_1","halfPi","datumIndex","midCos","midSin","labelMinAngle","labelVisible","midAngle180","quadrantStart","updateGroupSelection","Callout","centerOffsets","sector","sectorFill","sectorStroke","calloutColors","calloutLength","calloutStrokeWidth","offset_1","fontStyle_1","fontWeight_1","fontSize_1","fontFamily_1","color_1","labelRadius","radiusName","angleValue","formattedAngleValue","radiusValue","fills_1","strokes_1","setUTCSeconds","utcMinute","setUTCMinutes","utcHour","utcMonth","palette","ChartTheme","createChartConfigPerSeries","getDefaults","mergeOptions_1","overrides_1","common","seriesTypes","seriesType","cartesian","cartesianSeriesTypes","polar","polarSeriesTypes","chartConfig","getPalette","config","getAxisDefaults","getSeriesDefaults","getBarSeriesDefaults","getCartesianSeriesMarkerDefaults","getChartDefaults","typeToAliases","alias","getConfig","mergeWithParentDefaults","mergeOptions","proto","parentDefaults","setSeriesColors","seriesOptions","firstColorIndex","colorCount","getSeriesColorCount","cartesianDefaults","category","groupedCategory","column","bar","scatter","area","histogram","pie","treemap","DarkTheme","fontColor","mutedFontColor","axisDefaults","seriesLabelDefaults","chartDefaults","MaterialLight","MaterialDark","PastelLight","PastelDark","SolarLight","SolarDark","VividLight","VividDark","_e","chartPadding","commonChartMappings","chartMeta","constructorParams","setAsIs","nonSerializable","seriesDefaults","columnSeriesDefaults","shadowMapping","labelDefaults","barLabelMapping","tooltipMapping","axisMappings","mappings","groupedCategoryChartMapping","groupedCategoryChartMeta","lightTheme","darkTheme","lightThemes","darkThemes","themes","getChartTheme","stockTheme","baseTheme","AgChart","theme","component","createComponent","pathToSeriesTypeMap","actualSeriesTypeMap","actualSeries","mapping","provideDefaultType","provideDefaultOptions","skipKeys","constructorParamValues","param","subComponents","fakeTheme","modifiedPath","modifiedConfig","subComponent","keyPath","updateSeries","configs","prevSeries","newSeries","axesToAdd","axesToUpdate","_loop_2","axisToUpdate","axisToAdd","configs_1","provideDefaultChartType","outerLoop","chartType","skipThemeKey","enabledKey","isChartConfig","themeDefaults","isExplicitlyDisabled","hasEnabledKey","revenueData","quarter","iphone","mac","ipad","wearables","services","myTheme","getElementById","agCharts","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","overlay","createErrorOverlay","stackTrace","innerText","getParents","modules","dep","Function","deps","cached","some"],"mappings":"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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["var Padding = /** @class */ (function () {\n    function Padding(top, right, bottom, left) {\n        if (top === void 0) { top = 0; }\n        if (right === void 0) { right = top; }\n        if (bottom === void 0) { bottom = top; }\n        if (left === void 0) { left = right; }\n        this.top = top;\n        this.right = right;\n        this.bottom = bottom;\n        this.left = left;\n    }\n    Padding.prototype.clear = function () {\n        this.top = this.right = this.bottom = this.left = 0;\n    };\n    return Padding;\n}());\nexport { Padding };\n","// For small data structs like a bounding box, objects are superior to arrays\n// in terms of performance (by 3-4% in Chrome 71, Safari 12 and by 20% in Firefox 64).\n// They are also self descriptive and harder to abuse.\n// For example, one has to do:\n// `ctx.strokeRect(bbox.x, bbox.y, bbox.width, bbox.height);`\n// rather than become enticed by the much slower:\n// `ctx.strokeRect(...bbox);`\n// https://jsperf.com/array-vs-object-create-access\nvar BBox = /** @class */ (function () {\n    function BBox(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    BBox.prototype.isValid = function () {\n        return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height);\n    };\n    BBox.prototype.dilate = function (value) {\n        this.x -= value;\n        this.y -= value;\n        this.width += value * 2;\n        this.height += value * 2;\n    };\n    BBox.prototype.containsPoint = function (x, y) {\n        return x >= this.x && x <= (this.x + this.width)\n            && y >= this.y && y <= (this.y + this.height);\n    };\n    BBox.prototype.render = function (ctx, params) {\n        if (params === void 0) { params = BBox.noParams; }\n        ctx.save();\n        if (params.resetTransform) {\n            ctx.setTransform(1, 0, 0, 1, 0, 0);\n        }\n        ctx.strokeStyle = params.strokeStyle || 'cyan';\n        ctx.lineWidth = params.lineWidth || 1;\n        ctx.strokeRect(this.x, this.y, this.width, this.height);\n        if (params.label) {\n            ctx.fillStyle = params.fillStyle || 'black';\n            ctx.textBaseline = 'bottom';\n            ctx.fillText(params.label, this.x, this.y);\n        }\n        ctx.restore();\n    };\n    BBox.noParams = {};\n    return BBox;\n}());\nexport { BBox };\n","import { BBox } from \"./bbox\";\n/**\n * As of Jan 8, 2019, Firefox still doesn't implement\n * `getTransform(): DOMMatrix;`\n * `setTransform(transform?: DOMMatrix2DInit)`\n * in the `CanvasRenderingContext2D`.\n * Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=928150\n * IE11 and Edge 44 also don't have the support.\n * Thus this class, to keep track of the current transform and\n * combine transformations.\n * Standards:\n * https://html.spec.whatwg.org/dev/canvas.html\n * https://www.w3.org/TR/geometry-1/\n */\nvar Matrix = /** @class */ (function () {\n    function Matrix(elements) {\n        if (elements === void 0) { elements = [1, 0, 0, 1, 0, 0]; }\n        this.elements = elements;\n    }\n    Matrix.prototype.setElements = function (elements) {\n        var e = this.elements;\n        // `this.elements = elements.slice()` is 4-5 times slower\n        // (in Chrome 71 and FF 64) than manually copying elements,\n        // since slicing allocates new memory.\n        // The performance of passing parameters individually\n        // vs as an array is about the same in both browsers, so we\n        // go with a single (array of elements) parameter, because\n        // `setElements(elements)` and `setElements([a, b, c, d, e, f])`\n        // calls give us roughly the same performance, versus\n        // `setElements(...elements)` and `setElements(a, b, c, d, e, f)`,\n        // where the spread operator causes a 20-30x performance drop\n        // (30x when compiled to ES5's `.apply(this, elements)`\n        //  20x when used natively).\n        e[0] = elements[0];\n        e[1] = elements[1];\n        e[2] = elements[2];\n        e[3] = elements[3];\n        e[4] = elements[4];\n        e[5] = elements[5];\n        return this;\n    };\n    Matrix.prototype.setIdentityElements = function () {\n        var e = this.elements;\n        e[0] = 1;\n        e[1] = 0;\n        e[2] = 0;\n        e[3] = 1;\n        e[4] = 0;\n        e[5] = 0;\n        return this;\n    };\n    Object.defineProperty(Matrix.prototype, \"identity\", {\n        get: function () {\n            var e = this.elements;\n            return e[0] === 1 && e[1] === 0 && e[2] === 0 &&\n                e[3] === 1 && e[4] === 0 && e[5] === 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix.prototype, \"a\", {\n        get: function () {\n            return this.elements[0];\n        },\n        set: function (value) {\n            this.elements[0] = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix.prototype, \"b\", {\n        get: function () {\n            return this.elements[1];\n        },\n        set: function (value) {\n            this.elements[1] = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix.prototype, \"c\", {\n        get: function () {\n            return this.elements[2];\n        },\n        set: function (value) {\n            this.elements[2] = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix.prototype, \"d\", {\n        get: function () {\n            return this.elements[3];\n        },\n        set: function (value) {\n            this.elements[3] = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix.prototype, \"e\", {\n        get: function () {\n            return this.elements[4];\n        },\n        set: function (value) {\n            this.elements[4] = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Matrix.prototype, \"f\", {\n        get: function () {\n            return this.elements[5];\n        },\n        set: function (value) {\n            this.elements[5] = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Performs the AxB matrix multiplication and saves the result\n     * to `C`, if given, or to `A` otherwise.\n     */\n    Matrix.prototype.AxB = function (A, B, C) {\n        var m11 = A[0], m12 = A[1], m21 = A[2], m22 = A[3], m31 = A[4], m32 = A[5];\n        var o11 = B[0], o12 = B[1], o21 = B[2], o22 = B[3], o31 = B[4], o32 = B[5];\n        C = C || A;\n        C[0] = m11 * o11 + m21 * o12;\n        C[1] = m12 * o11 + m22 * o12;\n        C[2] = m11 * o21 + m21 * o22;\n        C[3] = m12 * o21 + m22 * o22;\n        C[4] = m11 * o31 + m21 * o32 + m31;\n        C[5] = m12 * o31 + m22 * o32 + m32;\n    };\n    /**\n     * The `other` matrix gets post-multiplied to the current matrix.\n     * Returns the current matrix.\n     * @param other\n     */\n    Matrix.prototype.multiplySelf = function (other) {\n        this.AxB(this.elements, other.elements);\n        return this;\n    };\n    /**\n     * The `other` matrix gets post-multiplied to the current matrix.\n     * Returns a new matrix.\n     * @param other\n     */\n    Matrix.prototype.multiply = function (other) {\n        var elements = new Array(6);\n        this.AxB(this.elements, other.elements, elements);\n        return new Matrix(elements);\n    };\n    Matrix.prototype.preMultiplySelf = function (other) {\n        this.AxB(other.elements, this.elements, this.elements);\n        return this;\n    };\n    /**\n     * Returns the inverse of this matrix as a new matrix.\n     */\n    Matrix.prototype.inverse = function () {\n        var _a = this.elements, a = _a[0], b = _a[1], c = _a[2], d = _a[3], e = _a[4], f = _a[5];\n        var rD = 1 / (a * d - b * c); // reciprocal of determinant\n        a *= rD;\n        b *= rD;\n        c *= rD;\n        d *= rD;\n        return new Matrix([d, -b, -c, a, c * f - d * e, b * e - a * f]);\n    };\n    /**\n     * Save the inverse of this matrix to the given matrix.\n     */\n    Matrix.prototype.inverseTo = function (other) {\n        var _a = this.elements, a = _a[0], b = _a[1], c = _a[2], d = _a[3], e = _a[4], f = _a[5];\n        var rD = 1 / (a * d - b * c); // reciprocal of determinant\n        a *= rD;\n        b *= rD;\n        c *= rD;\n        d *= rD;\n        other.setElements([d, -b, -c, a, c * f - d * e, b * e - a * f]);\n        return this;\n    };\n    Matrix.prototype.invertSelf = function () {\n        var elements = this.elements;\n        var a = elements[0], b = elements[1], c = elements[2], d = elements[3], e = elements[4], f = elements[5];\n        var rD = 1 / (a * d - b * c); // reciprocal of determinant\n        a *= rD;\n        b *= rD;\n        c *= rD;\n        d *= rD;\n        elements[0] = d;\n        elements[1] = -b;\n        elements[2] = -c;\n        elements[3] = a;\n        elements[4] = c * f - d * e;\n        elements[5] = b * e - a * f;\n        return this;\n    };\n    Matrix.prototype.clone = function () {\n        return new Matrix(this.elements.slice());\n    };\n    Matrix.prototype.transformPoint = function (x, y) {\n        var e = this.elements;\n        return {\n            x: x * e[0] + y * e[2] + e[4],\n            y: x * e[1] + y * e[3] + e[5]\n        };\n    };\n    Matrix.prototype.transformBBox = function (bbox, radius, target) {\n        if (radius === void 0) { radius = 0; }\n        var elements = this.elements;\n        var xx = elements[0];\n        var xy = elements[1];\n        var yx = elements[2];\n        var yy = elements[3];\n        var h_w = bbox.width * 0.5;\n        var h_h = bbox.height * 0.5;\n        var cx = bbox.x + h_w;\n        var cy = bbox.y + h_h;\n        var w, h;\n        if (radius) {\n            h_w -= radius;\n            h_h -= radius;\n            var sx = Math.sqrt(xx * xx + yx * yx);\n            var sy = Math.sqrt(xy * xy + yy * yy);\n            w = Math.abs(h_w * xx) + Math.abs(h_h * yx) + Math.abs(sx * radius);\n            h = Math.abs(h_w * xy) + Math.abs(h_h * yy) + Math.abs(sy * radius);\n        }\n        else {\n            w = Math.abs(h_w * xx) + Math.abs(h_h * yx);\n            h = Math.abs(h_w * xy) + Math.abs(h_h * yy);\n        }\n        if (!target) {\n            target = new BBox(0, 0, 0, 0);\n        }\n        target.x = cx * xx + cy * yx + elements[4] - w;\n        target.y = cx * xy + cy * yy + elements[5] - h;\n        target.width = w + w;\n        target.height = h + h;\n        return target;\n    };\n    Matrix.prototype.toContext = function (ctx) {\n        // It's fair to say that matrix multiplications are not cheap.\n        // However, updating path definitions on every frame isn't either, so\n        // it may be cheaper to just translate paths. It's also fair to\n        // say, that most paths will have to be re-rendered anyway, say\n        // rectangle paths in a bar chart, where an animation would happen when\n        // the data set changes and existing bars are morphed into new ones.\n        // Or a pie chart, where old sectors are also morphed into new ones.\n        // Same for the line chart. The only plausible case where translating\n        // existing paths would be enough, is the scatter chart, where marker\n        // icons, typically circles, stay the same size. But if circle radii\n        // are bound to some data points, even circle paths would have to be\n        // updated. And thus it makes sense to optimize for fewer matrix\n        // transforms, where transform matrices of paths are mostly identity\n        // matrices and `x`/`y`, `centerX`/`centerY` and similar properties\n        // are used to define a path at specific coordinates. And only groups\n        // are used to collectively apply a transform to a set of nodes.\n        // If the matrix is mostly identity (95% of the time),\n        // the `if (this.isIdentity)` check can make this call 3-4 times\n        // faster on average: https://jsperf.com/matrix-check-first-vs-always-set\n        if (this.identity) {\n            return;\n        }\n        var e = this.elements;\n        ctx.transform(e[0], e[1], e[2], e[3], e[4], e[5]);\n    };\n    Matrix.flyweight = function (elements) {\n        if (elements) {\n            if (elements instanceof Matrix) {\n                Matrix.matrix.setElements(elements.elements);\n            }\n            else {\n                Matrix.matrix.setElements(elements);\n            }\n        }\n        else {\n            Matrix.matrix.setIdentityElements();\n        }\n        return Matrix.matrix;\n    };\n    Matrix.matrix = new Matrix();\n    return Matrix;\n}());\nexport { Matrix };\n","export function createId(instance) {\n    var constructor = instance.constructor;\n    var className = constructor.className;\n    if (!className) {\n        throw new Error(\"The \" + constructor + \" is missing the 'className' property.\");\n    }\n    return className + '-' + (constructor.id = (constructor.id || 0) + 1);\n}\n","import { Matrix } from \"./matrix\";\nimport { createId } from \"../util/id\";\nexport var PointerEvents;\n(function (PointerEvents) {\n    PointerEvents[PointerEvents[\"All\"] = 0] = \"All\";\n    PointerEvents[PointerEvents[\"None\"] = 1] = \"None\";\n})(PointerEvents || (PointerEvents = {}));\n/**\n * Abstract scene graph node.\n * Each node can have zero or one parent and belong to zero or one scene.\n */\nvar Node = /** @class */ (function () {\n    function Node() {\n        /**\n         * Unique node ID in the form `ClassName-NaturalNumber`.\n         */\n        this.id = createId(this);\n        /**\n         * Some number to identify this node, typically within a `Group` node.\n         * Usually this will be some enum value used as a selector.\n         */\n        this.tag = NaN;\n        /**\n         * To simplify the type system (especially in Selections) we don't have the `Parent` node\n         * (one that has children). Instead, we mimic HTML DOM, where any node can have children.\n         * But we still need to distinguish regular leaf nodes from container leafs somehow.\n         */\n        this.isContainerNode = false;\n        this._children = [];\n        // Used to check for duplicate nodes.\n        this.childSet = {}; // new Set<Node>()\n        // These matrices may need to have package level visibility\n        // for performance optimization purposes.\n        this.matrix = new Matrix();\n        this.inverseMatrix = new Matrix();\n        this._dirtyTransform = false;\n        this._scalingX = 1;\n        this._scalingY = 1;\n        /**\n         * The center of scaling.\n         * The default value of `null` means the scaling center will be\n         * determined automatically, as the center of the bounding box\n         * of a node.\n         */\n        this._scalingCenterX = null;\n        this._scalingCenterY = null;\n        this._rotationCenterX = null;\n        this._rotationCenterY = null;\n        /**\n         * Rotation angle in radians.\n         * The value is set as is. No normalization to the [-180, 180) or [0, 360)\n         * interval is performed.\n         */\n        this._rotation = 0;\n        this._translationX = 0;\n        this._translationY = 0;\n        /**\n         * Each time a property of the node that effects how it renders changes\n         * the `dirty` property of the node should be set to `true`. The change\n         * to the `dirty` property of the node will propagate up to its parents\n         * and eventually to the scene, at which point an animation frame callback\n         * will be scheduled to rerender the scene and its nodes and reset the `dirty`\n         * flags of all nodes and the {@link Scene._dirty | Scene} back to `false`.\n         * Since changes to node properties are not rendered immediately, it's possible\n         * to change as many properties on as many nodes as needed and the rendering\n         * will still only happen once in the next animation frame callback.\n         * The animation frame callback is only scheduled if it hasn't been already.\n         */\n        this._dirty = true;\n        this._visible = true;\n        this.pointerEvents = PointerEvents.All;\n    }\n    /**\n     * This is meaningfully faster than `instanceof` and should be the preferred way\n     * of checking inside loops.\n     * @param node\n     */\n    Node.isNode = function (node) {\n        return node ? node.matrix !== undefined : false;\n    };\n    Node.prototype._setScene = function (value) {\n        this._scene = value;\n        var children = this.children;\n        var n = children.length;\n        for (var i = 0; i < n; i++) {\n            children[i]._setScene(value);\n        }\n    };\n    Object.defineProperty(Node.prototype, \"scene\", {\n        get: function () {\n            return this._scene;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Node.prototype._setParent = function (value) {\n        this._parent = value;\n    };\n    Object.defineProperty(Node.prototype, \"parent\", {\n        get: function () {\n            return this._parent;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"children\", {\n        get: function () {\n            return this._children;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Node.prototype.countChildren = function (depth) {\n        if (depth === void 0) { depth = Node.MAX_SAFE_INTEGER; }\n        if (depth <= 0) {\n            return 0;\n        }\n        var children = this.children;\n        var n = children.length;\n        var size = n;\n        for (var i = 0; i < n; i++) {\n            size += children[i].countChildren(depth - 1);\n        }\n        return size;\n    };\n    /**\n     * Appends one or more new node instances to this parent.\n     * If one needs to:\n     * - move a child to the end of the list of children\n     * - move a child from one parent to another (including parents in other scenes)\n     * one should use the {@link insertBefore} method instead.\n     * @param nodes A node or nodes to append.\n     */\n    Node.prototype.append = function (nodes) {\n        // Passing a single parameter to an open-ended version of `append`\n        // would be 30-35% slower than this.\n        if (Node.isNode(nodes)) {\n            nodes = [nodes];\n        }\n        // The function takes an array rather than having open-ended\n        // arguments like `...nodes: Node[]` because the latter is\n        // transpiled to a function where the `arguments` object\n        // is copied to a temporary array inside a loop.\n        // So an array is created either way. And if we already have\n        // an array of nodes we want to add, we have to use the prohibitively\n        // expensive spread operator to pass it to the function,\n        // and, on top of that, the copy of the `arguments` is still made.\n        var n = nodes.length;\n        for (var i = 0; i < n; i++) {\n            var node = nodes[i];\n            if (node.parent) {\n                throw new Error(node + \" already belongs to another parent: \" + node.parent + \".\");\n            }\n            if (node.scene) {\n                throw new Error(node + \" already belongs a scene: \" + node.scene + \".\");\n            }\n            if (this.childSet[node.id]) {\n                // Cast to `any` to avoid `Property 'name' does not exist on type 'Function'`.\n                throw new Error(\"Duplicate \" + node.constructor.name + \" node: \" + node);\n            }\n            this._children.push(node);\n            this.childSet[node.id] = true;\n            node._setParent(this);\n            node._setScene(this.scene);\n        }\n        this.dirty = true;\n    };\n    Node.prototype.appendChild = function (node) {\n        if (node.parent) {\n            throw new Error(node + \" already belongs to another parent: \" + node.parent + \".\");\n        }\n        if (node.scene) {\n            throw new Error(node + \" already belongs a scene: \" + node.scene + \".\");\n        }\n        if (this.childSet[node.id]) {\n            // Cast to `any` to avoid `Property 'name' does not exist on type 'Function'`.\n            throw new Error(\"Duplicate \" + node.constructor.name + \" node: \" + node);\n        }\n        this._children.push(node);\n        this.childSet[node.id] = true;\n        node._setParent(this);\n        node._setScene(this.scene);\n        this.dirty = true;\n        return node;\n    };\n    Node.prototype.removeChild = function (node) {\n        if (node.parent === this) {\n            var i = this.children.indexOf(node);\n            if (i >= 0) {\n                this._children.splice(i, 1);\n                delete this.childSet[node.id];\n                node._setParent();\n                node._setScene();\n                this.dirty = true;\n                return node;\n            }\n        }\n        throw new Error(\"The node to be removed is not a child of this node.\");\n    };\n    /**\n     * Inserts the node `node` before the existing child node `nextNode`.\n     * If `nextNode` is null, insert `node` at the end of the list of children.\n     * If the `node` belongs to another parent, it is first removed.\n     * Returns the `node`.\n     * @param node\n     * @param nextNode\n     */\n    Node.prototype.insertBefore = function (node, nextNode) {\n        var parent = node.parent;\n        if (node.parent) {\n            node.parent.removeChild(node);\n        }\n        if (nextNode && nextNode.parent === this) {\n            var i = this.children.indexOf(nextNode);\n            if (i >= 0) {\n                this._children.splice(i, 0, node);\n                this.childSet[node.id] = true;\n                node._setParent(this);\n                node._setScene(this.scene);\n            }\n            else {\n                throw new Error(nextNode + \" has \" + parent + \" as the parent, \"\n                    + \"but is not in its list of children.\");\n            }\n            this.dirty = true;\n        }\n        else {\n            this.append(node);\n        }\n        return node;\n    };\n    Object.defineProperty(Node.prototype, \"nextSibling\", {\n        get: function () {\n            var parent = this.parent;\n            if (parent) {\n                var children = parent.children;\n                var index = children.indexOf(this);\n                if (index >= 0 && index <= children.length - 1) {\n                    return children[index + 1];\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Node.prototype.transformPoint = function (x, y) {\n        var matrix = Matrix.flyweight(this.matrix);\n        var parent = this.parent;\n        while (parent) {\n            matrix.preMultiplySelf(parent.matrix);\n            parent = parent.parent;\n        }\n        return matrix.invertSelf().transformPoint(x, y);\n    };\n    Node.prototype.inverseTransformPoint = function (x, y) {\n        var matrix = Matrix.flyweight(this.matrix);\n        var parent = this.parent;\n        while (parent) {\n            matrix.preMultiplySelf(parent.matrix);\n            parent = parent.parent;\n        }\n        return matrix.transformPoint(x, y);\n    };\n    Object.defineProperty(Node.prototype, \"dirtyTransform\", {\n        get: function () {\n            return this._dirtyTransform;\n        },\n        set: function (value) {\n            this._dirtyTransform = value;\n            if (value) {\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"scalingX\", {\n        get: function () {\n            return this._scalingX;\n        },\n        set: function (value) {\n            if (this._scalingX !== value) {\n                this._scalingX = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"scalingY\", {\n        get: function () {\n            return this._scalingY;\n        },\n        set: function (value) {\n            if (this._scalingY !== value) {\n                this._scalingY = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"scalingCenterX\", {\n        get: function () {\n            return this._scalingCenterX;\n        },\n        set: function (value) {\n            if (this._scalingCenterX !== value) {\n                this._scalingCenterX = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"scalingCenterY\", {\n        get: function () {\n            return this._scalingCenterY;\n        },\n        set: function (value) {\n            if (this._scalingCenterY !== value) {\n                this._scalingCenterY = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"rotationCenterX\", {\n        get: function () {\n            return this._rotationCenterX;\n        },\n        set: function (value) {\n            if (this._rotationCenterX !== value) {\n                this._rotationCenterX = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"rotationCenterY\", {\n        get: function () {\n            return this._rotationCenterY;\n        },\n        set: function (value) {\n            if (this._rotationCenterY !== value) {\n                this._rotationCenterY = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"rotation\", {\n        get: function () {\n            return this._rotation;\n        },\n        set: function (value) {\n            if (this._rotation !== value) {\n                this._rotation = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"rotationDeg\", {\n        get: function () {\n            return this.rotation / Math.PI * 180;\n        },\n        /**\n         * For performance reasons the rotation angle's internal representation\n         * is in radians. Therefore, don't expect to get the same number you set.\n         * Even with integer angles about a quarter of them from 0 to 359 cannot\n         * be converted to radians and back without precision loss.\n         * For example:\n         *\n         *     node.rotationDeg = 11;\n         *     console.log(node.rotationDeg); // 10.999999999999998\n         *\n         * @param value Rotation angle in degrees.\n         */\n        set: function (value) {\n            this.rotation = value / 180 * Math.PI;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"translationX\", {\n        get: function () {\n            return this._translationX;\n        },\n        set: function (value) {\n            if (this._translationX !== value) {\n                this._translationX = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"translationY\", {\n        get: function () {\n            return this._translationY;\n        },\n        set: function (value) {\n            if (this._translationY !== value) {\n                this._translationY = value;\n                this.dirtyTransform = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Node.prototype.containsPoint = function (x, y) {\n        return false;\n    };\n    /**\n     * Hit testing method.\n     * Recursively checks if the given point is inside this node or any of its children.\n     * Returns the first matching node or `undefined`.\n     * Nodes that render later (show on top) are hit tested first.\n     * @param x\n     * @param y\n     */\n    Node.prototype.pickNode = function (x, y) {\n        if (!this.visible || this.pointerEvents === PointerEvents.None || !this.containsPoint(x, y)) {\n            return;\n        }\n        var children = this.children;\n        if (children.length) {\n            // Nodes added later should be hit-tested first,\n            // as they are rendered on top of the previously added nodes.\n            for (var i = children.length - 1; i >= 0; i--) {\n                var hit = children[i].pickNode(x, y);\n                if (hit) {\n                    return hit;\n                }\n            }\n        }\n        else if (!this.isContainerNode) { // a leaf node, but not a container leaf\n            return this;\n        }\n    };\n    Node.prototype.computeBBox = function () { return; };\n    Node.prototype.computeBBoxCenter = function () {\n        var bbox = this.computeBBox && this.computeBBox();\n        if (bbox) {\n            return [\n                bbox.x + bbox.width * 0.5,\n                bbox.y + bbox.height * 0.5\n            ];\n        }\n        return [0, 0];\n    };\n    Node.prototype.computeTransformMatrix = function () {\n        // TODO: transforms without center of scaling and rotation correspond directly\n        //       to `setAttribute('transform', 'translate(tx, ty) rotate(rDeg) scale(sx, sy)')`\n        //       in SVG. Our use cases will mostly require positioning elements (rects, circles)\n        //       within a group, rotating groups at right angles (e.g. for axis) and translating\n        //       groups. We shouldn't even need `scale(1, -1)` (invert vertically), since this\n        //       can be done using D3-like scales already by inverting the output range.\n        //       So for now, just assume that centers of scaling and rotation are at the origin.\n        // const [bbcx, bbcy] = this.computeBBoxCenter();\n        var _a = [0, 0], bbcx = _a[0], bbcy = _a[1];\n        var sx = this.scalingX;\n        var sy = this.scalingY;\n        var scx;\n        var scy;\n        if (sx === 1 && sy === 1) {\n            scx = 0;\n            scy = 0;\n        }\n        else {\n            scx = this.scalingCenterX === null ? bbcx : this.scalingCenterX;\n            scy = this.scalingCenterY === null ? bbcy : this.scalingCenterY;\n        }\n        var r = this.rotation;\n        var cos = Math.cos(r);\n        var sin = Math.sin(r);\n        var rcx;\n        var rcy;\n        if (r === 0) {\n            rcx = 0;\n            rcy = 0;\n        }\n        else {\n            rcx = this.rotationCenterX === null ? bbcx : this.rotationCenterX;\n            rcy = this.rotationCenterY === null ? bbcy : this.rotationCenterY;\n        }\n        var tx = this.translationX;\n        var ty = this.translationY;\n        // The transform matrix `M` is a result of the following transformations:\n        // 1) translate the center of scaling to the origin\n        // 2) scale\n        // 3) translate back\n        // 4) translate the center of rotation to the origin\n        // 5) rotate\n        // 6) translate back\n        // 7) translate\n        //         (7)          (6)             (5)             (4)           (3)           (2)           (1)\n        //     | 1 0 tx |   | 1 0 rcx |   | cos -sin 0 |   | 1 0 -rcx |   | 1 0 scx |   | sx 0 0 |   | 1 0 -scx |\n        // M = | 0 1 ty | * | 0 1 rcy | * | sin  cos 0 | * | 0 1 -rcy | * | 0 1 scy | * | 0 sy 0 | * | 0 1 -scy |\n        //     | 0 0  1 |   | 0 0  1  |   |  0    0  1 |   | 0 0  1   |   | 0 0  1  |   | 0  0 0 |   | 0 0  1   |\n        // Translation after steps 1-4 above:\n        var tx4 = scx * (1 - sx) - rcx;\n        var ty4 = scy * (1 - sy) - rcy;\n        this.dirtyTransform = false;\n        this.matrix.setElements([\n            cos * sx, sin * sx,\n            -sin * sy, cos * sy,\n            cos * tx4 - sin * ty4 + rcx + tx,\n            sin * tx4 + cos * ty4 + rcy + ty\n        ]).inverseTo(this.inverseMatrix);\n    };\n    Object.defineProperty(Node.prototype, \"dirty\", {\n        get: function () {\n            return this._dirty;\n        },\n        set: function (value) {\n            // TODO: check if we are already dirty (e.g. if (this._dirty !== value))\n            //       if we are, then all parents and the scene have been\n            //       notified already, and we are doing redundant work\n            //       (but test if this is indeed the case)\n            this._dirty = value;\n            if (value) {\n                if (this.parent) {\n                    this.parent.dirty = true;\n                }\n                else if (this.scene) {\n                    this.scene.dirty = true;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"visible\", {\n        get: function () {\n            return this._visible;\n        },\n        set: function (value) {\n            if (this._visible !== value) {\n                this._visible = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Node.MAX_SAFE_INTEGER = Math.pow(2, 53) - 1; // Number.MAX_SAFE_INTEGER\n    return Node;\n}());\nexport { Node };\n","/**\n * Creates a new object with a `parent` as its prototype\n * and copies properties from the `child` into it.\n * @param parent\n * @param child\n */\nexport function chainObjects(parent, child) {\n    var obj = Object.create(parent);\n    for (var prop in child) {\n        if (child.hasOwnProperty(prop)) {\n            obj[prop] = child[prop];\n        }\n    }\n    return obj;\n}\nexport function getValue(object, path) {\n    var parts = Array.isArray(path) ? path : path.split('.');\n    var value = object;\n    parts.forEach(function (part) {\n        value = value[part];\n    });\n    return value;\n}\nfunction emptyTarget(value) {\n    return Array.isArray(value) ? [] : {};\n}\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n    return (options.clone !== false && options.isMergeableObject(value))\n        ? deepMerge(emptyTarget(value), value, options)\n        : value;\n}\nfunction defaultArrayMerge(target, source, options) {\n    return target.concat(source).map(function (element) {\n        return cloneUnlessOtherwiseSpecified(element, options);\n    });\n}\nfunction getMergeFunction(key, options) {\n    if (!options.customMerge) {\n        return deepMerge;\n    }\n    var customMerge = options.customMerge(key);\n    return typeof customMerge === 'function' ? customMerge : deepMerge;\n}\nfunction getEnumerableOwnPropertySymbols(target) {\n    return Object.getOwnPropertySymbols\n        ? Object.getOwnPropertySymbols(target).filter(function (symbol) {\n            return target.propertyIsEnumerable(symbol);\n        })\n        : [];\n}\nfunction getKeys(target) {\n    return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target));\n}\nfunction propertyIsOnObject(object, property) {\n    try {\n        return property in object;\n    }\n    catch (_) {\n        return false;\n    }\n}\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n    return propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n        && !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n            && Object.propertyIsEnumerable.call(target, key)); // and also unsafe if they're nonenumerable.\n}\nfunction mergeObject(target, source, options) {\n    var destination = {};\n    if (options.isMergeableObject(target)) {\n        getKeys(target).forEach(function (key) {\n            destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n        });\n    }\n    getKeys(source).forEach(function (key) {\n        if (propertyIsUnsafe(target, key)) {\n            return;\n        }\n        if (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n            destination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n        }\n        else {\n            destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n        }\n    });\n    return destination;\n}\nfunction defaultIsMergeableObject(value) {\n    return isNonNullObject(value) && !isSpecial(value);\n}\nfunction isNonNullObject(value) {\n    return !!value && typeof value === 'object';\n}\nfunction isSpecial(value) {\n    var stringValue = Object.prototype.toString.call(value);\n    return stringValue === '[object RegExp]' || stringValue === '[object Date]';\n}\nexport function deepMerge(target, source, options) {\n    options = options || {};\n    options.arrayMerge = options.arrayMerge || defaultArrayMerge;\n    options.isMergeableObject = options.isMergeableObject || defaultIsMergeableObject;\n    // cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n    // implementations can use it. The caller may not replace it.\n    options.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n    var sourceIsArray = Array.isArray(source);\n    var targetIsArray = Array.isArray(target);\n    var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n    if (!sourceAndTargetTypesMatch) {\n        return cloneUnlessOtherwiseSpecified(source, options);\n    }\n    else if (sourceIsArray) {\n        return options.arrayMerge(target, source, options);\n    }\n    else {\n        return mergeObject(target, source, options);\n    }\n}\nexport function isObject(value) {\n    return typeof value === 'object' && !Array.isArray(value);\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Node } from \"../node\";\nimport { chainObjects } from \"../../util/object\";\nvar Shape = /** @class */ (function (_super) {\n    __extends(Shape, _super);\n    function Shape() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.lastInstanceId = 0;\n        _this._fillOpacity = 1;\n        _this._strokeOpacity = 1;\n        _this._fill = Shape.defaultStyles.fill;\n        /**\n         * Note that `strokeStyle = null` means invisible stroke,\n         * while `lineWidth = 0` means no stroke, and sometimes this can mean different things.\n         * For example, a rect shape with an invisible stroke may not align to the pixel grid\n         * properly because the stroke affects the rules of alignment, and arc shapes forming\n         * a pie chart will have a gap between them if they have an invisible stroke, whereas\n         * there would be not gap if there was no stroke at all.\n         * The preferred way of making the stroke invisible is setting the `lineWidth` to zero,\n         * unless specific looks that is achieved by having an invisible stroke is desired.\n         */\n        _this._stroke = Shape.defaultStyles.stroke;\n        _this._strokeWidth = Shape.defaultStyles.strokeWidth;\n        _this._lineDash = Shape.defaultStyles.lineDash;\n        _this._lineDashOffset = Shape.defaultStyles.lineDashOffset;\n        _this._lineCap = Shape.defaultStyles.lineCap;\n        _this._lineJoin = Shape.defaultStyles.lineJoin;\n        _this._opacity = Shape.defaultStyles.opacity;\n        _this.onShadowChange = function () {\n            _this.dirty = true;\n        };\n        _this._fillShadow = Shape.defaultStyles.fillShadow;\n        _this._strokeShadow = Shape.defaultStyles.strokeShadow;\n        return _this;\n    }\n    /**\n     * Creates a light-weight instance of the given shape (that serves as a template).\n     * The created instance only stores the properites set on the instance itself\n     * and the rest of the properties come via the prototype chain from the template.\n     * This can greatly reduce memory usage in cases where one has many simular shapes,\n     * for example, circles of different size, position and color. The exact memory usage\n     * reduction will depend on the size of the template and the number of own properties\n     * set on its lightweight instances, but will typically be around an order of magnitude\n     * or more.\n     *\n     * Note: template shapes are not supposed to be part of the scene graph (they should not\n     * have a parent).\n     *\n     * @param template\n     */\n    Shape.createInstance = function (template) {\n        var shape = Object.create(template);\n        shape._setParent(undefined);\n        shape.id = template.id + '-Instance-' + String(++template.lastInstanceId);\n        return shape;\n    };\n    /**\n     * Restores the default styles introduced by this subclass.\n     */\n    Shape.prototype.restoreOwnStyles = function () {\n        var styles = this.constructor.defaultStyles;\n        var keys = Object.getOwnPropertyNames(styles);\n        // getOwnPropertyNames is about 2.5 times faster than\n        // for..in with the hasOwnProperty check and in this\n        // case, where most properties are inherited, can be\n        // more then an order of magnitude faster.\n        for (var i = 0, n = keys.length; i < n; i++) {\n            var key = keys[i];\n            this[key] = styles[key];\n        }\n    };\n    Shape.prototype.restoreAllStyles = function () {\n        var styles = this.constructor.defaultStyles;\n        for (var property in styles) {\n            this[property] = styles[property];\n        }\n    };\n    /**\n     * Restores the base class default styles that have been overridden by this subclass.\n     */\n    Shape.prototype.restoreOverriddenStyles = function () {\n        var styles = this.constructor.defaultStyles;\n        var protoStyles = Object.getPrototypeOf(styles);\n        for (var property in styles) {\n            if (styles.hasOwnProperty(property) && protoStyles.hasOwnProperty(property)) {\n                this[property] = styles[property];\n            }\n        }\n    };\n    Object.defineProperty(Shape.prototype, \"fillOpacity\", {\n        get: function () {\n            return this._fillOpacity;\n        },\n        set: function (value) {\n            if (this._fillOpacity !== value) {\n                this._fillOpacity = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"strokeOpacity\", {\n        get: function () {\n            return this._strokeOpacity;\n        },\n        set: function (value) {\n            if (this._strokeOpacity !== value) {\n                this._strokeOpacity = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"fill\", {\n        get: function () {\n            return this._fill;\n        },\n        set: function (value) {\n            if (this._fill !== value) {\n                this._fill = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"stroke\", {\n        get: function () {\n            return this._stroke;\n        },\n        set: function (value) {\n            if (this._stroke !== value) {\n                this._stroke = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"strokeWidth\", {\n        get: function () {\n            return this._strokeWidth;\n        },\n        set: function (value) {\n            if (this._strokeWidth !== value) {\n                this._strokeWidth = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"alignment\", {\n        // An offset value to align to the pixel grid.\n        get: function () {\n            return Math.floor(this.strokeWidth) % 2 / 2;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Returns the aligned `start` or `length` value.\n    // For example: `start` could be `y` and `length` could be `height` of a rectangle.\n    Shape.prototype.align = function (alignment, start, length) {\n        if (length != undefined) {\n            return Math.floor(length) + Math.floor(start % 1 + length % 1);\n        }\n        return Math.floor(start) + alignment;\n    };\n    Object.defineProperty(Shape.prototype, \"lineDash\", {\n        get: function () {\n            return this._lineDash;\n        },\n        set: function (value) {\n            var oldValue = this._lineDash;\n            if (oldValue !== value) {\n                if (oldValue && value && oldValue.length === value.length) {\n                    var identical = true;\n                    var n = value.length;\n                    for (var i = 0; i < n; i++) {\n                        if (oldValue[i] !== value[i]) {\n                            identical = false;\n                            break;\n                        }\n                    }\n                    if (identical) {\n                        return;\n                    }\n                }\n                this._lineDash = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"lineDashOffset\", {\n        get: function () {\n            return this._lineDashOffset;\n        },\n        set: function (value) {\n            if (this._lineDashOffset !== value) {\n                this._lineDashOffset = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"lineCap\", {\n        get: function () {\n            return this._lineCap;\n        },\n        set: function (value) {\n            if (this._lineCap !== value) {\n                this._lineCap = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"lineJoin\", {\n        get: function () {\n            return this._lineJoin;\n        },\n        set: function (value) {\n            if (this._lineJoin !== value) {\n                this._lineJoin = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"opacity\", {\n        get: function () {\n            return this._opacity;\n        },\n        set: function (value) {\n            value = Math.min(1, Math.max(0, value));\n            if (this._opacity !== value) {\n                this._opacity = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"fillShadow\", {\n        get: function () {\n            return this._fillShadow;\n        },\n        set: function (value) {\n            var oldValue = this._fillShadow;\n            if (oldValue !== value) {\n                if (oldValue) {\n                    oldValue.removeEventListener('change', this.onShadowChange);\n                }\n                if (value) {\n                    value.addEventListener('change', this.onShadowChange);\n                }\n                this._fillShadow = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Shape.prototype, \"strokeShadow\", {\n        get: function () {\n            return this._strokeShadow;\n        },\n        set: function (value) {\n            var oldValue = this._strokeShadow;\n            if (oldValue !== value) {\n                if (oldValue) {\n                    oldValue.removeEventListener('change', this.onShadowChange);\n                }\n                if (value) {\n                    value.addEventListener('change', this.onShadowChange);\n                }\n                this._strokeShadow = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Shape.prototype.fillStroke = function (ctx) {\n        if (!this.scene) {\n            return;\n        }\n        var pixelRatio = this.scene.canvas.pixelRatio || 1;\n        if (this.fill) {\n            ctx.fillStyle = this.fill;\n            ctx.globalAlpha = this.opacity * this.fillOpacity;\n            // The canvas context scaling (depends on the device's pixel ratio)\n            // has no effect on shadows, so we have to account for the pixel ratio\n            // manually here.\n            var fillShadow = this.fillShadow;\n            if (fillShadow && fillShadow.enabled) {\n                ctx.shadowColor = fillShadow.color;\n                ctx.shadowOffsetX = fillShadow.xOffset * pixelRatio;\n                ctx.shadowOffsetY = fillShadow.yOffset * pixelRatio;\n                ctx.shadowBlur = fillShadow.blur * pixelRatio;\n            }\n            ctx.fill();\n        }\n        ctx.shadowColor = 'rgba(0, 0, 0, 0)';\n        if (this.stroke && this.strokeWidth) {\n            ctx.strokeStyle = this.stroke;\n            ctx.globalAlpha = this.opacity * this.strokeOpacity;\n            ctx.lineWidth = this.strokeWidth;\n            if (this.lineDash) {\n                ctx.setLineDash(this.lineDash);\n            }\n            if (this.lineDashOffset) {\n                ctx.lineDashOffset = this.lineDashOffset;\n            }\n            if (this.lineCap) {\n                ctx.lineCap = this.lineCap;\n            }\n            if (this.lineJoin) {\n                ctx.lineJoin = this.lineJoin;\n            }\n            var strokeShadow = this.strokeShadow;\n            if (strokeShadow && strokeShadow.enabled) {\n                ctx.shadowColor = strokeShadow.color;\n                ctx.shadowOffsetX = strokeShadow.xOffset * pixelRatio;\n                ctx.shadowOffsetY = strokeShadow.yOffset * pixelRatio;\n                ctx.shadowBlur = strokeShadow.blur * pixelRatio;\n            }\n            ctx.stroke();\n        }\n    };\n    Shape.prototype.containsPoint = function (x, y) {\n        return this.isPointInPath(x, y);\n    };\n    /**\n     * Defaults for style properties. Note that properties that affect the position\n     * and shape of the node are not considered style properties, for example:\n     * `x`, `y`, `width`, `height`, `radius`, `rotation`, etc.\n     * Can be used to reset to the original styling after some custom styling\n     * has been applied (using the `restoreOwnStyles` and `restoreAllStyles` methods).\n     * These static defaults are meant to be inherited by subclasses.\n     */\n    Shape.defaultStyles = chainObjects({}, {\n        fill: 'black',\n        stroke: undefined,\n        strokeWidth: 0,\n        lineDash: undefined,\n        lineDashOffset: 0,\n        lineCap: undefined,\n        lineJoin: undefined,\n        opacity: 1,\n        fillShadow: undefined,\n        strokeShadow: undefined\n    });\n    return Shape;\n}(Node));\nexport { Shape };\n","/**\n * Wraps the native Canvas element and overrides its CanvasRenderingContext2D to\n * provide resolution independent rendering based on `window.devicePixelRatio`.\n */\nvar HdpiCanvas = /** @class */ (function () {\n    // The width/height attributes of the Canvas element default to\n    // 300/150 according to w3.org.\n    function HdpiCanvas(document, width, height) {\n        if (document === void 0) { document = window.document; }\n        if (width === void 0) { width = 600; }\n        if (height === void 0) { height = 300; }\n        this._container = undefined;\n        // `NaN` is deliberate here, so that overrides are always applied\n        // and the `resetTransform` inside the `resize` method works in IE11.\n        this._pixelRatio = NaN;\n        this.document = document;\n        this.element = document.createElement('canvas');\n        this.context = this.element.getContext('2d');\n        this.element.style.userSelect = 'none';\n        this.element.style.display = 'block';\n        this.setPixelRatio();\n        this.resize(width, height);\n    }\n    Object.defineProperty(HdpiCanvas.prototype, \"container\", {\n        get: function () {\n            return this._container;\n        },\n        set: function (value) {\n            if (this._container !== value) {\n                this.remove();\n                if (value) {\n                    value.appendChild(this.element);\n                }\n                this._container = value;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HdpiCanvas.prototype.remove = function () {\n        var parentNode = this.element.parentNode;\n        if (parentNode != null) {\n            parentNode.removeChild(this.element);\n        }\n    };\n    HdpiCanvas.prototype.destroy = function () {\n        this.element.remove();\n        this._canvas = undefined;\n        Object.freeze(this);\n    };\n    HdpiCanvas.prototype.toImage = function () {\n        var img = this.document.createElement('img');\n        img.src = this.getDataURL();\n        return img;\n    };\n    HdpiCanvas.prototype.getDataURL = function (type) {\n        return this.element.toDataURL(type);\n    };\n    /**\n     * @param options.fileName The `.png` extension is going to be added automatically.\n     * @param [options.background] Defaults to `white`.\n     */\n    HdpiCanvas.prototype.download = function (fileName) {\n        fileName = ((fileName || '').trim() || 'image') + '.png';\n        // Chart images saved as JPEG are a few times larger at 50% quality than PNG images,\n        // so we don't support saving to JPEG.\n        var type = 'image/png';\n        var dataUrl = this.getDataURL(type);\n        var document = this.document;\n        if (navigator.msSaveOrOpenBlob) { // IE11\n            var binary = atob(dataUrl.split(',')[1]); // strip the `data:image/png;base64,` part\n            var array = [];\n            for (var i = 0, n = binary.length; i < n; i++) {\n                array.push(binary.charCodeAt(i));\n            }\n            var blob = new Blob([new Uint8Array(array)], { type: type });\n            navigator.msSaveOrOpenBlob(blob, fileName);\n        }\n        else {\n            var a = document.createElement('a');\n            a.href = dataUrl;\n            a.download = fileName;\n            a.style.display = 'none';\n            document.body.appendChild(a); // required for the `click` to work in Firefox\n            a.click();\n            document.body.removeChild(a);\n        }\n    };\n    Object.defineProperty(HdpiCanvas.prototype, \"pixelRatio\", {\n        get: function () {\n            return this._pixelRatio;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Changes the pixel ratio of the Canvas element to the given value,\n     * or uses the window.devicePixelRatio (default), then resizes the Canvas\n     * element accordingly (default).\n     */\n    HdpiCanvas.prototype.setPixelRatio = function (ratio) {\n        var pixelRatio = ratio || window.devicePixelRatio;\n        if (pixelRatio === this.pixelRatio) {\n            return;\n        }\n        HdpiCanvas.overrideScale(this.context, pixelRatio);\n        this._pixelRatio = pixelRatio;\n        this.resize(this.width, this.height);\n    };\n    Object.defineProperty(HdpiCanvas.prototype, \"pixelated\", {\n        get: function () {\n            return this.element.style.imageRendering === 'pixelated';\n        },\n        set: function (value) {\n            this.element.style.imageRendering = value ? 'pixelated' : 'auto';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HdpiCanvas.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HdpiCanvas.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HdpiCanvas.prototype.resize = function (width, height) {\n        var _a = this, element = _a.element, context = _a.context, pixelRatio = _a.pixelRatio;\n        element.width = Math.round(width * pixelRatio);\n        element.height = Math.round(height * pixelRatio);\n        element.style.width = width + 'px';\n        element.style.height = height + 'px';\n        context.resetTransform();\n        this._width = width;\n        this._height = height;\n    };\n    Object.defineProperty(HdpiCanvas, \"textMeasuringContext\", {\n        get: function () {\n            if (this._textMeasuringContext) {\n                return this._textMeasuringContext;\n            }\n            var canvas = document.createElement('canvas');\n            return this._textMeasuringContext = canvas.getContext('2d');\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HdpiCanvas, \"svgText\", {\n        get: function () {\n            if (this._svgText) {\n                return this._svgText;\n            }\n            var xmlns = 'http://www.w3.org/2000/svg';\n            var svg = document.createElementNS(xmlns, 'svg');\n            svg.setAttribute('width', '100');\n            svg.setAttribute('height', '100');\n            // Add a descriptive class name in case someone sees this SVG element\n            // in devtools and wonders about its purpose:\n            if (svg.classList) {\n                svg.classList.add('text-measuring-svg');\n            }\n            else {\n                svg.setAttribute('class', 'text-measuring-svg');\n            }\n            svg.style.position = 'absolute';\n            svg.style.top = '-1000px';\n            svg.style.visibility = 'hidden';\n            var svgText = document.createElementNS(xmlns, 'text');\n            svgText.setAttribute('x', '0');\n            svgText.setAttribute('y', '30');\n            svgText.setAttribute('text', 'black');\n            svg.appendChild(svgText);\n            document.body.appendChild(svg);\n            this._svgText = svgText;\n            return svgText;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HdpiCanvas, \"has\", {\n        get: function () {\n            if (this._has) {\n                return this._has;\n            }\n            return this._has = Object.freeze({\n                textMetrics: this.textMeasuringContext.measureText('test').actualBoundingBoxDescent !== undefined\n                    // Firefox implemented advanced TextMetrics object in v74:\n                    // https://bugzilla.mozilla.org/show_bug.cgi?id=1102584\n                    // but it's buggy, so we'll keed using the SVG for text measurement in Firefox for now.\n                    && !/Firefox\\/\\d+(.\\d)+/.test(window.navigator.userAgent),\n                getTransform: this.textMeasuringContext.getTransform !== undefined\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HdpiCanvas.measureText = function (text, font, textBaseline, textAlign) {\n        var ctx = this.textMeasuringContext;\n        ctx.font = font;\n        ctx.textBaseline = textBaseline;\n        ctx.textAlign = textAlign;\n        return ctx.measureText(text);\n    };\n    /**\n     * Returns the width and height of the measured text.\n     * @param text The single-line text to measure.\n     * @param font The font shorthand string.\n     */\n    HdpiCanvas.getTextSize = function (text, font) {\n        if (this.has.textMetrics) {\n            var ctx = this.textMeasuringContext;\n            ctx.font = font;\n            var metrics = ctx.measureText(text);\n            return {\n                width: metrics.width,\n                height: metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent\n            };\n        }\n        else {\n            return this.measureSvgText(text, font);\n        }\n    };\n    HdpiCanvas.measureSvgText = function (text, font) {\n        var cache = this.textSizeCache;\n        var fontCache = cache[font];\n        // Note: consider not caching the size of numeric strings.\n        // For example: if (isNaN(+text)) { // skip\n        if (fontCache) {\n            var size_1 = fontCache[text];\n            if (size_1) {\n                return size_1;\n            }\n        }\n        else {\n            cache[font] = {};\n        }\n        var svgText = this.svgText;\n        svgText.style.font = font;\n        svgText.textContent = text;\n        // `getBBox` returns an instance of `SVGRect` with the same `width` and `height`\n        // measurements as `DOMRect` instance returned by the `getBoundingClientRect`.\n        // But the `SVGRect` instance has half the properties of the `DOMRect`,\n        // so we use the `getBBox` method.\n        var bbox = svgText.getBBox();\n        var size = {\n            width: bbox.width,\n            height: bbox.height\n        };\n        cache[font][text] = size;\n        return size;\n    };\n    HdpiCanvas.overrideScale = function (ctx, scale) {\n        var depth = 0;\n        var overrides = {\n            save: function () {\n                this.$save();\n                depth++;\n            },\n            restore: function () {\n                if (depth > 0) {\n                    this.$restore();\n                    depth--;\n                }\n            },\n            setTransform: function (a, b, c, d, e, f) {\n                this.$setTransform(a * scale, b * scale, c * scale, d * scale, e * scale, f * scale);\n            },\n            resetTransform: function () {\n                // As of Jan 8, 2019, `resetTransform` is still an \"experimental technology\",\n                // and doesn't work in IE11 and Edge 44.\n                this.$setTransform(scale, 0, 0, scale, 0, 0);\n                this.save();\n                depth = 0;\n                // The scale above will be impossible to restore,\n                // because we override the `ctx.restore` above and\n                // check `depth` there.\n            }\n        };\n        for (var name_1 in overrides) {\n            if (overrides.hasOwnProperty(name_1)) {\n                // Save native methods under prefixed names,\n                // if this hasn't been done by the previous overrides already.\n                if (!ctx['$' + name_1]) {\n                    ctx['$' + name_1] = ctx[name_1];\n                }\n                // Replace native methods with overrides,\n                // or previous overrides with the new ones.\n                ctx[name_1] = overrides[name_1];\n            }\n        }\n    };\n    HdpiCanvas.textSizeCache = {};\n    return HdpiCanvas;\n}());\nexport { HdpiCanvas };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Shape } from \"./shape\";\nimport { chainObjects } from \"../../util/object\";\nimport { BBox } from \"../bbox\";\nimport { HdpiCanvas } from \"../../canvas/hdpiCanvas\";\nvar Text = /** @class */ (function (_super) {\n    __extends(Text, _super);\n    function Text() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._x = 0;\n        _this._y = 0;\n        _this.lineBreakRegex = /\\r?\\n/g;\n        _this.lines = [];\n        _this._text = '';\n        _this._dirtyFont = true;\n        _this._fontSize = 10;\n        _this._fontFamily = 'sans-serif';\n        _this._textAlign = Text.defaultStyles.textAlign;\n        _this._textBaseline = Text.defaultStyles.textBaseline;\n        _this._lineHeight = 14;\n        return _this;\n    }\n    Object.defineProperty(Text.prototype, \"x\", {\n        get: function () {\n            return this._x;\n        },\n        set: function (value) {\n            if (this._x !== value) {\n                this._x = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"y\", {\n        get: function () {\n            return this._y;\n        },\n        set: function (value) {\n            if (this._y !== value) {\n                this._y = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Text.prototype.splitText = function () {\n        this.lines = this._text.split(this.lineBreakRegex);\n    };\n    Object.defineProperty(Text.prototype, \"text\", {\n        get: function () {\n            return this._text;\n        },\n        set: function (value) {\n            var str = String(value); // `value` can be an object here\n            if (this._text !== str) {\n                this._text = str;\n                this.splitText();\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"font\", {\n        get: function () {\n            if (this.dirtyFont) {\n                this.dirtyFont = false;\n                this._font = [\n                    this.fontStyle || '',\n                    this.fontWeight || '',\n                    this.fontSize + 'px',\n                    this.fontFamily\n                ].join(' ').trim();\n            }\n            return this._font;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"dirtyFont\", {\n        get: function () {\n            return this._dirtyFont;\n        },\n        set: function (value) {\n            if (this._dirtyFont !== value) {\n                this._dirtyFont = value;\n                if (value) {\n                    this.dirty = true;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"fontStyle\", {\n        get: function () {\n            return this._fontStyle;\n        },\n        set: function (value) {\n            if (this._fontStyle !== value) {\n                this._fontStyle = value;\n                this.dirtyFont = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"fontWeight\", {\n        get: function () {\n            return this._fontWeight;\n        },\n        set: function (value) {\n            if (this._fontWeight !== value) {\n                this._fontWeight = value;\n                this.dirtyFont = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"fontSize\", {\n        get: function () {\n            return this._fontSize;\n        },\n        set: function (value) {\n            if (!isFinite(value)) {\n                value = 10;\n            }\n            if (this._fontSize !== value) {\n                this._fontSize = value;\n                this.dirtyFont = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"fontFamily\", {\n        get: function () {\n            return this._fontFamily;\n        },\n        set: function (value) {\n            if (this._fontFamily !== value) {\n                this._fontFamily = value;\n                this.dirtyFont = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"textAlign\", {\n        get: function () {\n            return this._textAlign;\n        },\n        set: function (value) {\n            if (this._textAlign !== value) {\n                this._textAlign = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"textBaseline\", {\n        get: function () {\n            return this._textBaseline;\n        },\n        set: function (value) {\n            if (this._textBaseline !== value) {\n                this._textBaseline = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Text.prototype, \"lineHeight\", {\n        get: function () {\n            return this._lineHeight;\n        },\n        set: function (value) {\n            // Multi-line text is complicated because:\n            // - Canvas does not support it natively, so we have to implement it manually\n            // - need to know the height of each line -> need to parse the font shorthand ->\n            //   generally impossible to do because font size may not be in pixels\n            // - so, need to measure the text instead, each line individually -> expensive\n            // - or make the user provide the line height manually for multi-line text\n            // - computeBBox should use the lineHeight for multi-line text but ignore it otherwise\n            // - textBaseline kind of loses its meaning for multi-line text\n            if (this._lineHeight !== value) {\n                this._lineHeight = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Text.prototype.computeBBox = function () {\n        return HdpiCanvas.has.textMetrics\n            ? this.getPreciseBBox()\n            : this.getApproximateBBox();\n    };\n    Text.prototype.getPreciseBBox = function () {\n        var metrics = HdpiCanvas.measureText(this.text, this.font, this.textBaseline, this.textAlign);\n        return new BBox(this.x - metrics.actualBoundingBoxLeft, this.y - metrics.actualBoundingBoxAscent, metrics.width, metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent);\n    };\n    Text.prototype.getApproximateBBox = function () {\n        var size = HdpiCanvas.getTextSize(this.text, this.font);\n        var _a = this, x = _a.x, y = _a.y;\n        switch (this.textAlign) {\n            case 'end':\n            case 'right':\n                x -= size.width;\n                break;\n            case 'center':\n                x -= size.width / 2;\n        }\n        switch (this.textBaseline) {\n            case 'alphabetic':\n                y -= size.height * 0.7;\n                break;\n            case 'middle':\n                y -= size.height * 0.45;\n                break;\n            case 'ideographic':\n                y -= size.height;\n                break;\n            case 'hanging':\n                y -= size.height * 0.2;\n                break;\n            case 'bottom':\n                y -= size.height;\n                break;\n        }\n        return new BBox(x, y, size.width, size.height);\n    };\n    Text.prototype.isPointInPath = function (x, y) {\n        var point = this.transformPoint(x, y);\n        var bbox = this.computeBBox();\n        return bbox ? bbox.containsPoint(point.x, point.y) : false;\n    };\n    Text.prototype.isPointInStroke = function (x, y) {\n        return false;\n    };\n    Text.prototype.render = function (ctx) {\n        if (!this.lines.length || !this.scene) {\n            return;\n        }\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        // this.matrix.transformBBox(this.computeBBox!()).render(ctx); // debug\n        this.matrix.toContext(ctx);\n        var _a = this, fill = _a.fill, stroke = _a.stroke, strokeWidth = _a.strokeWidth;\n        ctx.font = this.font;\n        ctx.textAlign = this.textAlign;\n        ctx.textBaseline = this.textBaseline;\n        var pixelRatio = this.scene.canvas.pixelRatio || 1;\n        if (fill) {\n            ctx.fillStyle = fill;\n            ctx.globalAlpha = this.opacity * this.fillOpacity;\n            var _b = this, fillShadow = _b.fillShadow, text = _b.text, x = _b.x, y = _b.y;\n            if (fillShadow && fillShadow.enabled) {\n                ctx.shadowColor = fillShadow.color;\n                ctx.shadowOffsetX = fillShadow.xOffset * pixelRatio;\n                ctx.shadowOffsetY = fillShadow.yOffset * pixelRatio;\n                ctx.shadowBlur = fillShadow.blur * pixelRatio;\n            }\n            ctx.fillText(text, x, y);\n        }\n        if (stroke && strokeWidth) {\n            ctx.strokeStyle = stroke;\n            ctx.lineWidth = strokeWidth;\n            ctx.globalAlpha = this.opacity * this.strokeOpacity;\n            var _c = this, lineDash = _c.lineDash, lineDashOffset = _c.lineDashOffset, lineCap = _c.lineCap, lineJoin = _c.lineJoin, strokeShadow = _c.strokeShadow, text = _c.text, x = _c.x, y = _c.y;\n            if (lineDash) {\n                ctx.setLineDash(lineDash);\n            }\n            if (lineDashOffset) {\n                ctx.lineDashOffset = lineDashOffset;\n            }\n            if (lineCap) {\n                ctx.lineCap = lineCap;\n            }\n            if (lineJoin) {\n                ctx.lineJoin = lineJoin;\n            }\n            if (strokeShadow && strokeShadow.enabled) {\n                ctx.shadowColor = strokeShadow.color;\n                ctx.shadowOffsetX = strokeShadow.xOffset * pixelRatio;\n                ctx.shadowOffsetY = strokeShadow.yOffset * pixelRatio;\n                ctx.shadowBlur = strokeShadow.blur * pixelRatio;\n            }\n            ctx.strokeText(text, x, y);\n        }\n        this.dirty = false;\n    };\n    Text.className = 'Text';\n    Text.defaultStyles = chainObjects(Shape.defaultStyles, {\n        textAlign: 'start',\n        fontStyle: undefined,\n        fontWeight: undefined,\n        fontSize: 10,\n        fontFamily: 'sans-serif',\n        textBaseline: 'alphabetic'\n    });\n    return Text;\n}(Shape));\nexport { Text };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar Observable = /** @class */ (function () {\n    function Observable() {\n        // Note that these maps can't be specified generically, so they are kept untyped.\n        // Some methods in this class only need generics in their signatures, the generics inside the methods\n        // are just for clarity. The generics in signatures allow for static type checking of user provided\n        // listeners and for type inference, so that the users wouldn't have to specify the type of parameters\n        // of their inline lambdas.\n        this.allPropertyListeners = new Map(); // property name => property change listener => scopes\n        this.allEventListeners = new Map(); // event type => event listener => scopes\n    }\n    Observable.prototype.addPropertyListener = function (name, listener, scope) {\n        if (scope === void 0) { scope = this; }\n        var allPropertyListeners = this.allPropertyListeners;\n        var propertyListeners = allPropertyListeners.get(name);\n        if (!propertyListeners) {\n            propertyListeners = new Map();\n            allPropertyListeners.set(name, propertyListeners);\n        }\n        if (!propertyListeners.has(listener)) {\n            var scopes_1 = new Set();\n            propertyListeners.set(listener, scopes_1);\n        }\n        var scopes = propertyListeners.get(listener);\n        if (scopes) {\n            scopes.add(scope);\n        }\n    };\n    Observable.prototype.removePropertyListener = function (name, listener, scope) {\n        if (scope === void 0) { scope = this; }\n        var allPropertyListeners = this.allPropertyListeners;\n        var propertyListeners = allPropertyListeners.get(name);\n        if (propertyListeners) {\n            if (listener) {\n                var scopes = propertyListeners.get(listener);\n                if (scopes) {\n                    scopes.delete(scope);\n                    if (!scopes.size) {\n                        propertyListeners.delete(listener);\n                    }\n                }\n            }\n            else {\n                propertyListeners.clear();\n            }\n        }\n    };\n    Observable.prototype.notifyPropertyListeners = function (name, oldValue, value) {\n        var _this = this;\n        var allPropertyListeners = this.allPropertyListeners;\n        var propertyListeners = allPropertyListeners.get(name);\n        if (propertyListeners) {\n            propertyListeners.forEach(function (scopes, listener) {\n                scopes.forEach(function (scope) { return listener.call(scope, { type: name, source: _this, value: value, oldValue: oldValue }); });\n            });\n        }\n    };\n    Observable.prototype.addEventListener = function (type, listener, scope) {\n        if (scope === void 0) { scope = this; }\n        var allEventListeners = this.allEventListeners;\n        var eventListeners = allEventListeners.get(type);\n        if (!eventListeners) {\n            eventListeners = new Map();\n            allEventListeners.set(type, eventListeners);\n        }\n        if (!eventListeners.has(listener)) {\n            var scopes_2 = new Set();\n            eventListeners.set(listener, scopes_2);\n        }\n        var scopes = eventListeners.get(listener);\n        if (scopes) {\n            scopes.add(scope);\n        }\n    };\n    Observable.prototype.removeEventListener = function (type, listener, scope) {\n        if (scope === void 0) { scope = this; }\n        var allEventListeners = this.allEventListeners;\n        var eventListeners = allEventListeners.get(type);\n        if (eventListeners) {\n            if (listener) {\n                var scopes = eventListeners.get(listener);\n                if (scopes) {\n                    scopes.delete(scope);\n                    if (!scopes.size) {\n                        eventListeners.delete(listener);\n                    }\n                }\n            }\n            else {\n                eventListeners.clear();\n            }\n        }\n    };\n    Observable.prototype.notifyEventListeners = function (types) {\n        var _this = this;\n        var allEventListeners = this.allEventListeners;\n        types.forEach(function (type) {\n            var listeners = allEventListeners.get(type);\n            if (listeners) {\n                listeners.forEach(function (scopes, listener) {\n                    scopes.forEach(function (scope) { return listener.call(scope, { type: type, source: _this }); });\n                });\n            }\n        });\n    };\n    // 'source' is added automatically and is always the object this method belongs to.\n    Observable.prototype.fireEvent = function (event) {\n        var _this = this;\n        var listeners = this.allEventListeners.get(event.type);\n        if (listeners) {\n            listeners.forEach(function (scopes, listener) {\n                scopes.forEach(function (scope) { return listener.call(scope, __assign(__assign({}, event), { source: _this })); });\n            });\n        }\n    };\n    Observable.privateKeyPrefix = '_';\n    return Observable;\n}());\nexport { Observable };\nexport function reactive() {\n    var events = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        events[_i] = arguments[_i];\n    }\n    // let debug = events.indexOf('debugger') >= 0;\n    return function (target, key) {\n        // `target` is either a constructor (static member) or prototype (instance member)\n        var privateKey = Observable.privateKeyPrefix + key;\n        var privateKeyEvents = privateKey + 'Events';\n        if (!target[key]) {\n            if (events) {\n                target[privateKeyEvents] = events;\n            }\n            Object.defineProperty(target, key, {\n                set: function (value) {\n                    var oldValue = this[privateKey];\n                    // This is a way to stop inside the setter by adding the special\n                    // 'debugger' event to a reactive property, for example:\n                    //  @reactive('layoutChange', 'debugger') title?: Caption;\n                    // if (debug) { // DO NOT REMOVE\n                    //     debugger;\n                    // }\n                    if (value !== oldValue || (typeof value === 'object' && value !== null)) {\n                        this[privateKey] = value;\n                        this.notifyPropertyListeners(key, oldValue, value);\n                        var events_1 = this[privateKeyEvents];\n                        if (events_1) {\n                            this.notifyEventListeners(events_1);\n                        }\n                    }\n                },\n                get: function () {\n                    return this[privateKey];\n                },\n                enumerable: true,\n                configurable: true\n            });\n        }\n    };\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Padding } from \"./util/padding\";\nimport { Text } from \"./scene/shape/text\";\nimport { PointerEvents } from \"./scene/node\";\nimport { Observable, reactive } from \"./util/observable\";\nvar Caption = /** @class */ (function (_super) {\n    __extends(Caption, _super);\n    function Caption() {\n        var _this = _super.call(this) || this;\n        _this.node = new Text();\n        _this.enabled = false;\n        _this.padding = new Padding(10);\n        var node = _this.node;\n        node.textAlign = 'center';\n        node.textBaseline = 'top';\n        node.pointerEvents = PointerEvents.None;\n        return _this;\n    }\n    Object.defineProperty(Caption.prototype, \"text\", {\n        get: function () {\n            return this.node.text;\n        },\n        set: function (value) {\n            if (this.node.text !== value) {\n                this.node.text = value;\n                this.fireEvent({ type: 'change' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Caption.prototype, \"fontStyle\", {\n        get: function () {\n            return this.node.fontStyle;\n        },\n        set: function (value) {\n            if (this.node.fontStyle !== value) {\n                this.node.fontStyle = value;\n                this.fireEvent({ type: 'change' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Caption.prototype, \"fontWeight\", {\n        get: function () {\n            return this.node.fontWeight;\n        },\n        set: function (value) {\n            if (this.node.fontWeight !== value) {\n                this.node.fontWeight = value;\n                this.fireEvent({ type: 'change' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Caption.prototype, \"fontSize\", {\n        get: function () {\n            return this.node.fontSize;\n        },\n        set: function (value) {\n            if (this.node.fontSize !== value) {\n                this.node.fontSize = value;\n                this.fireEvent({ type: 'change' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Caption.prototype, \"fontFamily\", {\n        get: function () {\n            return this.node.fontFamily;\n        },\n        set: function (value) {\n            if (this.node.fontFamily !== value) {\n                this.node.fontFamily = value;\n                this.fireEvent({ type: 'change' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Caption.prototype, \"color\", {\n        get: function () {\n            return this.node.fill;\n        },\n        set: function (value) {\n            if (this.node.fill !== value) {\n                this.node.fill = value;\n                this.fireEvent({ type: 'change' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    __decorate([\n        reactive('change')\n    ], Caption.prototype, \"enabled\", void 0);\n    __decorate([\n        reactive('change')\n    ], Caption.prototype, \"padding\", void 0);\n    return Caption;\n}(Observable));\nexport { Caption };\n","export default (function (x) { return function () { return x; }; });\n","export default function (a, b) {\n    a = +a;\n    b = +b;\n    return function (t) { return a * (1 - t) + b * t; };\n}\n","export default function (a, b) {\n    var date = new Date;\n    var msA = +a;\n    var msB = +b;\n    return function (t) {\n        date.setTime(msA * (1 - t) + msB * t);\n        return date;\n    };\n}\n","import value from \"./value\";\nexport default function (a, b) {\n    var nb = b ? b.length : 0;\n    var na = a ? Math.min(nb, a.length) : 0;\n    var x = new Array(na);\n    var c = new Array(nb);\n    var i;\n    for (i = 0; i < na; ++i) {\n        x[i] = value(a[i], b[i]);\n    }\n    for (; i < nb; ++i) {\n        c[i] = b[i];\n    }\n    return function (t) {\n        for (i = 0; i < na; ++i) {\n            c[i] = x[i](t);\n        }\n        return c;\n    };\n}\n","import value from \"./value\";\nexport default function (a, b) {\n    var i = {};\n    var c = {};\n    var k;\n    if (a === null || typeof a !== 'object') {\n        a = {};\n    }\n    if (b === null || typeof b !== 'object') {\n        b = {};\n    }\n    for (k in b) {\n        if (k in a) {\n            i[k] = value(a[k], b[k]);\n        }\n        else {\n            c[k] = b[k];\n        }\n    }\n    return function (t) {\n        for (k in i) {\n            c[k] = i[k](t);\n        }\n        return c;\n    };\n}\n","var Color = /** @class */ (function () {\n    /**\n     * Every color component should be in the [0, 1] range.\n     * Some easing functions (such as elastic easing) can overshoot the target value by some amount.\n     * So, when animating colors, if the source or target color components are already near\n     * or at the edge of the allowed [0, 1] range, it is possible for the intermediate color\n     * component value to end up outside of that range mid-animation. For this reason the constructor\n     * performs range checking/constraining.\n     * @param r Red component.\n     * @param g Green component.\n     * @param b Blue component.\n     * @param a Alpha (opacity) component.\n     */\n    function Color(r, g, b, a) {\n        if (a === void 0) { a = 1; }\n        // NaN is treated as 0.\n        this.r = Math.min(1, Math.max(0, r || 0));\n        this.g = Math.min(1, Math.max(0, g || 0));\n        this.b = Math.min(1, Math.max(0, b || 0));\n        this.a = Math.min(1, Math.max(0, a || 0));\n    }\n    /**\n     * The given string can be in one of the following formats:\n     * - #rgb\n     * - #rrggbb\n     * - rgb(r, g, b)\n     * - rgba(r, g, b, a)\n     * - CSS color name such as 'white', 'orange', 'cyan', etc.\n     * @param str\n     */\n    Color.fromString = function (str) {\n        // hexadecimal notation\n        if (str.indexOf('#') >= 0) { // there can be some leading whitespace\n            return Color.fromHexString(str);\n        }\n        // color name\n        var hex = Color.nameToHex[str];\n        if (hex) {\n            return Color.fromHexString(hex);\n        }\n        // rgb(a) notation\n        if (str.indexOf('rgb') >= 0) {\n            return Color.fromRgbaString(str);\n        }\n        throw new Error(\"Invalid color string: '\" + str + \"'\");\n    };\n    // Using separate RegExp for the short hex notation because strings like `#abcd`\n    // are matched as ['#abcd', 'ab', 'c', 'd', undefined] when the `{1,2}` quantifier is used.\n    Color.fromHexString = function (str) {\n        var values = str.match(Color.hexRe);\n        if (values) {\n            var r = parseInt(values[1], 16);\n            var g = parseInt(values[2], 16);\n            var b = parseInt(values[3], 16);\n            var a = values[4] !== undefined ? parseInt(values[4], 16) : 255;\n            return new Color(r / 255, g / 255, b / 255, a / 255);\n        }\n        values = str.match(Color.shortHexRe);\n        if (values) {\n            var r = parseInt(values[1], 16);\n            var g = parseInt(values[2], 16);\n            var b = parseInt(values[3], 16);\n            var a = values[4] !== undefined ? parseInt(values[4], 16) : 15;\n            r += r * 16;\n            g += g * 16;\n            b += b * 16;\n            a += a * 16;\n            return new Color(r / 255, g / 255, b / 255, a / 255);\n        }\n        throw new Error(\"Malformed hexadecimal color string: '\" + str + \"'\");\n    };\n    Color.fromRgbaString = function (str) {\n        var values = str.match(Color.rgbRe);\n        if (values) {\n            return new Color(+values[1] / 255, +values[2] / 255, +values[3] / 255);\n        }\n        values = str.match(Color.rgbaRe);\n        if (values) {\n            return new Color(+values[1] / 255, +values[2] / 255, +values[3] / 255, +values[4]);\n        }\n        throw new Error(\"Malformed rgb/rgba color string: '\" + str + \"'\");\n    };\n    Color.fromArray = function (arr) {\n        if (arr.length === 4) {\n            return new Color(arr[0], arr[1], arr[2], arr[3]);\n        }\n        if (arr.length === 3) {\n            return new Color(arr[0], arr[1], arr[2]);\n        }\n        throw new Error('The given array should contain 3 or 4 color components (numbers).');\n    };\n    Color.fromHSB = function (h, s, b, alpha) {\n        if (alpha === void 0) { alpha = 1; }\n        var rgb = Color.HSBtoRGB(h, s, b);\n        return new Color(rgb[0], rgb[1], rgb[2], alpha);\n    };\n    Color.padHex = function (str) {\n        // Can't use `padStart(2, '0')` here because of IE.\n        return str.length === 1 ? '0' + str : str;\n    };\n    Color.prototype.toHexString = function () {\n        var hex = '#'\n            + Color.padHex(Math.round(this.r * 255).toString(16))\n            + Color.padHex(Math.round(this.g * 255).toString(16))\n            + Color.padHex(Math.round(this.b * 255).toString(16));\n        if (this.a < 1) {\n            hex += Color.padHex(Math.round(this.a * 255).toString(16));\n        }\n        return hex;\n    };\n    Color.prototype.toRgbaString = function (fractionDigits) {\n        if (fractionDigits === void 0) { fractionDigits = 3; }\n        var components = [\n            Math.round(this.r * 255),\n            Math.round(this.g * 255),\n            Math.round(this.b * 255)\n        ];\n        var k = Math.pow(10, fractionDigits);\n        if (this.a !== 1) {\n            components.push(Math.round(this.a * k) / k);\n            return \"rgba(\" + components.join(', ') + \")\";\n        }\n        return \"rgb(\" + components.join(', ') + \")\";\n    };\n    Color.prototype.toString = function () {\n        if (this.a === 1) {\n            return this.toHexString();\n        }\n        return this.toRgbaString();\n    };\n    Color.prototype.toHSB = function () {\n        return Color.RGBtoHSB(this.r, this.g, this.b);\n    };\n    /**\n     * Converts the given RGB triple to an array of HSB (HSV) components.\n     * The hue component will be `NaN` for achromatic colors.\n     */\n    Color.RGBtoHSB = function (r, g, b) {\n        var min = Math.min(r, g, b);\n        var max = Math.max(r, g, b);\n        var S = max !== 0 ? (max - min) / max : 0;\n        var H = NaN;\n        // min == max, means all components are the same\n        // and the color is a shade of gray with no hue (H is NaN)\n        if (min !== max) {\n            var delta = max - min;\n            var rc = (max - r) / delta;\n            var gc = (max - g) / delta;\n            var bc = (max - b) / delta;\n            if (r === max) {\n                H = bc - gc;\n            }\n            else if (g === max) {\n                H = 2.0 + rc - bc;\n            }\n            else {\n                H = 4.0 + gc - rc;\n            }\n            H /= 6.0;\n            if (H < 0) {\n                H = H + 1.0;\n            }\n        }\n        return [H * 360, S, max];\n    };\n    /**\n     * Converts the given HSB (HSV) triple to an array of RGB components.\n     */\n    Color.HSBtoRGB = function (H, S, B) {\n        if (isNaN(H)) {\n            H = 0;\n        }\n        H = (((H % 360) + 360) % 360) / 360; // normalize hue to [0, 360] interval, then scale to [0, 1]\n        var r = 0;\n        var g = 0;\n        var b = 0;\n        if (S === 0) {\n            r = g = b = B;\n        }\n        else {\n            var h = (H - Math.floor(H)) * 6;\n            var f = h - Math.floor(h);\n            var p = B * (1 - S);\n            var q = B * (1 - S * f);\n            var t = B * (1 - (S * (1 - f)));\n            switch (h >> 0) { // discard the floating point part of the number\n                case 0:\n                    r = B;\n                    g = t;\n                    b = p;\n                    break;\n                case 1:\n                    r = q;\n                    g = B;\n                    b = p;\n                    break;\n                case 2:\n                    r = p;\n                    g = B;\n                    b = t;\n                    break;\n                case 3:\n                    r = p;\n                    g = q;\n                    b = B;\n                    break;\n                case 4:\n                    r = t;\n                    g = p;\n                    b = B;\n                    break;\n                case 5:\n                    r = B;\n                    g = p;\n                    b = q;\n                    break;\n            }\n        }\n        return [r, g, b];\n    };\n    Color.prototype.derive = function (hueShift, saturationFactor, brightnessFactor, opacityFactor) {\n        var hsb = Color.RGBtoHSB(this.r, this.g, this.b);\n        var b = hsb[2];\n        if (b == 0 && brightnessFactor > 1.0) {\n            b = 0.05;\n        }\n        var h = (((hsb[0] + hueShift) % 360) + 360) % 360;\n        var s = Math.max(Math.min(hsb[1] * saturationFactor, 1.0), 0.0);\n        b = Math.max(Math.min(b * brightnessFactor, 1.0), 0.0);\n        var a = Math.max(Math.min(this.a * opacityFactor, 1.0), 0.0);\n        var rgba = Color.HSBtoRGB(h, s, b);\n        rgba.push(a);\n        return Color.fromArray(rgba);\n    };\n    Color.prototype.brighter = function () {\n        return this.derive(0, 1.0, 1.0 / 0.7, 1.0);\n    };\n    Color.prototype.darker = function () {\n        return this.derive(0, 1.0, 0.7, 1.0);\n    };\n    // See https://drafts.csswg.org/css-color/#hex-notation\n    Color.hexRe = /\\s*#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?\\s*$/;\n    Color.shortHexRe = /\\s*#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])?\\s*$/;\n    Color.rgbRe = /\\s*rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)\\s*/;\n    Color.rgbaRe = /\\s*rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*([.\\d]+)\\)\\s*/;\n    /**\n     * CSS Color Module Level 4:\n     * https://drafts.csswg.org/css-color/#named-colors\n     */\n    Color.nameToHex = Object.freeze({\n        aliceblue: '#F0F8FF',\n        antiquewhite: '#FAEBD7',\n        aqua: '#00FFFF',\n        aquamarine: '#7FFFD4',\n        azure: '#F0FFFF',\n        beige: '#F5F5DC',\n        bisque: '#FFE4C4',\n        black: '#000000',\n        blanchedalmond: '#FFEBCD',\n        blue: '#0000FF',\n        blueviolet: '#8A2BE2',\n        brown: '#A52A2A',\n        burlywood: '#DEB887',\n        cadetblue: '#5F9EA0',\n        chartreuse: '#7FFF00',\n        chocolate: '#D2691E',\n        coral: '#FF7F50',\n        cornflowerblue: '#6495ED',\n        cornsilk: '#FFF8DC',\n        crimson: '#DC143C',\n        cyan: '#00FFFF',\n        darkblue: '#00008B',\n        darkcyan: '#008B8B',\n        darkgoldenrod: '#B8860B',\n        darkgray: '#A9A9A9',\n        darkgreen: '#006400',\n        darkgrey: '#A9A9A9',\n        darkkhaki: '#BDB76B',\n        darkmagenta: '#8B008B',\n        darkolivegreen: '#556B2F',\n        darkorange: '#FF8C00',\n        darkorchid: '#9932CC',\n        darkred: '#8B0000',\n        darksalmon: '#E9967A',\n        darkseagreen: '#8FBC8F',\n        darkslateblue: '#483D8B',\n        darkslategray: '#2F4F4F',\n        darkslategrey: '#2F4F4F',\n        darkturquoise: '#00CED1',\n        darkviolet: '#9400D3',\n        deeppink: '#FF1493',\n        deepskyblue: '#00BFFF',\n        dimgray: '#696969',\n        dimgrey: '#696969',\n        dodgerblue: '#1E90FF',\n        firebrick: '#B22222',\n        floralwhite: '#FFFAF0',\n        forestgreen: '#228B22',\n        fuchsia: '#FF00FF',\n        gainsboro: '#DCDCDC',\n        ghostwhite: '#F8F8FF',\n        gold: '#FFD700',\n        goldenrod: '#DAA520',\n        gray: '#808080',\n        green: '#008000',\n        greenyellow: '#ADFF2F',\n        grey: '#808080',\n        honeydew: '#F0FFF0',\n        hotpink: '#FF69B4',\n        indianred: '#CD5C5C',\n        indigo: '#4B0082',\n        ivory: '#FFFFF0',\n        khaki: '#F0E68C',\n        lavender: '#E6E6FA',\n        lavenderblush: '#FFF0F5',\n        lawngreen: '#7CFC00',\n        lemonchiffon: '#FFFACD',\n        lightblue: '#ADD8E6',\n        lightcoral: '#F08080',\n        lightcyan: '#E0FFFF',\n        lightgoldenrodyellow: '#FAFAD2',\n        lightgray: '#D3D3D3',\n        lightgreen: '#90EE90',\n        lightgrey: '#D3D3D3',\n        lightpink: '#FFB6C1',\n        lightsalmon: '#FFA07A',\n        lightseagreen: '#20B2AA',\n        lightskyblue: '#87CEFA',\n        lightslategray: '#778899',\n        lightslategrey: '#778899',\n        lightsteelblue: '#B0C4DE',\n        lightyellow: '#FFFFE0',\n        lime: '#00FF00',\n        limegreen: '#32CD32',\n        linen: '#FAF0E6',\n        magenta: '#FF00FF',\n        maroon: '#800000',\n        mediumaquamarine: '#66CDAA',\n        mediumblue: '#0000CD',\n        mediumorchid: '#BA55D3',\n        mediumpurple: '#9370DB',\n        mediumseagreen: '#3CB371',\n        mediumslateblue: '#7B68EE',\n        mediumspringgreen: '#00FA9A',\n        mediumturquoise: '#48D1CC',\n        mediumvioletred: '#C71585',\n        midnightblue: '#191970',\n        mintcream: '#F5FFFA',\n        mistyrose: '#FFE4E1',\n        moccasin: '#FFE4B5',\n        navajowhite: '#FFDEAD',\n        navy: '#000080',\n        oldlace: '#FDF5E6',\n        olive: '#808000',\n        olivedrab: '#6B8E23',\n        orange: '#FFA500',\n        orangered: '#FF4500',\n        orchid: '#DA70D6',\n        palegoldenrod: '#EEE8AA',\n        palegreen: '#98FB98',\n        paleturquoise: '#AFEEEE',\n        palevioletred: '#DB7093',\n        papayawhip: '#FFEFD5',\n        peachpuff: '#FFDAB9',\n        peru: '#CD853F',\n        pink: '#FFC0CB',\n        plum: '#DDA0DD',\n        powderblue: '#B0E0E6',\n        purple: '#800080',\n        rebeccapurple: '#663399',\n        red: '#FF0000',\n        rosybrown: '#BC8F8F',\n        royalblue: '#4169E1',\n        saddlebrown: '#8B4513',\n        salmon: '#FA8072',\n        sandybrown: '#F4A460',\n        seagreen: '#2E8B57',\n        seashell: '#FFF5EE',\n        sienna: '#A0522D',\n        silver: '#C0C0C0',\n        skyblue: '#87CEEB',\n        slateblue: '#6A5ACD',\n        slategray: '#708090',\n        slategrey: '#708090',\n        snow: '#FFFAFA',\n        springgreen: '#00FF7F',\n        steelblue: '#4682B4',\n        tan: '#D2B48C',\n        teal: '#008080',\n        thistle: '#D8BFD8',\n        tomato: '#FF6347',\n        turquoise: '#40E0D0',\n        violet: '#EE82EE',\n        wheat: '#F5DEB3',\n        white: '#FFFFFF',\n        whitesmoke: '#F5F5F5',\n        yellow: '#FFFF00',\n        yellowgreen: '#9ACD32'\n    });\n    return Color;\n}());\nexport { Color };\n","import number from \"./number\";\nimport { Color } from \"../util/color\";\nexport default function (a, b) {\n    if (typeof a === 'string') {\n        try {\n            a = Color.fromString(a);\n        }\n        catch (e) {\n            a = Color.fromArray([0, 0, 0]);\n        }\n    }\n    if (typeof b === 'string') {\n        try {\n            b = Color.fromString(b);\n        }\n        catch (e) {\n            b = Color.fromArray([0, 0, 0]);\n        }\n    }\n    var red = number(a.r, b.r);\n    var green = number(a.g, b.g);\n    var blue = number(a.b, b.b);\n    var alpha = number(a.a, b.a);\n    return function (t) {\n        return Color.fromArray([red(t), green(t), blue(t), alpha(t)]).toRgbaString();\n    };\n}\n","import constant from \"./constant\";\nimport number from \"./number\";\nimport date from \"./date\";\nimport array from \"./array\";\nimport object from \"./object\";\nimport color from \"./color\";\nimport { Color } from \"../util/color\";\nexport default function (a, b) {\n    var t = typeof b;\n    var c;\n    if (b == null || t === 'boolean') {\n        return constant(b);\n    }\n    if (t === 'number') {\n        return number(a, b);\n    }\n    if (t === 'string') {\n        try {\n            c = Color.fromString(b);\n            b = c;\n            return color(a, b);\n        }\n        catch (e) {\n            // return string(a, b);\n        }\n    }\n    if (b instanceof Color) {\n        return color(a, b);\n    }\n    if (b instanceof Date) {\n        return date(a, b);\n    }\n    if (Array.isArray(b)) {\n        return array(a, b);\n    }\n    if (typeof b.valueOf !== 'function' && typeof b.toString !== 'function' || isNaN(b)) {\n        return object(a, b);\n    }\n    return number(a, b);\n}\n","export function ascending(a, b) {\n    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import { ascending } from \"./compare\";\n/**\n * Returns the insertion point for `x` in array to maintain sorted order.\n * The arguments `lo` and `hi` may be used to specify a subset of the array which should be considered;\n * by default the entire array is used. If `x` is already present in array, the insertion point will be before\n * (to the left of) any existing entries. The return value is suitable for use as the first argument to `splice`\n * assuming that array is already sorted. The returned insertion point `i` partitions the array into two halves\n * so that all `v < x` for `v` in `array.slice(lo, i)` for the left side and all `v >= x` for `v` in `array.slice(i, hi)`\n * for the right side.\n * @param list\n * @param x\n * @param comparator\n * @param lo\n * @param hi\n */\nexport function bisectLeft(list, x, comparator, lo, hi) {\n    if (lo === void 0) { lo = 0; }\n    if (hi === void 0) { hi = list.length; }\n    while (lo < hi) {\n        var mid = (lo + hi) >>> 1;\n        if (comparator(list[mid], x) < 0) { // list[mid] < x\n            lo = mid + 1;\n        }\n        else {\n            hi = mid;\n        }\n    }\n    return lo;\n}\nexport function bisectRight(list, x, comparator, lo, hi) {\n    if (lo === void 0) { lo = 0; }\n    if (hi === void 0) { hi = list.length; }\n    while (lo < hi) {\n        var mid = (lo + hi) >>> 1;\n        if (comparator(list[mid], x) > 0) { // list[mid] > x\n            hi = mid;\n        }\n        else {\n            lo = mid + 1;\n        }\n    }\n    return lo;\n}\n/**\n * A specialized version of `bisectLeft` that works with the arrays whose elements cannot be compared directly.\n * The map function is used instead to produce a comparable value for a given array element, then the values\n * returned by the map are compared using the `ascendingComparator`.\n * @param list\n * @param x\n * @param map\n * @param lo\n * @param hi\n */\nexport function complexBisectLeft(list, x, map, lo, hi) {\n    if (lo === void 0) { lo = 0; }\n    if (hi === void 0) { hi = list.length; }\n    var comparator = ascendingComparator(map);\n    while (lo < hi) {\n        var mid = (lo + hi) >>> 1;\n        if (comparator(list[mid], x) < 0) {\n            lo = mid + 1;\n        }\n        else {\n            hi = mid;\n        }\n    }\n    return lo;\n}\nexport function complexBisectRight(list, x, map, lo, hi) {\n    if (lo === void 0) { lo = 0; }\n    if (hi === void 0) { hi = list.length; }\n    var comparator = ascendingComparator(map);\n    while (lo < hi) {\n        var mid = (lo + hi) >>> 1;\n        if (comparator(list[mid], x) < 0) {\n            lo = mid + 1;\n        }\n        else {\n            hi = mid;\n        }\n    }\n    return lo;\n}\nfunction ascendingComparator(map) {\n    return function (item, x) {\n        return ascending(map(item), x);\n    };\n}\n","import interpolateValue from \"../interpolate/value\";\nimport interpolateNumber from \"../interpolate/number\";\nimport { bisectRight } from \"../util/bisect\";\nimport { ascending } from \"../util/compare\";\nexport var constant = function (x) { return function () { return x; }; };\nexport var identity = function (x) { return x; };\nfunction clamper(domain) {\n    var _a;\n    var a = domain[0];\n    var b = domain[domain.length - 1];\n    if (a > b) {\n        _a = [b, a], a = _a[0], b = _a[1];\n    }\n    return function (x) { return Math.max(a, Math.min(b, x)); };\n}\nvar ContinuousScale = /** @class */ (function () {\n    function ContinuousScale() {\n        /**\n         * The output value of the scale for `undefined` or `NaN` input values.\n         */\n        this.unknown = undefined;\n        this._clamp = identity;\n        this._domain = [0, 1];\n        this._range = [0, 1];\n        this.transform = identity; // transforms domain value\n        this.untransform = identity; // untransforms domain value\n        this._interpolate = interpolateValue;\n        this.rescale();\n    }\n    Object.defineProperty(ContinuousScale.prototype, \"clamp\", {\n        get: function () {\n            return this._clamp !== identity;\n        },\n        set: function (value) {\n            this._clamp = value ? clamper(this.domain) : identity;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ContinuousScale.prototype.setDomain = function (values) {\n        this._domain = Array.prototype.map.call(values, function (v) { return +v; });\n        if (this._clamp !== identity) {\n            this._clamp = clamper(this.domain);\n        }\n        this.rescale();\n    };\n    ContinuousScale.prototype.getDomain = function () {\n        return this._domain.slice();\n    };\n    Object.defineProperty(ContinuousScale.prototype, \"domain\", {\n        get: function () {\n            return this.getDomain();\n        },\n        set: function (values) {\n            this.setDomain(values);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ContinuousScale.prototype, \"range\", {\n        get: function () {\n            return this._range.slice();\n        },\n        set: function (values) {\n            this._range = Array.prototype.slice.call(values);\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ContinuousScale.prototype, \"interpolate\", {\n        get: function () {\n            return this._interpolate;\n        },\n        set: function (value) {\n            this._interpolate = value;\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ContinuousScale.prototype.rescale = function () {\n        if (Math.min(this.domain.length, this.range.length) > 2) {\n            this.piecewise = this.polymap;\n        }\n        else {\n            this.piecewise = this.bimap;\n        }\n        this.output = undefined;\n        this.input = undefined;\n    };\n    /**\n     * Returns a function that converts `x` in `[a, b]` to `t` in `[0, 1]`. Non-clamping.\n     * @param a\n     * @param b\n     */\n    ContinuousScale.prototype.normalize = function (a, b) {\n        return (b -= (a = +a))\n            ? function (x) { return (x - a) / b; }\n            : constant(isNaN(b) ? NaN : 0.5);\n    };\n    ContinuousScale.prototype.bimap = function (domain, range, interpolate) {\n        var x0 = domain[0];\n        var x1 = domain[1];\n        var y0 = range[0];\n        var y1 = range[1];\n        var xt;\n        var ty;\n        if (x1 < x0) {\n            xt = this.normalize(x1, x0);\n            ty = interpolate(y1, y0);\n        }\n        else {\n            xt = this.normalize(x0, x1);\n            ty = interpolate(y0, y1);\n        }\n        return function (x) { return ty(xt(x)); }; // domain value x --> t in [0, 1] --> range value y\n    };\n    ContinuousScale.prototype.polymap = function (domain, range, interpolate) {\n        var _this = this;\n        // number of segments in the polylinear scale\n        var n = Math.min(domain.length, range.length) - 1;\n        if (domain[n] < domain[0]) {\n            domain = domain.slice().reverse();\n            range = range.slice().reverse();\n        }\n        // deinterpolators from domain segment value to t\n        var dt = Array.from({ length: n }, function (_, i) { return _this.normalize(domain[i], domain[i + 1]); });\n        // reinterpolators from t to range segment value\n        var tr = Array.from({ length: n }, function (_, i) { return interpolate(range[i], range[i + 1]); });\n        return function (x) {\n            var i = bisectRight(domain, x, ascending, 1, n) - 1; // Find the domain segment that `x` belongs to.\n            // This also tells us which deinterpolator/reinterpolator pair to use.\n            return tr[i](dt[i](x));\n        };\n    };\n    ContinuousScale.prototype.convert = function (x) {\n        x = +x;\n        if (isNaN(x)) {\n            return this.unknown;\n        }\n        else {\n            if (!this.output) {\n                this.output = this.piecewise(this.domain.map(this.transform), this.range, this.interpolate);\n            }\n            return this.output(this.transform(this._clamp(x)));\n        }\n    };\n    ContinuousScale.prototype.invert = function (y) {\n        if (!this.input) {\n            this.input = this.piecewise(this.range, this.domain.map(this.transform), interpolateNumber);\n        }\n        return this._clamp(this.untransform(this.input(y)));\n    };\n    return ContinuousScale;\n}());\nexport default ContinuousScale;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexport default function (a, b, count) {\n    var step = tickStep(a, b, count);\n    a = Math.ceil(a / step) * step;\n    b = Math.floor(b / step) * step + step / 2;\n    // Add half a step here so that the array returned by `range` includes the last tick.\n    return range(a, b, step);\n}\nvar e10 = Math.sqrt(50);\nvar e5 = Math.sqrt(10);\nvar e2 = Math.sqrt(2);\nexport function tickStep(a, b, count) {\n    var rawStep = Math.abs(b - a) / Math.max(0, count);\n    var step = Math.pow(10, Math.floor(Math.log(rawStep) / Math.LN10)); // = Math.log10(rawStep)\n    var error = rawStep / step;\n    if (error >= e10) {\n        step *= 10;\n    }\n    else if (error >= e5) {\n        step *= 5;\n    }\n    else if (error >= e2) {\n        step *= 2;\n    }\n    return b < a ? -step : step;\n}\nexport function tickIncrement(a, b, count) {\n    var rawStep = (b - a) / Math.max(0, count);\n    var power = Math.floor(Math.log(rawStep) / Math.LN10);\n    var error = rawStep / Math.pow(10, power);\n    return power >= 0\n        ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n        : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\nvar NumericTicks = /** @class */ (function (_super) {\n    __extends(NumericTicks, _super);\n    function NumericTicks(fractionDigits, size) {\n        if (size === void 0) { size = 0; }\n        var _this = _super.call(this, size) || this;\n        _this.fractionDigits = fractionDigits;\n        return _this;\n    }\n    return NumericTicks;\n}(Array));\nexport { NumericTicks };\nfunction range(a, b, step) {\n    if (step === void 0) { step = 1; }\n    var absStep = Math.abs(step);\n    var fractionDigits = (absStep > 0 && absStep < 1)\n        ? Math.abs(Math.floor(Math.log(absStep) / Math.LN10))\n        : 0;\n    var f = Math.pow(10, fractionDigits);\n    var n = Math.max(0, Math.ceil((b - a) / step)) || 0;\n    var values = new NumericTicks(fractionDigits, n);\n    for (var i = 0; i < n; i++) {\n        var value = a + step * i;\n        values[i] = Math.round(value * f) / f;\n    }\n    return values;\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ContinuousScale from \"./continuousScale\";\nimport ticks, { tickIncrement } from \"../util/ticks\";\n/**\n * Maps continuous domain to a continuous range.\n */\nvar LinearScale = /** @class */ (function (_super) {\n    __extends(LinearScale, _super);\n    function LinearScale() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LinearScale.prototype.ticks = function (count) {\n        if (count === void 0) { count = 10; }\n        var d = this._domain;\n        return ticks(d[0], d[d.length - 1], count);\n    };\n    /**\n     * Extends the domain so that it starts and ends on nice round values.\n     * @param count Tick count.\n     */\n    LinearScale.prototype.nice = function (count) {\n        if (count === void 0) { count = 10; }\n        var d = this.domain;\n        var i0 = 0;\n        var i1 = d.length - 1;\n        var start = d[i0];\n        var stop = d[i1];\n        var step;\n        if (stop < start) {\n            step = start;\n            start = stop;\n            stop = step;\n            step = i0;\n            i0 = i1;\n            i1 = step;\n        }\n        step = tickIncrement(start, stop, count);\n        if (step > 0) {\n            start = Math.floor(start / step) * step;\n            stop = Math.ceil(stop / step) * step;\n            step = tickIncrement(start, stop, count);\n        }\n        else if (step < 0) {\n            start = Math.ceil(start * step) / step;\n            stop = Math.floor(stop * step) / step;\n            step = tickIncrement(start, stop, count);\n        }\n        if (step > 0) {\n            d[i0] = Math.floor(start / step) * step;\n            d[i1] = Math.ceil(stop / step) * step;\n            this.domain = d;\n        }\n        else if (step < 0) {\n            d[i0] = Math.ceil(start * step) / step;\n            d[i1] = Math.floor(stop * step) / step;\n            this.domain = d;\n        }\n    };\n    return LinearScale;\n}(ContinuousScale));\nexport { LinearScale };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Node } from \"./node\";\nimport { BBox } from \"./bbox\";\nimport { Matrix } from \"./matrix\";\nvar Group = /** @class */ (function (_super) {\n    __extends(Group, _super);\n    function Group() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isContainerNode = true;\n        return _this;\n    }\n    // We consider a group to be boundless, thus any point belongs to it.\n    Group.prototype.containsPoint = function (x, y) {\n        return true;\n    };\n    Group.prototype.computeBBox = function () {\n        var left = Infinity;\n        var right = -Infinity;\n        var top = Infinity;\n        var bottom = -Infinity;\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        this.children.forEach(function (child) {\n            if (!child.visible) {\n                return;\n            }\n            var bbox = child.computeBBox();\n            if (!bbox) {\n                return;\n            }\n            if (!(child instanceof Group)) {\n                if (child.dirtyTransform) {\n                    child.computeTransformMatrix();\n                }\n                var matrix = Matrix.flyweight(child.matrix);\n                var parent_1 = child.parent;\n                while (parent_1) {\n                    matrix.preMultiplySelf(parent_1.matrix);\n                    parent_1 = parent_1.parent;\n                }\n                matrix.transformBBox(bbox, 0, bbox);\n            }\n            var x = bbox.x;\n            var y = bbox.y;\n            if (x < left) {\n                left = x;\n            }\n            if (y < top) {\n                top = y;\n            }\n            if (x + bbox.width > right) {\n                right = x + bbox.width;\n            }\n            if (y + bbox.height > bottom) {\n                bottom = y + bbox.height;\n            }\n        });\n        return new BBox(left, top, right - left, bottom - top);\n    };\n    Group.prototype.render = function (ctx) {\n        // A group can have `scaling`, `rotation`, `translation` properties\n        // that are applied to the canvas context before children are rendered,\n        // so all children can be transformed at once.\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        this.matrix.toContext(ctx);\n        var children = this.children;\n        var n = children.length;\n        for (var i = 0; i < n; i++) {\n            ctx.save();\n            var child = children[i];\n            if (child.visible) {\n                child.render(ctx);\n            }\n            ctx.restore();\n        }\n        // debug\n        // this.computeBBox().render(ctx, {\n        //     label: this.id,\n        //     resetTransform: true,\n        //     fillStyle: 'rgba(0, 0, 0, 0.5)'\n        // });\n    };\n    Group.className = 'Group';\n    return Group;\n}(Node));\nexport { Group };\n","import { Node } from \"./node\";\nvar EnterNode = /** @class */ (function () {\n    function EnterNode(parent, datum) {\n        this.next = null;\n        this.scene = parent.scene;\n        this.parent = parent;\n        this.datum = datum;\n    }\n    EnterNode.prototype.appendChild = function (node) {\n        // This doesn't work without the `strict: true` in the `tsconfig.json`,\n        // so we must have two `if` checks below, instead of this single one.\n        // if (this.next && !Node.isNode(this.next)) {\n        //     throw new Error(`${this.next} is not a Node.`);\n        // }\n        if (this.next === null) {\n            return this.parent.insertBefore(node, null);\n        }\n        if (!Node.isNode(this.next)) {\n            throw new Error(this.next + \" is not a Node.\");\n        }\n        return this.parent.insertBefore(node, this.next);\n    };\n    EnterNode.prototype.insertBefore = function (node, nextNode) {\n        return this.parent.insertBefore(node, nextNode);\n    };\n    return EnterNode;\n}());\nexport { EnterNode };\n/**\n * G - type of the selected node(s).\n * GDatum - type of the datum of the selected node(s).\n * P - type of the parent node(s).\n * PDatum - type of the datum of the parent node(s).\n */\nvar Selection = /** @class */ (function () {\n    function Selection(groups, parents) {\n        this.groups = groups;\n        this.parents = parents;\n    }\n    Selection.select = function (node) {\n        return new Selection([[typeof node === 'function' ? node() : node]], [undefined]);\n    };\n    Selection.selectAll = function (nodes) {\n        return new Selection([nodes == null ? [] : nodes], [undefined]);\n    };\n    /**\n     * Creates new nodes, appends them to the nodes of this selection and returns them\n     * as a new selection. The created nodes inherit the datums and the parents of the nodes\n     * they replace.\n     * @param Class The constructor function to use to create the new nodes.\n     */\n    Selection.prototype.append = function (Class) {\n        return this.select(function (node) {\n            return node.appendChild(new Class());\n        });\n    };\n    /**\n     * Same as the {@link append}, but accepts a custom creator function with the\n     * {@link NodeSelector} signature rather than a constructor function.\n     * @param creator\n     */\n    Selection.prototype.appendFn = function (creator) {\n        return this.select(function (node, data, index, group) {\n            return node.appendChild(creator(node, data, index, group));\n        });\n    };\n    /**\n     * Runs the given selector that returns a single node for every node in each group.\n     * The original nodes are then replaced by the nodes returned by the selector\n     * and returned as a new selection.\n     * The selected nodes inherit the datums and the parents of the original nodes.\n     */\n    Selection.prototype.select = function (selector) {\n        var groups = this.groups;\n        var numGroups = groups.length;\n        var subgroups = [];\n        for (var j = 0; j < numGroups; j++) {\n            var group = groups[j];\n            var groupSize = group.length;\n            var subgroup = subgroups[j] = new Array(groupSize);\n            for (var i = 0; i < groupSize; i++) {\n                var node = group[i];\n                if (node) {\n                    var subnode = selector(node, node.datum, i, group);\n                    if (subnode) {\n                        subnode.datum = node.datum;\n                    }\n                    subgroup[i] = subnode;\n                }\n                // else this can be a group of the `enter` selection,\n                // for example, with no nodes at the i-th position,\n                // only nodes at the end of the group\n            }\n        }\n        return new Selection(subgroups, this.parents);\n    };\n    /**\n     * Same as {@link select}, but uses the given {@param Class} (constructor) as a selector.\n     * @param Class The constructor function to use to find matching nodes.\n     */\n    Selection.prototype.selectByClass = function (Class) {\n        return this.select(function (node) {\n            if (Node.isNode(node)) {\n                var children = node.children;\n                var n = children.length;\n                for (var i = 0; i < n; i++) {\n                    var child = children[i];\n                    if (child instanceof Class) {\n                        return child;\n                    }\n                }\n            }\n        });\n    };\n    Selection.prototype.selectByTag = function (tag) {\n        return this.select(function (node) {\n            if (Node.isNode(node)) {\n                var children = node.children;\n                var n = children.length;\n                for (var i = 0; i < n; i++) {\n                    var child = children[i];\n                    if (child.tag === tag) {\n                        return child;\n                    }\n                }\n            }\n        });\n    };\n    Selection.prototype.selectAllByClass = function (Class) {\n        return this.selectAll(function (node) {\n            var nodes = [];\n            if (Node.isNode(node)) {\n                var children = node.children;\n                var n = children.length;\n                for (var i = 0; i < n; i++) {\n                    var child = children[i];\n                    if (child instanceof Class) {\n                        nodes.push(child);\n                    }\n                }\n            }\n            return nodes;\n        });\n    };\n    Selection.prototype.selectAllByTag = function (tag) {\n        return this.selectAll(function (node) {\n            var nodes = [];\n            if (Node.isNode(node)) {\n                var children = node.children;\n                var n = children.length;\n                for (var i = 0; i < n; i++) {\n                    var child = children[i];\n                    if (child.tag === tag) {\n                        nodes.push(child);\n                    }\n                }\n            }\n            return nodes;\n        });\n    };\n    Selection.prototype.selectNone = function () {\n        return [];\n    };\n    /**\n     * Runs the given selector that returns a group of nodes for every node in each group.\n     * The original nodes are then replaced by the groups of nodes returned by the selector\n     * and returned as a new selection. The original nodes become the parent nodes for each\n     * group in the new selection. The selected nodes do not inherit the datums of the original nodes.\n     * If called without any parameters, creates a new selection with an empty group for each\n     * node in this selection.\n     */\n    Selection.prototype.selectAll = function (selectorAll) {\n        if (!selectorAll) {\n            selectorAll = this.selectNone;\n        }\n        // Each subgroup is populated with the selector (run on each group node) results.\n        var subgroups = [];\n        // In the new selection that we return, subgroups become groups,\n        // and group nodes become parents.\n        var parents = [];\n        var groups = this.groups;\n        var groupCount = groups.length;\n        for (var j = 0; j < groupCount; j++) {\n            var group = groups[j];\n            var groupLength = group.length;\n            for (var i = 0; i < groupLength; i++) {\n                var node = group[i];\n                if (node) {\n                    subgroups.push(selectorAll(node, node.datum, i, group));\n                    parents.push(node);\n                }\n            }\n        }\n        return new Selection(subgroups, parents);\n    };\n    /**\n     * Runs the given callback for every node in this selection and returns this selection.\n     * @param cb\n     */\n    Selection.prototype.each = function (cb) {\n        var groups = this.groups;\n        var numGroups = groups.length;\n        for (var j = 0; j < numGroups; j++) {\n            var group = groups[j];\n            var groupSize = group.length;\n            for (var i = 0; i < groupSize; i++) {\n                var node = group[i];\n                if (node) {\n                    cb(node, node.datum, i, group);\n                }\n            }\n        }\n        return this;\n    };\n    Selection.prototype.remove = function () {\n        return this.each(function (node) {\n            if (Node.isNode(node)) {\n                var parent_1 = node.parent;\n                if (parent_1) {\n                    parent_1.removeChild(node);\n                }\n            }\n        });\n    };\n    Selection.prototype.merge = function (other) {\n        var groups0 = this.groups;\n        var groups1 = other.groups;\n        var m0 = groups0.length;\n        var m1 = groups1.length;\n        var m = Math.min(m0, m1);\n        var merges = new Array(m0);\n        var j = 0;\n        for (; j < m; j++) {\n            var group0 = groups0[j];\n            var group1 = groups1[j];\n            var n = group0.length;\n            var merge = merges[j] = new Array(n);\n            for (var i = 0; i < n; i++) {\n                var node = group0[i] || group1[i];\n                merge[i] = node || undefined;\n            }\n        }\n        for (; j < m0; j++) {\n            merges[j] = groups0[j];\n        }\n        return new Selection(merges, this.parents);\n    };\n    /**\n     * Return the first non-null element in this selection.\n     * If the selection is empty, returns null.\n     */\n    Selection.prototype.node = function () {\n        var groups = this.groups;\n        var numGroups = groups.length;\n        for (var j = 0; j < numGroups; j++) {\n            var group = groups[j];\n            var groupSize = group.length;\n            for (var i = 0; i < groupSize; i++) {\n                var node = group[i];\n                if (node) {\n                    return node;\n                }\n            }\n        }\n        return null;\n    };\n    Selection.prototype.attr = function (name, value) {\n        this.each(function (node) {\n            node[name] = value;\n        });\n        return this;\n    };\n    Selection.prototype.attrFn = function (name, value) {\n        this.each(function (node, datum, index, group) {\n            node[name] = value(node, datum, index, group);\n        });\n        return this;\n    };\n    /**\n     * Invokes the given function once, passing in this selection.\n     * Returns this selection. Facilitates method chaining.\n     * @param cb\n     */\n    Selection.prototype.call = function (cb) {\n        cb(this);\n        return this;\n    };\n    Object.defineProperty(Selection.prototype, \"size\", {\n        /**\n         * Returns the total number of nodes in this selection.\n         */\n        get: function () {\n            var size = 0;\n            this.each(function () { return size++; });\n            return size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Selection.prototype, \"data\", {\n        /**\n         * Returns the array of data for the selected elements.\n         */\n        get: function () {\n            var data = [];\n            this.each(function (_, datum) { return data.push(datum); });\n            return data;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Selection.prototype, \"enter\", {\n        get: function () {\n            return new Selection(this.enterGroups ? this.enterGroups : [[]], this.parents);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Selection.prototype, \"exit\", {\n        get: function () {\n            return new Selection(this.exitGroups ? this.exitGroups : [[]], this.parents);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Binds the given value to each selected node and returns this selection\n     * with its {@link GDatum} type changed to the type of the given value.\n     * This method doesn't compute a join and doesn't affect indexes or the enter and exit selections.\n     * This method can also be used to clear bound data.\n     * @param value\n     */\n    Selection.prototype.setDatum = function (value) {\n        return this.each(function (node) {\n            node.datum = value;\n        });\n    };\n    Object.defineProperty(Selection.prototype, \"datum\", {\n        /**\n         * Returns the bound datum for the first non-null element in the selection.\n         * This is generally useful only if you know the selection contains exactly one element.\n         */\n        get: function () {\n            var node = this.node();\n            return node ? node.datum : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Binds the specified array of values with the selected nodes, returning a new selection\n     * that represents the _update_ selection: the nodes successfully bound to the values.\n     * Also defines the {@link enter} and {@link exit} selections on the returned selection,\n     * which can be used to add or remove the nodes to correspond to the new data.\n     * The `values` is an array of values of a particular type, or a function that returns\n     * an array of values for each group.\n     * When values are assigned to the nodes, they are stored in the {@link Node.datum} property.\n     * @param values\n     * @param key\n     */\n    Selection.prototype.setData = function (values, key) {\n        if (typeof values !== 'function') {\n            var data_1 = values;\n            values = function () { return data_1; };\n        }\n        var groups = this.groups;\n        var parents = this.parents;\n        var numGroups = groups.length;\n        var updateGroups = new Array(numGroups);\n        var enterGroups = new Array(numGroups);\n        var exitGroups = new Array(numGroups);\n        for (var j = 0; j < numGroups; j++) {\n            var group = groups[j];\n            var parent_2 = parents[j];\n            if (!parent_2) {\n                throw new Error(\"Group #\" + j + \" has no parent: \" + group);\n            }\n            var groupSize = group.length;\n            var data = values(parent_2, parent_2.datum, j, parents);\n            var dataSize = data.length;\n            var enterGroup = enterGroups[j] = new Array(dataSize);\n            var updateGroup = updateGroups[j] = new Array(dataSize);\n            var exitGroup = exitGroups[j] = new Array(groupSize);\n            if (key) {\n                this.bindKey(parent_2, group, enterGroup, updateGroup, exitGroup, data, key);\n            }\n            else {\n                this.bindIndex(parent_2, group, enterGroup, updateGroup, exitGroup, data);\n            }\n            // Now connect the enter nodes to their following update node, such that\n            // appendChild can insert the materialized enter node before this node,\n            // rather than at the end of the parent node.\n            for (var i0 = 0, i1 = 0; i0 < dataSize; i0++) {\n                var previous = enterGroup[i0];\n                if (previous) {\n                    if (i0 >= i1) {\n                        i1 = i0 + 1;\n                    }\n                    var next = void 0;\n                    while (!(next = updateGroup[i1]) && i1 < dataSize) {\n                        i1++;\n                    }\n                    previous.next = next || null;\n                }\n            }\n        }\n        var result = new Selection(updateGroups, parents);\n        result.enterGroups = enterGroups;\n        result.exitGroups = exitGroups;\n        return result;\n    };\n    Selection.prototype.bindIndex = function (parent, group, enter, update, exit, data) {\n        var groupSize = group.length;\n        var dataSize = data.length;\n        var i = 0;\n        for (; i < dataSize; i++) {\n            var node = group[i];\n            if (node) {\n                node.datum = data[i];\n                update[i] = node;\n            }\n            else { // more datums than group nodes\n                enter[i] = new EnterNode(parent, data[i]);\n            }\n        }\n        // more group nodes than datums\n        for (; i < groupSize; i++) {\n            var node = group[i];\n            if (node) {\n                exit[i] = node;\n            }\n        }\n    };\n    Selection.prototype.bindKey = function (parent, group, enter, update, exit, data, key) {\n        var groupSize = group.length;\n        var dataSize = data.length;\n        var keyValues = new Array(groupSize);\n        var nodeByKeyValue = {};\n        // Compute the key for each node.\n        // If multiple nodes have the same key, the duplicates are added to exit.\n        for (var i = 0; i < groupSize; i++) {\n            var node = group[i];\n            if (node) {\n                var keyValue = keyValues[i] = Selection.keyPrefix + key(node, node.datum, i, group);\n                if (keyValue in nodeByKeyValue) {\n                    exit[i] = node;\n                }\n                else {\n                    nodeByKeyValue[keyValue] = node;\n                }\n            }\n        }\n        // Compute the key for each datum.\n        // If there is a node associated with this key, join and add it to update.\n        // If there is not (or the key is a duplicate), add it to enter.\n        for (var i = 0; i < dataSize; i++) {\n            var keyValue = Selection.keyPrefix + key(parent, data[i], i, data);\n            var node = nodeByKeyValue[keyValue];\n            if (node) {\n                update[i] = node;\n                node.datum = data[i];\n                nodeByKeyValue[keyValue] = undefined;\n            }\n            else {\n                enter[i] = new EnterNode(parent, data[i]);\n            }\n        }\n        // Add any remaining nodes that were not bound to data to exit.\n        for (var i = 0; i < groupSize; i++) {\n            var node = group[i];\n            if (node && (nodeByKeyValue[keyValues[i]] === node)) {\n                exit[i] = node;\n            }\n        }\n    };\n    Selection.keyPrefix = '$'; // Protect against keys like '__proto__'.\n    return Selection;\n}());\nexport { Selection };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Shape } from \"./shape\";\nimport { chainObjects } from \"../../util/object\";\nimport { BBox } from \"../bbox\";\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line() {\n        var _this = _super.call(this) || this;\n        _this._x1 = 0;\n        _this._y1 = 0;\n        _this._x2 = 0;\n        _this._y2 = 0;\n        _this.restoreOwnStyles();\n        return _this;\n    }\n    Object.defineProperty(Line.prototype, \"x1\", {\n        get: function () {\n            // TODO: Investigate getter performance further in the context\n            //       of the scene graph.\n            //       In isolated benchmarks using a getter has the same\n            //       performance as a direct property access in Firefox 64.\n            //       But in Chrome 71 the getter is 60% slower than direct access.\n            //       Direct read is 4.5+ times slower in Chrome than it is in Firefox.\n            //       Property access and direct read have the same performance\n            //       in Safari 12, which is 2+ times faster than Firefox at this.\n            // https://jsperf.com/es5-getters-setters-versus-getter-setter-methods/18\n            // This is a know Chrome issue. They say it's not a regression, since\n            // the behavior is observed since M60, but jsperf.com history shows the\n            // 10x slowdown happened between Chrome 48 and Chrome 57.\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=908743\n            return this._x1;\n        },\n        set: function (value) {\n            if (this._x1 !== value) {\n                this._x1 = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Line.prototype, \"y1\", {\n        get: function () {\n            return this._y1;\n        },\n        set: function (value) {\n            if (this._y1 !== value) {\n                this._y1 = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Line.prototype, \"x2\", {\n        get: function () {\n            return this._x2;\n        },\n        set: function (value) {\n            if (this._x2 !== value) {\n                this._x2 = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Line.prototype, \"y2\", {\n        get: function () {\n            return this._y2;\n        },\n        set: function (value) {\n            if (this._y2 !== value) {\n                this._y2 = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Line.prototype.computeBBox = function () {\n        return new BBox(this.x1, this.y1, this.x2 - this.x1, this.y2 - this.y1);\n    };\n    Line.prototype.isPointInPath = function (x, y) {\n        return false;\n    };\n    Line.prototype.isPointInStroke = function (x, y) {\n        return false;\n    };\n    Line.prototype.render = function (ctx) {\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        this.matrix.toContext(ctx);\n        var x1 = this.x1;\n        var y1 = this.y1;\n        var x2 = this.x2;\n        var y2 = this.y2;\n        // Align to the pixel grid if the line is strictly vertical\n        // or horizontal (but not both, i.e. a dot).\n        if (x1 === x2) {\n            var x = Math.round(x1) + Math.floor(this.strokeWidth) % 2 / 2;\n            x1 = x;\n            x2 = x;\n        }\n        else if (y1 === y2) {\n            var y = Math.round(y1) + Math.floor(this.strokeWidth) % 2 / 2;\n            y1 = y;\n            y2 = y;\n        }\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n        this.fillStroke(ctx);\n        this.dirty = false;\n    };\n    Line.className = 'Line';\n    Line.defaultStyles = chainObjects(Shape.defaultStyles, {\n        fill: undefined,\n        strokeWidth: 1\n    });\n    return Line;\n}(Shape));\nexport { Line };\n","var twoPi = Math.PI * 2;\n/**\n * Normalize the given angle to be in the [0, 2π) interval.\n * @param radians Angle in radians.\n */\nexport function normalizeAngle360(radians) {\n    radians %= twoPi;\n    radians += twoPi;\n    radians %= twoPi;\n    return radians;\n}\nexport function normalizeAngle360Inclusive(radians) {\n    radians %= twoPi;\n    radians += twoPi;\n    if (radians !== twoPi) {\n        radians %= twoPi;\n    }\n    return radians;\n}\n/**\n * Normalize the given angle to be in the [-π, π) interval.\n * @param radians Angle in radians.\n */\nexport function normalizeAngle180(radians) {\n    radians %= twoPi;\n    if (radians < -Math.PI) {\n        radians += twoPi;\n    }\n    else if (radians >= Math.PI) {\n        radians -= twoPi;\n    }\n    return radians;\n}\nexport function toRadians(degrees) {\n    return degrees / 180 * Math.PI;\n}\nexport function toDegrees(radians) {\n    return radians / Math.PI * 180;\n}\n","// @ts-ignore Suppress tsc error: Property 'sign' does not exist on type 'Math'\nvar sign = Math.sign ? Math.sign : function (x) {\n    x = +x;\n    if (x === 0 || isNaN(x)) {\n        return x;\n    }\n    return x > 0 ? 1 : -1;\n};\n/**\n * Finds the roots of a parametric linear equation in `t`,\n * where `t` lies in the interval of `[0,1]`.\n */\nexport function linearRoot(a, b) {\n    var t = -b / a;\n    return (a !== 0 && t >= 0 && t <= 1) ? [t] : [];\n}\n/**\n * Finds the roots of a parametric quadratic equation in `t`,\n * where `t` lies in the interval of `[0,1]`.\n */\nexport function quadraticRoots(a, b, c) {\n    if (a === 0) {\n        return linearRoot(b, c);\n    }\n    var D = b * b - 4 * a * c; // The polynomial's discriminant.\n    var roots = [];\n    if (D === 0) { // A single real root.\n        var t = -b / (2 * a);\n        if (t >= 0 && t <= 1) {\n            roots.push(t);\n        }\n    }\n    else if (D > 0) { // A pair of distinct real roots.\n        var rD = Math.sqrt(D);\n        var t1 = (-b - rD) / (2 * a);\n        var t2 = (-b + rD) / (2 * a);\n        if (t1 >= 0 && t1 <= 1) {\n            roots.push(t1);\n        }\n        if (t2 >= 0 && t2 <= 1) {\n            roots.push(t2);\n        }\n    }\n    // else -> Complex roots.\n    return roots;\n}\n/**\n * Finds the roots of a parametric cubic equation in `t`,\n * where `t` lies in the interval of `[0,1]`.\n * Returns an array of parametric intersection locations along the cubic,\n * excluding out-of-bounds intersections (before or after the end point\n * or in the imaginary plane).\n * An adaptation of http://www.particleincell.com/blog/2013/cubic-line-intersection/\n */\nexport function cubicRoots(a, b, c, d) {\n    if (a === 0) {\n        return quadraticRoots(b, c, d);\n    }\n    var A = b / a;\n    var B = c / a;\n    var C = d / a;\n    var Q = (3 * B - A * A) / 9;\n    var R = (9 * A * B - 27 * C - 2 * A * A * A) / 54;\n    var D = Q * Q * Q + R * R; // The polynomial's discriminant.\n    var third = 1 / 3;\n    var roots = [];\n    if (D >= 0) { // Complex or duplicate roots.\n        var rD = Math.sqrt(D);\n        var S = sign(R + rD) * Math.pow(Math.abs(R + rD), third);\n        var T = sign(R - rD) * Math.pow(Math.abs(R - rD), third);\n        var Im = Math.abs(Math.sqrt(3) * (S - T) / 2); // Complex part of the root pair.\n        var t = -third * A + (S + T); // A real root.\n        if (t >= 0 && t <= 1) {\n            roots.push(t);\n        }\n        if (Im === 0) {\n            var t_1 = -third * A - (S + T) / 2; // The real part of a complex root.\n            if (t_1 >= 0 && t_1 <= 1) {\n                roots.push(t_1);\n            }\n        }\n    }\n    else { // Distinct real roots.\n        var theta = Math.acos(R / Math.sqrt(-Q * Q * Q));\n        var thirdA = third * A;\n        var twoSqrtQ = 2 * Math.sqrt(-Q);\n        var t1 = twoSqrtQ * Math.cos(third * theta) - thirdA;\n        var t2 = twoSqrtQ * Math.cos(third * (theta + 2 * Math.PI)) - thirdA;\n        var t3 = twoSqrtQ * Math.cos(third * (theta + 4 * Math.PI)) - thirdA;\n        if (t1 >= 0 && t1 <= 1) {\n            roots.push(t1);\n        }\n        if (t2 >= 0 && t2 <= 1) {\n            roots.push(t2);\n        }\n        if (t3 >= 0 && t3 <= 1) {\n            roots.push(t3);\n        }\n    }\n    return roots;\n}\n","import { cubicRoots } from \"./polyRoots\";\n/**\n * Returns the intersection point for the given pair of line segments, or null,\n * if the segments are parallel or don't intersect.\n * Based on http://paulbourke.net/geometry/pointlineplane/\n */\nexport function segmentIntersection(ax1, ay1, ax2, ay2, bx1, by1, bx2, by2) {\n    var d = (ax2 - ax1) * (by2 - by1) - (ay2 - ay1) * (bx2 - bx1);\n    if (d === 0) { // The lines are parallel.\n        return null;\n    }\n    var ua = ((bx2 - bx1) * (ay1 - by1) - (ax1 - bx1) * (by2 - by1)) / d;\n    var ub = ((ax2 - ax1) * (ay1 - by1) - (ay2 - ay1) * (ax1 - bx1)) / d;\n    if (ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1) {\n        return {\n            x: ax1 + ua * (ax2 - ax1),\n            y: ay1 + ua * (ay2 - ay1)\n        };\n    }\n    return null; // The intersection point is outside either or both segments.\n}\n/**\n * Returns intersection points of the given cubic curve and the line segment.\n * Takes in x/y components of cubic control points and line segment start/end points\n * as parameters.\n */\nexport function cubicSegmentIntersections(px1, py1, px2, py2, px3, py3, px4, py4, x1, y1, x2, y2) {\n    var intersections = [];\n    // Find line equation coefficients.\n    var A = y1 - y2;\n    var B = x2 - x1;\n    var C = x1 * (y2 - y1) - y1 * (x2 - x1);\n    // Find cubic Bezier curve equation coefficients from control points.\n    var bx = bezierCoefficients(px1, px2, px3, px4);\n    var by = bezierCoefficients(py1, py2, py3, py4);\n    var a = A * bx[0] + B * by[0]; // t^3\n    var b = A * bx[1] + B * by[1]; // t^2\n    var c = A * bx[2] + B * by[2]; // t\n    var d = A * bx[3] + B * by[3] + C; // 1\n    var roots = cubicRoots(a, b, c, d);\n    // Verify that the roots are within bounds of the linear segment.\n    for (var i = 0; i < roots.length; i++) {\n        var t = roots[i];\n        var tt = t * t;\n        var ttt = t * tt;\n        // Find the cartesian plane coordinates for the parametric root `t`.\n        var x = bx[0] * ttt + bx[1] * tt + bx[2] * t + bx[3];\n        var y = by[0] * ttt + by[1] * tt + by[2] * t + by[3];\n        // The parametric cubic roots we found are intersection points\n        // with an infinite line, and so the x/y coordinates above are as well.\n        // Make sure the x/y is also within the bounds of the given segment.\n        var s = void 0;\n        if (x1 !== x2) {\n            s = (x - x1) / (x2 - x1);\n        }\n        else { // the line is vertical\n            s = (y - y1) / (y2 - y1);\n        }\n        if (s >= 0 && s <= 1) {\n            intersections.push({ x: x, y: y });\n        }\n    }\n    return intersections;\n}\n/**\n * Returns the given coordinates vector multiplied by the coefficient matrix\n * of the parametric cubic Bézier equation.\n */\nexport function bezierCoefficients(P1, P2, P3, P4) {\n    return [\n        -P1 + 3 * P2 - 3 * P3 + P4,\n        3 * P1 - 6 * P2 + 3 * P3,\n        -3 * P1 + 3 * P2,\n        P1 //                 | 1  0  0  0| |P4|\n    ];\n}\n","import { cubicSegmentIntersections, segmentIntersection } from \"./intersection\";\nvar Path2D = /** @class */ (function () {\n    function Path2D() {\n        // The methods of this class will likely be called many times per animation frame,\n        // and any allocation can trigger a GC cycle during animation, so we attempt\n        // to minimize the number of allocations.\n        this.commands = [];\n        this.params = [];\n        this._closedPath = false;\n    }\n    Path2D.prototype.moveTo = function (x, y) {\n        if (this.xy) {\n            this.xy[0] = x;\n            this.xy[1] = y;\n        }\n        else {\n            this.xy = [x, y];\n        }\n        this.commands.push('M');\n        this.params.push(x, y);\n    };\n    Path2D.prototype.lineTo = function (x, y) {\n        if (this.xy) {\n            this.commands.push('L');\n            this.params.push(x, y);\n            this.xy[0] = x;\n            this.xy[1] = y;\n        }\n        else {\n            this.moveTo(x, y);\n        }\n    };\n    Path2D.prototype.rect = function (x, y, width, height) {\n        this.moveTo(x, y);\n        this.lineTo(x + width, y);\n        this.lineTo(x + width, y + height);\n        this.lineTo(x, y + height);\n        this.closePath();\n    };\n    /**\n     * Adds an arc segment to the path definition.\n     * https://www.w3.org/TR/SVG11/paths.html#PathDataEllipticalArcCommands\n     * @param rx The major-axis radius.\n     * @param ry The minor-axis radius.\n     * @param rotation The x-axis rotation, expressed in radians.\n     * @param fA The large arc flag. `1` to use angle > π.\n     * @param fS The sweep flag. `1` for the arc that goes to `x`/`y` clockwise.\n     * @param x2 The x coordinate to arc to.\n     * @param y2 The y coordinate to arc to.\n     */\n    Path2D.prototype.arcTo = function (rx, ry, rotation, fA, fS, x2, y2) {\n        // Convert from endpoint to center parametrization:\n        // https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n        var xy = this.xy;\n        if (!xy) {\n            return;\n        }\n        if (rx < 0) {\n            rx = -rx;\n        }\n        if (ry < 0) {\n            ry = -ry;\n        }\n        var x1 = xy[0];\n        var y1 = xy[1];\n        var hdx = (x1 - x2) / 2;\n        var hdy = (y1 - y2) / 2;\n        var sinPhi = Math.sin(rotation);\n        var cosPhi = Math.cos(rotation);\n        var xp = cosPhi * hdx + sinPhi * hdy;\n        var yp = -sinPhi * hdx + cosPhi * hdy;\n        var ratX = xp / rx;\n        var ratY = yp / ry;\n        var lambda = ratX * ratX + ratY * ratY;\n        var cx = (x1 + x2) / 2;\n        var cy = (y1 + y2) / 2;\n        var cpx = 0;\n        var cpy = 0;\n        if (lambda >= 1) {\n            lambda = Math.sqrt(lambda);\n            rx *= lambda;\n            ry *= lambda;\n            // me gives lambda == cpx == cpy == 0;\n        }\n        else {\n            lambda = Math.sqrt(1 / lambda - 1);\n            if (fA === fS) {\n                lambda = -lambda;\n            }\n            cpx = lambda * rx * ratY;\n            cpy = -lambda * ry * ratX;\n            cx += cosPhi * cpx - sinPhi * cpy;\n            cy += sinPhi * cpx + cosPhi * cpy;\n        }\n        var theta1 = Math.atan2((yp - cpy) / ry, (xp - cpx) / rx);\n        var deltaTheta = Math.atan2((-yp - cpy) / ry, (-xp - cpx) / rx) - theta1;\n        // if (fS) {\n        //     if (deltaTheta <= 0) {\n        //         deltaTheta += Math.PI * 2;\n        //     }\n        // }\n        // else {\n        //     if (deltaTheta >= 0) {\n        //         deltaTheta -= Math.PI * 2;\n        //     }\n        // }\n        this.cubicArc(cx, cy, rx, ry, rotation, theta1, theta1 + deltaTheta, 1 - fS);\n    };\n    /**\n     * Approximates an elliptical arc with up to four cubic Bézier curves.\n     * @param commands The string array to write SVG command letters to.\n     * @param params The number array to write SVG command parameters (cubic control points) to.\n     * @param cx The x-axis coordinate for the ellipse's center.\n     * @param cy The y-axis coordinate for the ellipse's center.\n     * @param rx The ellipse's major-axis radius.\n     * @param ry The ellipse's minor-axis radius.\n     * @param phi The rotation for this ellipse, expressed in radians.\n     * @param theta1 The starting angle, measured clockwise from the positive x-axis and expressed in radians.\n     * @param theta2 The ending angle, measured clockwise from the positive x-axis and expressed in radians.\n     * @param anticlockwise The arc control points are always placed clockwise from `theta1` to `theta2`,\n     * even when `theta1 > theta2`, unless this flag is set to `1`.\n     */\n    Path2D.cubicArc = function (commands, params, cx, cy, rx, ry, phi, theta1, theta2, anticlockwise) {\n        if (anticlockwise) {\n            var temp = theta1;\n            theta1 = theta2;\n            theta2 = temp;\n        }\n        var start = params.length;\n        // See https://pomax.github.io/bezierinfo/#circles_cubic\n        // Arc of unit circle (start angle = 0, end angle <= π/2) in cubic Bézier coordinates:\n        // S = [1, 0]\n        // C1 = [1, f]\n        // C2 = [cos(θ) + f * sin(θ), sin(θ) - f * cos(θ)]\n        // E = [cos(θ), sin(θ)]\n        // f = 4/3 * tan(θ/4)\n        var f90 = 0.5522847498307935; // f for θ = π/2 is 4/3 * (Math.sqrt(2) - 1)\n        var sinTheta1 = Math.sin(theta1);\n        var cosTheta1 = Math.cos(theta1);\n        var sinPhi = Math.sin(phi);\n        var cosPhi = Math.cos(phi);\n        var rightAngle = Math.PI / 2;\n        // Since we know how to draw an arc of a unit circle with a cubic Bézier,\n        // to draw an elliptical arc with arbitrary rotation and radii we:\n        // 1) rotate the Bézier coordinates that represent a circular arc by θ\n        // 2) scale the circular arc separately along the x/y axes, making it elliptical\n        // 3) rotate elliptical arc by φ\n        // |cos(φ) -sin(φ)| |sx  0| |cos(θ) -sin(θ)| -> |xx xy|\n        // |sin(φ)  cos(φ)| | 0 sy| |sin(θ)  cos(θ)| -> |yx yy|\n        var xx = cosPhi * cosTheta1 * rx - sinPhi * sinTheta1 * ry;\n        var yx = sinPhi * cosTheta1 * rx + cosPhi * sinTheta1 * ry;\n        var xy = -cosPhi * sinTheta1 * rx - sinPhi * cosTheta1 * ry;\n        var yy = -sinPhi * sinTheta1 * rx + cosPhi * cosTheta1 * ry;\n        // TODO: what if delta between θ1 and θ2 is greater than 2π?\n        // Always draw clockwise from θ1 to θ2.\n        theta2 -= theta1;\n        if (theta2 < 0) {\n            theta2 += Math.PI * 2;\n        }\n        // Multiplying each point [x, y] by:\n        // |xx xy cx| |x|\n        // |yx yy cy| |y|\n        // | 0  0  1| |1|\n        // TODO: This move command may be redundant, if we are already at this point.\n        // The coordinates of the point calculated here may differ ever so slightly\n        // because of precision error.\n        commands.push('M');\n        params.push(xx + cx, yx + cy);\n        while (theta2 >= rightAngle) {\n            theta2 -= rightAngle;\n            commands.push('C');\n            // Temp workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=993330\n            // Revert this commit when fixed ^^.\n            var lastX = xy + cx;\n            params.push(xx + xy * f90 + cx, yx + yy * f90 + cy, xx * f90 + xy + cx, yx * f90 + yy + cy, Math.abs(lastX) < 1e-8 ? 0 : lastX, yy + cy);\n            // Prepend π/2 rotation matrix.\n            // |xx xy| | 0 1| -> | xy -xx|\n            // |yx yy| |-1 0| -> | yy -yx|\n            // [xx, yx, xy, yy] = [xy, yy, -xx, -yx];\n            // Compared to swapping with a temp variable, destructuring is:\n            // - 10% faster in Chrome 70\n            // - 99% slower in Firefox 63\n            // Temp variable solution is 45% faster in FF than Chrome.\n            // https://jsperf.com/multi-swap\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1165569\n            var temp = xx;\n            xx = xy;\n            xy = -temp;\n            temp = yx;\n            yx = yy;\n            yy = -temp;\n        }\n        if (theta2) {\n            var f = 4 / 3 * Math.tan(theta2 / 4);\n            var sinPhi2 = Math.sin(theta2);\n            var cosPhi2 = Math.cos(theta2);\n            var C2x = cosPhi2 + f * sinPhi2;\n            var C2y = sinPhi2 - f * cosPhi2;\n            commands.push('C');\n            // Temp workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=993330\n            // Revert this commit when fixed ^^.\n            var lastX = xx * cosPhi2 + xy * sinPhi2 + cx;\n            params.push(xx + xy * f + cx, yx + yy * f + cy, xx * C2x + xy * C2y + cx, yx * C2x + yy * C2y + cy, Math.abs(lastX) < 1e-8 ? 0 : lastX, yx * cosPhi2 + yy * sinPhi2 + cy);\n        }\n        if (anticlockwise) {\n            for (var i = start, j = params.length - 2; i < j; i += 2, j -= 2) {\n                var temp = params[i];\n                params[i] = params[j];\n                params[j] = temp;\n                temp = params[i + 1];\n                params[i + 1] = params[j + 1];\n                params[j + 1] = temp;\n            }\n        }\n    };\n    Path2D.prototype.cubicArc = function (cx, cy, rx, ry, phi, theta1, theta2, anticlockwise) {\n        var commands = this.commands;\n        var params = this.params;\n        var start = commands.length;\n        Path2D.cubicArc(commands, params, cx, cy, rx, ry, phi, theta1, theta2, anticlockwise);\n        var x = params[params.length - 2];\n        var y = params[params.length - 1];\n        if (this.xy) {\n            commands[start] = 'L';\n            this.xy[0] = x;\n            this.xy[1] = y;\n        }\n        else {\n            this.xy = [x, y];\n        }\n    };\n    /**\n     * Returns the `[x, y]` coordinates of the curve at `t`.\n     * @param points `(n + 1) * 2` control point coordinates for a Bézier curve of n-th order.\n     * @param t\n     */\n    Path2D.prototype.deCasteljau = function (points, t) {\n        var n = points.length;\n        if (n < 2 || n % 2 === 1) {\n            throw new Error('Fewer than two points or not an even count.');\n        }\n        else if (n === 2 || t === 0) {\n            return points.slice(0, 2);\n        }\n        else if (t === 1) {\n            return points.slice(-2);\n        }\n        else {\n            var newPoints = [];\n            var last = n - 2;\n            for (var i = 0; i < last; i += 2) {\n                newPoints.push((1 - t) * points[i] + t * points[i + 2], // x\n                (1 - t) * points[i + 1] + t * points[i + 3] // y\n                );\n            }\n            return this.deCasteljau(newPoints, t);\n        }\n    };\n    /**\n     * Approximates the given curve using `n` line segments.\n     * @param points `(n + 1) * 2` control point coordinates for a Bézier curve of n-th order.\n     * @param n\n     */\n    Path2D.prototype.approximateCurve = function (points, n) {\n        var xy = this.deCasteljau(points, 0);\n        this.moveTo(xy[0], xy[1]);\n        var step = 1 / n;\n        for (var t = step; t <= 1; t += step) {\n            var xy_1 = this.deCasteljau(points, t);\n            this.lineTo(xy_1[0], xy_1[1]);\n        }\n    };\n    /**\n     * Adds a quadratic curve segment to the path definition.\n     * Note: the given quadratic segment is converted and stored as a cubic one.\n     * @param cx x-component of the curve's control point\n     * @param cy y-component of the curve's control point\n     * @param x x-component of the end point\n     * @param y y-component of the end point\n     */\n    Path2D.prototype.quadraticCurveTo = function (cx, cy, x, y) {\n        if (!this.xy) {\n            this.moveTo(cx, cy);\n        }\n        // See https://pomax.github.io/bezierinfo/#reordering\n        this.cubicCurveTo((this.xy[0] + 2 * cx) / 3, (this.xy[1] + 2 * cy) / 3, // 1/3 start + 2/3 control\n        (2 * cx + x) / 3, (2 * cy + y) / 3, // 2/3 control + 1/3 end\n        x, y);\n    };\n    Path2D.prototype.cubicCurveTo = function (cx1, cy1, cx2, cy2, x, y) {\n        if (!this.xy) {\n            this.moveTo(cx1, cy1);\n        }\n        this.commands.push('C');\n        this.params.push(cx1, cy1, cx2, cy2, x, y);\n        this.xy[0] = x;\n        this.xy[1] = y;\n    };\n    Object.defineProperty(Path2D.prototype, \"closedPath\", {\n        get: function () {\n            return this._closedPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Path2D.prototype.closePath = function () {\n        if (this.xy) {\n            this.xy = undefined;\n            this.commands.push('Z');\n            this._closedPath = true;\n        }\n    };\n    Path2D.prototype.clear = function () {\n        this.commands.length = 0;\n        this.params.length = 0;\n        this.xy = undefined;\n        this._closedPath = false;\n    };\n    Path2D.prototype.isPointInPath = function (x, y) {\n        var commands = this.commands;\n        var params = this.params;\n        var cn = commands.length;\n        // Hit testing using ray casting method, where the ray's origin is some point\n        // outside the path. In this case, an offscreen point that is remote enough, so that\n        // even if the path itself is large and is partially offscreen, the ray's origin\n        // will likely be outside the path anyway. To test if the given point is inside the\n        // path or not, we cast a ray from the origin to the given point and check the number\n        // of intersections of this segment with the path. If the number of intersections is\n        // even, then the ray both entered and exited the path an equal number of times,\n        // therefore the point is outside the path, and inside the path, if the number of\n        // intersections is odd. Since the path is compound, we check if the ray segment\n        // intersects with each of the path's segments, which can be either a line segment\n        // (one or no intersection points) or a Bézier curve segment (up to 3 intersection\n        // points).\n        var ox = -10000;\n        var oy = -10000;\n        // the starting point of the  current path\n        var sx = NaN;\n        var sy = NaN;\n        // the previous point of the current path\n        var px = 0;\n        var py = 0;\n        var intersectionCount = 0;\n        for (var ci = 0, pi = 0; ci < cn; ci++) {\n            switch (commands[ci]) {\n                case 'M':\n                    if (!isNaN(sx)) {\n                        if (segmentIntersection(sx, sy, px, py, ox, oy, x, y)) {\n                            intersectionCount++;\n                        }\n                    }\n                    sx = px = params[pi++];\n                    sy = py = params[pi++];\n                    break;\n                case 'L':\n                    if (segmentIntersection(px, py, px = params[pi++], py = params[pi++], ox, oy, x, y)) {\n                        intersectionCount++;\n                    }\n                    break;\n                case 'C':\n                    intersectionCount += cubicSegmentIntersections(px, py, params[pi++], params[pi++], params[pi++], params[pi++], px = params[pi++], py = params[pi++], ox, oy, x, y).length;\n                    break;\n                case 'Z':\n                    if (!isNaN(sx)) {\n                        if (segmentIntersection(sx, sy, px, py, ox, oy, x, y)) {\n                            intersectionCount++;\n                        }\n                    }\n                    break;\n            }\n        }\n        return intersectionCount % 2 === 1;\n    };\n    Path2D.fromString = function (value) {\n        var path = new Path2D();\n        path.setFromString(value);\n        return path;\n    };\n    /**\n     * Split the SVG path at command letters,\n     * then extract the command letter and parameters from each substring.\n     * @param value\n     */\n    Path2D.parseSvgPath = function (value) {\n        return value.trim().split(Path2D.splitCommandsRe).map(function (part) {\n            var strParams = part.match(Path2D.matchParamsRe);\n            return {\n                command: part.substr(0, 1),\n                params: strParams ? strParams.map(parseFloat) : []\n            };\n        });\n    };\n    Path2D.prettifySvgPath = function (value) {\n        return Path2D.parseSvgPath(value).map(function (d) { return d.command + d.params.join(','); }).join('\\n');\n    };\n    /**\n     * See https://www.w3.org/TR/SVG11/paths.html\n     * @param value\n     */\n    Path2D.prototype.setFromString = function (value) {\n        var _this = this;\n        this.clear();\n        var parts = Path2D.parseSvgPath(value);\n        // Current point.\n        var x;\n        var y;\n        // Last control point. Used to calculate the reflection point\n        // for `S`, `s`, `T`, `t` commands.\n        var cpx;\n        var cpy;\n        var lastCommand;\n        function checkQuadraticCP() {\n            if (!lastCommand.match(Path2D.quadraticCommandRe)) {\n                cpx = x;\n                cpy = y;\n            }\n        }\n        function checkCubicCP() {\n            if (!lastCommand.match(Path2D.cubicCommandRe)) {\n                cpx = x;\n                cpy = y;\n            }\n        }\n        // But that will make compiler complain about x/y, cpx/cpy\n        // being used without being set first.\n        parts.forEach(function (part) {\n            var p = part.params;\n            var n = p.length;\n            var i = 0;\n            switch (part.command) {\n                case 'M':\n                    _this.moveTo(x = p[i++], y = p[i++]);\n                    while (i < n) {\n                        _this.lineTo(x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 'm':\n                    _this.moveTo(x += p[i++], y += p[i++]);\n                    while (i < n) {\n                        _this.lineTo(x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'L':\n                    while (i < n) {\n                        _this.lineTo(x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 'l':\n                    while (i < n) {\n                        _this.lineTo(x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'C':\n                    while (i < n) {\n                        _this.cubicCurveTo(p[i++], p[i++], cpx = p[i++], cpy = p[i++], x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 'c':\n                    while (i < n) {\n                        _this.cubicCurveTo(x + p[i++], y + p[i++], cpx = x + p[i++], cpy = y + p[i++], x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'S':\n                    checkCubicCP();\n                    while (i < n) {\n                        _this.cubicCurveTo(x + x - cpx, y + y - cpy, cpx = p[i++], cpy = p[i++], x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 's':\n                    checkCubicCP();\n                    while (i < n) {\n                        _this.cubicCurveTo(x + x - cpx, y + y - cpy, cpx = x + p[i++], cpy = y + p[i++], x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'Q':\n                    while (i < n) {\n                        _this.quadraticCurveTo(cpx = p[i++], cpy = p[i++], x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 'q':\n                    while (i < n) {\n                        _this.quadraticCurveTo(cpx = x + p[i++], cpy = y + p[i++], x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'T':\n                    checkQuadraticCP();\n                    while (i < n) {\n                        _this.quadraticCurveTo(cpx = x + x - cpx, cpy = y + y - cpy, x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 't':\n                    checkQuadraticCP();\n                    while (i < n) {\n                        _this.quadraticCurveTo(cpx = x + x - cpx, cpy = y + y - cpy, x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'A':\n                    while (i < n) {\n                        _this.arcTo(p[i++], p[i++], p[i++] * Math.PI / 180, p[i++], p[i++], x = p[i++], y = p[i++]);\n                    }\n                    break;\n                case 'a':\n                    while (i < n) {\n                        _this.arcTo(p[i++], p[i++], p[i++] * Math.PI / 180, p[i++], p[i++], x += p[i++], y += p[i++]);\n                    }\n                    break;\n                case 'Z':\n                case 'z':\n                    _this.closePath();\n                    break;\n                case 'H':\n                    while (i < n) {\n                        _this.lineTo(x = p[i++], y);\n                    }\n                    break;\n                case 'h':\n                    while (i < n) {\n                        _this.lineTo(x += p[i++], y);\n                    }\n                    break;\n                case 'V':\n                    while (i < n) {\n                        _this.lineTo(x, y = p[i++]);\n                    }\n                    break;\n                case 'v':\n                    while (i < n) {\n                        _this.lineTo(x, y += p[i++]);\n                    }\n                    break;\n            }\n            lastCommand = part.command;\n        });\n    };\n    Path2D.prototype.toString = function () {\n        var c = this.commands;\n        var p = this.params;\n        var cn = c.length;\n        var out = [];\n        for (var ci = 0, pi = 0; ci < cn; ci++) {\n            switch (c[ci]) {\n                case 'M':\n                    out.push('M' + p[pi++] + ',' + p[pi++]);\n                    break;\n                case 'L':\n                    out.push('L' + p[pi++] + ',' + p[pi++]);\n                    break;\n                case 'C':\n                    out.push('C' + p[pi++] + ',' + p[pi++] + ' ' +\n                        p[pi++] + ',' + p[pi++] + ' ' +\n                        p[pi++] + ',' + p[pi++]);\n                    break;\n                case 'Z':\n                    out.push('Z');\n                    break;\n            }\n        }\n        return out.join('');\n    };\n    Path2D.prototype.toPrettyString = function () {\n        return Path2D.prettifySvgPath(this.toString());\n    };\n    Path2D.prototype.toSvg = function () {\n        return Path2D.xmlDeclaration + \"\\n<svg width=\\\"100%\\\" height=\\\"100%\\\" viewBox=\\\"0 0 50 50\\\" version=\\\"1.1\\\" xmlns=\\\"\" + Path2D.xmlns + \"\\\">\\n    <path d=\\\"\" + this.toString() + \"\\\" style=\\\"fill:none;stroke:#000;stroke-width:0.5;\\\"/>\\n</svg>\";\n    };\n    Path2D.prototype.toDebugSvg = function () {\n        var d = Path2D.prettifySvgPath(this.toString());\n        return Path2D.xmlDeclaration + \"\\n<svg width=\\\"100%\\\" height=\\\"100%\\\" viewBox=\\\"0 0 100 100\\\" version=\\\"1.1\\\" xmlns=\\\"\" + Path2D.xmlns + \"\\\">\\n    <path d=\\\"\" + d + \"\\\" style=\\\"fill:none;stroke:#000;stroke-width:0.5;\\\"/>\\n</svg>\";\n    };\n    /**\n     * Returns an array of sub-paths of this Path,\n     * where each sub-path is represented exclusively by cubic segments.\n     */\n    Path2D.prototype.toCubicPaths = function () {\n        // Each sub-path is an array of `(n * 3 + 1) * 2` numbers,\n        // where `n` is the number of segments.\n        var paths = [];\n        var params = this.params;\n        // current path\n        var path;\n        // the starting point of the  current path\n        var sx;\n        var sy;\n        // the previous point of the current path\n        var px;\n        var py;\n        var i = 0; // current parameter\n        this.commands.forEach(function (command) {\n            switch (command) {\n                case 'M':\n                    path = [\n                        sx = px = params[i++],\n                        sy = py = params[i++]\n                    ];\n                    paths.push(path);\n                    break;\n                case 'L':\n                    var x = params[i++];\n                    var y = params[i++];\n                    // Place control points along the line `a + (b - a) * t`\n                    // at t = 1/3 and 2/3:\n                    path.push((px + px + x) / 3, (py + py + y) / 3, (px + x + x) / 3, (py + y + y) / 3, px = x, py = y);\n                    break;\n                case 'C':\n                    path.push(params[i++], params[i++], params[i++], params[i++], px = params[i++], py = params[i++]);\n                    break;\n                case 'Z':\n                    path.push((px + px + sx) / 3, (py + py + sy) / 3, (px + sx + sx) / 3, (py + sy + sy) / 3, px = sx, py = sy);\n                    break;\n            }\n        });\n        return paths;\n    };\n    Path2D.cubicPathToString = function (path) {\n        var n = path.length;\n        if (!(n % 2 === 0 && (n / 2 - 1) / 2 >= 1)) {\n            throw new Error('Invalid path.');\n        }\n        return 'M' + path.slice(0, 2).join(',') + 'C' + path.slice(2).join(',');\n    };\n    Path2D.splitCommandsRe = /(?=[AaCcHhLlMmQqSsTtVvZz])/g;\n    Path2D.matchParamsRe = /-?[0-9]*\\.?\\d+/g;\n    Path2D.quadraticCommandRe = /[QqTt]/;\n    Path2D.cubicCommandRe = /[CcSs]/;\n    Path2D.xmlDeclaration = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>';\n    Path2D.xmlns = 'http://www.w3.org/2000/svg';\n    return Path2D;\n}());\nexport { Path2D };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Shape } from \"./shape\";\nimport { Path2D } from \"../path2D\";\nvar Path = /** @class */ (function (_super) {\n    __extends(Path, _super);\n    function Path() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * Declare a path to retain for later rendering and hit testing\n         * using custom Path2D class. Think of it as a TypeScript version\n         * of the native Path2D (with some differences) that works in all browsers.\n         */\n        _this.path = new Path2D();\n        /**\n        * The path only has to be updated when certain attributes change.\n        * For example, if transform attributes (such as `translationX`)\n        * are changed, we don't have to update the path. The `dirtyPath` flag\n        * is how we keep track if the path has to be updated or not.\n        */\n        _this._dirtyPath = true;\n        /**\n         * Path definition in SVG path syntax:\n         * https://www.w3.org/TR/SVG11/paths.html#DAttribute\n         */\n        _this._svgPath = '';\n        return _this;\n    }\n    Object.defineProperty(Path.prototype, \"dirtyPath\", {\n        get: function () {\n            return this._dirtyPath;\n        },\n        set: function (value) {\n            if (this._dirtyPath !== value) {\n                this._dirtyPath = value;\n                if (value) {\n                    this.dirty = true;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Path.prototype, \"svgPath\", {\n        get: function () {\n            return this._svgPath;\n        },\n        set: function (value) {\n            if (this._svgPath !== value) {\n                this._svgPath = value;\n                this.path.setFromString(value);\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Path.prototype.isPointInPath = function (x, y) {\n        var point = this.transformPoint(x, y);\n        return this.path.closedPath && this.path.isPointInPath(point.x, point.y);\n    };\n    Path.prototype.isPointInStroke = function (x, y) {\n        return false;\n    };\n    Path.prototype.updatePath = function () { };\n    Path.prototype.render = function (ctx) {\n        var scene = this.scene;\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        // if (scene.debug.renderBoundingBoxes) {\n        //     const bbox = this.computeBBox();\n        //     if (bbox) {\n        //         this.matrix.transformBBox(bbox).render(ctx);\n        //     }\n        // }\n        this.matrix.toContext(ctx);\n        if (this.dirtyPath) {\n            this.updatePath();\n            this.dirtyPath = false;\n        }\n        scene.appendPath(this.path);\n        this.fillStroke(ctx);\n        this.dirty = false;\n    };\n    Path.className = 'Path';\n    return Path;\n}(Shape));\nexport { Path };\n","export function isEqual(a, b, epsilon) {\n    if (epsilon === void 0) { epsilon = 1e-10; }\n    return Math.abs(a - b) < epsilon;\n}\n/**\n * `Number.toFixed(n)` always formats a number so that it has `n` digits after the decimal point.\n * For example, `Number(0.00003427).toFixed(2)` returns `0.00`.\n * That's not very helpful, because all the meaningful information is lost.\n * In this case we would want the formatted value to have at least two significant digits: `0.000034`,\n * not two fraction digits.\n * @param value\n * @param fractionOrSignificantDigits\n */\nexport function toFixed(value, fractionOrSignificantDigits) {\n    if (fractionOrSignificantDigits === void 0) { fractionOrSignificantDigits = 2; }\n    var power = Math.floor(Math.log(Math.abs(value)) / Math.LN10);\n    if (power >= 0 || !isFinite(power)) {\n        return value.toFixed(fractionOrSignificantDigits); // fraction digits\n    }\n    return value.toFixed(Math.abs(power) - 1 + fractionOrSignificantDigits); // significant digits\n}\nvar numberUnits = [\"\", \"K\", \"M\", \"B\", \"T\"];\nexport function log10(x) {\n    return Math.log(x) * Math.LOG10E;\n}\nexport function toReadableNumber(value, fractionDigits) {\n    if (fractionDigits === void 0) { fractionDigits = 2; }\n    // For example: toReadableNumber(10550000000) yields \"10.6B\"\n    var prefix = '';\n    if (value <= 0) {\n        value = -value;\n        prefix = '-';\n    }\n    var thousands = ~~(log10(value) / log10(1000)); // discard the floating point part\n    return prefix + (value / Math.pow(1000.0, thousands)).toFixed(fractionDigits) + numberUnits[thousands];\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Shape } from \"./shape\";\nimport { Path } from \"./path\";\nimport { BBox } from \"../bbox\";\nimport { normalizeAngle360 } from \"../../util/angle\";\nimport { chainObjects } from \"../../util/object\";\nimport { isEqual } from \"../../util/number\";\nexport var ArcType;\n(function (ArcType) {\n    ArcType[ArcType[\"Open\"] = 0] = \"Open\";\n    ArcType[ArcType[\"Chord\"] = 1] = \"Chord\";\n    ArcType[ArcType[\"Round\"] = 2] = \"Round\";\n})(ArcType || (ArcType = {}));\n/**\n * Elliptical arc node.\n */\nvar Arc = /** @class */ (function (_super) {\n    __extends(Arc, _super);\n    function Arc() {\n        var _this = _super.call(this) || this;\n        _this._centerX = 0;\n        _this._centerY = 0;\n        _this._radiusX = 10;\n        _this._radiusY = 10;\n        _this._startAngle = 0;\n        _this._endAngle = Math.PI * 2;\n        _this._counterClockwise = false;\n        /**\n         * The type of arc to render:\n         * - {@link ArcType.Open} - end points of the arc segment are not connected (default)\n         * - {@link ArcType.Chord} - end points of the arc segment are connected by a line segment\n         * - {@link ArcType.Round} - each of the end points of the arc segment are connected\n         *                           to the center of the arc\n         * Arcs with {@link ArcType.Open} do not support hit testing, even if they have their\n         * {@link Shape.fillStyle} set, because they are not closed paths. Hit testing support\n         * would require using two paths - one for rendering, another for hit testing - and there\n         * doesn't seem to be a compelling reason to do that, when one can just use {@link ArcType.Chord}\n         * to create a closed path.\n         */\n        _this._type = ArcType.Open;\n        _this.restoreOwnStyles();\n        return _this;\n    }\n    Object.defineProperty(Arc.prototype, \"centerX\", {\n        get: function () {\n            return this._centerX;\n        },\n        set: function (value) {\n            if (this._centerX !== value) {\n                this._centerX = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"centerY\", {\n        get: function () {\n            return this._centerY;\n        },\n        set: function (value) {\n            if (this._centerY !== value) {\n                this._centerY = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"radiusX\", {\n        get: function () {\n            return this._radiusX;\n        },\n        set: function (value) {\n            if (this._radiusX !== value) {\n                this._radiusX = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"radiusY\", {\n        get: function () {\n            return this._radiusY;\n        },\n        set: function (value) {\n            if (this._radiusY !== value) {\n                this._radiusY = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"startAngle\", {\n        get: function () {\n            return this._startAngle;\n        },\n        set: function (value) {\n            if (this._startAngle !== value) {\n                this._startAngle = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"endAngle\", {\n        get: function () {\n            return this._endAngle;\n        },\n        set: function (value) {\n            if (this._endAngle !== value) {\n                this._endAngle = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"fullPie\", {\n        get: function () {\n            return isEqual(normalizeAngle360(this.startAngle), normalizeAngle360(this.endAngle));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"counterClockwise\", {\n        get: function () {\n            return this._counterClockwise;\n        },\n        set: function (value) {\n            if (this._counterClockwise !== value) {\n                this._counterClockwise = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Arc.prototype, \"type\", {\n        get: function () {\n            return this._type;\n        },\n        set: function (value) {\n            if (this._type !== value) {\n                this._type = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Arc.prototype.updatePath = function () {\n        var path = this.path;\n        path.clear(); // No need to recreate the Path, can simply clear the existing one.\n        // This is much faster than the native Path2D implementation even though this `cubicArc`\n        // method is pure TypeScript and actually produces the definition of an elliptical arc,\n        // where you can specify two radii and rotation, while Path2D's `arc` method simply produces\n        // a circular arc. Maybe it's due to the experimental nature of the Path2D class,\n        // maybe it's because we have to create a new instance of it on each render, who knows...\n        path.cubicArc(this.centerX, this.centerY, this.radiusX, this.radiusY, 0, this.startAngle, this.endAngle, this.counterClockwise ? 1 : 0);\n        if (this.type === ArcType.Chord) {\n            path.closePath();\n        }\n        else if (this.type === ArcType.Round && !this.fullPie) {\n            path.lineTo(this.centerX, this.centerY);\n            path.closePath();\n        }\n    };\n    Arc.prototype.computeBBox = function () {\n        // Only works with full arcs (circles) and untransformed ellipses.\n        return new BBox(this.centerX - this.radiusX, this.centerY - this.radiusY, this.radiusX * 2, this.radiusY * 2);\n    };\n    Arc.prototype.isPointInPath = function (x, y) {\n        var point = this.transformPoint(x, y);\n        var bbox = this.computeBBox();\n        return this.type !== ArcType.Open\n            && bbox.containsPoint(point.x, point.y)\n            && this.path.isPointInPath(point.x, point.y);\n    };\n    Arc.className = 'Arc';\n    Arc.defaultStyles = chainObjects(Shape.defaultStyles, {\n        lineWidth: 1,\n        fillStyle: null\n    });\n    return Arc;\n}(Path));\nexport { Arc };\n","import { Group } from \"./scene/group\";\nimport { Selection } from \"./scene/selection\";\nimport { Line } from \"./scene/shape/line\";\nimport { normalizeAngle360, normalizeAngle360Inclusive, toRadians } from \"./util/angle\";\nimport { Text } from \"./scene/shape/text\";\nimport { Arc } from \"./scene/shape/arc\";\nimport { BBox } from \"./scene/bbox\";\nimport { Matrix } from \"./scene/matrix\";\nimport { createId } from \"./util/id\";\n// import { Rect } from \"./scene/shape/rect\"; // debug (bbox)\nvar Tags;\n(function (Tags) {\n    Tags[Tags[\"Tick\"] = 0] = \"Tick\";\n    Tags[Tags[\"GridLine\"] = 1] = \"GridLine\";\n})(Tags || (Tags = {}));\nvar AxisTick = /** @class */ (function () {\n    function AxisTick() {\n        /**\n         * The line width to be used by axis ticks.\n         */\n        this.width = 1;\n        /**\n         * The line length to be used by axis ticks.\n         */\n        this.size = 6;\n        /**\n         * The color of the axis ticks.\n         * Use `undefined` rather than `rgba(0, 0, 0, 0)` to make the ticks invisible.\n         */\n        this.color = 'rgba(195, 195, 195, 1)';\n        /**\n         * A hint of how many ticks to use (the exact number of ticks might differ),\n         * a `TimeInterval` or a `CountableTimeInterval`.\n         * For example:\n         *\n         *     axis.tick.count = 5;\n         *     axis.tick.count = year;\n         *     axis.tick.count = month.every(6);\n         */\n        this.count = 10;\n    }\n    return AxisTick;\n}());\nexport { AxisTick };\nvar AxisLabel = /** @class */ (function () {\n    function AxisLabel() {\n        this.fontSize = 12;\n        this.fontFamily = 'Verdana, sans-serif';\n        /**\n         * The padding between the labels and the ticks.\n         */\n        this.padding = 5;\n        /**\n         * The color of the labels.\n         * Use `undefined` rather than `rgba(0, 0, 0, 0)` to make labels invisible.\n         */\n        this.color = 'rgba(87, 87, 87, 1)';\n        /**\n         * Custom label rotation in degrees.\n         * Labels are rendered perpendicular to the axis line by default.\n         * Or parallel to the axis line, if the {@link parallel} is set to `true`.\n         * The value of this config is used as the angular offset/deflection\n         * from the default rotation.\n         */\n        this.rotation = 0;\n        /**\n         * By default labels and ticks are positioned to the left of the axis line.\n         * `true` positions the labels to the right of the axis line.\n         * However, if the axis is rotated, its easier to think in terms\n         * of this side or the opposite side, rather than left and right.\n         * We use the term `mirror` for conciseness, although it's not\n         * true mirroring - for example, when a label is rotated, so that\n         * it is inclined at the 45 degree angle, text flowing from north-west\n         * to south-east, ending at the tick to the left of the axis line,\n         * and then we set this config to `true`, the text will still be flowing\n         * from north-west to south-east, _starting_ at the tick to the right\n         * of the axis line.\n         */\n        this.mirrored = false;\n        /**\n         * Labels are rendered perpendicular to the axis line by default.\n         * Setting this config to `true` makes labels render parallel to the axis line\n         * and center aligns labels' text at the ticks.\n         */\n        this.parallel = false;\n    }\n    Object.defineProperty(AxisLabel.prototype, \"format\", {\n        get: function () {\n            return this._format;\n        },\n        set: function (value) {\n            // See `TimeLocaleObject` docs for the list of supported format directives.\n            if (this._format !== value) {\n                this._format = value;\n                if (this.onFormatChange) {\n                    this.onFormatChange(value);\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return AxisLabel;\n}());\nexport { AxisLabel };\n/**\n * A general purpose linear axis with no notion of orientation.\n * The axis is always rendered vertically, with horizontal labels positioned to the left\n * of the axis line by default. The axis can be {@link rotation | rotated} by an arbitrary angle,\n * so that it can be used as a top, right, bottom, left, radial or any other kind\n * of linear axis.\n * The generic `D` parameter is the type of the domain of the axis' scale.\n * The output range of the axis' scale is always numeric (screen coordinates).\n */\nvar Axis = /** @class */ (function () {\n    function Axis(scale) {\n        // debug (bbox)\n        // private bboxRect = (() => {\n        //     const rect = new Rect();\n        //     rect.fill = undefined;\n        //     rect.stroke = 'red';\n        //     rect.strokeWidth = 1;\n        //     rect.strokeOpacity = 0.2;\n        //     return rect;\n        // })();\n        this.id = createId(this);\n        this.lineNode = new Line();\n        this.group = new Group();\n        this.line = {\n            width: 1,\n            color: 'rgba(195, 195, 195, 1)'\n        };\n        this.tick = new AxisTick();\n        this.label = new AxisLabel();\n        this.translation = { x: 0, y: 0 };\n        this.rotation = 0; // axis rotation angle in degrees\n        this._visibleRange = [0, 1];\n        this._title = undefined;\n        /**\n         * The length of the grid. The grid is only visible in case of a non-zero value.\n         * In case {@link radialGrid} is `true`, the value is interpreted as an angle\n         * (in degrees).\n         */\n        this._gridLength = 0;\n        /**\n         * The array of styles to cycle through when rendering grid lines.\n         * For example, use two {@link GridStyle} objects for alternating styles.\n         * Contains only one {@link GridStyle} object by default, meaning all grid lines\n         * have the same style.\n         */\n        this.gridStyle = [{\n                stroke: 'rgba(219, 219, 219, 1)',\n                lineDash: [4, 2]\n            }];\n        /**\n         * `false` - render grid as lines of {@link gridLength} that extend the ticks\n         *           on the opposite side of the axis\n         * `true` - render grid as concentric circles that go through the ticks\n         */\n        this._radialGrid = false;\n        this.scale = scale;\n        this.requestedRange = scale.range.slice();\n        this.groupSelection = Selection.select(this.group).selectAll();\n        this.label.onFormatChange = this.onTickFormatChange.bind(this);\n        this.group.append(this.lineNode);\n        this.onTickFormatChange();\n        // this.group.append(this.bboxRect); // debug (bbox)\n    }\n    Axis.prototype.getMeta = function () { };\n    Axis.prototype.updateRange = function () {\n        var _a = this, rr = _a.requestedRange, vr = _a.visibleRange, scale = _a.scale;\n        var span = (rr[1] - rr[0]) / (vr[1] - vr[0]);\n        var shift = span * vr[0];\n        var start = rr[0] - shift;\n        scale.range = [start, start + span];\n    };\n    /**\n     * Checks if a point or an object is in range.\n     * @param x A point (or object's starting point).\n     * @param width Object's width.\n     * @param tolerance Expands the range on both ends by this amount.\n     */\n    Axis.prototype.inRange = function (x, width, tolerance) {\n        if (width === void 0) { width = 0; }\n        if (tolerance === void 0) { tolerance = 0; }\n        return this.inRangeEx(x, width, tolerance) === 0;\n    };\n    Axis.prototype.inRangeEx = function (x, width, tolerance) {\n        if (width === void 0) { width = 0; }\n        if (tolerance === void 0) { tolerance = 0; }\n        var range = this.range;\n        if ((x + width) < (range[0] - tolerance)) {\n            return -1; // left or range\n        }\n        if (x > (range[1] + tolerance)) {\n            return 1; // right of range\n        }\n        return 0; // in range\n    };\n    Object.defineProperty(Axis.prototype, \"range\", {\n        get: function () {\n            return this.requestedRange.slice();\n        },\n        set: function (value) {\n            this.requestedRange = value.slice();\n            this.updateRange();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Axis.prototype, \"visibleRange\", {\n        get: function () {\n            return this._visibleRange.slice();\n        },\n        set: function (value) {\n            if (value && value.length === 2) {\n                var min = value[0], max = value[1];\n                min = Math.max(0, min);\n                max = Math.min(1, max);\n                min = Math.min(min, max);\n                max = Math.max(min, max);\n                this._visibleRange = [min, max];\n                this.updateRange();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Axis.prototype, \"domain\", {\n        get: function () {\n            return this.scale.domain.slice();\n        },\n        set: function (value) {\n            this.scale.domain = value.slice();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Axis.prototype.onTickFormatChange = function (format) {\n        if (format) {\n            if (this.scale.tickFormat) {\n                this.tickFormatter = this.scale.tickFormat(10, format);\n            }\n        }\n        else {\n            if (this.scale.tickFormat) {\n                this.tickFormatter = this.scale.tickFormat(10, undefined);\n            }\n            else {\n                this.tickFormatter = undefined;\n            }\n        }\n    };\n    Object.defineProperty(Axis.prototype, \"title\", {\n        get: function () {\n            return this._title;\n        },\n        set: function (value) {\n            var oldTitle = this._title;\n            if (oldTitle !== value) {\n                if (oldTitle) {\n                    this.group.removeChild(oldTitle.node);\n                }\n                if (value) {\n                    value.node.rotation = -Math.PI / 2;\n                    this.group.appendChild(value.node);\n                }\n                this._title = value;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Axis.prototype, \"gridLength\", {\n        get: function () {\n            return this._gridLength;\n        },\n        set: function (value) {\n            // Was visible and now invisible, or was invisible and now visible.\n            if (this._gridLength && !value || !this._gridLength && value) {\n                this.groupSelection = this.groupSelection.remove().setData([]);\n            }\n            this._gridLength = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Axis.prototype, \"radialGrid\", {\n        get: function () {\n            return this._radialGrid;\n        },\n        set: function (value) {\n            if (this._radialGrid !== value) {\n                this._radialGrid = value;\n                this.groupSelection = this.groupSelection.remove().setData([]);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates/removes/updates the scene graph nodes that constitute the axis.\n     * Supposed to be called _manually_ after changing _any_ of the axis properties.\n     * This allows to bulk set axis properties before updating the nodes.\n     * The node changes made by this method are rendered on the next animation frame.\n     * We could schedule this method call automatically on the next animation frame\n     * when any of the axis properties change (the way we do when properties of scene graph's\n     * nodes change), but this will mean that we first wait for the next animation\n     * frame to make changes to the nodes of the axis, then wait for another animation\n     * frame to render those changes. It's nice to have everything update automatically,\n     * but this extra level of async indirection will not just introduce an unwanted delay,\n     * it will also make it harder to reason about the program.\n     */\n    Axis.prototype.update = function () {\n        var _this = this;\n        var _a = this, group = _a.group, scale = _a.scale, tick = _a.tick, label = _a.label, gridStyle = _a.gridStyle, requestedRange = _a.requestedRange;\n        var requestedRangeMin = Math.min(requestedRange[0], requestedRange[1]);\n        var requestedRangeMax = Math.max(requestedRange[0], requestedRange[1]);\n        var rotation = toRadians(this.rotation);\n        var parallelLabels = label.parallel;\n        var labelRotation = normalizeAngle360(toRadians(label.rotation));\n        group.translationX = this.translation.x;\n        group.translationY = this.translation.y;\n        group.rotation = rotation;\n        var halfBandwidth = (scale.bandwidth || 0) / 2;\n        // The side of the axis line to position the labels on.\n        // -1 = left (default)\n        //  1 = right\n        var sideFlag = label.mirrored ? 1 : -1;\n        // When labels are parallel to the axis line, the `parallelFlipFlag` is used to\n        // flip the labels to avoid upside-down text, when the axis is rotated\n        // such that it is in the right hemisphere, i.e. the angle of rotation\n        // is in the [0, π] interval.\n        // The rotation angle is normalized, so that we have an easier time checking\n        // if it's in the said interval. Since the axis is always rendered vertically\n        // and then rotated, zero rotation means 12 (not 3) o-clock.\n        // -1 = flip\n        //  1 = don't flip (default)\n        var parallelFlipRotation = normalizeAngle360(rotation);\n        var parallelFlipFlag = !labelRotation && parallelFlipRotation >= 0 && parallelFlipRotation <= Math.PI ? -1 : 1;\n        var regularFlipRotation = normalizeAngle360(rotation - Math.PI / 2);\n        // Flip if the axis rotation angle is in the top hemisphere.\n        var regularFlipFlag = !labelRotation && regularFlipRotation >= 0 && regularFlipRotation <= Math.PI ? -1 : 1;\n        var alignFlag = labelRotation >= 0 && labelRotation <= Math.PI ? -1 : 1;\n        var ticks = scale.ticks(this.tick.count);\n        var update = this.groupSelection.setData(ticks);\n        update.exit.remove();\n        var enter = update.enter.append(Group);\n        // Line auto-snaps to pixel grid if vertical or horizontal.\n        enter.append(Line).each(function (node) { return node.tag = Tags.Tick; });\n        if (this.gridLength) {\n            if (this.radialGrid) {\n                enter.append(Arc).each(function (node) { return node.tag = Tags.GridLine; });\n            }\n            else {\n                enter.append(Line).each(function (node) { return node.tag = Tags.GridLine; });\n            }\n        }\n        enter.append(Text);\n        var groupSelection = update.merge(enter);\n        groupSelection\n            .attrFn('translationY', function (_, datum) {\n            return Math.round(scale.convert(datum) + halfBandwidth);\n        })\n            .attrFn('visible', function (node) {\n            return node.translationY >= requestedRangeMin && node.translationY <= requestedRangeMax;\n        });\n        groupSelection.selectByTag(Tags.Tick)\n            .each(function (line) {\n            line.strokeWidth = tick.width;\n            line.stroke = tick.color;\n        })\n            .attr('x1', sideFlag * tick.size)\n            .attr('x2', 0)\n            .attr('y1', 0)\n            .attr('y2', 0);\n        if (this.gridLength && gridStyle.length) {\n            var styleCount_1 = gridStyle.length;\n            var gridLines = void 0;\n            if (this.radialGrid) {\n                var angularGridLength_1 = normalizeAngle360Inclusive(toRadians(this.gridLength));\n                gridLines = groupSelection.selectByTag(Tags.GridLine)\n                    .each(function (arc, datum) {\n                    var radius = Math.round(scale.convert(datum) + halfBandwidth);\n                    arc.centerX = 0;\n                    arc.centerY = scale.range[0] - radius;\n                    arc.endAngle = angularGridLength_1;\n                    arc.radiusX = radius;\n                    arc.radiusY = radius;\n                });\n            }\n            else {\n                gridLines = groupSelection.selectByTag(Tags.GridLine)\n                    .each(function (line) {\n                    line.x1 = 0;\n                    line.x2 = -sideFlag * _this.gridLength;\n                    line.y1 = 0;\n                    line.y2 = 0;\n                    line.visible = Math.abs(line.parent.translationY - scale.range[0]) > 1;\n                });\n            }\n            gridLines.each(function (gridLine, _, index) {\n                var style = gridStyle[index % styleCount_1];\n                gridLine.stroke = style.stroke;\n                gridLine.strokeWidth = tick.width;\n                gridLine.lineDash = style.lineDash;\n                gridLine.fill = undefined;\n            });\n        }\n        var tickFormatter = this.tickFormatter;\n        var meta = this.getMeta();\n        // `ticks instanceof NumericTicks` doesn't work here, so we feature detect.\n        var fractionDigits = ticks.fractionDigits >= 0 ? ticks.fractionDigits : 0;\n        var labelSelection = groupSelection.selectByClass(Text)\n            .each(function (node, datum, index) {\n            node.fontStyle = label.fontStyle;\n            node.fontWeight = label.fontWeight;\n            node.fontSize = label.fontSize;\n            node.fontFamily = label.fontFamily;\n            node.fill = label.color;\n            node.textBaseline = parallelLabels && !labelRotation\n                ? (sideFlag * parallelFlipFlag === -1 ? 'hanging' : 'bottom')\n                : 'middle';\n            node.text = label.formatter\n                ? label.formatter({\n                    value: fractionDigits >= 0 ? datum : String(datum),\n                    index: index,\n                    fractionDigits: fractionDigits,\n                    formatter: tickFormatter,\n                    axis: meta\n                })\n                : fractionDigits\n                    // the `datum` is a floating point number\n                    ? datum.toFixed(fractionDigits)\n                    // the `datum` is an integer, a string or an object\n                    : tickFormatter\n                        ? tickFormatter(datum)\n                        : String(datum);\n            node.textAlign = parallelLabels\n                ? labelRotation ? (sideFlag * alignFlag === -1 ? 'end' : 'start') : 'center'\n                : sideFlag * regularFlipFlag === -1 ? 'end' : 'start';\n        });\n        var labelX = sideFlag * (tick.size + label.padding);\n        var autoRotation = parallelLabels\n            ? parallelFlipFlag * Math.PI / 2\n            : (regularFlipFlag === -1 ? Math.PI : 0);\n        labelSelection.each(function (label) {\n            label.x = labelX;\n            label.rotationCenterX = labelX;\n            label.rotation = autoRotation + labelRotation;\n        });\n        this.groupSelection = groupSelection;\n        // Render axis line.\n        var lineNode = this.lineNode;\n        lineNode.x1 = 0;\n        lineNode.x2 = 0;\n        lineNode.y1 = requestedRange[0];\n        lineNode.y2 = requestedRange[1];\n        lineNode.strokeWidth = this.line.width;\n        lineNode.stroke = this.line.color;\n        lineNode.visible = ticks.length > 0;\n        var title = this.title;\n        var titleVisible = false;\n        if (title && title.enabled) {\n            titleVisible = true;\n            var padding = title.padding.bottom;\n            var titleNode = title.node;\n            var bbox = this.computeBBox({ excludeTitle: true });\n            var titleRotationFlag = sideFlag === -1 && parallelFlipRotation > Math.PI && parallelFlipRotation < Math.PI * 2 ? -1 : 1;\n            titleNode.rotation = titleRotationFlag * sideFlag * Math.PI / 2;\n            titleNode.x = titleRotationFlag * sideFlag * (lineNode.y1 + lineNode.y2) / 2;\n            titleNode.x = titleRotationFlag * sideFlag * (requestedRange[0] + requestedRange[1]) / 2;\n            if (sideFlag === -1) {\n                titleNode.y = titleRotationFlag * (-padding - bbox.width + Math.max(bbox.x + bbox.width, 0));\n            }\n            else {\n                titleNode.y = -padding - bbox.width - Math.min(bbox.x, 0);\n            }\n            titleNode.textBaseline = titleRotationFlag === 1 ? 'bottom' : 'top';\n        }\n        if (title) {\n            title.node.visible = titleVisible;\n        }\n        // debug (bbox)\n        // const bbox = this.computeBBox();\n        // const bboxRect = this.bboxRect;\n        // bboxRect.x = bbox.x;\n        // bboxRect.y = bbox.y;\n        // bboxRect.width = bbox.width;\n        // bboxRect.height = bbox.height;\n    };\n    Axis.prototype.computeBBox = function (options) {\n        var _a = this, title = _a.title, lineNode = _a.lineNode;\n        var labels = this.groupSelection.selectByClass(Text);\n        var left = Infinity;\n        var right = -Infinity;\n        var top = Infinity;\n        var bottom = -Infinity;\n        labels.each(function (label) {\n            // The label itself is rotated, but not translated, the group that\n            // contains it is. So to capture the group transform in the label bbox\n            // calculation we combine the transform matrices of the label and the group.\n            // Depending on the timing of the `axis.computeBBox()` method call, we may\n            // not have the group's and the label's transform matrices updated yet (because\n            // the transform matrix is not recalculated whenever a node's transform attributes\n            // change, instead it's marked for recalculation on the next frame by setting\n            // the node's `dirtyTransform` flag to `true`), so we force them to update\n            // right here by calling `computeTransformMatrix`.\n            label.computeTransformMatrix();\n            var matrix = Matrix.flyweight(label.matrix);\n            var group = label.parent;\n            group.computeTransformMatrix();\n            matrix.preMultiplySelf(group.matrix);\n            var labelBBox = label.computeBBox();\n            if (labelBBox) {\n                var bbox = matrix.transformBBox(labelBBox);\n                left = Math.min(left, bbox.x);\n                right = Math.max(right, bbox.x + bbox.width);\n                top = Math.min(top, bbox.y);\n                bottom = Math.max(bottom, bbox.y + bbox.height);\n            }\n        });\n        if (title && title.enabled && (!options || !options.excludeTitle)) {\n            var label = title.node;\n            label.computeTransformMatrix();\n            var matrix = Matrix.flyweight(label.matrix);\n            var labelBBox = label.computeBBox();\n            if (labelBBox) {\n                var bbox = matrix.transformBBox(labelBBox);\n                left = Math.min(left, bbox.x);\n                right = Math.max(right, bbox.x + bbox.width);\n                top = Math.min(top, bbox.y);\n                bottom = Math.max(bottom, bbox.y + bbox.height);\n            }\n        }\n        left = Math.min(left, 0);\n        right = Math.max(right, 0);\n        top = Math.min(top, lineNode.y1, lineNode.y2);\n        bottom = Math.max(bottom, lineNode.y1, lineNode.y2);\n        return new BBox(left, top, right - left, bottom - top);\n    };\n    return Axis;\n}());\nexport { Axis };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Axis } from \"../axis\";\nexport var ChartAxisDirection;\n(function (ChartAxisDirection) {\n    ChartAxisDirection[\"X\"] = \"x\";\n    ChartAxisDirection[\"Y\"] = \"y\"; // means 'radius' in polar charts\n})(ChartAxisDirection || (ChartAxisDirection = {}));\nexport function flipChartAxisDirection(direction) {\n    if (direction === ChartAxisDirection.X) {\n        return ChartAxisDirection.Y;\n    }\n    else {\n        return ChartAxisDirection.X;\n    }\n}\nexport var ChartAxisPosition;\n(function (ChartAxisPosition) {\n    ChartAxisPosition[\"Top\"] = \"top\";\n    ChartAxisPosition[\"Right\"] = \"right\";\n    ChartAxisPosition[\"Bottom\"] = \"bottom\";\n    ChartAxisPosition[\"Left\"] = \"left\";\n    ChartAxisPosition[\"Angle\"] = \"angle\";\n    ChartAxisPosition[\"Radius\"] = \"radius\";\n})(ChartAxisPosition || (ChartAxisPosition = {}));\nvar ChartAxis = /** @class */ (function (_super) {\n    __extends(ChartAxis, _super);\n    function ChartAxis() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.keys = [];\n        _this.boundSeries = [];\n        return _this;\n    }\n    Object.defineProperty(ChartAxis.prototype, \"type\", {\n        get: function () {\n            return this.constructor.type || '';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ChartAxis.prototype.getMeta = function () {\n        return {\n            id: this.id,\n            direction: this.direction,\n            boundSeries: this.boundSeries,\n        };\n    };\n    Object.defineProperty(ChartAxis.prototype, \"position\", {\n        get: function () {\n            return this._position;\n        },\n        set: function (value) {\n            if (this._position !== value) {\n                this._position = value;\n                switch (value) {\n                    case ChartAxisPosition.Top:\n                        this.direction = ChartAxisDirection.X;\n                        this.rotation = -90;\n                        this.label.mirrored = true;\n                        this.label.parallel = true;\n                        break;\n                    case ChartAxisPosition.Right:\n                        this.direction = ChartAxisDirection.Y;\n                        this.rotation = 0;\n                        this.label.mirrored = true;\n                        this.label.parallel = false;\n                        break;\n                    case ChartAxisPosition.Bottom:\n                        this.direction = ChartAxisDirection.X;\n                        this.rotation = -90;\n                        this.label.mirrored = false;\n                        this.label.parallel = true;\n                        break;\n                    case ChartAxisPosition.Left:\n                        this.direction = ChartAxisDirection.Y;\n                        this.rotation = 0;\n                        this.label.mirrored = false;\n                        this.label.parallel = false;\n                        break;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ChartAxis;\n}(Axis));\nexport { ChartAxis };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { LinearScale } from \"../../scale/linearScale\";\nimport { ChartAxis } from \"../chartAxis\";\nvar NumberAxis = /** @class */ (function (_super) {\n    __extends(NumberAxis, _super);\n    function NumberAxis() {\n        var _this = _super.call(this, new LinearScale()) || this;\n        _this._nice = true;\n        _this._min = NaN;\n        _this._max = NaN;\n        _this.scale.clamp = true;\n        return _this;\n    }\n    Object.defineProperty(NumberAxis.prototype, \"nice\", {\n        get: function () {\n            return this._nice;\n        },\n        set: function (value) {\n            if (this._nice !== value) {\n                this._nice = value;\n                if (value && this.scale.nice) {\n                    this.scale.nice(10);\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NumberAxis.prototype, \"domain\", {\n        get: function () {\n            return this.scale.domain;\n        },\n        set: function (value) {\n            var _a = this, min = _a.min, max = _a.max;\n            value = [\n                isNaN(min) ? value[0] : min,\n                isNaN(max) ? value[1] : max\n            ];\n            this.scale.domain = value;\n            if (this.nice && this.scale.nice) {\n                this.scale.nice(10);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NumberAxis.prototype, \"min\", {\n        get: function () {\n            return this._min;\n        },\n        set: function (value) {\n            if (this._min !== value) {\n                this._min = value;\n                if (!isNaN(value)) {\n                    this.scale.domain = [value, this.scale.domain[1]];\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NumberAxis.prototype, \"max\", {\n        get: function () {\n            return this._max;\n        },\n        set: function (value) {\n            if (this._max !== value) {\n                this._max = value;\n                if (!isNaN(value)) {\n                    this.scale.domain = [this.scale.domain[0], value];\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    NumberAxis.className = 'NumberAxis';\n    NumberAxis.type = 'number';\n    return NumberAxis;\n}(ChartAxis));\nexport { NumberAxis };\n","/**\n * Maps a discrete domain to a continuous numeric range.\n * See https://github.com/d3/d3-scale#band-scales for more info.\n */\nvar BandScale = /** @class */ (function () {\n    function BandScale() {\n        /**\n         * Maps datum to its index in the {@link domain} array.\n         * Used to check for duplicate datums (not allowed).\n         */\n        this.index = new Map();\n        /**\n         * The output range values for datum at each index.\n         */\n        this.ordinalRange = [];\n        /**\n         * Contains unique datums only. Since `{}` is used in place of `Map`\n         * for IE11 compatibility, the datums are converted `toString` before\n         * the uniqueness check.\n         */\n        this._domain = [];\n        this._range = [0, 1];\n        this._bandwidth = 1;\n        /**\n         * The ratio of the range that is reserved for space between bands.\n         */\n        this._paddingInner = 0;\n        /**\n         * The ratio of the range that is reserved for space before the first\n         * and after the last band.\n         */\n        this._paddingOuter = 0;\n        this._round = false;\n        /**\n         * How the leftover range is distributed.\n         * `0.5` - equal distribution of space before the first and after the last band,\n         * with bands effectively centered within the range.\n         */\n        this._align = 0.5;\n    }\n    Object.defineProperty(BandScale.prototype, \"domain\", {\n        get: function () {\n            return this._domain;\n        },\n        set: function (values) {\n            var domain = this._domain;\n            domain.length = 0;\n            this.index = new Map();\n            var index = this.index;\n            // In case one wants to have duplicate domain values, for example, two 'Italy' categories,\n            // one should use objects rather than strings for domain values like so:\n            // { toString: () => 'Italy' }\n            // { toString: () => 'Italy' }\n            values.forEach(function (value) {\n                if (index.get(value) === undefined) {\n                    index.set(value, domain.push(value) - 1);\n                }\n            });\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BandScale.prototype, \"range\", {\n        get: function () {\n            return this._range;\n        },\n        set: function (values) {\n            this._range[0] = values[0];\n            this._range[1] = values[1];\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BandScale.prototype.ticks = function () {\n        return this._domain;\n    };\n    BandScale.prototype.convert = function (d) {\n        var i = this.index.get(d);\n        if (i === undefined) {\n            return NaN;\n        }\n        var r = this.ordinalRange[i];\n        if (r === undefined) {\n            return NaN;\n        }\n        return r;\n    };\n    Object.defineProperty(BandScale.prototype, \"bandwidth\", {\n        get: function () {\n            return this._bandwidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BandScale.prototype, \"padding\", {\n        get: function () {\n            return this._paddingInner;\n        },\n        set: function (value) {\n            value = Math.max(0, Math.min(1, value));\n            this._paddingInner = value;\n            this._paddingOuter = value;\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BandScale.prototype, \"paddingInner\", {\n        get: function () {\n            return this._paddingInner;\n        },\n        set: function (value) {\n            this._paddingInner = Math.max(0, Math.min(1, value)); // [0, 1]\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BandScale.prototype, \"paddingOuter\", {\n        get: function () {\n            return this._paddingOuter;\n        },\n        set: function (value) {\n            this._paddingOuter = Math.max(0, Math.min(1, value)); // [0, 1]\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BandScale.prototype, \"round\", {\n        get: function () {\n            return this._round;\n        },\n        set: function (value) {\n            this._round = value;\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BandScale.prototype, \"align\", {\n        get: function () {\n            return this._align;\n        },\n        set: function (value) {\n            this._align = Math.max(0, Math.min(1, value)); // [0, 1]\n            this.rescale();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BandScale.prototype.rescale = function () {\n        var _a;\n        var n = this._domain.length;\n        if (!n) {\n            return;\n        }\n        var _b = this._range, a = _b[0], b = _b[1];\n        var reversed = b < a;\n        if (reversed) {\n            _a = [b, a], a = _a[0], b = _a[1];\n        }\n        var step = (b - a) / Math.max(1, n - this._paddingInner + this._paddingOuter * 2);\n        if (this._round) {\n            step = Math.floor(step);\n        }\n        a += (b - a - step * (n - this._paddingInner)) * this._align;\n        this._bandwidth = step * (1 - this._paddingInner);\n        if (this._round) {\n            a = Math.round(a);\n            this._bandwidth = Math.round(this._bandwidth);\n        }\n        var values = [];\n        for (var i = 0; i < n; i++) {\n            values.push(a + step * i);\n        }\n        this.ordinalRange = reversed ? values.reverse() : values;\n    };\n    return BandScale;\n}());\nexport { BandScale };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BandScale } from \"../../scale/bandScale\";\nimport { ChartAxis } from \"../chartAxis\";\nvar CategoryAxis = /** @class */ (function (_super) {\n    __extends(CategoryAxis, _super);\n    function CategoryAxis() {\n        var _this = this;\n        var scale = new BandScale();\n        scale.paddingInner = 0.2;\n        scale.paddingOuter = 0.3;\n        _this = _super.call(this, scale) || this;\n        return _this;\n    }\n    Object.defineProperty(CategoryAxis.prototype, \"paddingInner\", {\n        get: function () {\n            return this.scale.paddingInner;\n        },\n        set: function (value) {\n            this.scale.paddingInner = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CategoryAxis.prototype, \"paddingOuter\", {\n        get: function () {\n            return this.scale.paddingOuter;\n        },\n        set: function (value) {\n            this.scale.paddingOuter = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CategoryAxis.className = 'CategoryAxis';\n    CategoryAxis.type = 'category';\n    return CategoryAxis;\n}(ChartAxis));\nexport { CategoryAxis };\n","// Custom `Array.find` implementation for legacy browsers.\nexport function find(arr, predicate) {\n    for (var i = 0; i < arr.length; i++) {\n        var value = arr[i];\n        if (predicate(value, i, arr)) {\n            return value;\n        }\n    }\n}\nexport function findIndex(arr, predicate) {\n    for (var i = 0; i < arr.length; i++) {\n        if (predicate(arr[i], i, arr)) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Returns the minimum and maximum value in the given iterable using natural order.\n * If the iterable contains no comparable values, returns `undefined`.\n * @param values\n */\nexport function extent(values) {\n    var n = values.length;\n    var i = -1;\n    var value;\n    var min;\n    var max;\n    while (++i < n) { // Find the first comparable finite value.\n        if ((value = values[i]) != null && value >= value) {\n            min = max = value;\n            while (++i < n) { // Compare the remaining values.\n                if ((value = values[i]) != null) {\n                    if (min > value) {\n                        min = value;\n                    }\n                    if (max < value) {\n                        max = value;\n                    }\n                }\n            }\n        }\n    }\n    return typeof min === 'undefined' || typeof max === 'undefined' ? undefined : [min, max];\n}\nexport function finiteExtent(values) {\n    var n = values.length;\n    var i = -1;\n    var value;\n    var min;\n    var max;\n    while (++i < n) { // Find the first comparable finite value.\n        if ((value = values[i]) != null && value >= value && isFinite(value)) {\n            min = max = value;\n            while (++i < n) { // Compare the remaining values.\n                if ((value = values[i]) != null && isFinite(value)) {\n                    if (min > value) {\n                        min = value;\n                    }\n                    if (max < value) {\n                        max = value;\n                    }\n                }\n            }\n        }\n    }\n    return min === undefined || max === undefined ? undefined : [min, max];\n}\n/**\n * This method will only return `undefined` if there's not a single valid finite number present\n * in the given array of values. Date values will be converted to timestamps.\n * @param values\n */\nexport function numericExtent(values) {\n    var calculatedExtent = finiteExtent(values);\n    if (typeof calculatedExtent === 'undefined') {\n        return;\n    }\n    var a = calculatedExtent[0], b = calculatedExtent[1];\n    var min = a instanceof Date ? a.getTime() : a;\n    var max = b instanceof Date ? b.getTime() : b;\n    if (typeof min === 'number' && isFinite(min) && typeof max === 'number' && isFinite(max)) {\n        return [min, max];\n    }\n}\n/**\n * finds the min and max using a process appropriate for stacked values. Ie,\n * summing up the positive and negative numbers, and returning the totals of each\n */\nexport function findMinMax(values) {\n    var min = 0;\n    var max = 0;\n    for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n        var value = values_1[_i];\n        if (value < 0) {\n            min += value;\n        }\n        else {\n            max += value;\n        }\n    }\n    return { min: min, max: max };\n}\nexport function copy(array, start, count) {\n    if (start === void 0) { start = 0; }\n    if (count === void 0) { count = array.length; }\n    var result = [];\n    var n = array.length;\n    if (n) {\n        for (var i = 0; i < count; i++) {\n            result.push(array[(start + i) % n]);\n        }\n    }\n    return result;\n}\n","import { find } from \"../util/array\";\n/**\n * The tree layout is calculated in abstract x/y coordinates, where the root is at (0, 0)\n * and the tree grows downward from the root.\n */\nvar TreeNode = /** @class */ (function () {\n    function TreeNode(label, parent, number) {\n        if (label === void 0) { label = ''; }\n        if (number === void 0) { number = 0; }\n        this.x = 0;\n        this.y = 0;\n        this.subtreeLeft = NaN;\n        this.subtreeRight = NaN;\n        this.screenX = 0;\n        this.screenY = 0;\n        this.children = [];\n        this.leafCount = 0;\n        this.prelim = 0;\n        this.mod = 0;\n        this.ancestor = this;\n        this.change = 0;\n        this.shift = 0;\n        this.label = label;\n        // screenX and screenY are meant to be recomputed from (layout) x and y\n        // when the tree is resized (without performing another layout)\n        this.parent = parent;\n        this.depth = parent ? parent.depth + 1 : 0;\n        this.number = number;\n    }\n    TreeNode.prototype.getLeftSibling = function () {\n        return this.number > 0 && this.parent ? this.parent.children[this.number - 1] : undefined;\n    };\n    TreeNode.prototype.getLeftmostSibling = function () {\n        return this.number > 0 && this.parent ? this.parent.children[0] : undefined;\n    };\n    // traverse the left contour of a subtree, return the successor of v on this contour\n    TreeNode.prototype.nextLeft = function () {\n        return this.children ? this.children[0] : this.thread;\n    };\n    // traverse the right contour of a subtree, return the successor of v on this contour\n    TreeNode.prototype.nextRight = function () {\n        return this.children ? this.children[this.children.length - 1] : this.thread;\n    };\n    TreeNode.prototype.getSiblings = function () {\n        var _this = this;\n        return this.parent ? this.parent.children.filter(function (_, i) { return i !== _this.number; }) : [];\n    };\n    return TreeNode;\n}());\n/**\n * Converts an array of ticks, where each tick has an array of labels, to a label tree.\n * If `pad` is `true`, will ensure that every branch matches the depth of the tree by\n * creating empty labels.\n */\nexport function ticksToTree(ticks, pad) {\n    if (pad === void 0) { pad = true; }\n    var root = new TreeNode();\n    var depth = 0;\n    if (pad) {\n        ticks.forEach(function (tick) { return depth = Math.max(depth, tick.labels.length); });\n    }\n    ticks.forEach(function (tick) {\n        if (pad) {\n            while (tick.labels.length < depth) {\n                tick.labels.unshift('');\n            }\n        }\n        insertTick(root, tick);\n    });\n    return root;\n}\nfunction insertTick(root, tick) {\n    var pathParts = tick.labels.slice().reverse(); // path elements from root to leaf label\n    var lastPartIndex = pathParts.length - 1;\n    pathParts.forEach(function (pathPart, partIndex) {\n        var children = root.children;\n        var existingNode = find(children, function (child) { return child.label === pathPart; });\n        var isNotLeaf = partIndex !== lastPartIndex;\n        if (existingNode && isNotLeaf) { // the isNotLeaf check is to allow duplicate leafs\n            root = existingNode;\n        }\n        else {\n            var node = new TreeNode(pathPart, root);\n            node.number = children.length;\n            children.push(node);\n            if (isNotLeaf) {\n                root = node;\n            }\n        }\n    });\n}\n// Shift the subtree.\nfunction moveSubtree(wm, wp, shift) {\n    var subtrees = wp.number - wm.number;\n    var ratio = shift / subtrees;\n    wp.change -= ratio;\n    wp.shift += shift;\n    wm.change += ratio;\n    wp.prelim += shift;\n    wp.mod += shift;\n}\nfunction ancestor(vim, v, defaultAncestor) {\n    return v.getSiblings().indexOf(vim.ancestor) >= 0 ? vim.ancestor : defaultAncestor;\n}\n// Spaces out the children.\nfunction executeShifts(v) {\n    var children = v.children;\n    if (children) {\n        var shift = 0;\n        var change = 0;\n        for (var i = children.length - 1; i >= 0; i--) {\n            var w = children[i];\n            w.prelim += shift;\n            w.mod += shift;\n            change += w.change;\n            shift += w.shift + change;\n        }\n    }\n}\n// Moves current subtree with v as the root if some nodes are conflicting in space.\nfunction apportion(v, defaultAncestor, distance) {\n    var w = v.getLeftSibling();\n    if (w) {\n        var vop = v;\n        var vip = v;\n        var vim = w;\n        var vom = vip.getLeftmostSibling();\n        var sip = vip.mod;\n        var sop = vop.mod;\n        var sim = vim.mod;\n        var som = vom.mod;\n        while (vim.nextRight() && vip.nextLeft()) {\n            vim = vim.nextRight();\n            vip = vip.nextLeft();\n            vom = vom.nextLeft();\n            vop = vop.nextRight();\n            vop.ancestor = v;\n            var shift = (vim.prelim + sim) - (vip.prelim + sip) + distance;\n            if (shift > 0) {\n                moveSubtree(ancestor(vim, v, defaultAncestor), v, shift);\n                sip += shift;\n                sop += shift;\n            }\n            sim += vim.mod;\n            sip += vip.mod;\n            som += vom.mod;\n            sop += vop.mod;\n        }\n        if (vim.nextRight() && !vop.nextRight()) {\n            vop.thread = vim.nextRight();\n            vop.mod += sim - sop;\n        }\n        else {\n            if (vip.nextLeft() && !vom.nextLeft()) {\n                vom.thread = vip.nextLeft();\n                vom.mod += sip - som;\n            }\n            defaultAncestor = v;\n        }\n    }\n    return defaultAncestor;\n}\n// Compute the preliminary x-coordinate of node and its children (recursively).\nfunction firstWalk(node, distance) {\n    var children = node.children;\n    if (children.length) {\n        var defaultAncestor_1 = children[0];\n        children.forEach(function (child) {\n            firstWalk(child, distance);\n            defaultAncestor_1 = apportion(child, defaultAncestor_1, distance);\n        });\n        executeShifts(node);\n        var midpoint = (children[0].prelim + children[children.length - 1].prelim) / 2;\n        var leftSibling = node.getLeftSibling();\n        if (leftSibling) {\n            node.prelim = leftSibling.prelim + distance;\n            node.mod = node.prelim - midpoint;\n        }\n        else {\n            node.prelim = midpoint;\n        }\n    }\n    else {\n        var leftSibling = node.getLeftSibling();\n        node.prelim = leftSibling ? leftSibling.prelim + distance : 0;\n    }\n}\nvar Dimensions = /** @class */ (function () {\n    function Dimensions() {\n        this.top = Infinity;\n        this.right = -Infinity;\n        this.bottom = -Infinity;\n        this.left = Infinity;\n    }\n    Dimensions.prototype.update = function (node, xy) {\n        var _a = xy(node), x = _a.x, y = _a.y;\n        if (x > this.right) {\n            this.right = x;\n        }\n        if (x < this.left) {\n            this.left = x;\n        }\n        if (y > this.bottom) {\n            this.bottom = y;\n        }\n        if (y < this.top) {\n            this.top = y;\n        }\n    };\n    return Dimensions;\n}());\nfunction secondWalk(v, m, layout) {\n    v.x = v.prelim + m;\n    v.y = v.depth;\n    layout.update(v);\n    v.children.forEach(function (w) { return secondWalk(w, m + v.mod, layout); });\n}\n// After the second walk the parent nodes are positioned at the center of their immediate children.\n// If we want the parent nodes to be positioned at the center of the subtree for which they are roots,\n// we need a third walk to adjust the positions.\nfunction thirdWalk(v) {\n    var children = v.children;\n    var leafCount = 0;\n    children.forEach(function (w) {\n        thirdWalk(w);\n        if (w.children.length) {\n            leafCount += w.leafCount;\n        }\n        else {\n            leafCount++;\n        }\n    });\n    v.leafCount = leafCount;\n    if (children.length) {\n        v.subtreeLeft = children[0].subtreeLeft;\n        v.subtreeRight = children[v.children.length - 1].subtreeRight;\n        v.x = (v.subtreeLeft + v.subtreeRight) / 2;\n    }\n    else {\n        v.subtreeLeft = v.x;\n        v.subtreeRight = v.x;\n    }\n}\nexport function treeLayout(root) {\n    var layout = new TreeLayout;\n    firstWalk(root, 1);\n    secondWalk(root, -root.prelim, layout);\n    thirdWalk(root);\n    return layout;\n}\nvar TreeLayout = /** @class */ (function () {\n    function TreeLayout() {\n        this.dimensions = new Dimensions;\n        this.leafCount = 0;\n        this.nodes = [];\n        // One might want to process leaf nodes separately from the rest of the tree.\n        // For example, position labels corresponding to leafs vertically, rather than horizontally.\n        this.leafNodes = [];\n        this.nonLeafNodes = [];\n        this.depth = 0;\n    }\n    TreeLayout.prototype.update = function (node) {\n        this.dimensions.update(node, function (node) { return ({ x: node.x, y: node.y }); });\n        if (!node.children.length) {\n            this.leafCount++;\n            this.leafNodes.push(node);\n        }\n        else {\n            this.nonLeafNodes.push(node);\n        }\n        if (node.depth > this.depth) {\n            this.depth = node.depth;\n        }\n        this.nodes.push(node);\n    };\n    TreeLayout.prototype.resize = function (width, height, shiftX, shiftY, flipX) {\n        if (shiftX === void 0) { shiftX = 0; }\n        if (shiftY === void 0) { shiftY = 0; }\n        if (flipX === void 0) { flipX = false; }\n        var xSteps = this.leafCount - 1;\n        var ySteps = this.depth;\n        var dimensions = this.dimensions;\n        var scalingX = 1;\n        var scalingY = 1;\n        if (width > 0 && xSteps) {\n            var existingSpacingX = (dimensions.right - dimensions.left) / xSteps;\n            var desiredSpacingX = width / xSteps;\n            scalingX = desiredSpacingX / existingSpacingX;\n            if (flipX) {\n                scalingX = -scalingX;\n            }\n        }\n        if (height > 0 && ySteps) {\n            var existingSpacingY = (dimensions.bottom - dimensions.top) / ySteps;\n            var desiredSpacingY = height / ySteps;\n            scalingY = desiredSpacingY / existingSpacingY;\n        }\n        var screenDimensions = new Dimensions();\n        this.nodes.forEach(function (node) {\n            node.screenX = node.x * scalingX;\n            node.screenY = node.y * scalingY;\n            screenDimensions.update(node, function (node) { return ({ x: node.screenX, y: node.screenY }); });\n        });\n        // Normalize so that root top and leftmost leaf left start at zero.\n        var offsetX = -screenDimensions.left;\n        var offsetY = -screenDimensions.top;\n        this.nodes.forEach(function (node) {\n            node.screenX += offsetX + shiftX;\n            node.screenY += offsetY + shiftY;\n        });\n    };\n    return TreeLayout;\n}());\nexport { TreeLayout };\nfunction logTree(root, formatter) {\n    root.children.forEach(function (child) { return logTree(child, formatter); });\n    if (formatter) {\n        console.log(formatter(root));\n    }\n    else {\n        console.log(root);\n    }\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Group } from \"../../scene/group\";\nimport { Selection } from \"../../scene/selection\";\nimport { Line } from \"../../scene/shape/line\";\nimport { normalizeAngle360, toRadians } from \"../../util/angle\";\nimport { Text } from \"../../scene/shape/text\";\nimport { BBox } from \"../../scene/bbox\";\nimport { Matrix } from \"../../scene/matrix\";\n// import { Rect } from \"../../scene/shape/rect\"; debug (bbox)\nimport { BandScale } from \"../../scale/bandScale\";\nimport { ticksToTree, treeLayout } from \"../../layout/tree\";\nimport { AxisLabel } from \"../../axis\";\nimport { ChartAxis } from \"../chartAxis\";\nimport { createId } from \"../../util/id\";\nvar GroupedCategoryAxisLabel = /** @class */ (function (_super) {\n    __extends(GroupedCategoryAxisLabel, _super);\n    function GroupedCategoryAxisLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.grid = false;\n        return _this;\n    }\n    return GroupedCategoryAxisLabel;\n}(AxisLabel));\n/**\n * A general purpose linear axis with no notion of orientation.\n * The axis is always rendered vertically, with horizontal labels positioned to the left\n * of the axis line by default. The axis can be {@link rotation | rotated} by an arbitrary angle,\n * so that it can be used as a top, right, bottom, left, radial or any other kind\n * of linear axis.\n * The generic `D` parameter is the type of the domain of the axis' scale.\n * The output range of the axis' scale is always numeric (screen coordinates).\n */\nvar GroupedCategoryAxis = /** @class */ (function (_super) {\n    __extends(GroupedCategoryAxis, _super);\n    function GroupedCategoryAxis() {\n        var _this = _super.call(this, new BandScale()) || this;\n        _this.id = createId(_this);\n        _this.tickScale = new BandScale();\n        _this.group = new Group();\n        _this.longestSeparatorLength = 0;\n        _this.translation = {\n            x: 0,\n            y: 0\n        };\n        /**\n         * Axis rotation angle in degrees.\n         */\n        _this.rotation = 0;\n        _this.line = {\n            width: 1,\n            color: 'rgba(195, 195, 195, 1)'\n        };\n        // readonly tick = new AxisTick();\n        _this.label = new GroupedCategoryAxisLabel();\n        /**\n         * The color of the labels.\n         * Use `undefined` rather than `rgba(0, 0, 0, 0)` to make labels invisible.\n         */\n        _this.labelColor = 'rgba(87, 87, 87, 1)';\n        var _a = _this, group = _a.group, scale = _a.scale, tickScale = _a.tickScale;\n        scale.paddingOuter = 0.1;\n        scale.paddingInner = scale.paddingOuter * 2;\n        _this.requestedRange = scale.range.slice();\n        tickScale.paddingInner = 1;\n        tickScale.paddingOuter = 0;\n        _this.gridLineSelection = Selection.select(group).selectAll();\n        _this.axisLineSelection = Selection.select(group).selectAll();\n        _this.separatorSelection = Selection.select(group).selectAll();\n        _this.labelSelection = Selection.select(group).selectAll();\n        return _this;\n        // this.group.append(this.bboxRect); // debug (bbox)\n    }\n    Object.defineProperty(GroupedCategoryAxis.prototype, \"domain\", {\n        get: function () {\n            return this.scale.domain;\n        },\n        set: function (value) {\n            this.scale.domain = value;\n            var tickTree = ticksToTree(value);\n            this.tickTreeLayout = treeLayout(tickTree);\n            var domain = value.slice();\n            domain.push('');\n            this.tickScale.domain = domain;\n            this.resizeTickTree();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GroupedCategoryAxis.prototype, \"range\", {\n        get: function () {\n            return this.requestedRange.slice();\n        },\n        set: function (value) {\n            this.requestedRange = value.slice();\n            this.updateRange();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    GroupedCategoryAxis.prototype.updateRange = function () {\n        var _a = this, rr = _a.requestedRange, vr = _a.visibleRange, scale = _a.scale;\n        var span = (rr[1] - rr[0]) / (vr[1] - vr[0]);\n        var shift = span * vr[0];\n        var start = rr[0] - shift;\n        this.tickScale.range = scale.range = [start, start + span];\n        this.resizeTickTree();\n    };\n    GroupedCategoryAxis.prototype.resizeTickTree = function () {\n        var s = this.scale;\n        var range = s.domain.length ? [s.convert(s.domain[0]), s.convert(s.domain[s.domain.length - 1])] : s.range;\n        var layout = this.tickTreeLayout;\n        var lineHeight = this.lineHeight;\n        if (layout) {\n            layout.resize(Math.abs(range[1] - range[0]), layout.depth * lineHeight, (Math.min(range[0], range[1]) || 0) + (s.bandwidth || 0) / 2, -layout.depth * lineHeight, (range[1] - range[0]) < 0);\n        }\n    };\n    Object.defineProperty(GroupedCategoryAxis.prototype, \"lineHeight\", {\n        get: function () {\n            return this.label.fontSize * 1.5;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(GroupedCategoryAxis.prototype, \"gridLength\", {\n        get: function () {\n            return this._gridLength;\n        },\n        /**\n         * The length of the grid. The grid is only visible in case of a non-zero value.\n         */\n        set: function (value) {\n            // Was visible and now invisible, or was invisible and now visible.\n            if (this._gridLength && !value || !this._gridLength && value) {\n                this.gridLineSelection = this.gridLineSelection.remove().setData([]);\n                this.labelSelection = this.labelSelection.remove().setData([]);\n            }\n            this._gridLength = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Creates/removes/updates the scene graph nodes that constitute the axis.\n     * Supposed to be called _manually_ after changing _any_ of the axis properties.\n     * This allows to bulk set axis properties before updating the nodes.\n     * The node changes made by this method are rendered on the next animation frame.\n     * We could schedule this method call automatically on the next animation frame\n     * when any of the axis properties change (the way we do when properties of scene graph's\n     * nodes change), but this will mean that we first wait for the next animation\n     * frame to make changes to the nodes of the axis, then wait for another animation\n     * frame to render those changes. It's nice to have everything update automatically,\n     * but this extra level of async indirection will not just introduce an unwanted delay,\n     * it will also make it harder to reason about the program.\n     */\n    GroupedCategoryAxis.prototype.update = function () {\n        var _this = this;\n        var _a = this, group = _a.group, scale = _a.scale, label = _a.label, tickScale = _a.tickScale, requestedRange = _a.requestedRange;\n        var rangeStart = scale.range[0];\n        var rangeEnd = scale.range[1];\n        var rangeLength = Math.abs(rangeEnd - rangeStart);\n        var bandwidth = (rangeLength / scale.domain.length) || 0;\n        var parallelLabels = label.parallel;\n        var rotation = toRadians(this.rotation);\n        var isHorizontal = Math.abs(Math.cos(rotation)) < 1e-8;\n        var labelRotation = normalizeAngle360(toRadians(this.label.rotation));\n        group.translationX = this.translation.x;\n        group.translationY = this.translation.y;\n        group.rotation = rotation;\n        var title = this.title;\n        // The Text `node` of the Caption is not used to render the title of the grouped category axis.\n        // The phantom root of the tree layout is used instead.\n        if (title) {\n            title.node.visible = false;\n        }\n        var lineHeight = this.lineHeight;\n        // Render ticks and labels.\n        var tickTreeLayout = this.tickTreeLayout;\n        var labels = scale.ticks();\n        var treeLabels = tickTreeLayout ? tickTreeLayout.nodes : [];\n        var isLabelTree = tickTreeLayout ? tickTreeLayout.depth > 1 : false;\n        var ticks = tickScale.ticks();\n        // The side of the axis line to position the labels on.\n        // -1 = left (default)\n        //  1 = right\n        var sideFlag = label.mirrored ? 1 : -1;\n        // When labels are parallel to the axis line, the `parallelFlipFlag` is used to\n        // flip the labels to avoid upside-down text, when the axis is rotated\n        // such that it is in the right hemisphere, i.e. the angle of rotation\n        // is in the [0, π] interval.\n        // The rotation angle is normalized, so that we have an easier time checking\n        // if it's in the said interval. Since the axis is always rendered vertically\n        // and then rotated, zero rotation means 12 (not 3) o-clock.\n        // -1 = flip\n        //  1 = don't flip (default)\n        var parallelFlipRotation = normalizeAngle360(rotation);\n        var parallelFlipFlag = (!labelRotation && parallelFlipRotation >= 0 && parallelFlipRotation <= Math.PI) ? -1 : 1;\n        var regularFlipRotation = normalizeAngle360(rotation - Math.PI / 2);\n        // Flip if the axis rotation angle is in the top hemisphere.\n        var regularFlipFlag = (!labelRotation && regularFlipRotation >= 0 && regularFlipRotation <= Math.PI) ? -1 : 1;\n        var updateGridLines = this.gridLineSelection.setData(this.gridLength ? ticks : []);\n        updateGridLines.exit.remove();\n        var enterGridLines = updateGridLines.enter.append(Line);\n        var gridLineSelection = updateGridLines.merge(enterGridLines);\n        var updateLabels = this.labelSelection.setData(treeLabels);\n        updateLabels.exit.remove();\n        var enterLabels = updateLabels.enter.append(Text);\n        var labelSelection = updateLabels.merge(enterLabels);\n        var labelFormatter = label.formatter;\n        var maxLeafLabelWidth = 0;\n        labelSelection\n            .each(function (node, datum, index) {\n            node.fontStyle = label.fontStyle;\n            node.fontWeight = label.fontWeight;\n            node.fontSize = label.fontSize;\n            node.fontFamily = label.fontFamily;\n            node.fill = label.color;\n            node.textBaseline = parallelFlipFlag === -1 ? 'bottom' : 'hanging';\n            // label.textBaseline = parallelLabels && !labelRotation\n            //     ? (sideFlag * parallelFlipFlag === -1 ? 'hanging' : 'bottom')\n            //     : 'middle';\n            node.textAlign = 'center';\n            node.translationX = datum.screenY - label.fontSize * 0.25;\n            node.translationY = datum.screenX;\n            if (index === 0) { // use the phantom root as the axis title\n                if (title && title.enabled && labels.length > 0) {\n                    node.visible = true;\n                    node.text = title.text;\n                    node.fontSize = title.fontSize;\n                    node.fontStyle = title.fontStyle;\n                    node.fontWeight = title.fontWeight;\n                    node.fontFamily = title.fontFamily;\n                    node.textBaseline = 'hanging';\n                }\n                else {\n                    node.visible = false;\n                }\n            }\n            else {\n                node.text = labelFormatter\n                    ? labelFormatter({\n                        value: String(datum.label),\n                        index: index\n                    })\n                    : String(datum.label);\n                node.visible =\n                    datum.screenX >= requestedRange[0] &&\n                        datum.screenX <= requestedRange[1];\n            }\n            var bbox = node.computeBBox();\n            if (bbox && bbox.width > maxLeafLabelWidth) {\n                maxLeafLabelWidth = bbox.width;\n            }\n        });\n        var labelX = sideFlag * label.padding;\n        var autoRotation = parallelLabels\n            ? parallelFlipFlag * Math.PI / 2\n            : (regularFlipFlag === -1 ? Math.PI : 0);\n        var labelGrid = this.label.grid;\n        var separatorData = [];\n        labelSelection.each(function (label, datum, index) {\n            label.x = labelX;\n            label.rotationCenterX = labelX;\n            if (!datum.children.length) {\n                label.rotation = labelRotation;\n                label.textAlign = 'end';\n                label.textBaseline = 'middle';\n            }\n            else {\n                label.translationX -= maxLeafLabelWidth - lineHeight + _this.label.padding;\n                if (isHorizontal) {\n                    label.rotation = autoRotation;\n                }\n                else {\n                    label.rotation = -Math.PI / 2;\n                }\n            }\n            // Calculate positions of label separators for all nodes except the root.\n            // Each separator is placed to the top of the current label.\n            if (datum.parent && isLabelTree) {\n                var y = !datum.children.length\n                    ? datum.screenX - bandwidth / 2\n                    : datum.screenX - datum.leafCount * bandwidth / 2;\n                if (!datum.children.length) {\n                    if ((datum.number !== datum.children.length - 1) || labelGrid) {\n                        separatorData.push({\n                            y: y,\n                            x1: 0,\n                            x2: -maxLeafLabelWidth - _this.label.padding * 2,\n                            toString: function () { return String(index); }\n                        });\n                    }\n                }\n                else {\n                    var x = -maxLeafLabelWidth - _this.label.padding * 2 + datum.screenY;\n                    separatorData.push({\n                        y: y,\n                        x1: x + lineHeight,\n                        x2: x,\n                        toString: function () { return String(index); }\n                    });\n                }\n            }\n        });\n        // Calculate the position of the long separator on the far bottom of the axis.\n        var minX = 0;\n        separatorData.forEach(function (d) { return minX = Math.min(minX, d.x2); });\n        this.longestSeparatorLength = Math.abs(minX);\n        separatorData.push({\n            y: Math.max(rangeStart, rangeEnd),\n            x1: 0,\n            x2: minX,\n            toString: function () { return String(separatorData.length); }\n        });\n        var updateSeparators = this.separatorSelection.setData(separatorData);\n        updateSeparators.exit.remove();\n        var enterSeparators = updateSeparators.enter.append(Line);\n        var separatorSelection = updateSeparators.merge(enterSeparators);\n        this.separatorSelection = separatorSelection;\n        var epsilon = 0.0000001;\n        separatorSelection.each(function (line, datum, i) {\n            line.x1 = datum.x1;\n            line.x2 = datum.x2;\n            line.y1 = datum.y;\n            line.y2 = datum.y;\n            line.visible = datum.y >= requestedRange[0] - epsilon && datum.y <= requestedRange[1] + epsilon;\n            line.stroke = _this.tick.color;\n            line.fill = undefined;\n            line.strokeWidth = 1;\n        });\n        this.gridLineSelection = gridLineSelection;\n        this.labelSelection = labelSelection;\n        // Render axis lines.\n        var lineCount = tickTreeLayout ? tickTreeLayout.depth + 1 : 1;\n        var lines = [];\n        for (var i = 0; i < lineCount; i++) {\n            lines.push(i);\n        }\n        var updateAxisLines = this.axisLineSelection.setData(lines);\n        updateAxisLines.exit.remove();\n        var enterAxisLines = updateAxisLines.enter.append(Line);\n        var axisLineSelection = updateAxisLines.merge(enterAxisLines);\n        this.axisLineSelection = axisLineSelection;\n        axisLineSelection.each(function (line, _, index) {\n            var x = index > 0 ? -maxLeafLabelWidth - _this.label.padding * 2 - (index - 1) * lineHeight : 0;\n            line.x1 = x;\n            line.x2 = x;\n            line.y1 = requestedRange[0];\n            line.y2 = requestedRange[1];\n            line.strokeWidth = _this.line.width;\n            line.stroke = _this.line.color;\n            line.visible = labels.length > 0 && (index === 0 || (labelGrid && isLabelTree));\n        });\n        if (this.gridLength) {\n            var styles_1 = this.gridStyle;\n            var styleCount_1 = styles_1.length;\n            gridLineSelection\n                .each(function (line, datum, index) {\n                var y = Math.round(tickScale.convert(datum));\n                line.x1 = 0;\n                line.x2 = -sideFlag * _this.gridLength;\n                line.y1 = y;\n                line.y2 = y;\n                line.visible = y >= requestedRange[0] && y <= requestedRange[1] &&\n                    Math.abs(line.parent.translationY - rangeStart) > 1;\n                var style = styles_1[index % styleCount_1];\n                line.stroke = style.stroke;\n                line.strokeWidth = _this.tick.width;\n                line.lineDash = style.lineDash;\n                line.fill = undefined;\n            });\n        }\n        // debug (bbox)\n        // const bbox = this.computeBBox();\n        // const bboxRect = this.bboxRect;\n        // bboxRect.x = bbox.x;\n        // bboxRect.y = bbox.y;\n        // bboxRect.width = bbox.width;\n        // bboxRect.height = bbox.height;\n    };\n    GroupedCategoryAxis.prototype.computeBBox = function (options) {\n        var includeTitle = !options || !options.excludeTitle;\n        var left = Infinity;\n        var right = -Infinity;\n        var top = Infinity;\n        var bottom = -Infinity;\n        this.labelSelection.each(function (label, _, index) {\n            // The label itself is rotated, but not translated, the group that\n            // contains it is. So to capture the group transform in the label bbox\n            // calculation we combine the transform matrices of the label and the group.\n            // Depending on the timing of the `axis.computeBBox()` method call, we may\n            // not have the group's and the label's transform matrices updated yet (because\n            // the transform matrix is not recalculated whenever a node's transform attributes\n            // change, instead it's marked for recalculation on the next frame by setting\n            // the node's `dirtyTransform` flag to `true`), so we force them to update\n            // right here by calling `computeTransformMatrix`.\n            if (index > 0 || includeTitle) { // first node is the root (title)\n                label.computeTransformMatrix();\n                var matrix = Matrix.flyweight(label.matrix);\n                var labelBBox = label.computeBBox();\n                if (labelBBox) {\n                    var bbox = matrix.transformBBox(labelBBox);\n                    left = Math.min(left, bbox.x);\n                    right = Math.max(right, bbox.x + bbox.width);\n                    top = Math.min(top, bbox.y);\n                    bottom = Math.max(bottom, bbox.y + bbox.height);\n                }\n            }\n        });\n        return new BBox(left, top, Math.max(right - left, this.longestSeparatorLength), bottom - top);\n    };\n    // debug (bbox)\n    // private bboxRect = (() => {\n    //     const rect = new Rect();\n    //     rect.fill = undefined;\n    //     rect.stroke = 'red';\n    //     rect.strokeWidth = 1;\n    //     rect.strokeOpacity = 0.7;\n    //     return rect;\n    // })();\n    GroupedCategoryAxis.className = 'GroupedCategoryAxis';\n    GroupedCategoryAxis.type = 'groupedCategory';\n    return GroupedCategoryAxis;\n}(ChartAxis));\nexport { GroupedCategoryAxis };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar t0 = new Date;\nvar t1 = new Date;\n/**\n * The interval methods don't mutate Date parameters.\n */\nvar TimeInterval = /** @class */ (function () {\n    function TimeInterval(floor, offset) {\n        this._floor = floor;\n        this._offset = offset;\n    }\n    /**\n     * Returns a new date representing the latest interval boundary date before or equal to date.\n     * For example, `day.floor(date)` typically returns 12:00 AM local time on the given date.\n     * @param date\n     */\n    TimeInterval.prototype.floor = function (date) {\n        date = new Date(+date);\n        this._floor(date);\n        return date;\n    };\n    /**\n     * Returns a new date representing the earliest interval boundary date after or equal to date.\n     * @param date\n     */\n    TimeInterval.prototype.ceil = function (date) {\n        date = new Date(+date - 1);\n        this._floor(date);\n        this._offset(date, 1);\n        this._floor(date);\n        return date;\n    };\n    /**\n     * Returns a new date representing the closest interval boundary date to date.\n     * @param date\n     */\n    TimeInterval.prototype.round = function (date) {\n        var d0 = this.floor(date);\n        var d1 = this.ceil(date);\n        var ms = +date;\n        return ms - d0.getTime() < d1.getTime() - ms ? d0 : d1;\n    };\n    /**\n     * Returns a new date equal to date plus step intervals.\n     * @param date\n     * @param step\n     */\n    TimeInterval.prototype.offset = function (date, step) {\n        if (step === void 0) { step = 1; }\n        date = new Date(+date);\n        this._offset(date, Math.floor(step));\n        return date;\n    };\n    /**\n     * Returns an array of dates representing every interval boundary after or equal to start (inclusive) and before stop (exclusive).\n     * @param start\n     * @param stop\n     * @param step\n     */\n    TimeInterval.prototype.range = function (start, stop, step) {\n        if (step === void 0) { step = 1; }\n        var range = [];\n        start = this.ceil(start);\n        step = Math.floor(step);\n        if (start > stop || step <= 0) {\n            return range;\n        }\n        var previous;\n        do {\n            previous = new Date(+start);\n            range.push(previous);\n            this._offset(start, step);\n            this._floor(start);\n        } while (previous < start && start < stop);\n        return range;\n    };\n    // Returns an interval that is a subset of this interval.\n    // For example, to create an interval that return 1st, 11th, 21st and 31st of each month:\n    // day.filter(date => (date.getDate() - 1) % 10 === 0)\n    TimeInterval.prototype.filter = function (test) {\n        var _this = this;\n        var floor = function (date) {\n            if (date >= date) {\n                while (_this._floor(date), !test(date)) {\n                    date.setTime(date.getTime() - 1);\n                }\n            }\n            return date;\n        };\n        var offset = function (date, step) {\n            if (date >= date) {\n                if (step < 0) {\n                    while (++step <= 0) {\n                        do {\n                            _this._offset(date, -1);\n                        } while (!test(date));\n                    }\n                }\n                else {\n                    while (--step >= 0) {\n                        do {\n                            _this._offset(date, 1);\n                        } while (!test(date));\n                    }\n                }\n            }\n            return date;\n        };\n        return new TimeInterval(floor, offset);\n    };\n    return TimeInterval;\n}());\nexport { TimeInterval };\nvar CountableTimeInterval = /** @class */ (function (_super) {\n    __extends(CountableTimeInterval, _super);\n    function CountableTimeInterval(floor, offset, count, field) {\n        var _this = _super.call(this, floor, offset) || this;\n        _this._count = count;\n        _this._field = field;\n        return _this;\n    }\n    /**\n     * Returns the number of interval boundaries after start (exclusive) and before or equal to end (inclusive).\n     * @param start\n     * @param end\n     */\n    CountableTimeInterval.prototype.count = function (start, end) {\n        t0.setTime(+start);\n        t1.setTime(+end);\n        this._floor(t0);\n        this._floor(t1);\n        return Math.floor(this._count(t0, t1));\n    };\n    /**\n     * Returns a filtered view of this interval representing every step'th date.\n     * The meaning of step is dependent on this interval’s parent interval as defined by the `field` function.\n     * @param step\n     */\n    CountableTimeInterval.prototype.every = function (step) {\n        var _this = this;\n        var result;\n        step = Math.floor(step);\n        if (isFinite(step) && step > 0) {\n            if (step > 1) {\n                var field_1 = this._field;\n                if (field_1) {\n                    result = this.filter(function (d) { return field_1(d) % step === 0; });\n                }\n                else {\n                    result = this.filter(function (d) { return _this.count(0, d) % step === 0; });\n                }\n            }\n            else {\n                result = this;\n            }\n        }\n        return result;\n    };\n    return CountableTimeInterval;\n}(TimeInterval));\nexport { CountableTimeInterval };\n","import { CountableTimeInterval } from \"./interval\";\nfunction floor(date) {\n    return date;\n}\nfunction offset(date, milliseconds) {\n    date.setTime(date.getTime() + milliseconds);\n}\nfunction count(start, end) {\n    return end.getTime() - start.getTime();\n}\nexport var millisecond = new CountableTimeInterval(floor, offset, count);\nexport default millisecond;\n","// Common time unit sizes in milliseconds.\nexport var durationSecond = 1000;\nexport var durationMinute = durationSecond * 60;\nexport var durationHour = durationMinute * 60;\nexport var durationDay = durationHour * 24;\nexport var durationWeek = durationDay * 7;\nexport var durationMonth = durationDay * 30;\nexport var durationYear = durationDay * 365;\n","import { CountableTimeInterval } from \"./interval\";\nimport { durationSecond } from \"./duration\";\nfunction floor(date) {\n    date.setTime(date.getTime() - date.getMilliseconds());\n}\nfunction offset(date, seconds) {\n    date.setTime(date.getTime() + seconds * durationSecond);\n}\nfunction count(start, end) {\n    return (end.getTime() - start.getTime()) / durationSecond;\n}\nexport var second = new CountableTimeInterval(floor, offset, count);\nexport default second;\n","import { CountableTimeInterval } from \"./interval\";\nimport { durationMinute, durationSecond } from \"./duration\";\nfunction floor(date) {\n    date.setTime(date.getTime() - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}\nfunction offset(date, minutes) {\n    date.setTime(date.getTime() + minutes * durationMinute);\n}\nfunction count(start, end) {\n    return (end.getTime() - start.getTime()) / durationMinute;\n}\nfunction field(date) {\n    return date.getMinutes();\n}\nexport var minute = new CountableTimeInterval(floor, offset, count, field);\nexport default minute;\n","import { CountableTimeInterval } from \"./interval\";\nimport { durationHour, durationMinute, durationSecond } from \"./duration\";\nfunction floor(date) {\n    date.setTime(date.getTime() - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}\nfunction offset(date, hours) {\n    date.setTime(date.getTime() + hours * durationHour);\n}\nfunction count(start, end) {\n    return (end.getTime() - start.getTime()) / durationHour;\n}\nfunction field(date) {\n    return date.getHours();\n}\nexport var hour = new CountableTimeInterval(floor, offset, count, field);\nexport default hour;\n","import { CountableTimeInterval } from \"./interval\";\nimport { durationDay, durationMinute } from \"./duration\";\nfunction floor(date) {\n    date.setHours(0, 0, 0, 0);\n}\nfunction offset(date, days) {\n    date.setDate(date.getDate() + days);\n}\nfunction count(start, end) {\n    var tzMinuteDelta = end.getTimezoneOffset() - start.getTimezoneOffset();\n    return (end.getTime() - start.getTime() - tzMinuteDelta * durationMinute) / durationDay;\n}\nfunction field(date) {\n    return date.getDate() - 1;\n}\nexport var day = new CountableTimeInterval(floor, offset, count, field);\nexport default day;\n","import { durationMinute, durationWeek } from \"./duration\";\nimport { CountableTimeInterval } from \"./interval\";\n// Set date to n-th day of the week.\nfunction weekday(n) {\n    // Sets the `date` to the start of the `n`-th day of the current week.\n    // n == 0 is Sunday.\n    function floor(date) {\n        //                  1..31            1..7\n        date.setDate(date.getDate() - (date.getDay() + 7 - n) % 7);\n        date.setHours(0, 0, 0, 0); // h, m, s, ms\n    }\n    // Offset the date by the given number of weeks.\n    function offset(date, weeks) {\n        date.setDate(date.getDate() + weeks * 7);\n    }\n    // Count the number of weeks between the start and end dates.\n    function count(start, end) {\n        var msDelta = end.getTime() - start.getTime();\n        var tzMinuteDelta = end.getTimezoneOffset() - start.getTimezoneOffset();\n        return (msDelta - tzMinuteDelta * durationMinute) / durationWeek;\n    }\n    return new CountableTimeInterval(floor, offset, count);\n}\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\nexport default sunday;\n","import { CountableTimeInterval } from \"./interval\";\nfunction floor(date) {\n    date.setDate(1);\n    date.setHours(0, 0, 0, 0);\n}\nfunction offset(date, months) {\n    date.setMonth(date.getMonth() + months);\n}\nfunction count(start, end) {\n    return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}\nfunction field(date) {\n    return date.getMonth();\n}\nexport var month = new CountableTimeInterval(floor, offset, count, field);\nexport default month;\n","import { CountableTimeInterval } from \"./interval\";\nfunction floor(date) {\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n}\nfunction offset(date, years) {\n    date.setFullYear(date.getFullYear() + years);\n}\nfunction count(start, end) {\n    return end.getFullYear() - start.getFullYear();\n}\nfunction field(date) {\n    return date.getFullYear();\n}\nexport var year = new CountableTimeInterval(floor, offset, count, field);\nexport default year;\n","import { CountableTimeInterval } from \"./interval\";\nimport { durationDay } from \"./duration\";\nfunction floor(date) {\n    date.setUTCHours(0, 0, 0, 0);\n}\nfunction offset(date, days) {\n    date.setUTCDate(date.getUTCDate() + days);\n}\nfunction count(start, end) {\n    return (end.getTime() - start.getTime()) / durationDay;\n}\nfunction field(date) {\n    return date.getUTCDate() - 1;\n}\nexport var utcDay = new CountableTimeInterval(floor, offset, count, field);\nexport default utcDay;\n","import { CountableTimeInterval } from \"./interval\";\nfunction floor(date) {\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n}\nfunction offset(date, years) {\n    date.setUTCFullYear(date.getUTCFullYear() + years);\n}\nfunction count(start, end) {\n    return end.getUTCFullYear() - start.getUTCFullYear();\n}\nfunction field(date) {\n    return date.getUTCFullYear();\n}\nexport var utcYear = new CountableTimeInterval(floor, offset, count, field);\nexport default utcYear;\n","import { durationWeek } from \"./duration\";\nimport { CountableTimeInterval } from \"./interval\";\n// Set date to n-th day of the week.\nfunction weekday(n) {\n    // Sets the `date` to the start of the `n`-th day of the current week.\n    // n == 0 is Sunday.\n    function floor(date) {\n        date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - n) % 7);\n        date.setHours(0, 0, 0, 0); // h, m, s, ms\n    }\n    // Offset the date by the given number of weeks.\n    function offset(date, weeks) {\n        date.setUTCDate(date.getUTCDate() + weeks * 7);\n    }\n    // Count the number of weeks between the start and end dates.\n    function count(start, end) {\n        return (end.getTime() - start.getTime()) / durationWeek;\n    }\n    return new CountableTimeInterval(floor, offset, count);\n}\nexport var utcSunday = weekday(0);\nexport var utcMonday = weekday(1);\nexport var utcTuesday = weekday(2);\nexport var utcWednesday = weekday(3);\nexport var utcThursday = weekday(4);\nexport var utcFriday = weekday(5);\nexport var utcSaturday = weekday(6);\nexport default utcSunday;\n","import timeDay from \"../day\";\nimport year from \"../year\";\nimport { sunday as timeSunday, monday as timeMonday, thursday as timeThursday, } from \"../week\";\nimport utcDay from \"../utcDay\";\nimport utcYear from \"../utcYear\";\nimport utcSunday, { utcMonday, utcThursday } from \"../utcWeek\";\nfunction localDate(d) {\n    // For JS Dates the [0, 100) interval is a time warp, a fast forward to the 20th century.\n    // For example, -1 is -0001 BC, 0 is already 1900 AD.\n    if (d.y >= 0 && d.y < 100) {\n        var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n        date.setFullYear(d.y);\n        return date;\n    }\n    return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\nfunction utcDate(d) {\n    if (d.y >= 0 && d.y < 100) {\n        var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n        date.setUTCFullYear(d.y);\n        return date;\n    }\n    return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n/**\n * Creates a lookup map for array of names to go from a name to index.\n * @param names\n */\nfunction formatLookup(names) {\n    var map = {};\n    for (var i = 0, n = names.length; i < n; i++) {\n        map[names[i].toLowerCase()] = i;\n    }\n    return map;\n}\nfunction newYear(y) {\n    return {\n        y: y,\n        m: 0,\n        d: 1,\n        H: 0,\n        M: 0,\n        S: 0,\n        L: 0\n    };\n}\nvar percentCharCode = 37;\nvar numberRe = /^\\s*\\d+/; // ignores next directive\nvar percentRe = /^%/;\nvar requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n/**\n * Prepends any character in the `requoteRe` set with a backslash.\n * @param s\n */\nexport var requote = function (s) { return s.replace(requoteRe, '\\\\$&'); }; // $& - matched substring\n/**\n * Returns a RegExp that matches any string that starts with any of the given names (case insensitive).\n * @param names\n */\nexport var formatRe = function (names) { return new RegExp('^(?:' + names.map(requote).join('|') + ')', 'i'); };\n// A map of padding modifiers to padding strings. Default is `0`.\nvar pads = {\n    '-': '',\n    '_': ' ',\n    '0': '0'\n};\nexport function pad(value, fill, width) {\n    var sign = value < 0 ? '-' : '';\n    var string = String(sign ? -value : value);\n    var length = string.length;\n    return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n/**\n * Create a new time-locale-based object which exposes time-formatting\n * methods for the specified locale definition.\n *\n * @param timeLocale A time locale definition.\n */\nexport default function formatLocale(timeLocale) {\n    var lDateTime = timeLocale.dateTime;\n    var lDate = timeLocale.date;\n    var lTime = timeLocale.time;\n    var lPeriods = timeLocale.periods;\n    var lWeekdays = timeLocale.days;\n    var lShortWeekdays = timeLocale.shortDays;\n    var lMonths = timeLocale.months;\n    var lShortMonths = timeLocale.shortMonths;\n    var periodRe = formatRe(lPeriods);\n    var periodLookup = formatLookup(lPeriods);\n    var weekdayRe = formatRe(lWeekdays);\n    var weekdayLookup = formatLookup(lWeekdays);\n    var shortWeekdayRe = formatRe(lShortWeekdays);\n    var shortWeekdayLookup = formatLookup(lShortWeekdays);\n    var monthRe = formatRe(lMonths);\n    var monthLookup = formatLookup(lMonths);\n    var shortMonthRe = formatRe(lShortMonths);\n    var shortMonthLookup = formatLookup(lShortMonths);\n    var formats = {\n        'a': formatShortWeekday,\n        'A': formatWeekday,\n        'b': formatShortMonth,\n        'B': formatMonth,\n        'c': undefined,\n        'd': formatDayOfMonth,\n        'e': formatDayOfMonth,\n        'f': formatMicroseconds,\n        'H': formatHour24,\n        'I': formatHour12,\n        'j': formatDayOfYear,\n        'L': formatMilliseconds,\n        'm': formatMonthNumber,\n        'M': formatMinutes,\n        'p': formatPeriod,\n        'Q': formatUnixTimestamp,\n        's': formatUnixTimestampSeconds,\n        'S': formatSeconds,\n        'u': formatWeekdayNumberMonday,\n        'U': formatWeekNumberSunday,\n        'V': formatWeekNumberISO,\n        'w': formatWeekdayNumberSunday,\n        'W': formatWeekNumberMonday,\n        'x': undefined,\n        'X': undefined,\n        'y': formatYear,\n        'Y': formatFullYear,\n        'Z': formatZone,\n        '%': formatLiteralPercent\n    };\n    var utcFormats = {\n        'a': formatUTCShortWeekday,\n        'A': formatUTCWeekday,\n        'b': formatUTCShortMonth,\n        'B': formatUTCMonth,\n        'c': undefined,\n        'd': formatUTCDayOfMonth,\n        'e': formatUTCDayOfMonth,\n        'f': formatUTCMicroseconds,\n        'H': formatUTCHour24,\n        'I': formatUTCHour12,\n        'j': formatUTCDayOfYear,\n        'L': formatUTCMilliseconds,\n        'm': formatUTCMonthNumber,\n        'M': formatUTCMinutes,\n        'p': formatUTCPeriod,\n        'Q': formatUnixTimestamp,\n        's': formatUnixTimestampSeconds,\n        'S': formatUTCSeconds,\n        'u': formatUTCWeekdayNumberMonday,\n        'U': formatUTCWeekNumberSunday,\n        'V': formatUTCWeekNumberISO,\n        'w': formatUTCWeekdayNumberSunday,\n        'W': formatUTCWeekNumberMonday,\n        'x': undefined,\n        'X': undefined,\n        'y': formatUTCYear,\n        'Y': formatUTCFullYear,\n        'Z': formatUTCZone,\n        '%': formatLiteralPercent\n    };\n    var parses = {\n        'a': parseShortWeekday,\n        'A': parseWeekday,\n        'b': parseShortMonth,\n        'B': parseMonth,\n        'c': parseLocaleDateTime,\n        'd': parseDayOfMonth,\n        'e': parseDayOfMonth,\n        'f': parseMicroseconds,\n        'H': parseHour24,\n        'I': parseHour24,\n        'j': parseDayOfYear,\n        'L': parseMilliseconds,\n        'm': parseMonthNumber,\n        'M': parseMinutes,\n        'p': parsePeriod,\n        'Q': parseUnixTimestamp,\n        's': parseUnixTimestampSeconds,\n        'S': parseSeconds,\n        'u': parseWeekdayNumberMonday,\n        'U': parseWeekNumberSunday,\n        'V': parseWeekNumberISO,\n        'w': parseWeekdayNumberSunday,\n        'W': parseWeekNumberMonday,\n        'x': parseLocaleDate,\n        'X': parseLocaleTime,\n        'y': parseYear,\n        'Y': parseFullYear,\n        'Z': parseZone,\n        '%': parseLiteralPercent\n    };\n    // Recursive definitions.\n    formats.x = newFormat(lDate, formats);\n    formats.X = newFormat(lTime, formats);\n    formats.c = newFormat(lDateTime, formats);\n    utcFormats.x = newFormat(lDate, utcFormats);\n    utcFormats.X = newFormat(lTime, utcFormats);\n    utcFormats.c = newFormat(lDateTime, utcFormats);\n    function newParse(specifier, newDate) {\n        return function (str) {\n            var d = newYear(1900);\n            var i = parseSpecifier(d, specifier, str += '', 0);\n            if (i != str.length) {\n                return undefined;\n            }\n            // If a UNIX timestamp is specified, return it.\n            if ('Q' in d) {\n                return new Date(d.Q);\n            }\n            // The am-pm flag is 0 for AM, and 1 for PM.\n            if ('p' in d) {\n                d.H = d.H % 12 + d.p * 12;\n            }\n            // Convert day-of-week and week-of-year to day-of-year.\n            if ('V' in d) {\n                if (d.V < 1 || d.V > 53) {\n                    return undefined;\n                }\n                if (!('w' in d)) {\n                    d.w = 1;\n                }\n                if ('Z' in d) {\n                    var week = utcDate(newYear(d.y));\n                    var day = week.getUTCDay();\n                    week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday.floor(week);\n                    week = utcDay.offset(week, (d.V - 1) * 7);\n                    d.y = week.getUTCFullYear();\n                    d.m = week.getUTCMonth();\n                    d.d = week.getUTCDate() + (d.w + 6) % 7;\n                }\n                else {\n                    var week = newDate(newYear(d.y));\n                    var day = week.getDay();\n                    week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday.floor(week);\n                    week = timeDay.offset(week, (d.V - 1) * 7);\n                    d.y = week.getFullYear();\n                    d.m = week.getMonth();\n                    d.d = week.getDate() + (d.w + 6) % 7;\n                }\n            }\n            else if ('W' in d || 'U' in d) {\n                if (!('w' in d)) {\n                    d.w = 'u' in d\n                        ? d.u % 7\n                        : 'W' in d ? 1 : 0;\n                }\n                var day = 'Z' in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n                d.m = 0;\n                d.d = 'W' in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n            }\n            // If a time zone is specified, all fields are interpreted as UTC and then\n            // offset according to the specified time zone.\n            if ('Z' in d) {\n                d.H += d.Z / 100 | 0;\n                d.M += d.Z % 100;\n                return utcDate(d);\n            }\n            // Otherwise, all fields are in local time.\n            return newDate(d);\n        };\n    }\n    /**\n     * Creates a new function that formats the given Date or timestamp according to specifier.\n     * @param specifier\n     * @param formats\n     */\n    function newFormat(specifier, formats) {\n        return function (date) {\n            var string = [];\n            var n = specifier.length;\n            var i = -1;\n            var j = 0;\n            if (!(date instanceof Date)) {\n                date = new Date(+date);\n            }\n            while (++i < n) {\n                if (specifier.charCodeAt(i) === percentCharCode) {\n                    string.push(specifier.slice(j, i)); // copy the chunks of specifier with no directives as is\n                    var c = specifier.charAt(++i);\n                    var pad_1 = pads[c];\n                    if (pad_1 != undefined) { // if format directive has a padding modifier in front of it\n                        c = specifier.charAt(++i); // fetch the directive itself\n                    }\n                    else {\n                        pad_1 = c === 'e' ? ' ' : '0'; // use the default padding modifier\n                    }\n                    var format = formats[c];\n                    if (format) { // if the directive has a corresponding formatting function\n                        c = format(date, pad_1); // replace the directive with the formatted date\n                    }\n                    string.push(c);\n                    j = i + 1;\n                }\n            }\n            string.push(specifier.slice(j, i));\n            return string.join('');\n        };\n    }\n    // Simultaneously walks over the specifier and the parsed string, populating the `d` map with parsed values.\n    // The returned number is expected to equal the length of the parsed `string`, if parsing succeeded.\n    function parseSpecifier(d, specifier, string, j) {\n        // i - `specifier` string index\n        // j - parsed `string` index\n        var i = 0;\n        var n = specifier.length;\n        var m = string.length;\n        while (i < n) {\n            if (j >= m) {\n                return -1;\n            }\n            var code = specifier.charCodeAt(i++);\n            if (code === percentCharCode) {\n                var char = specifier.charAt(i++);\n                var parse = parses[(char in pads ? specifier.charAt(i++) : char)];\n                if (!parse || ((j = parse(d, string, j)) < 0)) {\n                    return -1;\n                }\n            }\n            else if (code != string.charCodeAt(j++)) {\n                return -1;\n            }\n        }\n        return j;\n    }\n    // ----------------------------- formats ----------------------------------\n    function formatMicroseconds(date, fill) {\n        return formatMilliseconds(date, fill) + '000';\n    }\n    function formatMilliseconds(date, fill) {\n        return pad(date.getMilliseconds(), fill, 3);\n    }\n    function formatSeconds(date, fill) {\n        return pad(date.getSeconds(), fill, 2);\n    }\n    function formatMinutes(date, fill) {\n        return pad(date.getMinutes(), fill, 2);\n    }\n    function formatHour12(date, fill) {\n        return pad(date.getHours() % 12 || 12, fill, 2);\n    }\n    function formatHour24(date, fill) {\n        return pad(date.getHours(), fill, 2);\n    }\n    function formatPeriod(date) {\n        return lPeriods[date.getHours() >= 12 ? 1 : 0];\n    }\n    function formatShortWeekday(date) {\n        return lShortWeekdays[date.getDay()];\n    }\n    function formatWeekday(date) {\n        return lWeekdays[date.getDay()];\n    }\n    function formatWeekdayNumberMonday(date) {\n        var dayOfWeek = date.getDay();\n        return dayOfWeek === 0 ? 7 : dayOfWeek;\n    }\n    function formatWeekNumberSunday(date, fill) {\n        return pad(timeSunday.count(year.floor(date), date), fill, 2);\n    }\n    function formatWeekNumberISO(date, fill) {\n        var day = date.getDay();\n        date = (day >= 4 || day === 0) ? timeThursday.floor(date) : timeThursday.ceil(date);\n        var yearStart = year.floor(date);\n        return pad(timeThursday.count(yearStart, date) + (yearStart.getDay() === 4 ? 1 : 0), fill, 2);\n    }\n    function formatWeekdayNumberSunday(date) {\n        return date.getDay();\n    }\n    function formatWeekNumberMonday(date, fill) {\n        return pad(timeMonday.count(year.floor(date), date), fill, 2);\n    }\n    function formatDayOfMonth(date, fill) {\n        return pad(date.getDate(), fill, 2);\n    }\n    function formatDayOfYear(date, fill) {\n        return pad(1 + timeDay.count(year.floor(date), date), fill, 3);\n    }\n    function formatShortMonth(date) {\n        return lShortMonths[date.getMonth()];\n    }\n    function formatMonth(date) {\n        return lMonths[date.getMonth()];\n    }\n    function formatMonthNumber(date, fill) {\n        return pad(date.getMonth() + 1, fill, 2);\n    }\n    function formatYear(date, fill) {\n        return pad(date.getFullYear() % 100, fill, 2);\n    }\n    function formatFullYear(date, fill) {\n        return pad(date.getFullYear() % 10000, fill, 4);\n    }\n    function formatZone(date) {\n        var z = date.getTimezoneOffset();\n        return (z > 0 ? '-' : (z *= -1, '+')) + pad(Math.floor(z / 60), '0', 2) + pad(z % 60, '0', 2);\n    }\n    // -------------------------- UTC formats -----------------------------------\n    function formatUTCMicroseconds(date, fill) {\n        return formatUTCMilliseconds(date, fill) + '000';\n    }\n    function formatUTCMilliseconds(date, fill) {\n        return pad(date.getUTCMilliseconds(), fill, 3);\n    }\n    function formatUTCSeconds(date, fill) {\n        return pad(date.getUTCSeconds(), fill, 2);\n    }\n    function formatUTCMinutes(date, fill) {\n        return pad(date.getUTCMinutes(), fill, 2);\n    }\n    function formatUTCHour12(date, fill) {\n        return pad(date.getUTCHours() % 12 || 12, fill, 2);\n    }\n    function formatUTCHour24(date, fill) {\n        return pad(date.getUTCHours(), fill, 2);\n    }\n    function formatUTCPeriod(date) {\n        return lPeriods[date.getUTCHours() >= 12 ? 1 : 0];\n    }\n    function formatUTCDayOfMonth(date, fill) {\n        return pad(date.getUTCDate(), fill, 2);\n    }\n    function formatUTCDayOfYear(date, fill) {\n        return pad(1 + utcDay.count(utcYear.floor(date), date), fill, 3);\n    }\n    function formatUTCMonthNumber(date, fill) {\n        return pad(date.getUTCMonth() + 1, fill, 2);\n    }\n    function formatUTCShortMonth(date) {\n        return lShortMonths[date.getUTCMonth()];\n    }\n    function formatUTCMonth(date) {\n        return lMonths[date.getUTCMonth()];\n    }\n    function formatUTCShortWeekday(date) {\n        return lShortWeekdays[date.getUTCDay()];\n    }\n    function formatUTCWeekday(date) {\n        return lWeekdays[date.getUTCDay()];\n    }\n    function formatUTCWeekdayNumberMonday(date) {\n        var dayOfWeek = date.getUTCDay();\n        return dayOfWeek === 0 ? 7 : dayOfWeek;\n    }\n    function formatUTCWeekNumberSunday(date, fill) {\n        return pad(utcSunday.count(utcYear.floor(date), date), fill, 2);\n    }\n    function formatUTCWeekNumberISO(date, fill) {\n        var day = date.getUTCDay();\n        date = (day >= 4 || day === 0) ? utcThursday.floor(date) : utcThursday.ceil(date);\n        var yearStart = utcYear.floor(date);\n        return pad(utcThursday.count(yearStart, date) + (yearStart.getUTCDay() === 4 ? 1 : 0), fill, 4);\n    }\n    function formatUTCWeekdayNumberSunday(date) {\n        return date.getUTCDay();\n    }\n    function formatUTCWeekNumberMonday(date, fill) {\n        return pad(utcMonday.count(utcYear.floor(date), date), fill, 2);\n    }\n    function formatUTCYear(date, fill) {\n        return pad(date.getUTCFullYear() % 100, fill, 2);\n    }\n    function formatUTCFullYear(date, fill) {\n        return pad(date.getUTCFullYear() % 10000, fill, 4);\n    }\n    function formatUTCZone() {\n        return '+0000';\n    }\n    function formatLiteralPercent(date) {\n        return '%';\n    }\n    function formatUnixTimestamp(date) {\n        return date.getTime();\n    }\n    function formatUnixTimestampSeconds(date) {\n        return Math.floor(date.getTime() / 1000);\n    }\n    // ------------------------------- parsers ------------------------------------\n    function parseMicroseconds(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 6));\n        return n ? (d.L = Math.floor(parseFloat(n[0]) / 1000), i + n[0].length) : -1;\n    }\n    function parseMilliseconds(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 3));\n        return n ? (d.L = +n[0], i + n[0].length) : -1;\n    }\n    function parseSeconds(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.S = +n[0], i + n[0].length) : -1;\n    }\n    function parseMinutes(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.M = +n[0], i + n[0].length) : -1;\n    }\n    function parseHour24(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.H = +n[0], i + n[0].length) : -1;\n    }\n    function parsePeriod(d, string, i) {\n        var n = periodRe.exec(string.slice(i));\n        return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n    function parseDayOfMonth(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.d = +n[0], i + n[0].length) : -1;\n    }\n    function parseDayOfYear(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 3));\n        return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n    }\n    function parseShortWeekday(d, string, i) {\n        var n = shortWeekdayRe.exec(string.slice(i));\n        return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n    function parseWeekday(d, string, i) {\n        var n = weekdayRe.exec(string.slice(i));\n        return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n    function parseWeekdayNumberMonday(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 1));\n        return n ? (d.u = +n[0], i + n[0].length) : -1;\n    }\n    function parseWeekNumberSunday(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.U = +n[0], i + n[0].length) : -1;\n    }\n    function parseWeekNumberISO(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.V = +n[0], i + n[0].length) : -1;\n    }\n    function parseWeekNumberMonday(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.W = +n[0], i + n[0].length) : -1;\n    }\n    function parseWeekdayNumberSunday(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 1));\n        return n ? (d.w = +n[0], i + n[0].length) : -1;\n    }\n    function parseShortMonth(d, string, i) {\n        var n = shortMonthRe.exec(string.slice(i));\n        return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n    function parseMonth(d, string, i) {\n        var n = monthRe.exec(string.slice(i));\n        return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n    function parseMonthNumber(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.m = parseFloat(n[0]) - 1, i + n[0].length) : -1;\n    }\n    function parseLocaleDateTime(d, string, i) {\n        return parseSpecifier(d, lDateTime, string, i);\n    }\n    function parseLocaleDate(d, string, i) {\n        return parseSpecifier(d, lDate, string, i);\n    }\n    function parseLocaleTime(d, string, i) {\n        return parseSpecifier(d, lTime, string, i);\n    }\n    function parseUnixTimestamp(d, string, i) {\n        var n = numberRe.exec(string.slice(i));\n        return n ? (d.Q = +n[0], i + n[0].length) : -1;\n    }\n    function parseUnixTimestampSeconds(d, string, i) {\n        var n = numberRe.exec(string.slice(i));\n        return n ? (d.Q = (+n[0]) * 1000, i + n[0].length) : -1;\n    }\n    function parseYear(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 2));\n        return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n    }\n    function parseFullYear(d, string, i) {\n        var n = numberRe.exec(string.slice(i, i + 4));\n        return n ? (d.y = +n[0], i + n[0].length) : -1;\n    }\n    function parseZone(d, string, i) {\n        var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n        return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || '00')), i + n[0].length) : -1;\n    }\n    function parseLiteralPercent(d, string, i) {\n        var n = percentRe.exec(string.slice(i, i + 1));\n        return n ? i + n[0].length : -1;\n    }\n    return {\n        format: function (specifier) {\n            var f = newFormat(specifier, formats);\n            f.toString = function () { return specifier; };\n            return f;\n        },\n        parse: function (specifier) {\n            var p = newParse(specifier, localDate);\n            p.toString = function () { return specifier; };\n            return p;\n        },\n        utcFormat: function (specifier) {\n            var f = newFormat(specifier, utcFormats);\n            f.toString = function () { return specifier; };\n            return f;\n        },\n        utcParse: function (specifier) {\n            var p = newParse(specifier, utcDate);\n            p.toString = function () { return specifier; };\n            return p;\n        }\n    };\n}\n","import formatLocale from './locale';\nexport var locale;\nsetDefaultLocale({\n    dateTime: '%x, %X',\n    date: '%-m/%-d/%Y',\n    time: '%-I:%M:%S %p',\n    periods: ['AM', 'PM'],\n    days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    shortDays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n    months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n    shortMonths: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n});\nexport default function setDefaultLocale(definition) {\n    return locale = formatLocale(definition);\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport ContinuousScale from \"./continuousScale\";\nimport timeMillisecond from \"../util/time/millisecond\";\nimport timeSecond from \"../util/time/second\";\nimport timeMinute from \"../util/time/minute\";\nimport timeHour from \"../util/time/hour\";\nimport timeDay from \"../util/time/day\";\nimport timeWeek from \"../util/time/week\";\nimport timeMonth from \"../util/time/month\";\nimport timeYear from \"../util/time/year\";\nimport { durationSecond, durationMinute, durationHour, durationDay, durationWeek, durationMonth, durationYear } from \"../util/time/duration\";\nimport { complexBisectRight } from \"../util/bisect\";\nimport { tickStep } from \"../util/ticks\";\nimport { locale } from \"../util/time/format/defaultLocale\";\nvar TimeScale = /** @class */ (function (_super) {\n    __extends(TimeScale, _super);\n    function TimeScale() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.year = timeYear;\n        _this.month = timeMonth;\n        _this.week = timeWeek;\n        _this.day = timeDay;\n        _this.hour = timeHour;\n        _this.minute = timeMinute;\n        _this.second = timeSecond;\n        _this.millisecond = timeMillisecond;\n        _this.format = locale.format;\n        /**\n         * Array of default tick intervals in the following format:\n         *\n         *     [\n         *         interval (unit of time),\n         *         number of units (step),\n         *         the length of that number of units in milliseconds\n         *     ]\n         */\n        _this.tickIntervals = [\n            [_this.second, 1, durationSecond],\n            [_this.second, 5, 5 * durationSecond],\n            [_this.second, 15, 15 * durationSecond],\n            [_this.second, 30, 30 * durationSecond],\n            [_this.minute, 1, durationMinute],\n            [_this.minute, 5, 5 * durationMinute],\n            [_this.minute, 15, 15 * durationMinute],\n            [_this.minute, 30, 30 * durationMinute],\n            [_this.hour, 1, durationHour],\n            [_this.hour, 3, 3 * durationHour],\n            [_this.hour, 6, 6 * durationHour],\n            [_this.hour, 12, 12 * durationHour],\n            [_this.day, 1, durationDay],\n            [_this.day, 2, 2 * durationDay],\n            [_this.week, 1, durationWeek],\n            [_this.month, 1, durationMonth],\n            [_this.month, 3, 3 * durationMonth],\n            [_this.year, 1, durationYear]\n        ];\n        _this.formatMillisecond = _this.format('.%L');\n        _this.formatSecond = _this.format(':%S');\n        _this.formatMinute = _this.format('%I:%M');\n        _this.formatHour = _this.format('%I %p');\n        _this.formatDay = _this.format('%a %d');\n        _this.formatWeek = _this.format('%b %d');\n        _this.formatMonth = _this.format('%B');\n        _this.formatYear = _this.format('%Y');\n        _this._domain = [new Date(2000, 0, 1), new Date(2000, 0, 2)];\n        return _this;\n    }\n    TimeScale.prototype.defaultTickFormat = function (date) {\n        return (this.second.floor(date) < date\n            ? this.formatMillisecond\n            : this.minute.floor(date) < date\n                ? this.formatSecond\n                : this.hour.floor(date) < date\n                    ? this.formatMinute\n                    : this.day.floor(date) < date\n                        ? this.formatHour\n                        : this.month.floor(date) < date\n                            ? (this.week.floor(date) < date ? this.formatDay : this.formatWeek)\n                            : this.year.floor(date) < date\n                                ? this.formatMonth\n                                : this.formatYear)(date);\n    };\n    /**\n     *\n     * @param interval If the `interval` is a number, it's interpreted as the desired tick count\n     * and the method tries to pick an appropriate interval automatically, based on the extent of the domain.\n     * If the `interval` is `undefined`, it defaults to `10`.\n     * If the `interval` is a time interval, simply use it.\n     * @param start The start time (timestamp).\n     * @param stop The end time (timestamp).\n     * @param step Number of intervals between ticks.\n     */\n    TimeScale.prototype.tickInterval = function (interval, start, stop, step) {\n        var _a;\n        if (typeof interval === 'number') {\n            var tickCount = interval;\n            var tickIntervals = this.tickIntervals;\n            var target = Math.abs(stop - start) / tickCount;\n            var i = complexBisectRight(tickIntervals, target, function (interval) { return interval[2]; });\n            if (i === tickIntervals.length) {\n                step = tickStep(start / durationYear, stop / durationYear, tickCount);\n                interval = this.year;\n            }\n            else if (i) {\n                _a = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i], interval = _a[0], step = _a[1];\n            }\n            else {\n                step = Math.max(tickStep(start, stop, interval), 1);\n                interval = this.millisecond;\n            }\n        }\n        return step == undefined ? interval : interval.every(step);\n    };\n    Object.defineProperty(TimeScale.prototype, \"domain\", {\n        get: function () {\n            return _super.prototype.getDomain.call(this).map(function (t) { return new Date(t); });\n        },\n        set: function (values) {\n            _super.prototype.setDomain.call(this, Array.prototype.map.call(values, function (t) { return t instanceof Date ? +t : +new Date(+t); }));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TimeScale.prototype.invert = function (y) {\n        return new Date(_super.prototype.invert.call(this, y));\n    };\n    /**\n     * Returns uniformly-spaced dates that represent the scale's domain.\n     * @param interval The desired tick count or a time interval object.\n     */\n    TimeScale.prototype.ticks = function (interval) {\n        if (interval === void 0) { interval = 10; }\n        var d = _super.prototype.getDomain.call(this);\n        var t0 = d[0];\n        var t1 = d[d.length - 1];\n        var reverse = t1 < t0;\n        if (reverse) {\n            var _ = t0;\n            t0 = t1;\n            t1 = _;\n        }\n        var t = this.tickInterval(interval, t0, t1);\n        var i = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n        return reverse ? i.reverse() : i;\n    };\n    /**\n     * Returns a time format function suitable for displaying tick values.\n     * @param count Ignored. Used only to satisfy the {@link Scale} interface.\n     * @param specifier If the specifier string is provided, this method is equivalent to\n     * the {@link TimeLocaleObject.format} method.\n     * If no specifier is provided, this method returns the default time format function.\n     */\n    TimeScale.prototype.tickFormat = function (count, specifier) {\n        return specifier == undefined ? this.defaultTickFormat.bind(this) : this.format(specifier);\n    };\n    /**\n     * Extends the domain so that it starts and ends on nice round values.\n     * This method typically modifies the scale’s domain, and may only extend the bounds to the nearest round value.\n     * @param interval\n     */\n    TimeScale.prototype.nice = function (interval) {\n        if (interval === void 0) { interval = 10; }\n        var d = _super.prototype.getDomain.call(this);\n        var i = this.tickInterval(interval, d[0], d[d.length - 1]);\n        if (i) {\n            this.domain = this._nice(d, i);\n        }\n    };\n    TimeScale.prototype._nice = function (domain, interval) {\n        var _a, _b;\n        domain = domain.slice();\n        var i0 = 0;\n        var i1 = domain.length - 1;\n        var x0 = domain[i0];\n        var x1 = domain[i1];\n        if (x1 < x0) {\n            _a = [i1, i0], i0 = _a[0], i1 = _a[1];\n            _b = [x1, x0], x0 = _b[0], x1 = _b[1];\n        }\n        domain[i0] = interval.floor(x0);\n        domain[i1] = interval.ceil(x1);\n        return domain;\n    };\n    return TimeScale;\n}(ContinuousScale));\nexport { TimeScale };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { TimeScale } from \"../../scale/timeScale\";\nimport { ChartAxis } from \"../chartAxis\";\nvar TimeAxis = /** @class */ (function (_super) {\n    __extends(TimeAxis, _super);\n    function TimeAxis() {\n        var _this = _super.call(this, new TimeScale()) || this;\n        _this._nice = true;\n        _this.scale.clamp = true;\n        return _this;\n    }\n    Object.defineProperty(TimeAxis.prototype, \"nice\", {\n        get: function () {\n            return this._nice;\n        },\n        set: function (value) {\n            if (this._nice !== value) {\n                this._nice = value;\n                if (value && this.scale.nice) {\n                    this.scale.nice(10);\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TimeAxis.prototype, \"domain\", {\n        get: function () {\n            return this.scale.domain;\n        },\n        set: function (value) {\n            this.scale.domain = value;\n            if (this.nice && this.scale.nice) {\n                this.scale.nice(10);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TimeAxis.className = 'TimeAxis';\n    TimeAxis.type = 'time';\n    return TimeAxis;\n}(ChartAxis));\nexport { TimeAxis };\n","import { HdpiCanvas } from \"../canvas/hdpiCanvas\";\nimport { createId } from \"../util/id\";\nvar Scene = /** @class */ (function () {\n    // As a rule of thumb, constructors with no parameters are preferred.\n    // A few exceptions are:\n    // - we absolutely need to know something at construction time (document)\n    // - knowing something at construction time meaningfully improves performance (width, height)\n    function Scene(document, width, height) {\n        var _this = this;\n        if (document === void 0) { document = window.document; }\n        this.id = createId(this);\n        this._dirty = false;\n        this.animationFrameId = 0;\n        this._root = null;\n        this.debug = {\n            renderFrameIndex: false,\n            renderBoundingBoxes: false\n        };\n        this._frameIndex = 0;\n        this.render = function () {\n            var _a;\n            var _b = _this, ctx = _b.ctx, root = _b.root, pendingSize = _b.pendingSize;\n            _this.animationFrameId = 0;\n            if (pendingSize) {\n                (_a = _this.canvas).resize.apply(_a, pendingSize);\n                _this.pendingSize = undefined;\n            }\n            if (root && !root.visible) {\n                _this.dirty = false;\n                return;\n            }\n            // start with a blank canvas, clear previous drawing\n            ctx.clearRect(0, 0, _this.width, _this.height);\n            if (root) {\n                ctx.save();\n                if (root.visible) {\n                    root.render(ctx);\n                }\n                ctx.restore();\n            }\n            _this._frameIndex++;\n            if (_this.debug.renderFrameIndex) {\n                ctx.fillStyle = 'white';\n                ctx.fillRect(0, 0, 40, 15);\n                ctx.fillStyle = 'black';\n                ctx.fillText(_this.frameIndex.toString(), 2, 10);\n            }\n            _this.dirty = false;\n        };\n        this.canvas = new HdpiCanvas(document, width, height);\n        this.ctx = this.canvas.context;\n    }\n    Object.defineProperty(Scene.prototype, \"container\", {\n        get: function () {\n            return this.canvas.container;\n        },\n        set: function (value) {\n            this.canvas.container = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Scene.prototype.download = function (fileName) {\n        this.canvas.download(fileName);\n    };\n    Scene.prototype.getDataURL = function (type) {\n        return this.canvas.getDataURL(type);\n    };\n    Object.defineProperty(Scene.prototype, \"width\", {\n        get: function () {\n            return this.pendingSize ? this.pendingSize[0] : this.canvas.width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Scene.prototype, \"height\", {\n        get: function () {\n            return this.pendingSize ? this.pendingSize[1] : this.canvas.height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Scene.prototype.resize = function (width, height) {\n        width = Math.round(width);\n        height = Math.round(height);\n        if (width === this.width && height === this.height) {\n            return;\n        }\n        this.pendingSize = [width, height];\n        this.dirty = true;\n    };\n    Object.defineProperty(Scene.prototype, \"dirty\", {\n        get: function () {\n            return this._dirty;\n        },\n        set: function (dirty) {\n            if (dirty && !this._dirty) {\n                this.animationFrameId = requestAnimationFrame(this.render);\n            }\n            this._dirty = dirty;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Scene.prototype.cancelRender = function () {\n        if (this.animationFrameId) {\n            cancelAnimationFrame(this.animationFrameId);\n            this.animationFrameId = 0;\n            this._dirty = false;\n        }\n    };\n    Object.defineProperty(Scene.prototype, \"root\", {\n        get: function () {\n            return this._root;\n        },\n        set: function (node) {\n            if (node === this._root) {\n                return;\n            }\n            if (this._root) {\n                this._root._setScene();\n            }\n            this._root = node;\n            if (node) {\n                // If `node` is the root node of another scene ...\n                if (node.parent === null && node.scene && node.scene !== this) {\n                    node.scene.root = null;\n                }\n                node._setScene(this);\n            }\n            this.dirty = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Scene.prototype.appendPath = function (path) {\n        var ctx = this.ctx;\n        var commands = path.commands;\n        var params = path.params;\n        var n = commands.length;\n        var j = 0;\n        ctx.beginPath();\n        for (var i = 0; i < n; i++) {\n            switch (commands[i]) {\n                case 'M':\n                    ctx.moveTo(params[j++], params[j++]);\n                    break;\n                case 'L':\n                    ctx.lineTo(params[j++], params[j++]);\n                    break;\n                case 'C':\n                    ctx.bezierCurveTo(params[j++], params[j++], params[j++], params[j++], params[j++], params[j++]);\n                    break;\n                case 'Z':\n                    ctx.closePath();\n                    break;\n            }\n        }\n    };\n    Object.defineProperty(Scene.prototype, \"frameIndex\", {\n        get: function () {\n            return this._frameIndex;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Scene.className = 'Scene';\n    return Scene;\n}());\nexport { Scene };\n","var Gradient = /** @class */ (function () {\n    function Gradient() {\n        this.stops = [];\n    }\n    return Gradient;\n}());\nexport { Gradient };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Gradient } from \"./gradient\";\nvar LinearGradient = /** @class */ (function (_super) {\n    __extends(LinearGradient, _super);\n    function LinearGradient() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.angle = 0;\n        return _this;\n    }\n    LinearGradient.prototype.generateGradient = function (ctx, bbox) {\n        var stops = this.stops;\n        var radians = (this.angle % 360) * Math.PI / 180;\n        var cos = Math.cos(radians);\n        var sin = Math.sin(radians);\n        var w = bbox.width;\n        var h = bbox.height;\n        var cx = bbox.x + w * 0.5;\n        var cy = bbox.y + h * 0.5;\n        if (w > 0 && h > 0) {\n            var l = (Math.sqrt(h * h + w * w) * Math.abs(Math.cos(radians - Math.atan(h / w)))) / 2;\n            var gradient_1 = ctx.createLinearGradient(cx + cos * l, cy + sin * l, cx - cos * l, cy - sin * l);\n            stops.forEach(function (stop) {\n                gradient_1.addColorStop(stop.offset, stop.color);\n            });\n            return gradient_1;\n        }\n        return 'black';\n    };\n    return LinearGradient;\n}(Gradient));\nexport { LinearGradient };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Path } from \"./path\";\nimport { Shape } from \"./shape\";\nimport { BBox } from \"../bbox\";\nimport { LinearGradient } from \"../gradient/linearGradient\";\nimport { Color } from \"../../util/color\";\nexport var RectSizing;\n(function (RectSizing) {\n    RectSizing[RectSizing[\"Content\"] = 0] = \"Content\";\n    RectSizing[RectSizing[\"Border\"] = 1] = \"Border\";\n})(RectSizing || (RectSizing = {}));\nvar Rect = /** @class */ (function (_super) {\n    __extends(Rect, _super);\n    function Rect() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._x = 0;\n        _this._y = 0;\n        _this._width = 10;\n        _this._height = 10;\n        _this._radius = 0;\n        /**\n         * If `true`, the rect is aligned to the pixel grid for crisp looking lines.\n         * Animated rects may not look nice with this option enabled, for example\n         * when a rect is translated by a sub-pixel value on each frame.\n         */\n        _this._crisp = false;\n        _this._gradient = false;\n        _this.effectiveStrokeWidth = Shape.defaultStyles.strokeWidth;\n        /**\n         * Similar to https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing\n         */\n        _this._sizing = RectSizing.Content;\n        return _this;\n    }\n    Object.defineProperty(Rect.prototype, \"x\", {\n        get: function () {\n            return this._x;\n        },\n        set: function (value) {\n            if (this._x !== value) {\n                this._x = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"y\", {\n        get: function () {\n            return this._y;\n        },\n        set: function (value) {\n            if (this._y !== value) {\n                this._y = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        set: function (value) {\n            if (this._width !== value) {\n                this._width = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        set: function (value) {\n            if (this._height !== value) {\n                this._height = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"radius\", {\n        get: function () {\n            return this._radius;\n        },\n        set: function (value) {\n            if (this._radius !== value) {\n                this._radius = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"crisp\", {\n        get: function () {\n            return this._crisp;\n        },\n        set: function (value) {\n            if (this._crisp !== value) {\n                this._crisp = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"gradient\", {\n        get: function () {\n            return this._gradient;\n        },\n        set: function (value) {\n            if (this._gradient !== value) {\n                this._gradient = value;\n                this.updateGradientInstance();\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Rect.prototype.updateGradientInstance = function () {\n        if (this.gradient) {\n            var fill = this.fill;\n            if (fill) {\n                var gradient = new LinearGradient();\n                gradient.angle = 270;\n                gradient.stops = [{\n                        offset: 0,\n                        color: Color.fromString(fill).brighter().toString()\n                    }, {\n                        offset: 1,\n                        color: Color.fromString(fill).darker().toString()\n                    }];\n                this.gradientInstance = gradient;\n            }\n        }\n        else {\n            this.gradientInstance = undefined;\n        }\n    };\n    Object.defineProperty(Rect.prototype, \"fill\", {\n        get: function () {\n            return this._fill;\n        },\n        set: function (value) {\n            if (this._fill !== value) {\n                this._fill = value;\n                this.updateGradientInstance();\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"strokeWidth\", {\n        get: function () {\n            return this._strokeWidth;\n        },\n        set: function (value) {\n            if (this._strokeWidth !== value) {\n                this._strokeWidth = value;\n                // Normally, when the `lineWidth` changes, we only need to repaint the rect\n                // without updating the path. If the `isCrisp` is set to `true` however,\n                // we need to update the path to make sure the new stroke aligns to\n                // the pixel grid. This is the reason we override the `lineWidth` setter\n                // and getter here.\n                if (this.crisp || this.sizing === RectSizing.Border) {\n                    this.dirtyPath = true;\n                }\n                else {\n                    this.effectiveStrokeWidth = value;\n                    this.dirty = true;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Rect.prototype, \"sizing\", {\n        get: function () {\n            return this._sizing;\n        },\n        set: function (value) {\n            if (this._sizing !== value) {\n                this._sizing = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Rect.prototype.updatePath = function () {\n        var borderSizing = this.sizing === RectSizing.Border;\n        var path = this.path;\n        path.clear();\n        var x = this.x;\n        var y = this.y;\n        var width = this.width;\n        var height = this.height;\n        var strokeWidth;\n        if (borderSizing) {\n            var halfWidth = width / 2;\n            var halfHeight = height / 2;\n            strokeWidth = Math.min(this.strokeWidth, halfWidth, halfHeight);\n            x = Math.min(x + strokeWidth / 2, x + halfWidth);\n            y = Math.min(y + strokeWidth / 2, y + halfHeight);\n            width = Math.max(width - strokeWidth, 0);\n            height = Math.max(height - strokeWidth, 0);\n        }\n        else {\n            strokeWidth = this.strokeWidth;\n        }\n        this.effectiveStrokeWidth = strokeWidth;\n        if (this.crisp && !borderSizing) {\n            var _a = this, a = _a.alignment, al = _a.align;\n            path.rect(al(a, x), al(a, y), al(a, x, width), al(a, y, height));\n        }\n        else {\n            path.rect(x, y, width, height);\n        }\n    };\n    Rect.prototype.computeBBox = function () {\n        var _a = this, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        return new BBox(x, y, width, height);\n    };\n    Rect.prototype.isPointInPath = function (x, y) {\n        var point = this.transformPoint(x, y);\n        var bbox = this.computeBBox();\n        return bbox.containsPoint(point.x, point.y);\n    };\n    Rect.prototype.isPointInStroke = function (x, y) {\n        return false;\n    };\n    Rect.prototype.fillStroke = function (ctx) {\n        if (!this.scene) {\n            return;\n        }\n        var pixelRatio = this.scene.canvas.pixelRatio || 1;\n        if (this.fill) {\n            if (this.gradientInstance) {\n                ctx.fillStyle = this.gradientInstance.generateGradient(ctx, this.computeBBox());\n            }\n            else {\n                ctx.fillStyle = this.fill;\n            }\n            ctx.globalAlpha = this.opacity * this.fillOpacity;\n            // The canvas context scaling (depends on the device's pixel ratio)\n            // has no effect on shadows, so we have to account for the pixel ratio\n            // manually here.\n            var fillShadow = this.fillShadow;\n            if (fillShadow && fillShadow.enabled) {\n                ctx.shadowColor = fillShadow.color;\n                ctx.shadowOffsetX = fillShadow.xOffset * pixelRatio;\n                ctx.shadowOffsetY = fillShadow.yOffset * pixelRatio;\n                ctx.shadowBlur = fillShadow.blur * pixelRatio;\n            }\n            ctx.fill();\n        }\n        ctx.shadowColor = 'rgba(0, 0, 0, 0)';\n        if (this.stroke && this.effectiveStrokeWidth) {\n            ctx.strokeStyle = this.stroke;\n            ctx.globalAlpha = this.opacity * this.strokeOpacity;\n            ctx.lineWidth = this.effectiveStrokeWidth;\n            if (this.lineDash) {\n                ctx.setLineDash(this.lineDash);\n            }\n            if (this.lineDashOffset) {\n                ctx.lineDashOffset = this.lineDashOffset;\n            }\n            if (this.lineCap) {\n                ctx.lineCap = this.lineCap;\n            }\n            if (this.lineJoin) {\n                ctx.lineJoin = this.lineJoin;\n            }\n            var strokeShadow = this.strokeShadow;\n            if (strokeShadow && strokeShadow.enabled) {\n                ctx.shadowColor = strokeShadow.color;\n                ctx.shadowOffsetX = strokeShadow.xOffset * pixelRatio;\n                ctx.shadowOffsetY = strokeShadow.yOffset * pixelRatio;\n                ctx.shadowBlur = strokeShadow.blur * pixelRatio;\n            }\n            ctx.stroke();\n        }\n    };\n    Rect.className = 'Rect';\n    return Rect;\n}(Path));\nexport { Rect };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Path } from \"../../scene/shape/path\";\nimport { BBox } from \"../../scene/bbox\";\nvar Marker = /** @class */ (function (_super) {\n    __extends(Marker, _super);\n    function Marker() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._x = 0;\n        _this._y = 0;\n        _this._size = 12;\n        return _this;\n    }\n    Object.defineProperty(Marker.prototype, \"x\", {\n        get: function () {\n            return this._x;\n        },\n        set: function (value) {\n            if (this._x !== value) {\n                this._x = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Marker.prototype, \"y\", {\n        get: function () {\n            return this._y;\n        },\n        set: function (value) {\n            if (this._y !== value) {\n                this._y = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Marker.prototype, \"size\", {\n        get: function () {\n            return this._size;\n        },\n        set: function (value) {\n            if (this._size !== value) {\n                this._size = Math.abs(value);\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Marker.prototype.computeBBox = function () {\n        var _a = this, x = _a.x, y = _a.y, size = _a.size;\n        var half = size / 2;\n        return new BBox(x - half, y - half, size, size);\n    };\n    return Marker;\n}(Path));\nexport { Marker };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Marker } from \"./marker\";\nvar Square = /** @class */ (function (_super) {\n    __extends(Square, _super);\n    function Square() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Square.prototype.updatePath = function () {\n        var _a = this, path = _a.path, x = _a.x, y = _a.y;\n        var hs = this.size / 2;\n        var _b = this, a = _b.alignment, al = _b.align;\n        path.clear();\n        path.moveTo(al(a, x - hs), al(a, y - hs));\n        path.lineTo(al(a, x + hs), al(a, y - hs));\n        path.lineTo(al(a, x + hs), al(a, y + hs));\n        path.lineTo(al(a, x - hs), al(a, y + hs));\n        path.closePath();\n    };\n    Square.className = 'Square';\n    return Square;\n}(Marker));\nexport { Square };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Group } from \"../scene/group\";\nimport { Text } from \"../scene/shape/text\";\nimport { Square } from \"./marker/square\";\nimport { HdpiCanvas } from \"../canvas/hdpiCanvas\";\nvar MarkerLabel = /** @class */ (function (_super) {\n    __extends(MarkerLabel, _super);\n    function MarkerLabel() {\n        var _this = _super.call(this) || this;\n        _this.label = new Text();\n        _this._marker = new Square();\n        _this._markerSize = 15;\n        _this._spacing = 8;\n        var label = _this.label;\n        label.textBaseline = 'middle';\n        label.fontSize = 12;\n        label.fontFamily = 'Verdana, sans-serif';\n        label.fill = 'black';\n        // For better looking vertical alignment of labels to markers.\n        label.y = HdpiCanvas.has.textMetrics ? 1 : 0;\n        _this.append([_this.marker, label]);\n        _this.update();\n        return _this;\n    }\n    Object.defineProperty(MarkerLabel.prototype, \"text\", {\n        get: function () {\n            return this.label.text;\n        },\n        set: function (value) {\n            this.label.text = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"fontStyle\", {\n        get: function () {\n            return this.label.fontStyle;\n        },\n        set: function (value) {\n            this.label.fontStyle = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"fontWeight\", {\n        get: function () {\n            return this.label.fontWeight;\n        },\n        set: function (value) {\n            this.label.fontWeight = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"fontSize\", {\n        get: function () {\n            return this.label.fontSize;\n        },\n        set: function (value) {\n            this.label.fontSize = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"fontFamily\", {\n        get: function () {\n            return this.label.fontFamily;\n        },\n        set: function (value) {\n            this.label.fontFamily = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"color\", {\n        get: function () {\n            return this.label.fill;\n        },\n        set: function (value) {\n            this.label.fill = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"marker\", {\n        get: function () {\n            return this._marker;\n        },\n        set: function (value) {\n            if (this._marker !== value) {\n                this.removeChild(this._marker);\n                this._marker = value;\n                this.appendChild(value);\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"markerSize\", {\n        get: function () {\n            return this._markerSize;\n        },\n        set: function (value) {\n            if (this._markerSize !== value) {\n                this._markerSize = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"markerFill\", {\n        get: function () {\n            return this.marker.fill;\n        },\n        set: function (value) {\n            this.marker.fill = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"markerStroke\", {\n        get: function () {\n            return this.marker.stroke;\n        },\n        set: function (value) {\n            this.marker.stroke = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"markerStrokeWidth\", {\n        get: function () {\n            return this.marker.strokeWidth;\n        },\n        set: function (value) {\n            this.marker.strokeWidth = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"markerFillOpacity\", {\n        get: function () {\n            return this.marker.fillOpacity;\n        },\n        set: function (value) {\n            this.marker.fillOpacity = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"markerStrokeOpacity\", {\n        get: function () {\n            return this.marker.strokeOpacity;\n        },\n        set: function (value) {\n            this.marker.strokeOpacity = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"opacity\", {\n        get: function () {\n            return this.marker.opacity;\n        },\n        set: function (value) {\n            this.marker.opacity = value;\n            this.label.opacity = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MarkerLabel.prototype, \"spacing\", {\n        get: function () {\n            return this._spacing;\n        },\n        set: function (value) {\n            if (this._spacing !== value) {\n                this._spacing = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MarkerLabel.prototype.update = function () {\n        var marker = this.marker;\n        var markerSize = this.markerSize;\n        marker.size = markerSize;\n        this.label.x = markerSize / 2 + this.spacing;\n    };\n    MarkerLabel.className = 'MarkerLabel';\n    return MarkerLabel;\n}(Group));\nexport { MarkerLabel };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Marker } from \"./marker\";\nvar Circle = /** @class */ (function (_super) {\n    __extends(Circle, _super);\n    function Circle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Circle.prototype.updatePath = function () {\n        var _a = this, x = _a.x, y = _a.y, path = _a.path, size = _a.size;\n        var r = size / 2;\n        path.clear();\n        path.cubicArc(x, y, r, r, 0, 0, Math.PI * 2, 0);\n        path.closePath();\n    };\n    Circle.className = 'Circle';\n    return Circle;\n}(Marker));\nexport { Circle };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Marker } from \"./marker\";\nvar Cross = /** @class */ (function (_super) {\n    __extends(Cross, _super);\n    function Cross() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Cross.prototype.updatePath = function () {\n        var _a = this, x = _a.x, y = _a.y;\n        var _b = this, path = _b.path, size = _b.size;\n        var s = size / 4.2;\n        path.clear();\n        path.moveTo(x -= s, y);\n        path.lineTo(x -= s, y -= s);\n        path.lineTo(x += s, y -= s);\n        path.lineTo(x += s, y += s);\n        path.lineTo(x += s, y -= s);\n        path.lineTo(x += s, y += s);\n        path.lineTo(x -= s, y += s);\n        path.lineTo(x += s, y += s);\n        path.lineTo(x -= s, y += s);\n        path.lineTo(x -= s, y -= s);\n        path.lineTo(x -= s, y += s);\n        path.lineTo(x -= s, y -= s);\n        path.closePath();\n    };\n    Cross.className = 'Cross';\n    return Cross;\n}(Marker));\nexport { Cross };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Marker } from \"./marker\";\nvar Diamond = /** @class */ (function (_super) {\n    __extends(Diamond, _super);\n    function Diamond() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Diamond.prototype.updatePath = function () {\n        var _a = this, x = _a.x, y = _a.y;\n        var _b = this, path = _b.path, size = _b.size;\n        var s = size / 2;\n        path.clear();\n        path.moveTo(x, y -= s);\n        path.lineTo(x += s, y += s);\n        path.lineTo(x -= s, y += s);\n        path.lineTo(x -= s, y -= s);\n        path.lineTo(x += s, y -= s);\n        path.closePath();\n    };\n    Diamond.className = 'Diamond';\n    return Diamond;\n}(Marker));\nexport { Diamond };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Marker } from \"./marker\";\nvar Heart = /** @class */ (function (_super) {\n    __extends(Heart, _super);\n    function Heart() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Heart.prototype.rad = function (degree) {\n        return degree / 180 * Math.PI;\n    };\n    Heart.prototype.updatePath = function () {\n        var _a = this, x = _a.x, path = _a.path, size = _a.size, rad = _a.rad;\n        var r = size / 4;\n        var y = this.y + r / 2;\n        path.clear();\n        path.cubicArc(x - r, y - r, r, r, 0, rad(130), rad(330), 0);\n        path.cubicArc(x + r, y - r, r, r, 0, rad(220), rad(50), 0);\n        path.lineTo(x, y + r);\n        path.closePath();\n    };\n    Heart.className = 'Heart';\n    return Heart;\n}(Marker));\nexport { Heart };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Marker } from \"./marker\";\nvar Plus = /** @class */ (function (_super) {\n    __extends(Plus, _super);\n    function Plus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Plus.prototype.updatePath = function () {\n        var _a = this, x = _a.x, y = _a.y;\n        var _b = this, path = _b.path, size = _b.size;\n        var s = size / 3;\n        var hs = s / 2;\n        path.clear();\n        path.moveTo(x -= hs, y -= hs);\n        path.lineTo(x, y -= s);\n        path.lineTo(x += s, y);\n        path.lineTo(x, y += s);\n        path.lineTo(x += s, y);\n        path.lineTo(x, y += s);\n        path.lineTo(x -= s, y);\n        path.lineTo(x, y += s);\n        path.lineTo(x -= s, y);\n        path.lineTo(x, y -= s);\n        path.lineTo(x -= s, y);\n        path.lineTo(x, y -= s);\n        path.closePath();\n    };\n    Plus.className = 'Plus';\n    return Plus;\n}(Marker));\nexport { Plus };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Marker } from \"./marker\";\nvar Triangle = /** @class */ (function (_super) {\n    __extends(Triangle, _super);\n    function Triangle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Triangle.prototype.updatePath = function () {\n        var _a = this, x = _a.x, y = _a.y;\n        var _b = this, path = _b.path, size = _b.size;\n        var s = size * 1.1;\n        path.clear();\n        path.moveTo(x, y -= s * 0.48);\n        path.lineTo(x += s * 0.5, y += s * 0.87);\n        path.lineTo(x -= s, y);\n        path.closePath();\n    };\n    Triangle.className = 'Triangle';\n    return Triangle;\n}(Marker));\nexport { Triangle };\n","import { Square } from \"./square\";\nimport { Circle } from \"./circle\";\nimport { Cross } from \"./cross\";\nimport { Diamond } from \"./diamond\";\nimport { Heart } from \"./heart\";\nimport { Plus } from \"./plus\";\nimport { Triangle } from \"./triangle\";\n// This function is in its own file because putting it into SeriesMarker makes the Legend\n// suddenly aware of the series (it's an agnostic component), and putting it into Marker\n// introduces circular dependencies.\nexport function getMarker(shape) {\n    if (shape === void 0) { shape = Square; }\n    if (typeof shape === 'string') {\n        switch (shape) {\n            case 'circle':\n                return Circle;\n            case 'cross':\n                return Cross;\n            case 'diamond':\n                return Diamond;\n            case 'heart':\n                return Heart;\n            case 'plus':\n                return Plus;\n            case 'triangle':\n                return Triangle;\n            default:\n                return Square;\n        }\n    }\n    if (typeof shape === 'function') {\n        return shape;\n    }\n    return Square;\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Group } from \"../scene/group\";\nimport { Selection } from \"../scene/selection\";\nimport { MarkerLabel } from \"./markerLabel\";\nimport { reactive, Observable } from \"../util/observable\";\nimport { getMarker } from \"./marker/util\";\nimport { createId } from \"../util/id\";\nexport var LegendOrientation;\n(function (LegendOrientation) {\n    LegendOrientation[LegendOrientation[\"Vertical\"] = 0] = \"Vertical\";\n    LegendOrientation[LegendOrientation[\"Horizontal\"] = 1] = \"Horizontal\";\n})(LegendOrientation || (LegendOrientation = {}));\nexport var LegendPosition;\n(function (LegendPosition) {\n    LegendPosition[\"Top\"] = \"top\";\n    LegendPosition[\"Right\"] = \"right\";\n    LegendPosition[\"Bottom\"] = \"bottom\";\n    LegendPosition[\"Left\"] = \"left\";\n})(LegendPosition || (LegendPosition = {}));\nvar LegendLabel = /** @class */ (function (_super) {\n    __extends(LegendLabel, _super);\n    function LegendLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.color = 'black';\n        _this.fontSize = 12;\n        _this.fontFamily = 'Verdana, sans-serif';\n        return _this;\n    }\n    __decorate([\n        reactive('change')\n    ], LegendLabel.prototype, \"color\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], LegendLabel.prototype, \"fontStyle\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], LegendLabel.prototype, \"fontWeight\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], LegendLabel.prototype, \"fontSize\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], LegendLabel.prototype, \"fontFamily\", void 0);\n    return LegendLabel;\n}(Observable));\nexport { LegendLabel };\nvar LegendMarker = /** @class */ (function (_super) {\n    __extends(LegendMarker, _super);\n    function LegendMarker() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.size = 15;\n        /**\n         * Padding between the marker and the label within each legend item.\n         */\n        _this.padding = 8;\n        _this.strokeWidth = 1;\n        return _this;\n    }\n    __decorate([\n        reactive('layoutChange')\n    ], LegendMarker.prototype, \"size\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], LegendMarker.prototype, \"shape\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], LegendMarker.prototype, \"padding\", void 0);\n    __decorate([\n        reactive('change')\n    ], LegendMarker.prototype, \"strokeWidth\", void 0);\n    return LegendMarker;\n}(Observable));\nexport { LegendMarker };\nvar LegendItem = /** @class */ (function (_super) {\n    __extends(LegendItem, _super);\n    function LegendItem() {\n        var _this = _super.call(this) || this;\n        _this.marker = new LegendMarker();\n        _this.label = new LegendLabel();\n        /**\n         * The legend uses grid layout for its items, occupying as few columns as possible when positioned to left or right,\n         * and as few rows as possible when positioned to top or bottom. This config specifies the amount of horizontal\n         * padding between legend items.\n         */\n        _this.paddingX = 16;\n        /**\n         * The legend uses grid layout for its items, occupying as few columns as possible when positioned to left or right,\n         * and as few rows as possible when positioned to top or bottom. This config specifies the amount of vertical\n         * padding between legend items.\n         */\n        _this.paddingY = 8;\n        var changeListener = function () { return _this.fireEvent({ type: 'change' }); };\n        _this.marker.addEventListener('change', changeListener);\n        _this.label.addEventListener('change', changeListener);\n        var layoutChangeListener = function () { return _this.fireEvent({ type: 'layoutChange' }); };\n        _this.marker.addEventListener('layoutChange', layoutChangeListener);\n        _this.label.addEventListener('layoutChange', layoutChangeListener);\n        return _this;\n    }\n    __decorate([\n        reactive('layoutChange')\n    ], LegendItem.prototype, \"paddingX\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], LegendItem.prototype, \"paddingY\", void 0);\n    return LegendItem;\n}(Observable));\nexport { LegendItem };\nvar Legend = /** @class */ (function (_super) {\n    __extends(Legend, _super);\n    function Legend() {\n        var _this = _super.call(this) || this;\n        _this.id = createId(_this);\n        _this.group = new Group();\n        _this.itemSelection = Selection.select(_this.group).selectAll();\n        _this.oldSize = [0, 0];\n        _this.item = new LegendItem();\n        _this.data = [];\n        _this.enabled = true;\n        _this.orientation = LegendOrientation.Vertical;\n        _this.position = LegendPosition.Right;\n        /**\n         * Spacing between the legend and the edge of the chart's element.\n         */\n        _this.spacing = 20;\n        _this._size = [0, 0];\n        _this.addPropertyListener('data', _this.onDataChange);\n        _this.addPropertyListener('enabled', _this.onEnabledChange);\n        _this.addPropertyListener('position', _this.onPositionChange);\n        _this.item.marker.addPropertyListener('shape', _this.onMarkerShapeChange, _this);\n        _this.addEventListener('change', _this.update);\n        _this.item.addEventListener('change', function () { return _this.fireEvent({ type: 'change' }); });\n        _this.item.addEventListener('layoutChange', function () { return _this.fireEvent({ type: 'layoutChange' }); });\n        return _this;\n    }\n    Object.defineProperty(Legend.prototype, \"layoutHorizontalSpacing\", {\n        get: function () {\n            return this.item.paddingX;\n        },\n        /**\n         * @deprecated Please use {@link item.paddingX} instead.\n         */\n        set: function (value) {\n            this.item.paddingX = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Legend.prototype, \"layoutVerticalSpacing\", {\n        get: function () {\n            return this.item.paddingY;\n        },\n        /**\n         * @deprecated Please use {@link item.paddingY} instead.\n         */\n        set: function (value) {\n            this.item.paddingY = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Legend.prototype, \"itemSpacing\", {\n        get: function () {\n            return this.item.marker.padding;\n        },\n        /**\n         * @deprecated Please use {@link item.marker.padding} instead.\n         */\n        set: function (value) {\n            this.item.marker.padding = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Legend.prototype, \"markerShape\", {\n        get: function () {\n            return this.item.marker.shape;\n        },\n        /**\n         * @deprecated Please use {@link item.marker.shape} instead.\n         */\n        set: function (value) {\n            this.item.marker.shape = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Legend.prototype, \"markerSize\", {\n        get: function () {\n            return this.item.marker.size;\n        },\n        /**\n         * @deprecated Please use {@link item.marker.size} instead.\n         */\n        set: function (value) {\n            this.item.marker.size = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Legend.prototype, \"strokeWidth\", {\n        get: function () {\n            return this.item.marker.strokeWidth;\n        },\n        /**\n         * @deprecated Please use {@link item.marker.strokeWidth} instead.\n         */\n        set: function (value) {\n            this.item.marker.strokeWidth = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Legend.prototype, \"color\", {\n        get: function () {\n            return this.item.label.color;\n        },\n        /**\n         * @deprecated Please use {@link item.label.color} instead.\n         */\n        set: function (value) {\n            this.item.label.color = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Legend.prototype, \"fontStyle\", {\n        get: function () {\n            return this.item.label.fontStyle;\n        },\n        /**\n         * @deprecated Please use {@link item.label.fontStyle} instead.\n         */\n        set: function (value) {\n            this.item.label.fontStyle = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Legend.prototype, \"fontWeight\", {\n        get: function () {\n            return this.item.label.fontWeight;\n        },\n        /**\n         * @deprecated Please use {@link item.label.fontWeight} instead.\n         */\n        set: function (value) {\n            this.item.label.fontWeight = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Legend.prototype, \"fontSize\", {\n        get: function () {\n            return this.item.label.fontSize;\n        },\n        /**\n         * @deprecated Please use {@link item.label.fontSize} instead.\n         */\n        set: function (value) {\n            this.item.label.fontSize = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Legend.prototype, \"fontFamily\", {\n        get: function () {\n            return this.item.label.fontFamily;\n        },\n        /**\n         * @deprecated Please use {@link item.label.fontFamily} instead.\n         */\n        set: function (value) {\n            this.item.label.fontFamily = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Legend.prototype, \"size\", {\n        get: function () {\n            return this._size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Legend.prototype.onDataChange = function (event) {\n        this.group.visible = event.value.length > 0 && this.enabled;\n    };\n    Legend.prototype.onEnabledChange = function (event) {\n        this.group.visible = event.value && this.data.length > 0;\n    };\n    Legend.prototype.onPositionChange = function (event) {\n        switch (event.value) {\n            case 'right':\n            case 'left':\n                this.orientation = LegendOrientation.Vertical;\n                break;\n            case 'bottom':\n            case 'top':\n                this.orientation = LegendOrientation.Horizontal;\n                break;\n        }\n    };\n    Legend.prototype.onMarkerShapeChange = function () {\n        this.itemSelection = this.itemSelection.setData([]);\n        this.itemSelection.exit.remove();\n    };\n    /**\n     * The method is given the desired size of the legend, which only serves as a hint.\n     * The vertically oriented legend will take as much horizontal space as needed, but will\n     * respect the height constraints, and the horizontal legend will take as much vertical\n     * space as needed in an attempt not to exceed the given width.\n     * After the layout is done, the {@link size} will contain the actual size of the legend.\n     * If the actual size is not the same as the previous actual size, the legend will fire\n     * the 'layoutChange' event to communicate that another layout is needed, and the above\n     * process should be repeated.\n     * @param width\n     * @param height\n     */\n    Legend.prototype.performLayout = function (width, height) {\n        var item = this.item;\n        var marker = item.marker, paddingX = item.paddingX, paddingY = item.paddingY;\n        var updateSelection = this.itemSelection.setData(this.data, function (_, datum) {\n            var MarkerShape = getMarker(marker.shape || datum.marker.shape);\n            return datum.id + '-' + datum.itemId + '-' + MarkerShape.name;\n        });\n        updateSelection.exit.remove();\n        var enterSelection = updateSelection.enter.append(MarkerLabel).each(function (node, datum) {\n            var MarkerShape = getMarker(marker.shape || datum.marker.shape);\n            node.marker = new MarkerShape();\n        });\n        var itemSelection = this.itemSelection = updateSelection.merge(enterSelection);\n        var itemCount = itemSelection.size;\n        // Update properties that affect the size of the legend items and measure them.\n        var bboxes = [];\n        var itemMarker = this.item.marker;\n        var itemLabel = this.item.label;\n        itemSelection.each(function (markerLabel, datum) {\n            // TODO: measure only when one of these properties or data change (in a separate routine)\n            markerLabel.markerSize = itemMarker.size;\n            markerLabel.spacing = itemMarker.padding;\n            markerLabel.fontStyle = itemLabel.fontStyle;\n            markerLabel.fontWeight = itemLabel.fontWeight;\n            markerLabel.fontSize = itemLabel.fontSize;\n            markerLabel.fontFamily = itemLabel.fontFamily;\n            markerLabel.text = datum.label.text;\n            bboxes.push(markerLabel.computeBBox());\n        });\n        var itemHeight = bboxes.length && bboxes[0].height;\n        var rowCount = 0;\n        var columnWidth = 0;\n        var paddedItemsWidth = 0;\n        var paddedItemsHeight = 0;\n        switch (this.orientation) {\n            case LegendOrientation.Horizontal:\n                if (!(isFinite(width) && width > 0)) {\n                    return false;\n                }\n                rowCount = 0;\n                var columnCount = 0;\n                // Split legend items into columns until the width is suitable.\n                do {\n                    var itemsWidth = 0;\n                    columnCount = 0;\n                    columnWidth = 0;\n                    rowCount++;\n                    var i = 0;\n                    while (i < itemCount) {\n                        var bbox = bboxes[i];\n                        if (bbox.width > columnWidth) {\n                            columnWidth = bbox.width;\n                        }\n                        i++;\n                        if (i % rowCount === 0) {\n                            itemsWidth += columnWidth;\n                            columnWidth = 0;\n                            columnCount++;\n                        }\n                    }\n                    if (i % rowCount !== 0) {\n                        itemsWidth += columnWidth;\n                        columnCount++;\n                    }\n                    paddedItemsWidth = itemsWidth + (columnCount - 1) * paddingX;\n                } while (paddedItemsWidth > width && columnCount > 1);\n                paddedItemsHeight = itemHeight * rowCount + (rowCount - 1) * paddingY;\n                break;\n            case LegendOrientation.Vertical:\n                if (!(isFinite(height) && height > 0)) {\n                    return false;\n                }\n                rowCount = itemCount * 2;\n                // Split legend items into columns until the height is suitable.\n                do {\n                    rowCount = (rowCount >> 1) + (rowCount % 2);\n                    columnWidth = 0;\n                    var itemsWidth = 0;\n                    var itemsHeight = 0;\n                    var columnCount_1 = 0;\n                    var i = 0;\n                    while (i < itemCount) {\n                        var bbox = bboxes[i];\n                        if (!columnCount_1) {\n                            itemsHeight += bbox.height;\n                        }\n                        if (bbox.width > columnWidth) {\n                            columnWidth = bbox.width;\n                        }\n                        i++;\n                        if (i % rowCount === 0) {\n                            itemsWidth += columnWidth;\n                            columnWidth = 0;\n                            columnCount_1++;\n                        }\n                    }\n                    if (i % rowCount !== 0) {\n                        itemsWidth += columnWidth;\n                        columnCount_1++;\n                    }\n                    paddedItemsWidth = itemsWidth + (columnCount_1 - 1) * paddingX;\n                    paddedItemsHeight = itemsHeight + (rowCount - 1) * paddingY;\n                } while (paddedItemsHeight > height && rowCount > 1);\n                break;\n        }\n        // Top-left corner of the first legend item.\n        var startX = (width - paddedItemsWidth) / 2;\n        var startY = (height - paddedItemsHeight) / 2;\n        var x = 0;\n        var y = 0;\n        columnWidth = 0;\n        // Position legend items using the layout computed above.\n        itemSelection.each(function (markerLabel, datum, i) {\n            // Round off for pixel grid alignment to work properly.\n            markerLabel.translationX = Math.floor(startX + x);\n            markerLabel.translationY = Math.floor(startY + y);\n            var bbox = bboxes[i];\n            if (bbox.width > columnWidth) {\n                columnWidth = bbox.width;\n            }\n            if ((i + 1) % rowCount === 0) {\n                x += columnWidth + paddingX;\n                y = 0;\n                columnWidth = 0;\n            }\n            else {\n                y += bbox.height + paddingY;\n            }\n        });\n        // Update legend item properties that don't affect the layout.\n        this.update();\n        var size = this._size;\n        var oldSize = this.oldSize;\n        size[0] = paddedItemsWidth;\n        size[1] = paddedItemsHeight;\n        if (size[0] !== oldSize[0] || size[1] !== oldSize[1]) {\n            oldSize[0] = size[0];\n            oldSize[1] = size[1];\n        }\n    };\n    Legend.prototype.update = function () {\n        var _this = this;\n        this.itemSelection.each(function (markerLabel, datum) {\n            var marker = datum.marker;\n            markerLabel.markerFill = marker.fill;\n            markerLabel.markerStroke = marker.stroke;\n            markerLabel.markerStrokeWidth = _this.item.marker.strokeWidth;\n            markerLabel.markerFillOpacity = marker.fillOpacity;\n            markerLabel.markerStrokeOpacity = marker.strokeOpacity;\n            markerLabel.opacity = datum.enabled ? 1 : 0.5;\n            markerLabel.color = _this.item.label.color;\n        });\n    };\n    Legend.prototype.getDatumForPoint = function (x, y) {\n        var node = this.group.pickNode(x, y);\n        if (node && node.parent) {\n            return node.parent.datum;\n        }\n    };\n    Legend.className = 'Legend';\n    __decorate([\n        reactive('layoutChange')\n    ], Legend.prototype, \"data\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], Legend.prototype, \"enabled\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], Legend.prototype, \"orientation\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], Legend.prototype, \"position\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], Legend.prototype, \"spacing\", void 0);\n    return Legend;\n}(Observable));\nexport { Legend };\n","var SizeMonitor = /** @class */ (function () {\n    function SizeMonitor() {\n    }\n    SizeMonitor.init = function () {\n        var _this = this;\n        var NativeResizeObserver = window.ResizeObserver;\n        if (NativeResizeObserver) {\n            this.resizeObserver = new NativeResizeObserver(function (entries) {\n                for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n                    var entry = entries_1[_i];\n                    var _a = entry.contentRect, width = _a.width, height = _a.height;\n                    _this.checkSize(_this.elements.get(entry.target), entry.target, width, height);\n                }\n            });\n        }\n        else { // polyfill (more reliable even in browsers that support ResizeObserver)\n            var step = function () {\n                _this.elements.forEach(function (entry, element) {\n                    var width = element.clientWidth ? element.clientWidth : 0;\n                    var height = element.clientHeight ? element.clientHeight : 0;\n                    _this.checkSize(entry, element, width, height);\n                });\n            };\n            window.setInterval(step, 100);\n        }\n        this.ready = true;\n    };\n    SizeMonitor.checkSize = function (entry, element, width, height) {\n        if (entry) {\n            if (!entry.size || width !== entry.size.width || height !== entry.size.height) {\n                entry.size = { width: width, height: height };\n                entry.cb(entry.size, element);\n            }\n        }\n    };\n    // Only a single callback is supported.\n    SizeMonitor.observe = function (element, cb) {\n        if (!this.ready) {\n            this.init();\n        }\n        this.unobserve(element);\n        if (this.resizeObserver) {\n            this.resizeObserver.observe(element);\n        }\n        this.elements.set(element, { cb: cb });\n    };\n    SizeMonitor.unobserve = function (element) {\n        if (this.resizeObserver) {\n            this.resizeObserver.unobserve(element);\n        }\n        this.elements.delete(element);\n    };\n    SizeMonitor.elements = new Map();\n    SizeMonitor.requestAnimationFrameId = 0;\n    SizeMonitor.ready = false;\n    return SizeMonitor;\n}());\nexport { SizeMonitor };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Group } from \"../../scene/group\";\nimport { Observable, reactive } from \"../../util/observable\";\nimport { ChartAxisDirection } from \"../chartAxis\";\nimport { createId } from \"../../util/id\";\nvar SeriesTooltip = /** @class */ (function (_super) {\n    __extends(SeriesTooltip, _super);\n    function SeriesTooltip() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.enabled = true;\n        return _this;\n    }\n    __decorate([\n        reactive('change')\n    ], SeriesTooltip.prototype, \"enabled\", void 0);\n    return SeriesTooltip;\n}(Observable));\nexport { SeriesTooltip };\nvar Series = /** @class */ (function (_super) {\n    __extends(Series, _super);\n    function Series() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.id = createId(_this);\n        /**\n         * The group node that contains all the nodes used to render this series.\n         */\n        _this.group = new Group();\n        _this.directions = [ChartAxisDirection.X, ChartAxisDirection.Y];\n        /**\n         * @deprecated Use {@link tooltip.enabled} instead.\n         */\n        _this.tooltipEnabled = true;\n        _this.data = undefined;\n        _this.visible = true;\n        _this.showInLegend = true;\n        _this.scheduleLayout = function () {\n            _this.fireEvent({ type: 'layoutChange' });\n        };\n        _this.scheduleData = function () {\n            _this.fireEvent({ type: 'dataChange' });\n        };\n        return _this;\n    }\n    Object.defineProperty(Series.prototype, \"type\", {\n        get: function () {\n            return this.constructor.type || '';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Series.prototype.setColors = function (fills, strokes) { };\n    /**\n     * Returns the actual keys used (to fetch the values from `data` items) for the given direction.\n     */\n    Series.prototype.getKeys = function (direction) {\n        var _this = this;\n        var directionKeys = this.directionKeys;\n        var keys = directionKeys && directionKeys[direction];\n        var values = [];\n        if (keys) {\n            keys.forEach(function (key) {\n                var value = _this[key];\n                if (value) {\n                    if (Array.isArray(value)) {\n                        values.push.apply(values, value);\n                    }\n                    else {\n                        values.push(value);\n                    }\n                }\n            });\n        }\n        return values;\n    };\n    // Returns node data associated with the rendered portion of the series' data.\n    Series.prototype.getNodeData = function () {\n        return [];\n    };\n    Series.prototype.fireNodeClickEvent = function (event, datum) { };\n    Series.prototype.toggleSeriesItem = function (itemId, enabled) {\n        this.visible = enabled;\n    };\n    // Each series is expected to have its own logic to efficiently update its nodes\n    // on hightlight changes.\n    Series.prototype.onHighlightChange = function () { };\n    Series.prototype.fixNumericExtent = function (extent, type) {\n        if (!extent) {\n            // if (type) {\n            //     console.warn(`The ${type}-domain could not be found (no valid values), using the default of [0, 1].`);\n            // }\n            return [0, 1];\n        }\n        var min = extent[0], max = extent[1];\n        if (min instanceof Date) {\n            min = min.getTime();\n        }\n        if (max instanceof Date) {\n            max = max.getTime();\n        }\n        if (min === max) {\n            var padding = Math.abs(min * 0.01);\n            min -= padding;\n            max += padding;\n            // if (type) {\n            //     console.warn(`The ${type}-domain has zero length and has been automatically expanded`\n            //         + ` by 1 in each direction (from the single valid ${type}-value: ${min}).`);\n            // }\n        }\n        if (!isFinite(min) || !isFinite(max)) {\n            min = 0;\n            max = 1;\n            // if (type) {\n            //     console.warn(`The ${type}-domain has infinite length, using the default of [0, 1].`);\n            // }\n        }\n        return [min, max];\n    };\n    __decorate([\n        reactive('dataChange')\n    ], Series.prototype, \"data\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], Series.prototype, \"visible\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], Series.prototype, \"showInLegend\", void 0);\n    return Series;\n}(Observable));\nexport { Series };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Observable, reactive } from \"../../util/observable\";\nimport { Circle } from \"../marker/circle\";\nvar SeriesMarker = /** @class */ (function (_super) {\n    __extends(SeriesMarker, _super);\n    function SeriesMarker() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.enabled = true;\n        /**\n         * One of the predefined marker names, or a marker constructor function (for user-defined markers).\n         * A series will create one marker instance per data point.\n         */\n        _this.shape = Circle;\n        _this.size = 6;\n        /**\n         * In case a series has the `sizeKey` set, the `sizeKey` values along with the `size` and `maxSize` configs\n         * will be used to determine the size of the marker. All values will be mapped to a marker size\n         * within the `[size, maxSize]` range, where the largest values will correspond to the `maxSize`\n         * and the lowest to the `size`.\n         */\n        _this.maxSize = 30;\n        _this.strokeWidth = 1;\n        return _this;\n    }\n    __decorate([\n        reactive('change')\n    ], SeriesMarker.prototype, \"enabled\", void 0);\n    __decorate([\n        reactive('change')\n    ], SeriesMarker.prototype, \"shape\", void 0);\n    __decorate([\n        reactive('change')\n    ], SeriesMarker.prototype, \"size\", void 0);\n    __decorate([\n        reactive('change')\n    ], SeriesMarker.prototype, \"maxSize\", void 0);\n    __decorate([\n        reactive('change')\n    ], SeriesMarker.prototype, \"domain\", void 0);\n    __decorate([\n        reactive('change')\n    ], SeriesMarker.prototype, \"fill\", void 0);\n    __decorate([\n        reactive('change')\n    ], SeriesMarker.prototype, \"stroke\", void 0);\n    __decorate([\n        reactive('change')\n    ], SeriesMarker.prototype, \"strokeWidth\", void 0);\n    return SeriesMarker;\n}(Observable));\nexport { SeriesMarker };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Series } from \"../series\";\nimport { ChartAxisDirection } from \"../../chartAxis\";\nimport { SeriesMarker } from \"../seriesMarker\";\nvar CartesianSeries = /** @class */ (function (_super) {\n    __extends(CartesianSeries, _super);\n    function CartesianSeries() {\n        var _a;\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.directionKeys = (_a = {},\n            _a[ChartAxisDirection.X] = ['xKey'],\n            _a[ChartAxisDirection.Y] = ['yKey'],\n            _a);\n        return _this;\n    }\n    return CartesianSeries;\n}(Series));\nexport { CartesianSeries };\nvar CartesianSeriesMarker = /** @class */ (function (_super) {\n    __extends(CartesianSeriesMarker, _super);\n    function CartesianSeriesMarker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return CartesianSeriesMarker;\n}(SeriesMarker));\nexport { CartesianSeriesMarker };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Scene } from \"../scene/scene\";\nimport { Group } from \"../scene/group\";\nimport { Padding } from \"../util/padding\";\nimport { Shape } from \"../scene/shape/shape\";\nimport { Rect } from \"../scene/shape/rect\";\nimport { Legend } from \"./legend\";\nimport { find } from \"../util/array\";\nimport { SizeMonitor } from \"../util/sizeMonitor\";\nimport { Observable, reactive } from \"../util/observable\";\nimport { CartesianSeries } from \"./series/cartesian/cartesianSeries\";\nimport { createId } from \"../util/id\";\nvar defaultTooltipCss = \"\\n.ag-chart-tooltip {\\n    display: table;\\n    position: absolute;\\n    user-select: none;\\n    pointer-events: none;\\n    white-space: nowrap;\\n    z-index: 99999;\\n    font: 12px Verdana, sans-serif;\\n    color: black;\\n    background: rgb(244, 244, 244);\\n    border-radius: 5px;\\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\\n}\\n\\n.ag-chart-tooltip-hidden {\\n    top: -10000px !important;\\n}\\n\\n.ag-chart-tooltip-title {\\n    font-weight: bold;\\n    padding: 7px;\\n    border-top-left-radius: 5px;\\n    border-top-right-radius: 5px;\\n    color: white;\\n    background-color: #888888;\\n    border-top-left-radius: 5px;\\n    border-top-right-radius: 5px;\\n}\\n\\n.ag-chart-tooltip-content {\\n    padding: 7px;\\n    line-height: 1.7em;\\n    border-bottom-left-radius: 5px;\\n    border-bottom-right-radius: 5px;\\n    overflow: hidden;\\n}\\n\\n.ag-chart-tooltip-content:empty {\\n    padding: 0;\\n    height: 7px;\\n}\\n\\n.ag-chart-tooltip-arrow::before {\\n    content: \\\"\\\";\\n\\n    position: absolute;\\n    top: 100%;\\n    left: 50%;\\n    transform: translateX(-50%);\\n\\n    border: 6px solid #989898;\\n\\n    border-left-color: transparent;\\n    border-right-color: transparent;\\n    border-top-color: #989898;\\n    border-bottom-color: transparent;\\n\\n    width: 0;\\n    height: 0;\\n\\n    margin: 0 auto;\\n}\\n\\n.ag-chart-tooltip-arrow::after {\\n    content: \\\"\\\";\\n\\n    position: absolute;\\n    top: 100%;\\n    left: 50%;\\n    transform: translateX(-50%);\\n\\n    border: 5px solid black;\\n\\n    border-left-color: transparent;\\n    border-right-color: transparent;\\n    border-top-color: rgb(244, 244, 244);\\n    border-bottom-color: transparent;\\n\\n    width: 0;\\n    height: 0;\\n\\n    margin: 0 auto;\\n}\\n\\n.ag-chart-wrapper {\\n    box-sizing: border-box;\\n    overflow: hidden;\\n}\\n\";\nexport function toTooltipHtml(input, defaults) {\n    if (typeof input === 'string') {\n        return input;\n    }\n    defaults = defaults || {};\n    var _a = input.content, content = _a === void 0 ? defaults.content || '' : _a, _b = input.title, title = _b === void 0 ? defaults.title || undefined : _b, _c = input.color, color = _c === void 0 ? defaults.color || 'white' : _c, _d = input.backgroundColor, backgroundColor = _d === void 0 ? defaults.backgroundColor || '#888' : _d;\n    var titleHtml = title ? \"<div class=\\\"\" + Chart.defaultTooltipClass + \"-title\\\"\\n        style=\\\"color: \" + color + \"; background-color: \" + backgroundColor + \"\\\">\" + title + \"</div>\" : '';\n    return titleHtml + \"<div class=\\\"\" + Chart.defaultTooltipClass + \"-content\\\">\" + content + \"</div>\";\n}\nvar ChartTooltip = /** @class */ (function (_super) {\n    __extends(ChartTooltip, _super);\n    function ChartTooltip(chart) {\n        var _this = _super.call(this) || this;\n        _this.element = document.createElement('div');\n        _this.enabled = true;\n        _this.class = Chart.defaultTooltipClass;\n        _this.delay = 0;\n        /**\n         * If `true`, the tooltip will be shown for the marker closest to the mouse cursor.\n         * Only has effect on series with markers.\n         */\n        _this.tracking = true;\n        _this.showTimeout = 0;\n        _this.constrained = false;\n        _this.chart = chart;\n        _this.class = '';\n        var tooltipRoot = document.body;\n        tooltipRoot.appendChild(_this.element);\n        // Detect when the chart becomes invisible and hide the tooltip as well.\n        if (window.IntersectionObserver) {\n            var target_1 = _this.chart.scene.canvas.element;\n            var observer = new IntersectionObserver(function (entries) {\n                for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n                    var entry = entries_1[_i];\n                    if (entry.target === target_1 && entry.intersectionRatio === 0) {\n                        _this.toggle(false);\n                    }\n                }\n            }, { root: tooltipRoot });\n            observer.observe(target_1);\n            _this.observer = observer;\n        }\n        return _this;\n    }\n    ChartTooltip.prototype.isVisible = function () {\n        var element = this.element;\n        if (element.classList) { // if not IE11\n            return !element.classList.contains(Chart.defaultTooltipClass + '-hidden');\n        }\n        // IE11 part.\n        var classes = element.getAttribute('class');\n        if (classes) {\n            return classes.split(' ').indexOf(Chart.defaultTooltipClass + '-hidden') < 0;\n        }\n        return false;\n    };\n    ChartTooltip.prototype.updateClass = function (visible, constrained) {\n        var classList = [Chart.defaultTooltipClass, this.class];\n        if (visible !== true) {\n            classList.push(Chart.defaultTooltipClass + \"-hidden\");\n        }\n        if (constrained !== true) {\n            classList.push(Chart.defaultTooltipClass + \"-arrow\");\n        }\n        this.element.setAttribute('class', classList.join(' '));\n    };\n    /**\n     * Shows tooltip at the given event's coordinates.\n     * If the `html` parameter is missing, moves the existing tooltip to the new position.\n     */\n    ChartTooltip.prototype.show = function (meta, html, instantly) {\n        var _this = this;\n        if (instantly === void 0) { instantly = false; }\n        var el = this.element;\n        if (html !== undefined) {\n            el.innerHTML = html;\n        }\n        else if (!el.innerHTML) {\n            return;\n        }\n        var left = meta.pageX - el.clientWidth / 2;\n        var top = meta.pageY - el.clientHeight - 8;\n        this.constrained = false;\n        if (this.chart.container) {\n            var tooltipRect = el.getBoundingClientRect();\n            var minLeft = 0;\n            var maxLeft = window.innerWidth - tooltipRect.width;\n            if (left < minLeft) {\n                left = minLeft;\n                this.updateClass(true, this.constrained = true);\n            }\n            else if (left > maxLeft) {\n                left = maxLeft;\n                this.updateClass(true, this.constrained = true);\n            }\n            if (top < window.pageYOffset) {\n                top = meta.pageY + 20;\n                this.updateClass(true, this.constrained = true);\n            }\n        }\n        el.style.left = left + \"px\";\n        el.style.top = top + \"px\";\n        if (this.delay > 0 && !instantly) {\n            this.toggle(false);\n            this.showTimeout = window.setTimeout(function () {\n                _this.toggle(true);\n            }, this.delay);\n            return;\n        }\n        this.toggle(true);\n    };\n    ChartTooltip.prototype.toggle = function (visible) {\n        if (!visible) {\n            window.clearTimeout(this.showTimeout);\n            if (this.chart.lastPick && !this.delay) {\n                this.chart.dehighlightDatum();\n                this.chart.lastPick = undefined;\n            }\n        }\n        this.updateClass(visible, this.constrained);\n    };\n    ChartTooltip.prototype.destroy = function () {\n        var parentNode = this.element.parentNode;\n        if (parentNode) {\n            parentNode.removeChild(this.element);\n        }\n        if (this.observer) {\n            this.observer.unobserve(this.chart.scene.canvas.element);\n        }\n    };\n    __decorate([\n        reactive()\n    ], ChartTooltip.prototype, \"enabled\", void 0);\n    __decorate([\n        reactive()\n    ], ChartTooltip.prototype, \"class\", void 0);\n    __decorate([\n        reactive()\n    ], ChartTooltip.prototype, \"delay\", void 0);\n    __decorate([\n        reactive()\n    ], ChartTooltip.prototype, \"tracking\", void 0);\n    return ChartTooltip;\n}(Observable));\nexport { ChartTooltip };\nvar Chart = /** @class */ (function (_super) {\n    __extends(Chart, _super);\n    function Chart(document) {\n        if (document === void 0) { document = window.document; }\n        var _this = _super.call(this) || this;\n        _this.id = createId(_this);\n        _this.background = new Rect();\n        _this.legend = new Legend();\n        _this.legendAutoPadding = new Padding();\n        _this.captionAutoPadding = 0; // top padding only\n        _this._container = undefined;\n        _this._data = [];\n        _this._autoSize = false;\n        _this._tooltipClass = Chart.defaultTooltipClass;\n        /**\n         * @deprecated Please use {@link tooltip.tracking} instead.\n         */\n        _this.tooltipTracking = true;\n        _this.padding = new Padding(20);\n        _this._axes = [];\n        _this._series = [];\n        _this._axesChanged = false;\n        _this._seriesChanged = false;\n        _this.layoutCallbackId = 0;\n        _this._performLayout = function () {\n            _this.layoutCallbackId = 0;\n            _this.background.width = _this.width;\n            _this.background.height = _this.height;\n            _this.performLayout();\n            if (!_this.layoutPending) {\n                _this.fireEvent({ type: 'layoutDone' });\n            }\n        };\n        _this.dataCallbackId = 0;\n        _this._onMouseDown = _this.onMouseDown.bind(_this);\n        _this._onMouseUp = _this.onMouseUp.bind(_this);\n        _this._onMouseMove = _this.onMouseMove.bind(_this);\n        _this._onMouseOut = _this.onMouseOut.bind(_this);\n        _this._onClick = _this.onClick.bind(_this);\n        var root = new Group();\n        var background = _this.background;\n        background.fill = 'white';\n        root.appendChild(background);\n        var element = _this._element = document.createElement('div');\n        element.setAttribute('class', 'ag-chart-wrapper');\n        var scene = new Scene(document);\n        _this.scene = scene;\n        scene.root = root;\n        scene.container = element;\n        _this.autoSize = true;\n        var legend = _this.legend;\n        legend.addEventListener('layoutChange', _this.onLayoutChange, _this);\n        legend.addPropertyListener('position', _this.onLegendPositionChange, _this);\n        _this.tooltip = new ChartTooltip(_this);\n        _this.tooltip.addPropertyListener('class', function () { return _this.tooltip.toggle(); });\n        if (Chart.tooltipDocuments.indexOf(document) < 0) {\n            var styleElement = document.createElement('style');\n            styleElement.innerHTML = defaultTooltipCss;\n            // Make sure the default tooltip style goes before other styles so it can be overridden.\n            document.head.insertBefore(styleElement, document.head.querySelector('style'));\n            Chart.tooltipDocuments.push(document);\n        }\n        _this.setupDomListeners(scene.canvas.element);\n        _this.addPropertyListener('title', _this.onCaptionChange);\n        _this.addPropertyListener('subtitle', _this.onCaptionChange);\n        _this.addEventListener('layoutChange', function () { return _this.layoutPending = true; });\n        return _this;\n    }\n    Object.defineProperty(Chart.prototype, \"container\", {\n        get: function () {\n            return this._container;\n        },\n        set: function (value) {\n            if (this._container !== value) {\n                var parentNode = this.element.parentNode;\n                if (parentNode != null) {\n                    parentNode.removeChild(this.element);\n                }\n                if (value) {\n                    value.appendChild(this.element);\n                }\n                this._container = value;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"data\", {\n        get: function () {\n            return this._data;\n        },\n        set: function (data) {\n            this._data = data;\n            this.series.forEach(function (series) { return series.data = data; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"width\", {\n        get: function () {\n            return this.scene.width;\n        },\n        set: function (value) {\n            this.autoSize = false;\n            if (this.width !== value) {\n                this.scene.resize(value, this.height);\n                this.fireEvent({ type: 'layoutChange' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"height\", {\n        get: function () {\n            return this.scene.height;\n        },\n        set: function (value) {\n            this.autoSize = false;\n            if (this.height !== value) {\n                this.scene.resize(this.width, value);\n                this.fireEvent({ type: 'layoutChange' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"autoSize\", {\n        get: function () {\n            return this._autoSize;\n        },\n        set: function (value) {\n            if (this._autoSize !== value) {\n                this._autoSize = value;\n                var style = this.element.style;\n                if (value) {\n                    var chart_1 = this; // capture `this` for IE11\n                    SizeMonitor.observe(this.element, function (size) {\n                        if (size.width !== chart_1.width || size.height !== chart_1.height) {\n                            chart_1.scene.resize(size.width, size.height);\n                            chart_1.fireEvent({ type: 'layoutChange' });\n                        }\n                    });\n                    style.display = 'block';\n                    style.width = '100%';\n                    style.height = '100%';\n                }\n                else {\n                    SizeMonitor.unobserve(this.element);\n                    style.display = 'inline-block';\n                    style.width = 'auto';\n                    style.height = 'auto';\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"tooltipClass\", {\n        get: function () {\n            return this.tooltip.class;\n        },\n        /**\n         * @deprecated Please use {@link tooltip.class} instead.\n         */\n        set: function (value) {\n            this.tooltip.class = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.download = function (fileName) {\n        this.scene.download(fileName);\n    };\n    Chart.prototype.destroy = function () {\n        this.tooltip.destroy();\n        SizeMonitor.unobserve(this.element);\n        this.container = undefined;\n        this.cleanupDomListeners(this.scene.canvas.element);\n        this.scene.container = undefined;\n    };\n    Chart.prototype.onLayoutChange = function () {\n        this.layoutPending = true;\n    };\n    Chart.prototype.onLegendPositionChange = function () {\n        this.legendAutoPadding.clear();\n        this.layoutPending = true;\n    };\n    Chart.prototype.onCaptionChange = function (event) {\n        var value = event.value, oldValue = event.oldValue;\n        if (oldValue) {\n            oldValue.removeEventListener('change', this.onLayoutChange, this);\n            this.scene.root.removeChild(oldValue.node);\n        }\n        if (value) {\n            value.addEventListener('change', this.onLayoutChange, this);\n            this.scene.root.appendChild(value.node);\n        }\n    };\n    Object.defineProperty(Chart.prototype, \"element\", {\n        get: function () {\n            return this._element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"axes\", {\n        get: function () {\n            return this._axes;\n        },\n        set: function (values) {\n            var _this = this;\n            this._axes.forEach(function (axis) { return _this.detachAxis(axis); });\n            // make linked axes go after the regular ones (simulates stable sort by `linkedTo` property)\n            this._axes = values.filter(function (a) { return !a.linkedTo; }).concat(values.filter(function (a) { return a.linkedTo; }));\n            this._axes.forEach(function (axis) { return _this.attachAxis(axis); });\n            this.axesChanged = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.attachAxis = function (axis) {\n        this.scene.root.insertBefore(axis.group, this.seriesRoot);\n    };\n    Chart.prototype.detachAxis = function (axis) {\n        this.scene.root.removeChild(axis.group);\n    };\n    Object.defineProperty(Chart.prototype, \"series\", {\n        get: function () {\n            return this._series;\n        },\n        set: function (values) {\n            var _this = this;\n            this.removeAllSeries();\n            values.forEach(function (series) { return _this.addSeries(series); });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.scheduleLayout = function () {\n        this.layoutPending = true;\n    };\n    Chart.prototype.scheduleData = function () {\n        // To prevent the chart from thinking the cursor is over the same node\n        // after a change to data (the nodes are reused on data changes).\n        this.dehighlightDatum();\n        this.dataPending = true;\n    };\n    Chart.prototype.addSeries = function (series, before) {\n        var _a = this, allSeries = _a.series, seriesRoot = _a.seriesRoot;\n        var canAdd = allSeries.indexOf(series) < 0;\n        if (canAdd) {\n            var beforeIndex = before ? allSeries.indexOf(before) : -1;\n            if (beforeIndex >= 0) {\n                allSeries.splice(beforeIndex, 0, series);\n                seriesRoot.insertBefore(series.group, before.group);\n            }\n            else {\n                allSeries.push(series);\n                seriesRoot.append(series.group);\n            }\n            this.initSeries(series);\n            this.seriesChanged = true;\n            this.axesChanged = true;\n            return true;\n        }\n        return false;\n    };\n    Chart.prototype.initSeries = function (series) {\n        series.chart = this;\n        if (!series.data) {\n            series.data = this.data;\n        }\n        series.addEventListener('layoutChange', this.scheduleLayout, this);\n        series.addEventListener('dataChange', this.scheduleData, this);\n        series.addEventListener('legendChange', this.updateLegend, this);\n        series.addEventListener('nodeClick', this.onSeriesNodeClick, this);\n    };\n    Chart.prototype.freeSeries = function (series) {\n        series.chart = undefined;\n        series.removeEventListener('layoutChange', this.scheduleLayout, this);\n        series.removeEventListener('dataChange', this.scheduleData, this);\n        series.removeEventListener('legendChange', this.updateLegend, this);\n        series.removeEventListener('nodeClick', this.onSeriesNodeClick, this);\n    };\n    Chart.prototype.addSeriesAfter = function (series, after) {\n        var _a = this, allSeries = _a.series, seriesRoot = _a.seriesRoot;\n        var canAdd = allSeries.indexOf(series) < 0;\n        if (canAdd) {\n            var afterIndex = after ? this.series.indexOf(after) : -1;\n            if (afterIndex >= 0) {\n                if (afterIndex + 1 < allSeries.length) {\n                    seriesRoot.insertBefore(series.group, allSeries[afterIndex + 1].group);\n                }\n                else {\n                    seriesRoot.append(series.group);\n                }\n                this.initSeries(series);\n                allSeries.splice(afterIndex + 1, 0, series);\n            }\n            else {\n                if (allSeries.length > 0) {\n                    seriesRoot.insertBefore(series.group, allSeries[0].group);\n                }\n                else {\n                    seriesRoot.append(series.group);\n                }\n                this.initSeries(series);\n                allSeries.unshift(series);\n            }\n            this.seriesChanged = true;\n            this.axesChanged = true;\n        }\n        return false;\n    };\n    Chart.prototype.removeSeries = function (series) {\n        var index = this.series.indexOf(series);\n        if (index >= 0) {\n            this.series.splice(index, 1);\n            this.freeSeries(series);\n            this.seriesRoot.removeChild(series.group);\n            this.seriesChanged = true;\n            return true;\n        }\n        return false;\n    };\n    Chart.prototype.removeAllSeries = function () {\n        var _this = this;\n        this.series.forEach(function (series) {\n            _this.freeSeries(series);\n            _this.seriesRoot.removeChild(series.group);\n        });\n        this._series = []; // using `_series` instead of `series` to prevent infinite recursion\n        this.seriesChanged = true;\n    };\n    Chart.prototype.assignSeriesToAxes = function () {\n        var _this = this;\n        this.axes.forEach(function (axis) {\n            var axisName = axis.direction + 'Axis';\n            var boundSeries = [];\n            _this.series.forEach(function (series) {\n                if (series[axisName] === axis) {\n                    boundSeries.push(series);\n                }\n            });\n            axis.boundSeries = boundSeries;\n        });\n        this.seriesChanged = false;\n    };\n    Chart.prototype.assignAxesToSeries = function (force) {\n        var _this = this;\n        if (force === void 0) { force = false; }\n        // This method has to run before `assignSeriesToAxes`.\n        var directionToAxesMap = {};\n        this.axes.forEach(function (axis) {\n            var direction = axis.direction;\n            var directionAxes = directionToAxesMap[direction] || (directionToAxesMap[direction] = []);\n            directionAxes.push(axis);\n        });\n        this.series.forEach(function (series) {\n            series.directions.forEach(function (direction) {\n                var axisName = direction + 'Axis';\n                if (!series[axisName] || force) {\n                    var directionAxes = directionToAxesMap[direction];\n                    if (directionAxes) {\n                        var axis = _this.findMatchingAxis(directionAxes, series.getKeys(direction));\n                        if (axis) {\n                            series[axisName] = axis;\n                        }\n                    }\n                }\n            });\n            if (series instanceof CartesianSeries) {\n                if (!series.xAxis) {\n                    console.warn(\"Could not find a matching xAxis for the \" + series.id + \" series.\");\n                    return;\n                }\n                if (!series.yAxis) {\n                    console.warn(\"Could not find a matching yAxis for the \" + series.id + \" series.\");\n                    return;\n                }\n            }\n        });\n        this.axesChanged = false;\n    };\n    Chart.prototype.findMatchingAxis = function (directionAxes, directionKeys) {\n        for (var i = 0; i < directionAxes.length; i++) {\n            var axis = directionAxes[i];\n            var axisKeys = axis.keys;\n            if (!axisKeys.length) {\n                return axis;\n            }\n            else if (directionKeys) {\n                for (var j = 0; j < directionKeys.length; j++) {\n                    if (axisKeys.indexOf(directionKeys[j]) >= 0) {\n                        return axis;\n                    }\n                }\n            }\n        }\n    };\n    Object.defineProperty(Chart.prototype, \"axesChanged\", {\n        get: function () {\n            return this._axesChanged;\n        },\n        set: function (value) {\n            this._axesChanged = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"seriesChanged\", {\n        get: function () {\n            return this._seriesChanged;\n        },\n        set: function (value) {\n            this._seriesChanged = value;\n            if (value) {\n                this.dataPending = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"layoutPending\", {\n        /**\n         * Only `true` while we are waiting for the layout to start.\n         * This will be `false` if the layout has already started and is ongoing.\n         */\n        get: function () {\n            return !!this.layoutCallbackId;\n        },\n        set: function (value) {\n            if (value) {\n                if (!(this.layoutCallbackId || this.dataPending)) {\n                    this.layoutCallbackId = requestAnimationFrame(this._performLayout);\n                }\n            }\n            else if (this.layoutCallbackId) {\n                cancelAnimationFrame(this.layoutCallbackId);\n                this.layoutCallbackId = 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"dataPending\", {\n        get: function () {\n            return !!this.dataCallbackId;\n        },\n        set: function (value) {\n            var _this = this;\n            if (this.dataCallbackId) {\n                clearTimeout(this.dataCallbackId);\n                this.dataCallbackId = 0;\n            }\n            if (value) {\n                this.dataCallbackId = window.setTimeout(function () {\n                    _this.dataPending = false;\n                    _this.processData();\n                }, 0);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.processData = function () {\n        this.layoutPending = false;\n        if (this.axesChanged) {\n            this.assignAxesToSeries(true);\n            this.assignSeriesToAxes();\n        }\n        if (this.seriesChanged) {\n            this.assignSeriesToAxes();\n        }\n        this.series.filter(function (s) { return s.visible; }).forEach(function (series) { return series.processData(); });\n        this.updateLegend();\n        this.layoutPending = true;\n    };\n    Chart.prototype.updateLegend = function () {\n        var legendData = [];\n        this.series.filter(function (s) { return s.showInLegend; }).forEach(function (series) { return series.listSeriesItems(legendData); });\n        this.legend.data = legendData;\n    };\n    Chart.prototype.positionCaptions = function () {\n        var _a = this, title = _a.title, subtitle = _a.subtitle;\n        var titleVisible = false;\n        var subtitleVisible = false;\n        var spacing = 10;\n        var paddingTop = spacing;\n        if (title && title.enabled) {\n            title.node.x = this.width / 2;\n            title.node.y = paddingTop;\n            titleVisible = true;\n            var titleBBox = title.node.computeBBox(); // make sure to set node's x/y, then computeBBox\n            if (titleBBox) {\n                paddingTop = titleBBox.y + titleBBox.height;\n            }\n            if (subtitle && subtitle.enabled) {\n                subtitle.node.x = this.width / 2;\n                subtitle.node.y = paddingTop + spacing;\n                subtitleVisible = true;\n                var subtitleBBox = subtitle.node.computeBBox();\n                if (subtitleBBox) {\n                    paddingTop = subtitleBBox.y + subtitleBBox.height;\n                }\n            }\n        }\n        if (title) {\n            title.node.visible = titleVisible;\n        }\n        if (subtitle) {\n            subtitle.node.visible = subtitleVisible;\n        }\n        this.captionAutoPadding = Math.floor(paddingTop);\n    };\n    Chart.prototype.positionLegend = function () {\n        if (!this.legend.enabled || !this.legend.data.length) {\n            return;\n        }\n        var _a = this, legend = _a.legend, captionAutoPadding = _a.captionAutoPadding, legendAutoPadding = _a.legendAutoPadding;\n        var width = this.width;\n        var height = this.height - captionAutoPadding;\n        var legendGroup = legend.group;\n        var legendSpacing = legend.spacing;\n        var translationX = 0;\n        var translationY = 0;\n        var legendBBox;\n        switch (legend.position) {\n            case 'bottom':\n                legend.performLayout(width - legendSpacing * 2, 0);\n                legendBBox = legendGroup.computeBBox();\n                translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n                translationY = captionAutoPadding + height - legendBBox.height - legendBBox.y - legendSpacing;\n                legendAutoPadding.bottom = legendBBox.height;\n                break;\n            case 'top':\n                legend.performLayout(width - legendSpacing * 2, 0);\n                legendBBox = legendGroup.computeBBox();\n                translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n                translationY = captionAutoPadding + legendSpacing - legendBBox.y;\n                legendAutoPadding.top = legendBBox.height;\n                break;\n            case 'left':\n                legend.performLayout(0, height - legendSpacing * 2);\n                legendBBox = legendGroup.computeBBox();\n                translationX = legendSpacing - legendBBox.x;\n                translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n                legendAutoPadding.left = legendBBox.width;\n                break;\n            default: // case 'right':\n                legend.performLayout(0, height - legendSpacing * 2);\n                legendBBox = legendGroup.computeBBox();\n                translationX = width - legendBBox.width - legendBBox.x - legendSpacing;\n                translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n                legendAutoPadding.right = legendBBox.width;\n                break;\n        }\n        // Round off for pixel grid alignment to work properly.\n        legendGroup.translationX = Math.floor(translationX + legendGroup.translationX);\n        legendGroup.translationY = Math.floor(translationY + legendGroup.translationY);\n    };\n    Chart.prototype.setupDomListeners = function (chartElement) {\n        chartElement.addEventListener('mousedown', this._onMouseDown);\n        chartElement.addEventListener('mousemove', this._onMouseMove);\n        chartElement.addEventListener('mouseup', this._onMouseUp);\n        chartElement.addEventListener('mouseout', this._onMouseOut);\n        chartElement.addEventListener('click', this._onClick);\n    };\n    Chart.prototype.cleanupDomListeners = function (chartElement) {\n        chartElement.removeEventListener('mousedown', this._onMouseDown);\n        chartElement.removeEventListener('mousemove', this._onMouseMove);\n        chartElement.removeEventListener('mouseup', this._onMouseUp);\n        chartElement.removeEventListener('mouseout', this._onMouseOut);\n        chartElement.removeEventListener('click', this._onClick);\n    };\n    Chart.prototype.getSeriesRect = function () {\n        return this.seriesRect;\n    };\n    // x/y are local canvas coordinates in CSS pixels, not actual pixels\n    Chart.prototype.pickSeriesNode = function (x, y) {\n        if (!this.seriesRect || !this.seriesRect.containsPoint(x, y)) {\n            return undefined;\n        }\n        var allSeries = this.series;\n        var node = undefined;\n        for (var i = allSeries.length - 1; i >= 0; i--) {\n            var series = allSeries[i];\n            node = series.group.pickNode(x, y);\n            if (node) {\n                return {\n                    series: series,\n                    node: node\n                };\n            }\n        }\n    };\n    // Provided x/y are in canvas coordinates.\n    Chart.prototype.pickClosestSeriesNodeDatum = function (x, y) {\n        if (!this.seriesRect || !this.seriesRect.containsPoint(x, y)) {\n            return undefined;\n        }\n        var allSeries = this.series;\n        function getDistance(p1, p2) {\n            return Math.sqrt(Math.pow((p1.x - p2.x), 2) + Math.pow((p1.y - p2.y), 2));\n        }\n        var minDistance = Infinity;\n        var closestDatum;\n        var _loop_1 = function (i) {\n            var series = allSeries[i];\n            if (!series.visible) {\n                return \"continue\";\n            }\n            var hitPoint = series.group.transformPoint(x, y);\n            series.getNodeData().forEach(function (datum) {\n                if (!datum.point) {\n                    return;\n                }\n                var distance = getDistance(hitPoint, datum.point);\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    closestDatum = datum;\n                }\n            });\n        };\n        for (var i = allSeries.length - 1; i >= 0; i--) {\n            _loop_1(i);\n        }\n        if (closestDatum) {\n            return closestDatum;\n        }\n    };\n    Chart.prototype.onMouseMove = function (event) {\n        if (this.tooltip.enabled) {\n            if (this.tooltip.delay > 0) {\n                this.tooltip.toggle(false);\n            }\n            this.handleTooltip(event);\n        }\n    };\n    Chart.prototype.handleTooltip = function (event) {\n        var _a = this, lastPick = _a.lastPick, tooltipTracking = _a.tooltip.tracking;\n        var offsetX = event.offsetX, offsetY = event.offsetY;\n        var pick = this.pickSeriesNode(offsetX, offsetY);\n        var nodeDatum;\n        if (pick && pick.node instanceof Shape) {\n            var node = pick.node;\n            nodeDatum = node.datum;\n            if (lastPick && lastPick.datum === nodeDatum) {\n                lastPick.node = node;\n                lastPick.event = event;\n            }\n            // Marker nodes will have the `point` info in their datums.\n            // Highlight if not a marker node or, if not in the tracking mode, highlight markers too.\n            if ((!node.datum.point || !tooltipTracking)) {\n                if (!lastPick // cursor moved from empty space to a node\n                    || lastPick.node !== node) { // cursor moved from one node to another\n                    this.onSeriesDatumPick(event, node.datum, node, event);\n                }\n                else if (pick.series.tooltip.enabled) { // cursor moved within the same node\n                    this.tooltip.show(event);\n                }\n                // A non-marker node (takes precedence over marker nodes) was highlighted.\n                // Or we are not in the tracking mode.\n                // Either way, we are done at this point.\n                return;\n            }\n        }\n        var hideTooltip = false;\n        // In tracking mode a tooltip is shown for the closest rendered datum.\n        // This makes it easier to show tooltips when markers are small and/or plentiful\n        // and also gives the ability to show tooltips even when the series were configured\n        // to not render markers.\n        if (tooltipTracking) {\n            var closestDatum = this.pickClosestSeriesNodeDatum(offsetX, offsetY);\n            if (closestDatum && closestDatum.point) {\n                var _b = closestDatum.point, x = _b.x, y = _b.y;\n                var canvas = this.scene.canvas;\n                var point = closestDatum.series.group.inverseTransformPoint(x, y);\n                var canvasRect = canvas.element.getBoundingClientRect();\n                this.onSeriesDatumPick({\n                    pageX: Math.round(canvasRect.left + window.pageXOffset + point.x),\n                    pageY: Math.round(canvasRect.top + window.pageYOffset + point.y)\n                }, closestDatum, nodeDatum === closestDatum && pick ? pick.node : undefined, event);\n            }\n            else {\n                hideTooltip = true;\n            }\n        }\n        if (lastPick && (hideTooltip || !tooltipTracking)) {\n            // Cursor moved from a non-marker node to empty space.\n            this.dehighlightDatum();\n            this.tooltip.toggle(false);\n            this.lastPick = undefined;\n        }\n    };\n    Chart.prototype.onMouseDown = function (event) { };\n    Chart.prototype.onMouseUp = function (event) { };\n    Chart.prototype.onMouseOut = function (event) {\n        this.tooltip.toggle(false);\n    };\n    Chart.prototype.onClick = function (event) {\n        if (this.checkSeriesNodeClick()) {\n            return;\n        }\n        if (this.checkLegendClick(event)) {\n            return;\n        }\n        this.fireEvent({\n            type: 'click',\n            event: event\n        });\n    };\n    Chart.prototype.checkSeriesNodeClick = function () {\n        var lastPick = this.lastPick;\n        if (lastPick && lastPick.event && lastPick.node) {\n            var event_1 = lastPick.event, datum = lastPick.datum;\n            datum.series.fireNodeClickEvent(event_1, datum);\n            return true;\n        }\n        return false;\n    };\n    Chart.prototype.onSeriesNodeClick = function (event) {\n        this.fireEvent(__assign(__assign({}, event), { type: 'seriesNodeClick' }));\n    };\n    Chart.prototype.checkLegendClick = function (event) {\n        var datum = this.legend.getDatumForPoint(event.offsetX, event.offsetY);\n        if (datum) {\n            var id_1 = datum.id, itemId = datum.itemId, enabled = datum.enabled;\n            var series = find(this.series, function (series) { return series.id === id_1; });\n            if (series) {\n                series.toggleSeriesItem(itemId, !enabled);\n                if (enabled) {\n                    this.tooltip.toggle(false);\n                }\n                this.legend.fireEvent({\n                    type: 'click',\n                    event: event,\n                    itemId: itemId,\n                    enabled: !enabled\n                });\n                return true;\n            }\n        }\n        return false;\n    };\n    Chart.prototype.onSeriesDatumPick = function (meta, datum, node, event) {\n        if (this.lastPick) {\n            this.dehighlightDatum();\n        }\n        this.lastPick = {\n            datum: datum,\n            node: node,\n            event: event\n        };\n        this.highlightDatum(datum);\n        var html = datum.series.tooltip.enabled && datum.series.getTooltipHtml(datum);\n        if (html) {\n            this.tooltip.show(meta, html);\n        }\n    };\n    Chart.prototype.highlightDatum = function (datum) {\n        this.highlightedDatum = datum;\n        this.series.forEach(function (s) { return s.onHighlightChange(); });\n    };\n    Chart.prototype.dehighlightDatum = function () {\n        if (this.highlightedDatum) {\n            this.highlightedDatum = undefined;\n            this.series.forEach(function (s) { return s.onHighlightChange(); });\n        }\n    };\n    Chart.defaultTooltipClass = 'ag-chart-tooltip';\n    Chart.tooltipDocuments = [];\n    __decorate([\n        reactive('layoutChange')\n    ], Chart.prototype, \"padding\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], Chart.prototype, \"title\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], Chart.prototype, \"subtitle\", void 0);\n    return Chart;\n}(Observable));\nexport { Chart };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Node } from \"./node\";\nimport { Path2D } from \"./path2D\";\nimport { BBox } from \"./bbox\";\n/**\n * Acts as `Group` node but with specified bounds that form a rectangle.\n * Any parts of the child nodes outside that rectangle will not be visible.\n * Unlike the `Group` node, the `ClipRect` node cannot be transformed.\n */\nvar ClipRect = /** @class */ (function (_super) {\n    __extends(ClipRect, _super);\n    function ClipRect() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isContainerNode = true;\n        _this.path = new Path2D();\n        _this._enabled = true;\n        _this._dirtyPath = true;\n        _this._x = 0;\n        _this._y = 0;\n        _this._width = 10;\n        _this._height = 10;\n        return _this;\n    }\n    ClipRect.prototype.containsPoint = function (x, y) {\n        var point = this.transformPoint(x, y);\n        return point.x >= this.x && point.x <= this.x + this.width\n            && point.y >= this.y && point.y <= this.y + this.height;\n    };\n    Object.defineProperty(ClipRect.prototype, \"enabled\", {\n        get: function () {\n            return this._enabled;\n        },\n        set: function (value) {\n            if (this._enabled !== value) {\n                this._enabled = value;\n                this.dirty = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClipRect.prototype, \"dirtyPath\", {\n        get: function () {\n            return this._dirtyPath;\n        },\n        set: function (value) {\n            if (this._dirtyPath !== value) {\n                this._dirtyPath = value;\n                if (value) {\n                    this.dirty = true;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClipRect.prototype, \"x\", {\n        get: function () {\n            return this._x;\n        },\n        set: function (value) {\n            if (this._x !== value) {\n                this._x = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClipRect.prototype, \"y\", {\n        get: function () {\n            return this._y;\n        },\n        set: function (value) {\n            if (this._y !== value) {\n                this._y = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClipRect.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        set: function (value) {\n            if (this._width !== value) {\n                this._width = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ClipRect.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        set: function (value) {\n            if (this._height !== value) {\n                this._height = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ClipRect.prototype.updatePath = function () {\n        var path = this.path;\n        path.clear();\n        path.rect(this.x, this.y, this.width, this.height);\n        this.dirtyPath = false;\n    };\n    ClipRect.prototype.computeBBox = function () {\n        var _a = this, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        return new BBox(x, y, width, height);\n    };\n    ClipRect.prototype.render = function (ctx) {\n        if (this.enabled) {\n            if (this.dirtyPath) {\n                this.updatePath();\n            }\n            this.scene.appendPath(this.path);\n            ctx.clip();\n        }\n        var children = this.children;\n        var n = children.length;\n        for (var i = 0; i < n; i++) {\n            ctx.save();\n            var child = children[i];\n            if (child.visible) {\n                child.render(ctx);\n            }\n            ctx.restore();\n        }\n        // debug\n        // this.computeBBox().render(ctx, {\n        //     label: this.id,\n        //     resetTransform: true,\n        //     fillStyle: 'rgba(0, 0, 0, 0.5)'\n        // });\n    };\n    ClipRect.className = 'ClipRect';\n    return ClipRect;\n}(Node));\nexport { ClipRect };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Path } from \"../../scene/shape/path\";\nimport { BBox } from \"../../scene/bbox\";\nvar RangeHandle = /** @class */ (function (_super) {\n    __extends(RangeHandle, _super);\n    function RangeHandle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._fill = '#f2f2f2';\n        _this._stroke = '#999999';\n        _this._strokeWidth = 1;\n        _this._lineCap = 'square';\n        _this._centerX = 0;\n        _this._centerY = 0;\n        // Use an even number for better looking results.\n        _this._width = 8;\n        // Use an even number for better looking results.\n        _this._gripLineGap = 2;\n        // Use an even number for better looking results.\n        _this._gripLineLength = 8;\n        _this._height = 16;\n        return _this;\n    }\n    Object.defineProperty(RangeHandle.prototype, \"centerX\", {\n        get: function () {\n            return this._centerX;\n        },\n        set: function (value) {\n            if (this._centerX !== value) {\n                this._centerX = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeHandle.prototype, \"centerY\", {\n        get: function () {\n            return this._centerY;\n        },\n        set: function (value) {\n            if (this._centerY !== value) {\n                this._centerY = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeHandle.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        set: function (value) {\n            if (this._width !== value) {\n                this._width = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeHandle.prototype, \"gripLineGap\", {\n        get: function () {\n            return this._gripLineGap;\n        },\n        set: function (value) {\n            if (this._gripLineGap !== value) {\n                this._gripLineGap = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeHandle.prototype, \"gripLineLength\", {\n        get: function () {\n            return this._gripLineLength;\n        },\n        set: function (value) {\n            if (this._gripLineLength !== value) {\n                this._gripLineLength = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeHandle.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        set: function (value) {\n            if (this._height !== value) {\n                this._height = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RangeHandle.prototype.computeBBox = function () {\n        var _a = this, centerX = _a.centerX, centerY = _a.centerY, width = _a.width, height = _a.height;\n        var x = centerX - width / 2;\n        var y = centerY - height / 2;\n        return new BBox(x, y, width, height);\n    };\n    RangeHandle.prototype.isPointInPath = function (x, y) {\n        var point = this.transformPoint(x, y);\n        var bbox = this.computeBBox();\n        return bbox.containsPoint(point.x, point.y);\n    };\n    RangeHandle.prototype.updatePath = function () {\n        var _a = this, path = _a.path, centerX = _a.centerX, centerY = _a.centerY, width = _a.width, height = _a.height;\n        var _b = this, a = _b.alignment, al = _b.align;\n        path.clear();\n        var x = centerX - width / 2;\n        var y = centerY - height / 2;\n        var ax = al(a, x);\n        var ay = al(a, y);\n        var axw = ax + al(a, x, width);\n        var ayh = ay + al(a, y, height);\n        // Handle.\n        path.moveTo(ax, ay);\n        path.lineTo(axw, ay);\n        path.lineTo(axw, ayh);\n        path.lineTo(ax, ayh);\n        path.lineTo(ax, ay);\n        // Grip lines.\n        var dx = this.gripLineGap / 2;\n        var dy = this.gripLineLength / 2;\n        path.moveTo(al(a, centerX - dx), al(a, centerY - dy));\n        path.lineTo(al(a, centerX - dx), al(a, centerY + dy));\n        path.moveTo(al(a, centerX + dx), al(a, centerY - dy));\n        path.lineTo(al(a, centerX + dx), al(a, centerY + dy));\n    };\n    RangeHandle.className = 'RangeHandle';\n    return RangeHandle;\n}(Path));\nexport { RangeHandle };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Path } from \"../../scene/shape/path\";\nimport { BBox } from \"../../scene/bbox\";\nvar RangeMask = /** @class */ (function (_super) {\n    __extends(RangeMask, _super);\n    function RangeMask() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._stroke = '#999999';\n        _this._strokeWidth = 1;\n        _this._fill = '#999999';\n        _this._fillOpacity = 0.2;\n        _this._lineCap = 'square';\n        _this._x = 0;\n        _this._y = 0;\n        _this._width = 200;\n        _this._height = 30;\n        _this.minRange = 0.05;\n        _this._min = 0;\n        _this._max = 1;\n        return _this;\n    }\n    Object.defineProperty(RangeMask.prototype, \"x\", {\n        get: function () {\n            return this._x;\n        },\n        set: function (value) {\n            if (this._x !== value) {\n                this._x = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeMask.prototype, \"y\", {\n        get: function () {\n            return this._y;\n        },\n        set: function (value) {\n            if (this._y !== value) {\n                this._y = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeMask.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        set: function (value) {\n            if (this._width !== value) {\n                this._width = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeMask.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        set: function (value) {\n            if (this._height !== value) {\n                this._height = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeMask.prototype, \"min\", {\n        get: function () {\n            return this._min;\n        },\n        set: function (value) {\n            value = Math.min(Math.max(value, 0), this.max - this.minRange);\n            if (isNaN(value)) {\n                return;\n            }\n            if (this._min !== value) {\n                this._min = value;\n                this.dirtyPath = true;\n                this.onRangeChange && this.onRangeChange(value, this.max);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeMask.prototype, \"max\", {\n        get: function () {\n            return this._max;\n        },\n        set: function (value) {\n            value = Math.max(Math.min(value, 1), this.min + this.minRange);\n            if (isNaN(value)) {\n                return;\n            }\n            if (this._max !== value) {\n                this._max = value;\n                this.dirtyPath = true;\n                this.onRangeChange && this.onRangeChange(this.min, value);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RangeMask.prototype.computeBBox = function () {\n        var _a = this, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        return new BBox(x, y, width, height);\n    };\n    RangeMask.prototype.computeVisibleRangeBBox = function () {\n        var _a = this, x = _a.x, y = _a.y, width = _a.width, height = _a.height, min = _a.min, max = _a.max;\n        var minX = x + width * min;\n        var maxX = x + width * max;\n        return new BBox(minX, y, maxX - minX, height);\n    };\n    RangeMask.prototype.updatePath = function () {\n        var _a = this, path = _a.path, x = _a.x, y = _a.y, width = _a.width, height = _a.height, min = _a.min, max = _a.max;\n        var _b = this, a = _b.alignment, al = _b.align;\n        path.clear();\n        var ax = al(a, x);\n        var ay = al(a, y);\n        var axw = ax + al(a, x, width);\n        var ayh = ay + al(a, y, height);\n        // Whole range.\n        path.moveTo(ax, ay);\n        path.lineTo(axw, ay);\n        path.lineTo(axw, ayh);\n        path.lineTo(ax, ayh);\n        path.lineTo(ax, ay);\n        var minX = al(a, x + width * min);\n        var maxX = al(a, x + width * max);\n        // Visible range.\n        path.moveTo(minX, ay);\n        path.lineTo(minX, ayh);\n        path.lineTo(maxX, ayh);\n        path.lineTo(maxX, ay);\n        path.lineTo(minX, ay);\n    };\n    RangeMask.className = 'RangeMask';\n    return RangeMask;\n}(Path));\nexport { RangeMask };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Group } from \"../../scene/group\";\nimport { RangeHandle } from \"./rangeHandle\";\nimport { RangeMask } from \"./rangeMask\";\nvar RangeSelector = /** @class */ (function (_super) {\n    __extends(RangeSelector, _super);\n    function RangeSelector() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isContainerNode = true;\n        _this.minHandle = new RangeHandle();\n        _this.maxHandle = new RangeHandle();\n        _this.mask = (function () {\n            var _a = RangeSelector.defaults, x = _a.x, y = _a.y, width = _a.width, height = _a.height, min = _a.min, max = _a.max;\n            var mask = new RangeMask();\n            mask.x = x;\n            mask.y = y;\n            mask.width = width;\n            mask.height = height;\n            mask.min = min;\n            mask.max = max;\n            var _b = _this, minHandle = _b.minHandle, maxHandle = _b.maxHandle;\n            minHandle.centerX = x;\n            maxHandle.centerX = x + width;\n            minHandle.centerY = maxHandle.centerY = y + height / 2;\n            _this.append([mask, minHandle, maxHandle]);\n            mask.onRangeChange = function (min, max) {\n                _this.updateHandles();\n                _this.onRangeChange && _this.onRangeChange(min, max);\n            };\n            return mask;\n        })();\n        _this._x = RangeSelector.defaults.x;\n        _this._y = RangeSelector.defaults.y;\n        _this._width = RangeSelector.defaults.width;\n        _this._height = RangeSelector.defaults.height;\n        _this._min = RangeSelector.defaults.min;\n        _this._max = RangeSelector.defaults.max;\n        return _this;\n    }\n    Object.defineProperty(RangeSelector.prototype, \"x\", {\n        get: function () {\n            return this.mask.x;\n        },\n        set: function (value) {\n            this.mask.x = value;\n            this.updateHandles();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeSelector.prototype, \"y\", {\n        get: function () {\n            return this.mask.y;\n        },\n        set: function (value) {\n            this.mask.y = value;\n            this.updateHandles();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeSelector.prototype, \"width\", {\n        get: function () {\n            return this.mask.width;\n        },\n        set: function (value) {\n            this.mask.width = value;\n            this.updateHandles();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeSelector.prototype, \"height\", {\n        get: function () {\n            return this.mask.height;\n        },\n        set: function (value) {\n            this.mask.height = value;\n            this.updateHandles();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeSelector.prototype, \"min\", {\n        get: function () {\n            return this.mask.min;\n        },\n        set: function (value) {\n            this.mask.min = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RangeSelector.prototype, \"max\", {\n        get: function () {\n            return this.mask.max;\n        },\n        set: function (value) {\n            this.mask.max = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RangeSelector.prototype.updateHandles = function () {\n        var _a = this, minHandle = _a.minHandle, maxHandle = _a.maxHandle, x = _a.x, y = _a.y, width = _a.width, height = _a.height, mask = _a.mask;\n        minHandle.centerX = x + width * mask.min;\n        maxHandle.centerX = x + width * mask.max;\n        minHandle.centerY = maxHandle.centerY = y + height / 2;\n    };\n    RangeSelector.prototype.computeBBox = function () {\n        return this.mask.computeBBox();\n    };\n    RangeSelector.prototype.computeVisibleRangeBBox = function () {\n        return this.mask.computeVisibleRangeBBox();\n    };\n    RangeSelector.prototype.render = function (ctx) {\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        this.matrix.toContext(ctx);\n        var _a = this, mask = _a.mask, minHandle = _a.minHandle, maxHandle = _a.maxHandle;\n        [mask, minHandle, maxHandle].forEach(function (child) {\n            ctx.save();\n            if (child.visible) {\n                child.render(ctx);\n            }\n            ctx.restore();\n        });\n    };\n    RangeSelector.className = 'Range';\n    RangeSelector.defaults = {\n        x: 0,\n        y: 0,\n        width: 200,\n        height: 30,\n        min: 0,\n        max: 1\n    };\n    return RangeSelector;\n}(Group));\nexport { RangeSelector };\n","var NavigatorMask = /** @class */ (function () {\n    function NavigatorMask(rangeMask) {\n        this.rm = rangeMask;\n    }\n    Object.defineProperty(NavigatorMask.prototype, \"fill\", {\n        get: function () {\n            return this.rm.fill;\n        },\n        set: function (value) {\n            this.rm.fill = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigatorMask.prototype, \"stroke\", {\n        get: function () {\n            return this.rm.stroke;\n        },\n        set: function (value) {\n            this.rm.stroke = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigatorMask.prototype, \"strokeWidth\", {\n        get: function () {\n            return this.rm.strokeWidth;\n        },\n        set: function (value) {\n            this.rm.strokeWidth = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigatorMask.prototype, \"fillOpacity\", {\n        get: function () {\n            return this.rm.fillOpacity;\n        },\n        set: function (value) {\n            this.rm.fillOpacity = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return NavigatorMask;\n}());\nexport { NavigatorMask };\n","var NavigatorHandle = /** @class */ (function () {\n    function NavigatorHandle(rangeHandle) {\n        this.rh = rangeHandle;\n    }\n    Object.defineProperty(NavigatorHandle.prototype, \"fill\", {\n        get: function () {\n            return this.rh.fill;\n        },\n        set: function (value) {\n            this.rh.fill = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigatorHandle.prototype, \"stroke\", {\n        get: function () {\n            return this.rh.stroke;\n        },\n        set: function (value) {\n            this.rh.stroke = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigatorHandle.prototype, \"strokeWidth\", {\n        get: function () {\n            return this.rh.strokeWidth;\n        },\n        set: function (value) {\n            this.rh.strokeWidth = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigatorHandle.prototype, \"width\", {\n        get: function () {\n            return this.rh.width;\n        },\n        set: function (value) {\n            this.rh.width = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigatorHandle.prototype, \"height\", {\n        get: function () {\n            return this.rh.height;\n        },\n        set: function (value) {\n            this.rh.height = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigatorHandle.prototype, \"gripLineGap\", {\n        get: function () {\n            return this.rh.gripLineGap;\n        },\n        set: function (value) {\n            this.rh.gripLineGap = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NavigatorHandle.prototype, \"gripLineLength\", {\n        get: function () {\n            return this.rh.gripLineLength;\n        },\n        set: function (value) {\n            this.rh.gripLineLength = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return NavigatorHandle;\n}());\nexport { NavigatorHandle };\n","import { RangeSelector } from \"../shapes/rangeSelector\";\nimport { ChartAxisDirection } from \"../chartAxis\";\nimport { BBox } from \"../../scene/bbox\";\nimport { NavigatorMask } from \"./navigatorMask\";\nimport { NavigatorHandle } from \"./navigatorHandle\";\nvar Navigator = /** @class */ (function () {\n    function Navigator(chart) {\n        var _this = this;\n        this.rs = new RangeSelector();\n        this.mask = new NavigatorMask(this.rs.mask);\n        this.minHandle = new NavigatorHandle(this.rs.minHandle);\n        this.maxHandle = new NavigatorHandle(this.rs.maxHandle);\n        this.minHandleDragging = false;\n        this.maxHandleDragging = false;\n        this.panHandleOffset = NaN;\n        this._margin = 10;\n        this.chart = chart;\n        chart.scene.root.append(this.rs);\n        this.rs.onRangeChange = function (min, max) { return _this.updateAxes(min, max); };\n    }\n    Object.defineProperty(Navigator.prototype, \"enabled\", {\n        get: function () {\n            return this.rs.visible;\n        },\n        set: function (value) {\n            this.rs.visible = value;\n            this.chart.layoutPending = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"x\", {\n        get: function () {\n            return this.rs.x;\n        },\n        set: function (value) {\n            this.rs.x = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"y\", {\n        get: function () {\n            return this.rs.y;\n        },\n        set: function (value) {\n            this.rs.y = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"width\", {\n        get: function () {\n            return this.rs.width;\n        },\n        set: function (value) {\n            this.rs.width = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"height\", {\n        get: function () {\n            return this.rs.height;\n        },\n        set: function (value) {\n            this.rs.height = value;\n            this.chart.layoutPending = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"margin\", {\n        get: function () {\n            return this._margin;\n        },\n        set: function (value) {\n            this._margin = value;\n            this.chart.layoutPending = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"min\", {\n        get: function () {\n            return this.rs.min;\n        },\n        set: function (value) {\n            this.rs.min = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"max\", {\n        get: function () {\n            return this.rs.max;\n        },\n        set: function (value) {\n            this.rs.max = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Navigator.prototype.updateAxes = function (min, max) {\n        var chart = this.chart;\n        var clipSeries = false;\n        chart.axes.forEach(function (axis) {\n            if (axis.direction === ChartAxisDirection.X) {\n                if (!clipSeries && (min > 0 || max < 1)) {\n                    clipSeries = true;\n                }\n                axis.visibleRange = [min, max];\n                axis.update();\n            }\n        });\n        chart.seriesRoot.enabled = clipSeries;\n        chart.series.forEach(function (series) { return series.update(); });\n    };\n    Navigator.prototype.onDragStart = function (offset) {\n        if (!this.enabled) {\n            return;\n        }\n        var offsetX = offset.offsetX, offsetY = offset.offsetY;\n        var rs = this.rs;\n        var minHandle = rs.minHandle, maxHandle = rs.maxHandle, x = rs.x, width = rs.width, min = rs.min;\n        var visibleRange = rs.computeVisibleRangeBBox();\n        if (!(this.minHandleDragging || this.maxHandleDragging)) {\n            if (minHandle.containsPoint(offsetX, offsetY)) {\n                this.minHandleDragging = true;\n            }\n            else if (maxHandle.containsPoint(offsetX, offsetY)) {\n                this.maxHandleDragging = true;\n            }\n            else if (visibleRange.containsPoint(offsetX, offsetY)) {\n                this.panHandleOffset = (offsetX - x) / width - min;\n            }\n        }\n    };\n    Navigator.prototype.onDrag = function (offset) {\n        if (!this.enabled) {\n            return;\n        }\n        var _a = this, rs = _a.rs, panHandleOffset = _a.panHandleOffset;\n        var x = rs.x, y = rs.y, width = rs.width, height = rs.height, minHandle = rs.minHandle, maxHandle = rs.maxHandle;\n        var style = this.chart.element.style;\n        var offsetX = offset.offsetX, offsetY = offset.offsetY;\n        var minX = x + width * rs.min;\n        var maxX = x + width * rs.max;\n        var visibleRange = new BBox(minX, y, maxX - minX, height);\n        function getRatio() {\n            return Math.min(Math.max((offsetX - x) / width, 0), 1);\n        }\n        if (minHandle.containsPoint(offsetX, offsetY)) {\n            style.cursor = 'ew-resize';\n        }\n        else if (maxHandle.containsPoint(offsetX, offsetY)) {\n            style.cursor = 'ew-resize';\n        }\n        else if (visibleRange.containsPoint(offsetX, offsetY)) {\n            style.cursor = 'grab';\n        }\n        else {\n            style.cursor = 'default';\n        }\n        if (this.minHandleDragging) {\n            rs.min = getRatio();\n        }\n        else if (this.maxHandleDragging) {\n            rs.max = getRatio();\n        }\n        else if (!isNaN(panHandleOffset)) {\n            var span = rs.max - rs.min;\n            var min = Math.min(getRatio() - panHandleOffset, 1 - span);\n            if (min <= rs.min) { // pan left\n                rs.min = min;\n                rs.max = rs.min + span;\n            }\n            else { // pan right\n                rs.max = min + span;\n                rs.min = rs.max - span;\n            }\n        }\n    };\n    Navigator.prototype.onDragStop = function () {\n        this.stopHandleDragging();\n    };\n    Navigator.prototype.stopHandleDragging = function () {\n        this.minHandleDragging = this.maxHandleDragging = false;\n        this.panHandleOffset = NaN;\n    };\n    return Navigator;\n}());\nexport { Navigator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Chart } from \"./chart\";\nimport { numericExtent } from \"../util/array\";\nimport { CategoryAxis } from \"./axis/categoryAxis\";\nimport { GroupedCategoryAxis } from \"./axis/groupedCategoryAxis\";\nimport { ChartAxisPosition, ChartAxisDirection } from \"./chartAxis\";\nimport { BBox } from \"../scene/bbox\";\nimport { ClipRect } from \"../scene/clipRect\";\nimport { Navigator } from \"./navigator/navigator\";\nvar CartesianChart = /** @class */ (function (_super) {\n    __extends(CartesianChart, _super);\n    function CartesianChart(document) {\n        if (document === void 0) { document = window.document; }\n        var _this = _super.call(this, document) || this;\n        _this._seriesRoot = new ClipRect();\n        _this.navigator = new Navigator(_this);\n        // Prevent the scene from rendering chart components in an invalid state\n        // (before first layout is performed).\n        _this.scene.root.visible = false;\n        var root = _this.scene.root;\n        root.append(_this.seriesRoot);\n        root.append(_this.legend.group);\n        _this.navigator.enabled = false;\n        return _this;\n    }\n    Object.defineProperty(CartesianChart.prototype, \"seriesRoot\", {\n        get: function () {\n            return this._seriesRoot;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CartesianChart.prototype.performLayout = function () {\n        if (this.dataPending) {\n            return;\n        }\n        this.scene.root.visible = true;\n        var _a = this, width = _a.width, height = _a.height, axes = _a.axes, legend = _a.legend, navigator = _a.navigator;\n        var shrinkRect = new BBox(0, 0, width, height);\n        this.positionCaptions();\n        this.positionLegend();\n        if (legend.enabled && legend.data.length) {\n            var legendAutoPadding = this.legendAutoPadding;\n            var legendPadding = this.legend.spacing;\n            shrinkRect.x += legendAutoPadding.left;\n            shrinkRect.y += legendAutoPadding.top;\n            shrinkRect.width -= legendAutoPadding.left + legendAutoPadding.right;\n            shrinkRect.height -= legendAutoPadding.top + legendAutoPadding.bottom;\n            switch (this.legend.position) {\n                case 'right':\n                    shrinkRect.width -= legendPadding;\n                    break;\n                case 'bottom':\n                    shrinkRect.height -= legendPadding;\n                    break;\n                case 'left':\n                    shrinkRect.x += legendPadding;\n                    shrinkRect.width -= legendPadding;\n                    break;\n                case 'top':\n                    shrinkRect.y += legendPadding;\n                    shrinkRect.height -= legendPadding;\n                    break;\n            }\n        }\n        var _b = this, captionAutoPadding = _b.captionAutoPadding, padding = _b.padding;\n        this.updateAxes();\n        shrinkRect.x += padding.left;\n        shrinkRect.width -= padding.left + padding.right;\n        shrinkRect.y += padding.top + captionAutoPadding;\n        shrinkRect.height -= padding.top + captionAutoPadding + padding.bottom;\n        if (navigator.enabled) {\n            shrinkRect.height -= navigator.height + navigator.margin;\n        }\n        var bottomAxesHeight = 0;\n        axes.forEach(function (axis) {\n            axis.group.visible = true;\n            var axisThickness = Math.floor(axis.computeBBox().width);\n            switch (axis.position) {\n                case ChartAxisPosition.Top:\n                    shrinkRect.y += axisThickness;\n                    shrinkRect.height -= axisThickness;\n                    axis.translation.y = Math.floor(shrinkRect.y + 1);\n                    axis.label.mirrored = true;\n                    break;\n                case ChartAxisPosition.Right:\n                    shrinkRect.width -= axisThickness;\n                    axis.translation.x = Math.floor(shrinkRect.x + shrinkRect.width);\n                    axis.label.mirrored = true;\n                    break;\n                case ChartAxisPosition.Bottom:\n                    shrinkRect.height -= axisThickness;\n                    bottomAxesHeight += axisThickness;\n                    axis.translation.y = Math.floor(shrinkRect.y + shrinkRect.height + 1);\n                    break;\n                case ChartAxisPosition.Left:\n                    shrinkRect.x += axisThickness;\n                    shrinkRect.width -= axisThickness;\n                    axis.translation.x = Math.floor(shrinkRect.x);\n                    break;\n            }\n        });\n        axes.forEach(function (axis) {\n            switch (axis.position) {\n                case ChartAxisPosition.Top:\n                case ChartAxisPosition.Bottom:\n                    axis.translation.x = Math.floor(shrinkRect.x);\n                    axis.range = [0, shrinkRect.width];\n                    axis.gridLength = shrinkRect.height;\n                    break;\n                case ChartAxisPosition.Left:\n                case ChartAxisPosition.Right:\n                    axis.translation.y = Math.floor(shrinkRect.y);\n                    if (axis instanceof CategoryAxis || axis instanceof GroupedCategoryAxis) {\n                        axis.range = [0, shrinkRect.height];\n                    }\n                    else {\n                        axis.range = [shrinkRect.height, 0];\n                    }\n                    axis.gridLength = shrinkRect.width;\n                    break;\n            }\n        });\n        this.seriesRect = shrinkRect;\n        this.series.forEach(function (series) {\n            series.group.translationX = Math.floor(shrinkRect.x);\n            series.group.translationY = Math.floor(shrinkRect.y);\n            series.update(); // this has to happen after the `updateAxes` call\n        });\n        var seriesRoot = this.seriesRoot;\n        seriesRoot.x = shrinkRect.x;\n        seriesRoot.y = shrinkRect.y;\n        seriesRoot.width = shrinkRect.width;\n        seriesRoot.height = shrinkRect.height;\n        if (navigator.enabled) {\n            navigator.x = shrinkRect.x;\n            navigator.y = shrinkRect.y + shrinkRect.height + bottomAxesHeight + navigator.margin;\n            navigator.width = shrinkRect.width;\n        }\n        this.axes.forEach(function (axis) { return axis.update(); });\n    };\n    CartesianChart.prototype.initSeries = function (series) {\n        _super.prototype.initSeries.call(this, series);\n        series.addEventListener('dataProcessed', this.updateAxes, this);\n    };\n    CartesianChart.prototype.freeSeries = function (series) {\n        _super.prototype.freeSeries.call(this, series);\n        series.removeEventListener('dataProcessed', this.updateAxes, this);\n    };\n    CartesianChart.prototype.setupDomListeners = function (chartElement) {\n        _super.prototype.setupDomListeners.call(this, chartElement);\n        this._onTouchStart = this.onTouchStart.bind(this);\n        this._onTouchMove = this.onTouchMove.bind(this);\n        this._onTouchEnd = this.onTouchEnd.bind(this);\n        this._onTouchCancel = this.onTouchCancel.bind(this);\n        chartElement.addEventListener('touchstart', this._onTouchStart);\n        chartElement.addEventListener('touchmove', this._onTouchMove);\n        chartElement.addEventListener('touchend', this._onTouchEnd);\n        chartElement.addEventListener('touchcancel', this._onTouchCancel);\n    };\n    CartesianChart.prototype.cleanupDomListeners = function (chartElement) {\n        _super.prototype.cleanupDomListeners.call(this, chartElement);\n        chartElement.removeEventListener('touchstart', this._onTouchStart);\n        chartElement.removeEventListener('touchmove', this._onTouchMove);\n        chartElement.removeEventListener('touchend', this._onTouchEnd);\n        chartElement.removeEventListener('touchcancel', this._onTouchCancel);\n    };\n    CartesianChart.prototype.getTouchOffset = function (event) {\n        var rect = this.scene.canvas.element.getBoundingClientRect();\n        var touch = event.touches[0];\n        return touch ? {\n            offsetX: touch.clientX - rect.left,\n            offsetY: touch.clientY - rect.top\n        } : undefined;\n    };\n    CartesianChart.prototype.onTouchStart = function (event) {\n        var offset = this.getTouchOffset(event);\n        if (offset) {\n            this.navigator.onDragStart(offset);\n        }\n    };\n    CartesianChart.prototype.onTouchMove = function (event) {\n        var offset = this.getTouchOffset(event);\n        if (offset) {\n            this.navigator.onDrag(offset);\n        }\n    };\n    CartesianChart.prototype.onTouchEnd = function (event) {\n        this.navigator.onDragStop();\n    };\n    CartesianChart.prototype.onTouchCancel = function (event) {\n        this.navigator.onDragStop();\n    };\n    CartesianChart.prototype.onMouseDown = function (event) {\n        _super.prototype.onMouseDown.call(this, event);\n        this.navigator.onDragStart(event);\n    };\n    CartesianChart.prototype.onMouseMove = function (event) {\n        _super.prototype.onMouseMove.call(this, event);\n        this.navigator.onDrag(event);\n    };\n    CartesianChart.prototype.onMouseUp = function (event) {\n        _super.prototype.onMouseUp.call(this, event);\n        this.navigator.onDragStop();\n    };\n    CartesianChart.prototype.onMouseOut = function (event) {\n        _super.prototype.onMouseOut.call(this, event);\n        this.navigator.onDragStop();\n    };\n    CartesianChart.prototype.updateAxes = function () {\n        var navigator = this.navigator;\n        var clipSeries = false;\n        this.axes.forEach(function (axis) {\n            var _a;\n            var direction = axis.direction, boundSeries = axis.boundSeries;\n            if (axis.linkedTo) {\n                axis.domain = axis.linkedTo.domain;\n            }\n            else {\n                var domains_1 = [];\n                boundSeries.filter(function (s) { return s.visible; }).forEach(function (series) {\n                    domains_1.push(series.getDomain(direction));\n                });\n                var domain = (_a = new Array()).concat.apply(_a, domains_1);\n                axis.domain = numericExtent(domain) || domain; // if numeric extent can't be found, it's categories\n            }\n            if (axis.direction === ChartAxisDirection.X) {\n                axis.visibleRange = [navigator.min, navigator.max];\n            }\n            if (!clipSeries && (axis.visibleRange[0] > 0 || axis.visibleRange[1] < 1)) {\n                clipSeries = true;\n            }\n            axis.update();\n        });\n        this.seriesRoot.enabled = clipSeries;\n    };\n    CartesianChart.className = 'CartesianChart';\n    CartesianChart.type = 'cartesian';\n    return CartesianChart;\n}(Chart));\nexport { CartesianChart };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ClipRect } from \"../main\";\nimport { BBox } from \"../scene/bbox\";\nimport { Chart } from \"./chart\";\nvar HierarchyChart = /** @class */ (function (_super) {\n    __extends(HierarchyChart, _super);\n    function HierarchyChart(document) {\n        if (document === void 0) { document = window.document; }\n        var _this = _super.call(this, document) || this;\n        _this._data = {};\n        _this._seriesRoot = new ClipRect();\n        // Prevent the scene from rendering chart components in an invalid state\n        // (before first layout is performed).\n        _this.scene.root.visible = false;\n        var root = _this.scene.root;\n        root.append(_this.seriesRoot);\n        root.append(_this.legend.group);\n        return _this;\n    }\n    Object.defineProperty(HierarchyChart.prototype, \"seriesRoot\", {\n        get: function () {\n            return this._seriesRoot;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HierarchyChart.prototype.performLayout = function () {\n        if (this.dataPending) {\n            return;\n        }\n        this.scene.root.visible = true;\n        var _a = this, width = _a.width, height = _a.height, legend = _a.legend;\n        var shrinkRect = new BBox(0, 0, width, height);\n        this.positionCaptions();\n        this.positionLegend();\n        if (legend.enabled && legend.data.length) {\n            var legendAutoPadding = this.legendAutoPadding;\n            var legendPadding = this.legend.spacing;\n            shrinkRect.x += legendAutoPadding.left;\n            shrinkRect.y += legendAutoPadding.top;\n            shrinkRect.width -= legendAutoPadding.left + legendAutoPadding.right;\n            shrinkRect.height -= legendAutoPadding.top + legendAutoPadding.bottom;\n            switch (this.legend.position) {\n                case 'right':\n                    shrinkRect.width -= legendPadding;\n                    break;\n                case 'bottom':\n                    shrinkRect.height -= legendPadding;\n                    break;\n                case 'left':\n                    shrinkRect.x += legendPadding;\n                    shrinkRect.width -= legendPadding;\n                    break;\n                case 'top':\n                    shrinkRect.y += legendPadding;\n                    shrinkRect.height -= legendPadding;\n                    break;\n            }\n        }\n        var _b = this, captionAutoPadding = _b.captionAutoPadding, padding = _b.padding;\n        shrinkRect.x += padding.left;\n        shrinkRect.width -= padding.left + padding.right;\n        shrinkRect.y += padding.top + captionAutoPadding;\n        shrinkRect.height -= padding.top + captionAutoPadding + padding.bottom;\n        this.seriesRect = shrinkRect;\n        this.series.forEach(function (series) {\n            series.group.translationX = Math.floor(shrinkRect.x);\n            series.group.translationY = Math.floor(shrinkRect.y);\n            series.update(); // this has to happen after the `updateAxes` call\n        });\n        var seriesRoot = this.seriesRoot;\n        seriesRoot.x = shrinkRect.x;\n        seriesRoot.y = shrinkRect.y;\n        seriesRoot.width = shrinkRect.width;\n        seriesRoot.height = shrinkRect.height;\n    };\n    HierarchyChart.className = 'HierarchyChart';\n    HierarchyChart.type = 'hierarchy';\n    return HierarchyChart;\n}(Chart));\nexport { HierarchyChart };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CartesianChart } from \"./cartesianChart\";\nimport { numericExtent } from \"../util/array\";\nimport { ChartAxisDirection } from \"./chartAxis\";\nvar GroupedCategoryChart = /** @class */ (function (_super) {\n    __extends(GroupedCategoryChart, _super);\n    function GroupedCategoryChart() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupedCategoryChart.prototype.updateAxes = function () {\n        this.axes.forEach(function (axis) {\n            var _a;\n            var direction = axis.direction, boundSeries = axis.boundSeries;\n            var domains = [];\n            var isNumericX = undefined;\n            boundSeries.filter(function (s) { return s.visible; }).forEach(function (series) {\n                if (direction === ChartAxisDirection.X) {\n                    if (isNumericX === undefined) {\n                        // always add first X domain\n                        var domain_1 = series.getDomain(direction);\n                        domains.push(domain_1);\n                        isNumericX = typeof domain_1[0] === 'number';\n                    }\n                    else if (isNumericX) {\n                        // only add further X domains if the axis is numeric\n                        domains.push(series.getDomain(direction));\n                    }\n                }\n                else {\n                    domains.push(series.getDomain(direction));\n                }\n            });\n            var domain = (_a = new Array()).concat.apply(_a, domains);\n            axis.domain = numericExtent(domain) || domain;\n            axis.update();\n        });\n    };\n    GroupedCategoryChart.className = 'GroupedCategoryChart';\n    GroupedCategoryChart.type = 'groupedCategory';\n    return GroupedCategoryChart;\n}(CartesianChart));\nexport { GroupedCategoryChart };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Series } from \"../series\";\nimport { ChartAxisDirection } from \"../../chartAxis\";\nimport { SeriesMarker } from \"../seriesMarker\";\nvar PolarSeries = /** @class */ (function (_super) {\n    __extends(PolarSeries, _super);\n    function PolarSeries() {\n        var _a;\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.directionKeys = (_a = {},\n            _a[ChartAxisDirection.X] = ['angleKey'],\n            _a[ChartAxisDirection.Y] = ['radiusKey'],\n            _a);\n        /**\n         * The center of the polar series (for example, the center of a pie).\n         * If the polar chart has multiple series, all of them will have their\n         * center set to the same value as a result of the polar chart layout.\n         * The center coordinates are not supposed to be set by the user.\n         */\n        _this.centerX = 0;\n        _this.centerY = 0;\n        /**\n         * The maximum radius the series can use.\n         * This value is set automatically as a result of the polar chart layout\n         * and is not supposed to be set by the user.\n         */\n        _this.radius = 0;\n        return _this;\n    }\n    return PolarSeries;\n}(Series));\nexport { PolarSeries };\nvar PolarSeriesMarker = /** @class */ (function (_super) {\n    __extends(PolarSeriesMarker, _super);\n    function PolarSeriesMarker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PolarSeriesMarker;\n}(SeriesMarker));\nexport { PolarSeriesMarker };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Chart } from \"./chart\";\nimport { PolarSeries } from \"./series/polar/polarSeries\";\nimport { reactive } from \"../util/observable\";\nimport { Padding } from \"../util/padding\";\nimport { BBox } from \"../scene/bbox\";\nvar PolarChart = /** @class */ (function (_super) {\n    __extends(PolarChart, _super);\n    function PolarChart(document) {\n        if (document === void 0) { document = window.document; }\n        var _this = _super.call(this, document) || this;\n        _this.padding = new Padding(40);\n        _this.scene.root.append(_this.legend.group);\n        return _this;\n    }\n    Object.defineProperty(PolarChart.prototype, \"seriesRoot\", {\n        get: function () {\n            return this.scene.root;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PolarChart.prototype.performLayout = function () {\n        var shrinkRect = new BBox(0, 0, this.width, this.height);\n        this.positionCaptions();\n        this.positionLegend();\n        var captionAutoPadding = this.captionAutoPadding;\n        shrinkRect.y += captionAutoPadding;\n        shrinkRect.height -= captionAutoPadding;\n        if (this.legend.enabled && this.legend.data.length) {\n            var legendAutoPadding = this.legendAutoPadding;\n            shrinkRect.x += legendAutoPadding.left;\n            shrinkRect.y += legendAutoPadding.top;\n            shrinkRect.width -= legendAutoPadding.left + legendAutoPadding.right;\n            shrinkRect.height -= legendAutoPadding.top + legendAutoPadding.bottom;\n            var legendPadding = this.legend.spacing;\n            switch (this.legend.position) {\n                case 'right':\n                    shrinkRect.width -= legendPadding;\n                    break;\n                case 'bottom':\n                    shrinkRect.height -= legendPadding;\n                    break;\n                case 'left':\n                    shrinkRect.x += legendPadding;\n                    shrinkRect.width -= legendPadding;\n                    break;\n                case 'top':\n                    shrinkRect.y += legendPadding;\n                    shrinkRect.height -= legendPadding;\n                    break;\n            }\n        }\n        var padding = this.padding;\n        shrinkRect.x += padding.left;\n        shrinkRect.y += padding.top;\n        shrinkRect.width -= padding.left + padding.right;\n        shrinkRect.height -= padding.top + padding.bottom;\n        this.seriesRect = shrinkRect;\n        var centerX = shrinkRect.x + shrinkRect.width / 2;\n        var centerY = shrinkRect.y + shrinkRect.height / 2;\n        var radius = Math.min(shrinkRect.width, shrinkRect.height) / 2;\n        this.series.forEach(function (series) {\n            if (series instanceof PolarSeries) {\n                series.centerX = centerX;\n                series.centerY = centerY;\n                series.radius = radius;\n                series.update();\n            }\n        });\n    };\n    PolarChart.className = 'PolarChart';\n    PolarChart.type = 'polar';\n    __decorate([\n        reactive('layoutChange')\n    ], PolarChart.prototype, \"padding\", void 0);\n    return PolarChart;\n}(Chart));\nexport { PolarChart };\n","export function equal(a, b) {\n    if (a === b)\n        return true;\n    if (a && b && typeof a == 'object' && typeof b == 'object') {\n        if (a.constructor !== b.constructor)\n            return false;\n        var length_1, i = void 0;\n        if (Array.isArray(a)) {\n            length_1 = a.length;\n            if (length_1 != b.length)\n                return false;\n            for (i = length_1; i-- !== 0;)\n                if (!equal(a[i], b[i]))\n                    return false;\n            return true;\n        }\n        // if ((a instanceof Map) && (b instanceof Map)) {\n        //     if (a.size !== b.size) return false;\n        //     for (i of a.entries())\n        //         if (!b.has(i[0])) return false;\n        //     for (i of a.entries())\n        //         if (!equal(i[1], b.get(i[0]))) return false;\n        //     return true;\n        // }\n        //\n        // if ((a instanceof Set) && (b instanceof Set)) {\n        //     if (a.size !== b.size) return false;\n        //     for (i of a.entries())\n        //         if (!b.has(i[0])) return false;\n        //     return true;\n        // }\n        //\n        // if (ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n        //     length = a.length;\n        //     if (length != b.length) return false;\n        //     for (i = length; i-- !== 0;)\n        //         if (a[i] !== b[i]) return false;\n        //     return true;\n        // }\n        if (a.constructor === RegExp)\n            return a.source === b.source && a.flags === b.flags;\n        if (a.valueOf !== Object.prototype.valueOf)\n            return a.valueOf() === b.valueOf();\n        if (a.toString !== Object.prototype.toString)\n            return a.toString() === b.toString();\n        var keys = Object.keys(a);\n        length_1 = keys.length;\n        if (length_1 !== Object.keys(b).length)\n            return false;\n        for (i = length_1; i-- !== 0;)\n            if (!Object.prototype.hasOwnProperty.call(b, keys[i]))\n                return false;\n        for (i = length_1; i-- !== 0;) {\n            var key = keys[i];\n            if (!equal(a[key], b[key]))\n                return false;\n        }\n        return true;\n    }\n    // true if both NaN, false otherwise\n    return a !== a && b !== b;\n}\n","import { locale } from \"./time/format/defaultLocale\";\nvar interpolatePattern = /(#\\{(.*?)\\})/g;\nexport function interpolate(input, values, formats) {\n    return input.replace(interpolatePattern, function () {\n        var name = arguments[2];\n        var _a = name.split(':'), valueName = _a[0], formatName = _a[1];\n        var value = values[valueName];\n        if (typeof value === 'number') {\n            var format = formatName && formats && formats[formatName];\n            if (format) {\n                var _b = format, locales = _b.locales, options = _b.options;\n                return value.toLocaleString(locales, options);\n            }\n            return String(value);\n        }\n        if (value instanceof Date) {\n            var format = formatName && formats && formats[formatName];\n            if (typeof format === 'string') {\n                var formatter = locale.format(format);\n                return formatter(value);\n            }\n            return value.toDateString();\n        }\n        if (typeof value === 'string' || (value && value.toString)) {\n            return String(value);\n        }\n        return '';\n    });\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Group } from \"../../../scene/group\";\nimport { Selection } from \"../../../scene/selection\";\nimport { SeriesTooltip } from \"../series\";\nimport { PointerEvents } from \"../../../scene/node\";\nimport { Path } from \"../../../scene/shape/path\";\nimport { CartesianSeries, CartesianSeriesMarker } from \"./cartesianSeries\";\nimport { ChartAxisDirection } from \"../../chartAxis\";\nimport { getMarker } from \"../../marker/util\";\nimport { toTooltipHtml } from \"../../chart\";\nimport { findMinMax } from \"../../../util/array\";\nimport { toFixed } from \"../../../util/number\";\nimport { equal } from \"../../../util/equal\";\nimport { reactive } from \"../../../util/observable\";\nimport { interpolate } from \"../../../util/string\";\nvar AreaSeriesTooltip = /** @class */ (function (_super) {\n    __extends(AreaSeriesTooltip, _super);\n    function AreaSeriesTooltip() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        reactive('change')\n    ], AreaSeriesTooltip.prototype, \"renderer\", void 0);\n    __decorate([\n        reactive('change')\n    ], AreaSeriesTooltip.prototype, \"format\", void 0);\n    return AreaSeriesTooltip;\n}(SeriesTooltip));\nexport { AreaSeriesTooltip };\nvar AreaSeries = /** @class */ (function (_super) {\n    __extends(AreaSeries, _super);\n    function AreaSeries() {\n        var _this = _super.call(this) || this;\n        _this.tooltip = new AreaSeriesTooltip();\n        _this.areaGroup = _this.group.appendChild(new Group);\n        _this.strokeGroup = _this.group.appendChild(new Group);\n        _this.markerGroup = _this.group.appendChild(new Group);\n        _this.areaSelection = Selection.select(_this.areaGroup).selectAll();\n        _this.strokeSelection = Selection.select(_this.strokeGroup).selectAll();\n        _this.markerSelection = Selection.select(_this.markerGroup).selectAll();\n        _this.markerSelectionData = [];\n        /**\n         * The assumption is that the values will be reset (to `true`)\n         * in the {@link yKeys} setter.\n         */\n        _this.seriesItemEnabled = new Map();\n        _this.xData = [];\n        _this.yData = [];\n        _this.yDomain = [];\n        _this.directionKeys = {\n            x: ['xKey'],\n            y: ['yKeys']\n        };\n        _this.marker = new CartesianSeriesMarker();\n        _this.fills = [\n            '#c16068',\n            '#a2bf8a',\n            '#ebcc87',\n            '#80a0c3',\n            '#b58dae',\n            '#85c0d1'\n        ];\n        _this.strokes = [\n            '#874349',\n            '#718661',\n            '#a48f5f',\n            '#5a7088',\n            '#7f637a',\n            '#5d8692'\n        ];\n        _this.fillOpacity = 1;\n        _this.strokeOpacity = 1;\n        _this.lineDash = undefined;\n        _this.lineDashOffset = 0;\n        _this._xKey = '';\n        _this.xName = '';\n        _this._yKeys = [];\n        _this.yNames = [];\n        _this.strokeWidth = 2;\n        _this.highlightStyle = { fill: 'yellow' };\n        _this.addEventListener('update', _this.update);\n        _this.marker.enabled = false;\n        _this.marker.addPropertyListener('shape', _this.onMarkerShapeChange, _this);\n        _this.marker.addEventListener('change', _this.update, _this);\n        return _this;\n    }\n    AreaSeries.prototype.onMarkerShapeChange = function () {\n        this.markerSelection = this.markerSelection.setData([]);\n        this.markerSelection.exit.remove();\n        this.update();\n        this.fireEvent({ type: 'legendChange' });\n    };\n    Object.defineProperty(AreaSeries.prototype, \"xKey\", {\n        get: function () {\n            return this._xKey;\n        },\n        set: function (value) {\n            if (this._xKey !== value) {\n                this._xKey = value;\n                this.xData = [];\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AreaSeries.prototype, \"yKeys\", {\n        get: function () {\n            return this._yKeys;\n        },\n        set: function (values) {\n            if (!equal(this._yKeys, values)) {\n                this._yKeys = values;\n                this.yData = [];\n                var seriesItemEnabled_1 = this.seriesItemEnabled;\n                seriesItemEnabled_1.clear();\n                values.forEach(function (key) { return seriesItemEnabled_1.set(key, true); });\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AreaSeries.prototype.setColors = function (fills, strokes) {\n        this.fills = fills;\n        this.strokes = strokes;\n    };\n    Object.defineProperty(AreaSeries.prototype, \"normalizedTo\", {\n        get: function () {\n            return this._normalizedTo;\n        },\n        set: function (value) {\n            var absValue = value ? Math.abs(value) : undefined;\n            if (this._normalizedTo !== absValue) {\n                this._normalizedTo = absValue;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AreaSeries.prototype.onHighlightChange = function () {\n        this.updateMarkerNodes();\n    };\n    AreaSeries.prototype.processData = function () {\n        var _a = this, xKey = _a.xKey, yKeys = _a.yKeys, seriesItemEnabled = _a.seriesItemEnabled;\n        var data = xKey && yKeys.length && this.data ? this.data : [];\n        // if (!(chart && chart.xAxis && chart.yAxis)) {\n        //     return false;\n        // }\n        // If the data is an array of rows like so:\n        //\n        // [{\n        //   xKy: 'Jan',\n        //   yKey1: 5,\n        //   yKey2: 7,\n        //   yKey3: -9,\n        // }, {\n        //   xKey: 'Feb',\n        //   yKey1: 10,\n        //   yKey2: -15,\n        //   yKey3: 20\n        // }]\n        //\n        var keysFound = true; // only warn once\n        this.xData = data.map(function (datum) {\n            if (keysFound && !(xKey in datum)) {\n                keysFound = false;\n                console.warn(\"The key '\" + xKey + \"' was not found in the data: \", datum);\n            }\n            return datum[xKey];\n        });\n        this.yData = data.map(function (datum) { return yKeys.map(function (yKey) {\n            if (keysFound && !(yKey in datum)) {\n                keysFound = false;\n                console.warn(\"The key '\" + yKey + \"' was not found in the data: \", datum);\n            }\n            var value = datum[yKey];\n            return isFinite(value) && seriesItemEnabled.get(yKey) ? value : 0;\n        }); });\n        // xData: ['Jan', 'Feb']\n        //\n        // yData: [\n        //   [5, 7, -9],\n        //   [10, -15, 20]\n        // ]\n        var _b = this, yData = _b.yData, normalizedTo = _b.normalizedTo;\n        var yMinMax = yData.map(function (values) { return findMinMax(values); }); // used for normalization\n        var yLargestMinMax = this.findLargestMinMax(yMinMax);\n        var yMin;\n        var yMax;\n        if (normalizedTo && isFinite(normalizedTo)) {\n            yMin = yLargestMinMax.min < 0 ? -normalizedTo : 0;\n            yMax = normalizedTo;\n            yData.forEach(function (stack, i) { return stack.forEach(function (y, j) {\n                if (y < 0) {\n                    stack[j] = -y / yMinMax[i].min * normalizedTo;\n                }\n                else {\n                    stack[j] = y / yMinMax[i].max * normalizedTo;\n                }\n            }); });\n        }\n        else {\n            yMin = yLargestMinMax.min;\n            yMax = yLargestMinMax.max;\n        }\n        if (yMin === 0 && yMax === 0) {\n            yMax = 1;\n        }\n        this.yDomain = this.fixNumericExtent([yMin, yMax], 'y');\n        this.fireEvent({ type: 'dataProcessed' });\n        return true;\n    };\n    AreaSeries.prototype.findLargestMinMax = function (totals) {\n        var min = 0;\n        var max = 0;\n        for (var _i = 0, totals_1 = totals; _i < totals_1.length; _i++) {\n            var total = totals_1[_i];\n            if (total.min < min) {\n                min = total.min;\n            }\n            if (total.max > max) {\n                max = total.max;\n            }\n        }\n        return { min: min, max: max };\n    };\n    AreaSeries.prototype.getDomain = function (direction) {\n        if (direction === ChartAxisDirection.X) {\n            return this.xData;\n        }\n        else {\n            return this.yDomain;\n        }\n    };\n    AreaSeries.prototype.update = function () {\n        var _a = this, visible = _a.visible, chart = _a.chart, xAxis = _a.xAxis, yAxis = _a.yAxis, xData = _a.xData, yData = _a.yData;\n        this.group.visible = visible && !!(xData.length && yData.length);\n        if (!xAxis || !yAxis || !visible || !chart || chart.layoutPending || chart.dataPending || !xData.length || !yData.length) {\n            return;\n        }\n        var selectionData = this.generateSelectionData();\n        if (!selectionData) {\n            return;\n        }\n        var areaSelectionData = selectionData.areaSelectionData, markerSelectionData = selectionData.markerSelectionData;\n        this.updateAreaSelection(areaSelectionData);\n        this.updateStrokeSelection(areaSelectionData);\n        this.updateMarkerSelection(markerSelectionData);\n        this.updateMarkerNodes();\n        this.markerSelectionData = markerSelectionData;\n    };\n    AreaSeries.prototype.generateSelectionData = function () {\n        var _this = this;\n        if (!this.data) {\n            return;\n        }\n        var _a = this, yKeys = _a.yKeys, data = _a.data, xData = _a.xData, yData = _a.yData, marker = _a.marker, fills = _a.fills, strokes = _a.strokes, xScale = _a.xAxis.scale, yScale = _a.yAxis.scale;\n        var xOffset = (xScale.bandwidth || 0) / 2;\n        var yOffset = (yScale.bandwidth || 0) / 2;\n        var areaSelectionData = [];\n        var markerSelectionData = [];\n        var last = xData.length * 2 - 1;\n        xData.forEach(function (xDatum, i) {\n            var yDatum = yData[i];\n            var seriesDatum = data[i];\n            var x = xScale.convert(xDatum) + xOffset;\n            var prevMin = 0;\n            var prevMax = 0;\n            yDatum.forEach(function (curr, j) {\n                var prev = curr < 0 ? prevMin : prevMax;\n                var y = yScale.convert(prev + curr) + yOffset;\n                var yKey = yKeys[j];\n                var yValue = seriesDatum[yKey];\n                if (marker) {\n                    markerSelectionData.push({\n                        series: _this,\n                        seriesDatum: seriesDatum,\n                        yValue: yValue,\n                        yKey: yKey,\n                        point: { x: x, y: y },\n                        fill: fills[j % fills.length],\n                        stroke: strokes[j % strokes.length]\n                    });\n                }\n                var areaDatum = areaSelectionData[j] || (areaSelectionData[j] = { yKey: yKey, points: [] });\n                var areaPoints = areaDatum.points;\n                areaPoints[i] = { x: x, y: y };\n                areaPoints[last - i] = { x: x, y: yScale.convert(prev) + yOffset }; // bottom y\n                if (curr < 0) {\n                    prevMin += curr;\n                }\n                else {\n                    prevMax += curr;\n                }\n            });\n        });\n        return { areaSelectionData: areaSelectionData, markerSelectionData: markerSelectionData };\n    };\n    AreaSeries.prototype.updateAreaSelection = function (areaSelectionData) {\n        var _this = this;\n        var _a = this, fills = _a.fills, fillOpacity = _a.fillOpacity, strokes = _a.strokes, strokeOpacity = _a.strokeOpacity, strokeWidth = _a.strokeWidth, seriesItemEnabled = _a.seriesItemEnabled, shadow = _a.shadow;\n        var updateAreas = this.areaSelection.setData(areaSelectionData);\n        updateAreas.exit.remove();\n        var enterAreas = updateAreas.enter.append(Path)\n            .each(function (path) {\n            path.lineJoin = 'round';\n            path.stroke = undefined;\n            path.pointerEvents = PointerEvents.None;\n        });\n        var areaSelection = updateAreas.merge(enterAreas);\n        areaSelection.each(function (shape, datum, index) {\n            var path = shape.path;\n            shape.fill = fills[index % fills.length];\n            shape.fillOpacity = fillOpacity;\n            shape.stroke = strokes[index % strokes.length];\n            shape.strokeOpacity = strokeOpacity;\n            shape.strokeWidth = strokeWidth;\n            shape.lineDash = _this.lineDash;\n            shape.lineDashOffset = _this.lineDashOffset;\n            shape.fillShadow = shadow;\n            shape.visible = !!seriesItemEnabled.get(datum.yKey);\n            path.clear();\n            var points = datum.points;\n            points.forEach(function (_a, i) {\n                var x = _a.x, y = _a.y;\n                if (i > 0) {\n                    path.lineTo(x, y);\n                }\n                else {\n                    path.moveTo(x, y);\n                }\n            });\n            path.closePath();\n        });\n        this.areaSelection = areaSelection;\n    };\n    AreaSeries.prototype.updateStrokeSelection = function (areaSelectionData) {\n        var _this = this;\n        if (!this.data) {\n            return;\n        }\n        var _a = this, strokes = _a.strokes, strokeWidth = _a.strokeWidth, strokeOpacity = _a.strokeOpacity, data = _a.data, seriesItemEnabled = _a.seriesItemEnabled;\n        var updateStrokes = this.strokeSelection.setData(areaSelectionData);\n        updateStrokes.exit.remove();\n        var enterStrokes = updateStrokes.enter.append(Path)\n            .each(function (path) {\n            path.fill = undefined;\n            path.lineJoin = path.lineCap = 'round';\n            path.pointerEvents = PointerEvents.None;\n        });\n        var strokeSelection = updateStrokes.merge(enterStrokes);\n        strokeSelection.each(function (shape, datum, index) {\n            var path = shape.path;\n            shape.stroke = strokes[index % strokes.length];\n            shape.strokeWidth = strokeWidth;\n            shape.visible = !!seriesItemEnabled.get(datum.yKey);\n            shape.strokeOpacity = strokeOpacity;\n            shape.lineDash = _this.lineDash;\n            shape.lineDashOffset = _this.lineDashOffset;\n            path.clear();\n            var points = datum.points;\n            // The stroke doesn't go all the way around the fill, only on top,\n            // that's why we iterate until `data.length` (rather than `points.length`) and stop.\n            for (var i = 0; i < data.length; i++) {\n                var _a = points[i], x = _a.x, y = _a.y;\n                if (i > 0) {\n                    path.lineTo(x, y);\n                }\n                else {\n                    path.moveTo(x, y);\n                }\n            }\n        });\n        this.strokeSelection = strokeSelection;\n    };\n    AreaSeries.prototype.updateMarkerSelection = function (markerSelectionData) {\n        var marker = this.marker;\n        var data = marker.shape ? markerSelectionData : [];\n        var MarkerShape = getMarker(marker.shape);\n        var updateMarkers = this.markerSelection.setData(data);\n        updateMarkers.exit.remove();\n        var enterMarkers = updateMarkers.enter.append(MarkerShape);\n        this.markerSelection = updateMarkers.merge(enterMarkers);\n    };\n    AreaSeries.prototype.updateMarkerNodes = function () {\n        if (!this.chart) {\n            return;\n        }\n        var marker = this.marker;\n        var markerFormatter = marker.formatter;\n        var markerStrokeWidth = marker.strokeWidth !== undefined ? marker.strokeWidth : this.strokeWidth;\n        var markerSize = marker.size;\n        var _a = this, xKey = _a.xKey, seriesItemEnabled = _a.seriesItemEnabled;\n        var highlightedDatum = this.chart.highlightedDatum;\n        var _b = this.highlightStyle, highlightFill = _b.fill, highlightStroke = _b.stroke;\n        this.markerSelection.each(function (node, datum) {\n            var highlighted = datum === highlightedDatum;\n            var markerFill = highlighted && highlightFill !== undefined ? highlightFill : marker.fill || datum.fill;\n            var markerStroke = highlighted && highlightStroke !== undefined ? highlightStroke : marker.stroke || datum.stroke;\n            var markerFormat = undefined;\n            if (markerFormatter) {\n                markerFormat = markerFormatter({\n                    datum: datum.seriesDatum,\n                    xKey: xKey,\n                    yKey: datum.yKey,\n                    fill: markerFill,\n                    stroke: markerStroke,\n                    strokeWidth: markerStrokeWidth,\n                    size: markerSize,\n                    highlighted: highlighted\n                });\n            }\n            node.fill = markerFormat && markerFormat.fill || markerFill;\n            node.stroke = markerFormat && markerFormat.stroke || markerStroke;\n            node.strokeWidth = markerFormat && markerFormat.strokeWidth !== undefined\n                ? markerFormat.strokeWidth\n                : markerStrokeWidth;\n            node.size = markerFormat && markerFormat.size !== undefined\n                ? markerFormat.size\n                : markerSize;\n            node.translationX = datum.point.x;\n            node.translationY = datum.point.y;\n            node.visible = marker.enabled && node.size > 0 && !!seriesItemEnabled.get(datum.yKey);\n        });\n    };\n    AreaSeries.prototype.getNodeData = function () {\n        return this.markerSelectionData;\n    };\n    AreaSeries.prototype.fireNodeClickEvent = function (event, datum) {\n        this.fireEvent({\n            type: 'nodeClick',\n            event: event,\n            series: this,\n            datum: datum.seriesDatum,\n            xKey: this.xKey,\n            yKey: datum.yKey\n        });\n    };\n    AreaSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var xKey = this.xKey;\n        var yKey = nodeDatum.yKey;\n        if (!xKey || !yKey) {\n            return '';\n        }\n        var _a = this, xName = _a.xName, yKeys = _a.yKeys, yNames = _a.yNames, fills = _a.fills, tooltip = _a.tooltip;\n        var _b = tooltip.renderer, tooltipRenderer = _b === void 0 ? this.tooltipRenderer : _b, tooltipFormat = tooltip.format;\n        var datum = nodeDatum.seriesDatum;\n        var xValue = datum[xKey];\n        var yValue = datum[yKey];\n        var yKeyIndex = yKeys.indexOf(yKey);\n        var yName = yNames[yKeyIndex];\n        var color = fills[yKeyIndex % fills.length];\n        var xString = typeof xValue === 'number' ? toFixed(xValue) : String(xValue);\n        var yString = typeof yValue === 'number' ? toFixed(yValue) : String(yValue);\n        var title = yName;\n        var content = xString + ': ' + yString;\n        var defaults = {\n            title: title,\n            backgroundColor: color,\n            content: content\n        };\n        if (tooltipFormat || tooltipRenderer) {\n            var params = {\n                datum: datum,\n                xKey: xKey,\n                xName: xName,\n                xValue: xValue,\n                yKey: yKey,\n                yValue: yValue,\n                yName: yName,\n                color: color\n            };\n            if (tooltipFormat) {\n                return toTooltipHtml({\n                    content: interpolate(tooltipFormat, params)\n                }, defaults);\n            }\n            if (tooltipRenderer) {\n                return toTooltipHtml(tooltipRenderer(params), defaults);\n            }\n        }\n        return toTooltipHtml(defaults);\n    };\n    AreaSeries.prototype.listSeriesItems = function (legendData) {\n        var _a = this, data = _a.data, id = _a.id, xKey = _a.xKey, yKeys = _a.yKeys, yNames = _a.yNames, seriesItemEnabled = _a.seriesItemEnabled, marker = _a.marker, fills = _a.fills, strokes = _a.strokes, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity;\n        if (data && data.length && xKey && yKeys.length) {\n            yKeys.forEach(function (yKey, index) {\n                legendData.push({\n                    id: id,\n                    itemId: yKey,\n                    enabled: seriesItemEnabled.get(yKey) || false,\n                    label: {\n                        text: yNames[index] || yKeys[index]\n                    },\n                    marker: {\n                        shape: marker.shape,\n                        fill: marker.fill || fills[index % fills.length],\n                        stroke: marker.stroke || strokes[index % strokes.length],\n                        fillOpacity: fillOpacity,\n                        strokeOpacity: strokeOpacity\n                    }\n                });\n            });\n        }\n    };\n    AreaSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n        this.seriesItemEnabled.set(itemId, enabled);\n        this.scheduleData();\n    };\n    AreaSeries.className = 'AreaSeries';\n    AreaSeries.type = 'area';\n    __decorate([\n        reactive('dataChange')\n    ], AreaSeries.prototype, \"fills\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], AreaSeries.prototype, \"strokes\", void 0);\n    __decorate([\n        reactive('update')\n    ], AreaSeries.prototype, \"fillOpacity\", void 0);\n    __decorate([\n        reactive('update')\n    ], AreaSeries.prototype, \"strokeOpacity\", void 0);\n    __decorate([\n        reactive('update')\n    ], AreaSeries.prototype, \"lineDash\", void 0);\n    __decorate([\n        reactive('update')\n    ], AreaSeries.prototype, \"lineDashOffset\", void 0);\n    __decorate([\n        reactive('update')\n    ], AreaSeries.prototype, \"xName\", void 0);\n    __decorate([\n        reactive('update')\n    ], AreaSeries.prototype, \"yNames\", void 0);\n    __decorate([\n        reactive('update')\n    ], AreaSeries.prototype, \"strokeWidth\", void 0);\n    __decorate([\n        reactive('update')\n    ], AreaSeries.prototype, \"shadow\", void 0);\n    return AreaSeries;\n}(CartesianSeries));\nexport { AreaSeries };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Observable, reactive } from \"../util/observable\";\nvar Label = /** @class */ (function (_super) {\n    __extends(Label, _super);\n    function Label() {\n        var _this = _super.call(this) || this;\n        _this.enabled = true;\n        _this.fontSize = 12;\n        _this.fontFamily = 'Verdana, sans-serif';\n        _this.color = 'rgba(70, 70, 70, 1)';\n        return _this;\n    }\n    __decorate([\n        reactive('change', 'dataChange')\n    ], Label.prototype, \"enabled\", void 0);\n    __decorate([\n        reactive('change')\n    ], Label.prototype, \"fontStyle\", void 0);\n    __decorate([\n        reactive('change')\n    ], Label.prototype, \"fontWeight\", void 0);\n    __decorate([\n        reactive('change')\n    ], Label.prototype, \"fontSize\", void 0);\n    __decorate([\n        reactive('change')\n    ], Label.prototype, \"fontFamily\", void 0);\n    __decorate([\n        reactive('change')\n    ], Label.prototype, \"color\", void 0);\n    return Label;\n}(Observable));\nexport { Label };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Group } from \"../../../scene/group\";\nimport { Selection } from \"../../../scene/selection\";\nimport { Rect } from \"../../../scene/shape/rect\";\nimport { Text } from \"../../../scene/shape/text\";\nimport { BandScale } from \"../../../scale/bandScale\";\nimport { SeriesTooltip } from \"../series\";\nimport { Label } from \"../../label\";\nimport { PointerEvents } from \"../../../scene/node\";\nimport { CartesianSeries } from \"./cartesianSeries\";\nimport { ChartAxisDirection, flipChartAxisDirection } from \"../../chartAxis\";\nimport { toTooltipHtml } from \"../../chart\";\nimport { findMinMax } from \"../../../util/array\";\nimport { toFixed } from \"../../../util/number\";\nimport { equal } from \"../../../util/equal\";\nimport { reactive } from \"../../../util/observable\";\nvar BarSeriesNodeTag;\n(function (BarSeriesNodeTag) {\n    BarSeriesNodeTag[BarSeriesNodeTag[\"Bar\"] = 0] = \"Bar\";\n    BarSeriesNodeTag[BarSeriesNodeTag[\"Label\"] = 1] = \"Label\";\n})(BarSeriesNodeTag || (BarSeriesNodeTag = {}));\nvar BarSeriesLabel = /** @class */ (function (_super) {\n    __extends(BarSeriesLabel, _super);\n    function BarSeriesLabel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        reactive('change')\n    ], BarSeriesLabel.prototype, \"formatter\", void 0);\n    return BarSeriesLabel;\n}(Label));\nvar BarSeriesTooltip = /** @class */ (function (_super) {\n    __extends(BarSeriesTooltip, _super);\n    function BarSeriesTooltip() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        reactive('change')\n    ], BarSeriesTooltip.prototype, \"renderer\", void 0);\n    return BarSeriesTooltip;\n}(SeriesTooltip));\nexport { BarSeriesTooltip };\nfunction flat(arr, target) {\n    if (target === void 0) { target = []; }\n    arr.forEach(function (v) {\n        if (Array.isArray(v)) {\n            flat(v, target);\n        }\n        else {\n            target.push(v);\n        }\n    });\n    return target;\n}\nvar BarSeries = /** @class */ (function (_super) {\n    __extends(BarSeries, _super);\n    function BarSeries() {\n        var _a;\n        var _this = _super.call(this) || this;\n        // Need to put bar and label nodes into separate groups, because even though label nodes are\n        // created after the bar nodes, this only guarantees that labels will always be on top of bars\n        // on the first run. If on the next run more bars are added, they might clip the labels\n        // rendered during the previous run.\n        _this.rectGroup = _this.group.appendChild(new Group);\n        _this.textGroup = _this.group.appendChild(new Group);\n        _this.rectSelection = Selection.select(_this.rectGroup).selectAll();\n        _this.textSelection = Selection.select(_this.textGroup).selectAll();\n        _this.xData = [];\n        _this.yData = [];\n        _this.yDomain = [];\n        _this.label = new BarSeriesLabel();\n        /**\n         * The assumption is that the values will be reset (to `true`)\n         * in the {@link yKeys} setter.\n         */\n        _this.seriesItemEnabled = new Map();\n        _this.tooltip = new BarSeriesTooltip();\n        _this.flipXY = false;\n        _this.fills = [\n            '#c16068',\n            '#a2bf8a',\n            '#ebcc87',\n            '#80a0c3',\n            '#b58dae',\n            '#85c0d1'\n        ];\n        _this.strokes = [\n            '#874349',\n            '#718661',\n            '#a48f5f',\n            '#5a7088',\n            '#7f637a',\n            '#5d8692'\n        ];\n        _this.fillOpacity = 1;\n        _this.strokeOpacity = 1;\n        _this.lineDash = undefined;\n        _this.lineDashOffset = 0;\n        /**\n         * Used to get the position of bars within each group.\n         */\n        _this.groupScale = new BandScale();\n        _this.directionKeys = (_a = {},\n            _a[ChartAxisDirection.X] = ['xKey'],\n            _a[ChartAxisDirection.Y] = ['yKeys'],\n            _a);\n        _this._xKey = '';\n        _this._xName = '';\n        _this.cumYKeyCount = [];\n        _this.flatYKeys = undefined; // only set when a user used a flat array for yKeys\n        _this.hideInLegend = [];\n        /**\n         * yKeys: [['coffee']] - regular bars, each category has a single bar that shows a value for coffee\n         * yKeys: [['coffee'], ['tea'], ['milk']] - each category has three bars that show values for coffee, tea and milk\n         * yKeys: [['coffee', 'tea', 'milk']] - each category has a single bar with three stacks that show values for coffee, tea and milk\n         * yKeys: [['coffee', 'tea', 'milk'], ['paper', 'ink']] - each category has 2 stacked bars,\n         *     first showing values for coffee, tea and milk and second values for paper and ink\n         */\n        _this._yKeys = [];\n        _this._grouped = false;\n        /**\n         * A map of `yKeys` to their names (used in legends and tooltips).\n         * For example, if a key is `product_name` it's name can be a more presentable `Product Name`.\n         */\n        _this._yNames = {};\n        _this._strokeWidth = 1;\n        _this.highlightStyle = { fill: 'yellow' };\n        _this.addEventListener('update', _this.update);\n        _this.label.enabled = false;\n        _this.label.addEventListener('change', _this.update, _this);\n        return _this;\n    }\n    BarSeries.prototype.getKeys = function (direction) {\n        var _this = this;\n        var directionKeys = this.directionKeys;\n        var keys = directionKeys && directionKeys[this.flipXY ? flipChartAxisDirection(direction) : direction];\n        var values = [];\n        if (keys) {\n            keys.forEach(function (key) {\n                var value = _this[key];\n                if (value) {\n                    if (Array.isArray(value)) {\n                        values = values.concat(flat(value));\n                    }\n                    else {\n                        values.push(value);\n                    }\n                }\n            });\n        }\n        return values;\n    };\n    Object.defineProperty(BarSeries.prototype, \"xKey\", {\n        get: function () {\n            return this._xKey;\n        },\n        set: function (value) {\n            if (this._xKey !== value) {\n                this._xKey = value;\n                this.xData = [];\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BarSeries.prototype, \"xName\", {\n        get: function () {\n            return this._xName;\n        },\n        set: function (value) {\n            if (this._xName !== value) {\n                this._xName = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BarSeries.prototype, \"yKeys\", {\n        get: function () {\n            return this._yKeys;\n        },\n        set: function (yKeys) {\n            var _this = this;\n            if (!equal(this._yKeys, yKeys)) {\n                // Convert from flat y-keys to grouped y-keys.\n                if (yKeys.length && !Array.isArray(yKeys[0])) {\n                    var keys = this.flatYKeys = yKeys;\n                    if (this.grouped) {\n                        yKeys = keys.map(function (k) { return [k]; });\n                    }\n                    else {\n                        yKeys = [keys];\n                    }\n                }\n                else {\n                    this.flatYKeys = undefined;\n                }\n                this._yKeys = yKeys;\n                var prevYKeyCount_1 = 0;\n                this.cumYKeyCount = [];\n                var visibleStacks_1 = [];\n                yKeys.forEach(function (stack, index) {\n                    if (stack.length > 0) {\n                        visibleStacks_1.push(String(index));\n                    }\n                    _this.cumYKeyCount.push(prevYKeyCount_1);\n                    prevYKeyCount_1 += stack.length;\n                });\n                this.yData = [];\n                var seriesItemEnabled_1 = this.seriesItemEnabled;\n                seriesItemEnabled_1.clear();\n                yKeys.forEach(function (stack) {\n                    stack.forEach(function (yKey) { return seriesItemEnabled_1.set(yKey, true); });\n                });\n                var groupScale = this.groupScale;\n                groupScale.domain = visibleStacks_1;\n                groupScale.padding = 0.1;\n                groupScale.round = true;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BarSeries.prototype, \"grouped\", {\n        get: function () {\n            return this._grouped;\n        },\n        set: function (value) {\n            if (this._grouped !== value) {\n                this._grouped = value;\n                if (this.flatYKeys) {\n                    this.yKeys = this.flatYKeys;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BarSeries.prototype, \"yNames\", {\n        get: function () {\n            return this._yNames;\n        },\n        set: function (values) {\n            if (Array.isArray(values) && this.flatYKeys) {\n                var map_1 = {};\n                this.flatYKeys.forEach(function (k, i) {\n                    map_1[k] = values[i];\n                });\n                values = map_1;\n            }\n            this._yNames = values;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BarSeries.prototype.setColors = function (fills, strokes) {\n        this.fills = fills;\n        this.strokes = strokes;\n    };\n    Object.defineProperty(BarSeries.prototype, \"normalizedTo\", {\n        get: function () {\n            return this._normalizedTo;\n        },\n        set: function (value) {\n            var absValue = value ? Math.abs(value) : undefined;\n            if (this._normalizedTo !== absValue) {\n                this._normalizedTo = absValue;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BarSeries.prototype, \"strokeWidth\", {\n        get: function () {\n            return this._strokeWidth;\n        },\n        set: function (value) {\n            if (this._strokeWidth !== value) {\n                this._strokeWidth = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BarSeries.prototype, \"shadow\", {\n        get: function () {\n            return this._shadow;\n        },\n        set: function (value) {\n            if (this._shadow !== value) {\n                this._shadow = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BarSeries.prototype.onHighlightChange = function () {\n        this.updateRectNodes();\n    };\n    BarSeries.prototype.processData = function () {\n        var _a = this, xKey = _a.xKey, yKeys = _a.yKeys, seriesItemEnabled = _a.seriesItemEnabled;\n        var data = xKey && yKeys.length && this.data ? this.data : [];\n        var keysFound = true; // only warn once\n        this.xData = data.map(function (datum) {\n            if (keysFound && !(xKey in datum)) {\n                keysFound = false;\n                console.warn(\"The key '\" + xKey + \"' was not found in the data: \", datum);\n            }\n            return datum[xKey];\n        });\n        this.yData = data.map(function (datum) { return yKeys.map(function (stack) {\n            return stack.map(function (yKey) {\n                if (keysFound && !(yKey in datum)) {\n                    keysFound = false;\n                    console.warn(\"The key '\" + yKey + \"' was not found in the data: \", datum);\n                }\n                var value = datum[yKey];\n                return isFinite(value) && seriesItemEnabled.get(yKey) ? value : 0;\n            });\n        }); });\n        // Used for normalization of stacked bars. Contains min/max values for each stack in each group,\n        // where min is zero and max is a positive total of all values in the stack\n        // or min is a negative total of all values in the stack and max is zero.\n        var yMinMax = this.yData.map(function (group) { return group.map(function (stack) { return findMinMax(stack); }); });\n        var _b = this, yData = _b.yData, normalizedTo = _b.normalizedTo;\n        var yLargestMinMax = this.findLargestMinMax(yMinMax);\n        var yMin;\n        var yMax;\n        if (normalizedTo && isFinite(normalizedTo)) {\n            yMin = yLargestMinMax.min < 0 ? -normalizedTo : 0;\n            yMax = normalizedTo;\n            yData.forEach(function (group, i) {\n                group.forEach(function (stack, j) {\n                    stack.forEach(function (y, k) {\n                        if (y < 0) {\n                            stack[k] = -y / yMinMax[i][j].min * normalizedTo;\n                        }\n                        else {\n                            stack[k] = y / yMinMax[i][j].max * normalizedTo;\n                        }\n                    });\n                });\n            });\n        }\n        else {\n            yMin = yLargestMinMax.min;\n            yMax = yLargestMinMax.max;\n        }\n        this.yDomain = this.fixNumericExtent([yMin, yMax], 'y');\n        this.fireEvent({ type: 'dataProcessed' });\n        return true;\n    };\n    BarSeries.prototype.findLargestMinMax = function (groups) {\n        var tallestStackMin = 0;\n        var tallestStackMax = 0;\n        for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\n            var group = groups_1[_i];\n            for (var _a = 0, group_1 = group; _a < group_1.length; _a++) {\n                var stack = group_1[_a];\n                if (stack.min < tallestStackMin) {\n                    tallestStackMin = stack.min;\n                }\n                if (stack.max > tallestStackMax) {\n                    tallestStackMax = stack.max;\n                }\n            }\n        }\n        return { min: tallestStackMin, max: tallestStackMax };\n    };\n    BarSeries.prototype.getDomain = function (direction) {\n        if (this.flipXY) {\n            direction = flipChartAxisDirection(direction);\n        }\n        if (direction === ChartAxisDirection.X) {\n            return this.xData;\n        }\n        else {\n            return this.yDomain;\n        }\n    };\n    BarSeries.prototype.fireNodeClickEvent = function (event, datum) {\n        this.fireEvent({\n            type: 'nodeClick',\n            event: event,\n            series: this,\n            datum: datum.seriesDatum,\n            xKey: this.xKey,\n            yKey: datum.yKey\n        });\n    };\n    BarSeries.prototype.generateNodeData = function () {\n        var _this = this;\n        if (!this.data) {\n            return [];\n        }\n        var flipXY = this.flipXY;\n        var xAxis = flipXY ? this.yAxis : this.xAxis;\n        var yAxis = flipXY ? this.xAxis : this.yAxis;\n        var xScale = xAxis.scale;\n        var yScale = yAxis.scale;\n        var _a = this, groupScale = _a.groupScale, yKeys = _a.yKeys, cumYKeyCount = _a.cumYKeyCount, fills = _a.fills, strokes = _a.strokes, strokeWidth = _a.strokeWidth, seriesItemEnabled = _a.seriesItemEnabled, data = _a.data, xData = _a.xData, yData = _a.yData;\n        var label = this.label;\n        var labelFontStyle = label.fontStyle;\n        var labelFontWeight = label.fontWeight;\n        var labelFontSize = label.fontSize;\n        var labelFontFamily = label.fontFamily;\n        var labelColor = label.color;\n        var labelFormatter = label.formatter;\n        groupScale.range = [0, xScale.bandwidth];\n        var grouped = true;\n        var barWidth = grouped ? groupScale.bandwidth : xScale.bandwidth;\n        var nodeData = [];\n        xData.forEach(function (group, groupIndex) {\n            var seriesDatum = data[groupIndex];\n            var x = xScale.convert(group);\n            var groupYs = yData[groupIndex]; // y-data for groups of stacks\n            for (var stackIndex = 0; stackIndex < groupYs.length; stackIndex++) {\n                var stackYs = groupYs[stackIndex]; // y-data for a stack withing a group\n                var prevMinY = 0;\n                var prevMaxY = 0;\n                for (var levelIndex = 0; levelIndex < stackYs.length; levelIndex++) {\n                    var currY = stackYs[levelIndex];\n                    var yKey = yKeys[stackIndex][levelIndex];\n                    var barX = grouped ? x + groupScale.convert(String(stackIndex)) : x;\n                    // Bars outside of visible range are not rendered, so we generate node data\n                    // only for the visible subset of user data.\n                    if (!xAxis.inRange(barX, barWidth)) {\n                        continue;\n                    }\n                    var prevY = currY < 0 ? prevMinY : prevMaxY;\n                    var y = yScale.convert(prevY + currY);\n                    var bottomY = yScale.convert(prevY);\n                    var yValue = seriesDatum[yKey]; // unprocessed y-value\n                    var yValueIsNumber = typeof yValue === 'number';\n                    var labelText = void 0;\n                    if (labelFormatter) {\n                        labelText = labelFormatter({ value: yValueIsNumber ? yValue : undefined });\n                    }\n                    else {\n                        labelText = yValueIsNumber && isFinite(yValue) ? yValue.toFixed(2) : '';\n                    }\n                    var colorIndex = cumYKeyCount[stackIndex] + levelIndex;\n                    nodeData.push({\n                        series: _this,\n                        seriesDatum: seriesDatum,\n                        yValue: yValue,\n                        yKey: yKey,\n                        x: flipXY ? Math.min(y, bottomY) : barX,\n                        y: flipXY ? barX : Math.min(y, bottomY),\n                        width: flipXY ? Math.abs(bottomY - y) : barWidth,\n                        height: flipXY ? barWidth : Math.abs(bottomY - y),\n                        fill: fills[colorIndex % fills.length],\n                        stroke: strokes[colorIndex % strokes.length],\n                        strokeWidth: strokeWidth,\n                        label: seriesItemEnabled.get(yKey) && labelText ? {\n                            text: labelText,\n                            fontStyle: labelFontStyle,\n                            fontWeight: labelFontWeight,\n                            fontSize: labelFontSize,\n                            fontFamily: labelFontFamily,\n                            fill: labelColor,\n                            x: flipXY ? y + (yValue >= 0 ? -1 : 1) * Math.abs(bottomY - y) / 2 : barX + barWidth / 2,\n                            y: flipXY ? barX + barWidth / 2 : y + (yValue >= 0 ? 1 : -1) * Math.abs(bottomY - y) / 2\n                        } : undefined\n                    });\n                    if (currY < 0) {\n                        prevMinY += currY;\n                    }\n                    else {\n                        prevMaxY += currY;\n                    }\n                }\n            }\n        });\n        return nodeData;\n    };\n    BarSeries.prototype.update = function () {\n        var _a = this, visible = _a.visible, chart = _a.chart, xAxis = _a.xAxis, yAxis = _a.yAxis, xData = _a.xData, yData = _a.yData;\n        this.group.visible = visible;\n        if (!chart || chart.layoutPending || chart.dataPending ||\n            !xAxis || !yAxis || !visible || !xData.length || !yData.length) {\n            return;\n        }\n        var nodeData = this.generateNodeData();\n        this.updateRectSelection(nodeData);\n        this.updateRectNodes();\n        this.updateTextSelection(nodeData);\n        this.updateTextNodes();\n    };\n    BarSeries.prototype.updateRectSelection = function (selectionData) {\n        var updateRects = this.rectSelection.setData(selectionData);\n        updateRects.exit.remove();\n        var enterRects = updateRects.enter.append(Rect).each(function (rect) {\n            rect.tag = BarSeriesNodeTag.Bar;\n            rect.crisp = true;\n        });\n        this.rectSelection = updateRects.merge(enterRects);\n    };\n    BarSeries.prototype.updateRectNodes = function () {\n        var _this = this;\n        if (!this.chart) {\n            return;\n        }\n        var _a = this, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity, _b = _a.highlightStyle, fill = _b.fill, stroke = _b.stroke, shadow = _a.shadow, formatter = _a.formatter, xKey = _a.xKey, flipXY = _a.flipXY;\n        var highlightedDatum = this.chart.highlightedDatum;\n        this.rectSelection.each(function (rect, datum) {\n            var highlighted = datum === highlightedDatum;\n            var rectFill = highlighted && fill !== undefined ? fill : datum.fill;\n            var rectStroke = highlighted && stroke !== undefined ? stroke : datum.stroke;\n            var format = undefined;\n            if (formatter) {\n                format = formatter({\n                    datum: datum.seriesDatum,\n                    fill: rectFill,\n                    stroke: rectStroke,\n                    strokeWidth: datum.strokeWidth,\n                    highlighted: highlighted,\n                    xKey: xKey,\n                    yKey: datum.yKey\n                });\n            }\n            rect.x = datum.x;\n            rect.y = datum.y;\n            rect.width = datum.width;\n            rect.height = datum.height;\n            rect.fill = format && format.fill || rectFill;\n            rect.stroke = format && format.stroke || rectStroke;\n            rect.strokeWidth = format && format.strokeWidth !== undefined ? format.strokeWidth : datum.strokeWidth;\n            rect.fillOpacity = fillOpacity;\n            rect.strokeOpacity = strokeOpacity;\n            rect.lineDash = _this.lineDash;\n            rect.lineDashOffset = _this.lineDashOffset;\n            rect.fillShadow = shadow;\n            // Prevent stroke from rendering for zero height columns and zero width bars.\n            rect.visible = flipXY ? datum.width > 0 : datum.height > 0;\n        });\n    };\n    BarSeries.prototype.updateTextSelection = function (selectionData) {\n        var updateTexts = this.textSelection.setData(selectionData);\n        updateTexts.exit.remove();\n        var enterTexts = updateTexts.enter.append(Text).each(function (text) {\n            text.tag = BarSeriesNodeTag.Label;\n            text.pointerEvents = PointerEvents.None;\n            text.textAlign = 'center';\n            text.textBaseline = 'middle';\n        });\n        this.textSelection = updateTexts.merge(enterTexts);\n    };\n    BarSeries.prototype.updateTextNodes = function () {\n        var labelEnabled = this.label.enabled;\n        this.textSelection.each(function (text, datum) {\n            var label = datum.label;\n            if (label && labelEnabled) {\n                text.fontStyle = label.fontStyle;\n                text.fontWeight = label.fontWeight;\n                text.fontSize = label.fontSize;\n                text.fontFamily = label.fontFamily;\n                text.text = label.text;\n                text.x = label.x;\n                text.y = label.y;\n                text.fill = label.fill;\n                text.visible = true;\n            }\n            else {\n                text.visible = false;\n            }\n        });\n    };\n    BarSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var _a = this, xKey = _a.xKey, yKeys = _a.yKeys;\n        var yKey = nodeDatum.yKey;\n        if (!xKey || !yKey) {\n            return '';\n        }\n        var yKeyIndex = 0;\n        for (var _i = 0, yKeys_1 = yKeys; _i < yKeys_1.length; _i++) {\n            var stack = yKeys_1[_i];\n            var i = stack.indexOf(yKey);\n            if (i >= 0) {\n                yKeyIndex += i;\n                break;\n            }\n            yKeyIndex += stack.length;\n        }\n        var _b = this, xName = _b.xName, yNames = _b.yNames, fills = _b.fills, tooltip = _b.tooltip;\n        var _c = tooltip.renderer, tooltipRenderer = _c === void 0 ? this.tooltipRenderer : _c; // TODO: remove deprecated tooltipRenderer\n        var datum = nodeDatum.seriesDatum;\n        var yName = yNames[yKey];\n        var color = fills[yKeyIndex % fills.length];\n        var xValue = datum[xKey];\n        var yValue = datum[yKey];\n        var xString = typeof xValue === 'number' ? toFixed(xValue) : String(xValue);\n        var yString = typeof yValue === 'number' ? toFixed(yValue) : String(yValue);\n        var title = yName;\n        var content = xString + ': ' + yString;\n        var defaults = {\n            title: title,\n            backgroundColor: color,\n            content: content\n        };\n        if (tooltipRenderer) {\n            return toTooltipHtml(tooltipRenderer({\n                datum: datum,\n                xKey: xKey,\n                xValue: xValue,\n                xName: xName,\n                yKey: yKey,\n                yValue: yValue,\n                yName: yName,\n                color: color\n            }), defaults);\n        }\n        return toTooltipHtml(defaults);\n    };\n    BarSeries.prototype.listSeriesItems = function (legendData) {\n        var _a = this, id = _a.id, data = _a.data, xKey = _a.xKey, yKeys = _a.yKeys, yNames = _a.yNames, cumYKeyCount = _a.cumYKeyCount, seriesItemEnabled = _a.seriesItemEnabled, hideInLegend = _a.hideInLegend, fills = _a.fills, strokes = _a.strokes, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity;\n        if (data && data.length && xKey && yKeys.length) {\n            this.yKeys.forEach(function (stack, stackIndex) {\n                stack.forEach(function (yKey, levelIndex) {\n                    if (hideInLegend.indexOf(yKey) < 0) {\n                        var colorIndex = cumYKeyCount[stackIndex] + levelIndex;\n                        legendData.push({\n                            id: id,\n                            itemId: yKey,\n                            enabled: seriesItemEnabled.get(yKey) || false,\n                            label: {\n                                text: yNames[yKey] || yKey\n                            },\n                            marker: {\n                                fill: fills[colorIndex % fills.length],\n                                stroke: strokes[colorIndex % strokes.length],\n                                fillOpacity: fillOpacity,\n                                strokeOpacity: strokeOpacity\n                            }\n                        });\n                    }\n                });\n            });\n        }\n    };\n    BarSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n        var seriesItemEnabled = this.seriesItemEnabled;\n        seriesItemEnabled.set(itemId, enabled);\n        var yKeys = this.yKeys.map(function (stack) { return stack.slice(); }); // deep clone\n        seriesItemEnabled.forEach(function (enabled, yKey) {\n            if (!enabled) {\n                yKeys.forEach(function (stack) {\n                    var index = stack.indexOf(yKey);\n                    if (index >= 0) {\n                        stack.splice(index, 1);\n                    }\n                });\n            }\n        });\n        var visibleStacks = [];\n        yKeys.forEach(function (stack, index) {\n            if (stack.length > 0) {\n                visibleStacks.push(String(index));\n            }\n        });\n        this.groupScale.domain = visibleStacks;\n        this.scheduleData();\n    };\n    BarSeries.className = 'BarSeries';\n    BarSeries.type = 'bar';\n    __decorate([\n        reactive('layoutChange')\n    ], BarSeries.prototype, \"flipXY\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], BarSeries.prototype, \"fills\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], BarSeries.prototype, \"strokes\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], BarSeries.prototype, \"fillOpacity\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], BarSeries.prototype, \"strokeOpacity\", void 0);\n    __decorate([\n        reactive('update')\n    ], BarSeries.prototype, \"lineDash\", void 0);\n    __decorate([\n        reactive('update')\n    ], BarSeries.prototype, \"lineDashOffset\", void 0);\n    __decorate([\n        reactive('update')\n    ], BarSeries.prototype, \"formatter\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], BarSeries.prototype, \"hideInLegend\", void 0);\n    return BarSeries;\n}(CartesianSeries));\nexport { BarSeries };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Path } from \"../../../scene/shape/path\";\nimport ContinuousScale from \"../../../scale/continuousScale\";\nimport { Selection } from \"../../../scene/selection\";\nimport { Group } from \"../../../scene/group\";\nimport { SeriesTooltip } from \"../series\";\nimport { numericExtent } from \"../../../util/array\";\nimport { toFixed } from \"../../../util/number\";\nimport { PointerEvents } from \"../../../scene/node\";\nimport { CartesianSeries, CartesianSeriesMarker } from \"./cartesianSeries\";\nimport { ChartAxisDirection } from \"../../chartAxis\";\nimport { getMarker } from \"../../marker/util\";\nimport { reactive } from \"../../../util/observable\";\nimport { toTooltipHtml } from \"../../chart\";\nimport { interpolate } from \"../../../util/string\";\nvar LineSeriesTooltip = /** @class */ (function (_super) {\n    __extends(LineSeriesTooltip, _super);\n    function LineSeriesTooltip() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        reactive('change')\n    ], LineSeriesTooltip.prototype, \"renderer\", void 0);\n    __decorate([\n        reactive('change')\n    ], LineSeriesTooltip.prototype, \"format\", void 0);\n    return LineSeriesTooltip;\n}(SeriesTooltip));\nexport { LineSeriesTooltip };\nvar LineSeries = /** @class */ (function (_super) {\n    __extends(LineSeries, _super);\n    function LineSeries() {\n        var _this = _super.call(this) || this;\n        _this.xDomain = [];\n        _this.yDomain = [];\n        _this.xData = [];\n        _this.yData = [];\n        _this.lineNode = new Path();\n        // We use groups for this selection even though each group only contains a marker ATM\n        // because in the future we might want to add label support as well.\n        _this.nodeSelection = Selection.select(_this.group).selectAll();\n        _this.nodeData = [];\n        _this.marker = new CartesianSeriesMarker();\n        _this.stroke = '#874349';\n        _this.lineDash = undefined;\n        _this.lineDashOffset = 0;\n        _this.strokeWidth = 2;\n        _this.strokeOpacity = 1;\n        _this.tooltip = new LineSeriesTooltip();\n        _this._xKey = '';\n        _this.xName = '';\n        _this._yKey = '';\n        _this.yName = '';\n        _this.highlightStyle = { fill: 'yellow' };\n        var lineNode = _this.lineNode;\n        lineNode.fill = undefined;\n        lineNode.lineJoin = 'round';\n        lineNode.pointerEvents = PointerEvents.None;\n        _this.group.append(lineNode);\n        _this.addEventListener('update', _this.update);\n        var marker = _this.marker;\n        marker.fill = '#c16068';\n        marker.stroke = '#874349';\n        marker.addPropertyListener('shape', _this.onMarkerShapeChange, _this);\n        marker.addPropertyListener('enabled', _this.onMarkerEnabledChange, _this);\n        marker.addEventListener('change', _this.update, _this);\n        return _this;\n    }\n    LineSeries.prototype.onMarkerShapeChange = function () {\n        this.nodeSelection = this.nodeSelection.setData([]);\n        this.nodeSelection.exit.remove();\n        this.update();\n        this.fireEvent({ type: 'legendChange' });\n    };\n    LineSeries.prototype.onMarkerEnabledChange = function (event) {\n        if (!event.value) {\n            this.nodeSelection = this.nodeSelection.setData([]);\n            this.nodeSelection.exit.remove();\n        }\n    };\n    LineSeries.prototype.setColors = function (fills, strokes) {\n        this.stroke = fills[0];\n        this.marker.stroke = strokes[0];\n        this.marker.fill = fills[0];\n    };\n    Object.defineProperty(LineSeries.prototype, \"xKey\", {\n        get: function () {\n            return this._xKey;\n        },\n        set: function (value) {\n            if (this._xKey !== value) {\n                this._xKey = value;\n                this.xData = [];\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LineSeries.prototype, \"yKey\", {\n        get: function () {\n            return this._yKey;\n        },\n        set: function (value) {\n            if (this._yKey !== value) {\n                this._yKey = value;\n                this.yData = [];\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LineSeries.prototype.processData = function () {\n        var _a = this, xAxis = _a.xAxis, yAxis = _a.yAxis, xKey = _a.xKey, yKey = _a.yKey, xData = _a.xData, yData = _a.yData;\n        var data = xKey && yKey && this.data ? this.data : [];\n        if (!xAxis) {\n            return false;\n        }\n        var isContinuousX = xAxis.scale instanceof ContinuousScale;\n        var isContinuousY = yAxis.scale instanceof ContinuousScale;\n        xData.length = 0;\n        yData.length = 0;\n        for (var i = 0, n = data.length; i < n; i++) {\n            var datum = data[i];\n            var x = datum[xKey];\n            var y = datum[yKey];\n            xData.push(x);\n            yData.push(y);\n        }\n        this.xDomain = isContinuousX ? this.fixNumericExtent(numericExtent(xData), 'x') : xData;\n        this.yDomain = isContinuousY ? this.fixNumericExtent(numericExtent(yData), 'y') : yData;\n        return true;\n    };\n    LineSeries.prototype.getDomain = function (direction) {\n        if (direction === ChartAxisDirection.X) {\n            return this.xDomain;\n        }\n        return this.yDomain;\n    };\n    LineSeries.prototype.onHighlightChange = function () {\n        this.updateNodes();\n    };\n    LineSeries.prototype.update = function () {\n        this.group.visible = this.visible;\n        var _a = this, chart = _a.chart, xAxis = _a.xAxis, yAxis = _a.yAxis;\n        if (!chart || chart.layoutPending || chart.dataPending || !xAxis || !yAxis) {\n            return;\n        }\n        this.updateLinePath(); // this will generate node data too\n        this.updateNodeSelection();\n        this.updateNodes();\n    };\n    LineSeries.prototype.getXYDatums = function (i, xData, yData, xScale, yScale) {\n        var isContinuousX = xScale instanceof ContinuousScale;\n        var isContinuousY = yScale instanceof ContinuousScale;\n        var xDatum = xData[i];\n        var yDatum = yData[i];\n        var noDatum = yDatum == null || (isContinuousY && (isNaN(yDatum) || !isFinite(yDatum))) ||\n            xDatum == null || (isContinuousX && (isNaN(xDatum) || !isFinite(xDatum)));\n        return noDatum ? undefined : [xDatum, yDatum];\n    };\n    LineSeries.prototype.updateLinePath = function () {\n        if (!this.data) {\n            return;\n        }\n        var _a = this, xAxis = _a.xAxis, yAxis = _a.yAxis, data = _a.data, xData = _a.xData, yData = _a.yData, lineNode = _a.lineNode;\n        var xScale = xAxis.scale;\n        var yScale = yAxis.scale;\n        var xOffset = (xScale.bandwidth || 0) / 2;\n        var yOffset = (yScale.bandwidth || 0) / 2;\n        var linePath = lineNode.path;\n        var nodeData = [];\n        linePath.clear();\n        var moveTo = true;\n        var prevXInRange = undefined;\n        var nextXYDatums = undefined;\n        for (var i = 0; i < xData.length; i++) {\n            var xyDatums = nextXYDatums || this.getXYDatums(i, xData, yData, xScale, yScale);\n            if (!xyDatums) {\n                prevXInRange = undefined;\n                moveTo = true;\n            }\n            else {\n                var xDatum = xyDatums[0], yDatum = xyDatums[1];\n                var x = xScale.convert(xDatum) + xOffset;\n                var tolerance = (xScale.bandwidth || (this.marker.size * 0.5 + (this.marker.strokeWidth || 0))) + 1;\n                nextXYDatums = this.getXYDatums(i + 1, xData, yData, xScale, yScale);\n                var xInRange = xAxis.inRangeEx(x, 0, tolerance);\n                var nextXInRange = nextXYDatums && xAxis.inRangeEx(xScale.convert(nextXYDatums[0]) + xOffset, 0, tolerance);\n                if (xInRange === -1 && nextXInRange === -1) {\n                    moveTo = true;\n                    continue;\n                }\n                if (xInRange === 1 && prevXInRange === 1) {\n                    moveTo = true;\n                    continue;\n                }\n                prevXInRange = xInRange;\n                var y = yScale.convert(yDatum) + yOffset;\n                if (moveTo) {\n                    linePath.moveTo(x, y);\n                    moveTo = false;\n                }\n                else {\n                    linePath.lineTo(x, y);\n                }\n                nodeData.push({\n                    series: this,\n                    seriesDatum: data[i],\n                    point: { x: x, y: y }\n                });\n            }\n        }\n        lineNode.stroke = this.stroke;\n        lineNode.strokeWidth = this.strokeWidth;\n        lineNode.lineDash = this.lineDash;\n        lineNode.lineDashOffset = this.lineDashOffset;\n        lineNode.strokeOpacity = this.strokeOpacity;\n        // Used by marker nodes and for hit-testing even when not using markers\n        // when `chart.tooltipTracking` is true.\n        this.nodeData = nodeData;\n    };\n    LineSeries.prototype.updateNodeSelection = function () {\n        var marker = this.marker;\n        var nodeData = marker.shape ? this.nodeData : [];\n        var MarkerShape = getMarker(marker.shape);\n        var updateSelection = this.nodeSelection.setData(nodeData);\n        updateSelection.exit.remove();\n        var enterSelection = updateSelection.enter.append(Group);\n        enterSelection.append(MarkerShape);\n        this.nodeSelection = updateSelection.merge(enterSelection);\n    };\n    LineSeries.prototype.updateNodes = function () {\n        if (!this.chart) {\n            return;\n        }\n        var _a = this, marker = _a.marker, xKey = _a.xKey, yKey = _a.yKey, stroke = _a.stroke, strokeWidth = _a.strokeWidth;\n        var MarkerShape = getMarker(marker.shape);\n        var highlightedDatum = this.chart.highlightedDatum;\n        var _b = this.highlightStyle, highlightFill = _b.fill, highlightStroke = _b.stroke;\n        var markerFormatter = marker.formatter;\n        var markerSize = marker.size;\n        var markerStrokeWidth = marker.strokeWidth !== undefined ? marker.strokeWidth : strokeWidth;\n        this.nodeSelection.selectByClass(MarkerShape)\n            .each(function (node, datum) {\n            var highlighted = datum === highlightedDatum;\n            var markerFill = highlighted && highlightFill !== undefined ? highlightFill : marker.fill;\n            var markerStroke = highlighted && highlightStroke !== undefined ? highlightStroke : marker.stroke || stroke;\n            var markerFormat = undefined;\n            if (markerFormatter) {\n                markerFormat = markerFormatter({\n                    datum: datum.seriesDatum,\n                    xKey: xKey,\n                    yKey: yKey,\n                    fill: markerFill,\n                    stroke: markerStroke,\n                    strokeWidth: markerStrokeWidth,\n                    size: markerSize,\n                    highlighted: highlighted\n                });\n            }\n            node.fill = markerFormat && markerFormat.fill || markerFill;\n            node.stroke = markerFormat && markerFormat.stroke || markerStroke;\n            node.strokeWidth = markerFormat && markerFormat.strokeWidth !== undefined\n                ? markerFormat.strokeWidth\n                : markerStrokeWidth;\n            node.size = markerFormat && markerFormat.size !== undefined\n                ? markerFormat.size\n                : markerSize;\n            node.translationX = datum.point.x;\n            node.translationY = datum.point.y;\n            node.visible = marker.enabled && node.size > 0;\n        });\n    };\n    LineSeries.prototype.getNodeData = function () {\n        return this.nodeData;\n    };\n    LineSeries.prototype.fireNodeClickEvent = function (event, datum) {\n        this.fireEvent({\n            type: 'nodeClick',\n            event: event,\n            series: this,\n            datum: datum.seriesDatum,\n            xKey: this.xKey,\n            yKey: this.yKey\n        });\n    };\n    LineSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var _a = this, xKey = _a.xKey, yKey = _a.yKey;\n        if (!xKey || !yKey) {\n            return '';\n        }\n        var _b = this, xName = _b.xName, yName = _b.yName, color = _b.stroke, tooltip = _b.tooltip;\n        var _c = tooltip.renderer, tooltipRenderer = _c === void 0 ? this.tooltipRenderer : _c, tooltipFormat = tooltip.format;\n        var datum = nodeDatum.seriesDatum;\n        var xValue = datum[xKey];\n        var yValue = datum[yKey];\n        var xString = typeof xValue === 'number' ? toFixed(xValue) : String(xValue);\n        var yString = typeof yValue === 'number' ? toFixed(yValue) : String(yValue);\n        var title = this.title || yName;\n        var content = xString + ': ' + yString;\n        var defaults = {\n            title: title,\n            backgroundColor: color,\n            content: content\n        };\n        if (tooltipFormat || tooltipRenderer) {\n            var params = {\n                datum: datum,\n                xKey: xKey,\n                xValue: xValue,\n                xName: xName,\n                yKey: yKey,\n                yValue: yValue,\n                yName: yName,\n                title: title,\n                color: color\n            };\n            if (tooltipFormat) {\n                return toTooltipHtml({\n                    content: interpolate(tooltipFormat, params)\n                }, defaults);\n            }\n            if (tooltipRenderer) {\n                return toTooltipHtml(tooltipRenderer(params), defaults);\n            }\n        }\n        return toTooltipHtml(defaults);\n    };\n    LineSeries.prototype.listSeriesItems = function (legendData) {\n        var _a = this, id = _a.id, data = _a.data, xKey = _a.xKey, yKey = _a.yKey, yName = _a.yName, visible = _a.visible, title = _a.title, marker = _a.marker, stroke = _a.stroke, strokeOpacity = _a.strokeOpacity;\n        if (data && data.length && xKey && yKey) {\n            legendData.push({\n                id: id,\n                itemId: undefined,\n                enabled: visible,\n                label: {\n                    text: title || yName || yKey\n                },\n                marker: {\n                    shape: marker.shape,\n                    fill: marker.fill || 'rgba(0, 0, 0, 0)',\n                    stroke: marker.stroke || stroke || 'rgba(0, 0, 0, 0)',\n                    fillOpacity: 1,\n                    strokeOpacity: strokeOpacity\n                }\n            });\n        }\n    };\n    LineSeries.className = 'LineSeries';\n    LineSeries.type = 'line';\n    __decorate([\n        reactive('layoutChange')\n    ], LineSeries.prototype, \"title\", void 0);\n    __decorate([\n        reactive('update')\n    ], LineSeries.prototype, \"stroke\", void 0);\n    __decorate([\n        reactive('update')\n    ], LineSeries.prototype, \"lineDash\", void 0);\n    __decorate([\n        reactive('update')\n    ], LineSeries.prototype, \"lineDashOffset\", void 0);\n    __decorate([\n        reactive('update')\n    ], LineSeries.prototype, \"strokeWidth\", void 0);\n    __decorate([\n        reactive('update')\n    ], LineSeries.prototype, \"strokeOpacity\", void 0);\n    __decorate([\n        reactive('update')\n    ], LineSeries.prototype, \"xName\", void 0);\n    __decorate([\n        reactive('update')\n    ], LineSeries.prototype, \"yName\", void 0);\n    return LineSeries;\n}(CartesianSeries));\nexport { LineSeries };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Selection } from \"../../../scene/selection\";\nimport { Group } from \"../../../scene/group\";\nimport { SeriesTooltip } from \"../series\";\nimport { finiteExtent } from \"../../../util/array\";\nimport { toFixed } from \"../../../util/number\";\nimport { LinearScale } from \"../../../scale/linearScale\";\nimport { reactive } from \"../../../util/observable\";\nimport { CartesianSeries, CartesianSeriesMarker } from \"./cartesianSeries\";\nimport { ChartAxisDirection } from \"../../chartAxis\";\nimport { getMarker } from \"../../marker/util\";\nimport { toTooltipHtml } from \"../../chart\";\nimport ContinuousScale from \"../../../scale/continuousScale\";\nvar ScatterSeriesTooltip = /** @class */ (function (_super) {\n    __extends(ScatterSeriesTooltip, _super);\n    function ScatterSeriesTooltip() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        reactive('change')\n    ], ScatterSeriesTooltip.prototype, \"renderer\", void 0);\n    return ScatterSeriesTooltip;\n}(SeriesTooltip));\nexport { ScatterSeriesTooltip };\nvar ScatterSeries = /** @class */ (function (_super) {\n    __extends(ScatterSeries, _super);\n    function ScatterSeries() {\n        var _this = _super.call(this) || this;\n        _this.xDomain = [];\n        _this.yDomain = [];\n        _this.xData = [];\n        _this.yData = [];\n        _this.sizeData = [];\n        _this.sizeScale = new LinearScale();\n        _this.nodeSelection = Selection.select(_this.group).selectAll();\n        _this.nodeData = [];\n        _this.marker = new CartesianSeriesMarker();\n        _this._fill = '#c16068';\n        _this._stroke = '#874349';\n        _this._strokeWidth = 2;\n        _this._fillOpacity = 1;\n        _this._strokeOpacity = 1;\n        _this.highlightStyle = { fill: 'yellow' };\n        _this.xKey = '';\n        _this.yKey = '';\n        _this.xName = '';\n        _this.yName = '';\n        _this.sizeName = 'Size';\n        _this.labelName = 'Label';\n        _this.tooltip = new ScatterSeriesTooltip();\n        var marker = _this.marker;\n        marker.addPropertyListener('shape', _this.onMarkerShapeChange, _this);\n        marker.addEventListener('change', _this.update, _this);\n        _this.addPropertyListener('xKey', function () { return _this.xData = []; });\n        _this.addPropertyListener('yKey', function () { return _this.yData = []; });\n        _this.addPropertyListener('sizeKey', function () { return _this.sizeData = []; });\n        return _this;\n    }\n    Object.defineProperty(ScatterSeries.prototype, \"fill\", {\n        get: function () {\n            return this._fill;\n        },\n        set: function (value) {\n            if (this._fill !== value) {\n                this._fill = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ScatterSeries.prototype, \"stroke\", {\n        get: function () {\n            return this._stroke;\n        },\n        set: function (value) {\n            if (this._stroke !== value) {\n                this._stroke = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ScatterSeries.prototype, \"strokeWidth\", {\n        get: function () {\n            return this._strokeWidth;\n        },\n        set: function (value) {\n            if (this._strokeWidth !== value) {\n                this._strokeWidth = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ScatterSeries.prototype, \"fillOpacity\", {\n        get: function () {\n            return this._fillOpacity;\n        },\n        set: function (value) {\n            if (this._fillOpacity !== value) {\n                this._fillOpacity = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ScatterSeries.prototype, \"strokeOpacity\", {\n        get: function () {\n            return this._strokeOpacity;\n        },\n        set: function (value) {\n            if (this._strokeOpacity !== value) {\n                this._strokeOpacity = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ScatterSeries.prototype.onHighlightChange = function () {\n        this.updateNodes();\n    };\n    ScatterSeries.prototype.onMarkerShapeChange = function () {\n        this.nodeSelection = this.nodeSelection.setData([]);\n        this.nodeSelection.exit.remove();\n        this.update();\n        this.fireEvent({ type: 'legendChange' });\n    };\n    ScatterSeries.prototype.setColors = function (fills, strokes) {\n        this.fill = fills[0];\n        this.stroke = strokes[0];\n        this.marker.fill = fills[0];\n        this.marker.stroke = strokes[0];\n    };\n    ScatterSeries.prototype.processData = function () {\n        var _a = this, xKey = _a.xKey, yKey = _a.yKey, sizeKey = _a.sizeKey, xAxis = _a.xAxis, yAxis = _a.yAxis, marker = _a.marker;\n        var data = xKey && yKey && this.data ? this.data : [];\n        this.xData = data.map(function (d) { return d[xKey]; });\n        this.yData = data.map(function (d) { return d[yKey]; });\n        if (sizeKey) {\n            this.sizeData = data.map(function (d) { return d[sizeKey]; });\n        }\n        else {\n            this.sizeData = [];\n        }\n        this.sizeScale.domain = marker.domain ? marker.domain : finiteExtent(this.sizeData) || [1, 1];\n        if (xAxis.scale instanceof ContinuousScale) {\n            this.xDomain = this.fixNumericExtent(finiteExtent(this.xData), 'x');\n        }\n        else {\n            this.xDomain = this.xData;\n        }\n        if (yAxis.scale instanceof ContinuousScale) {\n            this.yDomain = this.fixNumericExtent(finiteExtent(this.yData), 'y');\n        }\n        else {\n            this.yDomain = this.yData;\n        }\n        return true;\n    };\n    ScatterSeries.prototype.getDomain = function (direction) {\n        if (direction === ChartAxisDirection.X) {\n            return this.xDomain;\n        }\n        else {\n            return this.yDomain;\n        }\n    };\n    ScatterSeries.prototype.getNodeData = function () {\n        return this.nodeData;\n    };\n    ScatterSeries.prototype.fireNodeClickEvent = function (event, datum) {\n        this.fireEvent({\n            type: 'nodeClick',\n            event: event,\n            series: this,\n            datum: datum.seriesDatum,\n            xKey: this.xKey,\n            yKey: this.yKey,\n            sizeKey: this.sizeKey\n        });\n    };\n    ScatterSeries.prototype.generateNodeData = function () {\n        if (!this.data) {\n            return [];\n        }\n        var _a = this, xAxis = _a.xAxis, yAxis = _a.yAxis;\n        var xScale = xAxis.scale;\n        var yScale = yAxis.scale;\n        var isContinuousX = xScale instanceof ContinuousScale;\n        var isContinuousY = yScale instanceof ContinuousScale;\n        var xOffset = (xScale.bandwidth || 0) / 2;\n        var yOffset = (yScale.bandwidth || 0) / 2;\n        var _b = this, data = _b.data, xData = _b.xData, yData = _b.yData, sizeData = _b.sizeData, sizeScale = _b.sizeScale, marker = _b.marker;\n        sizeScale.range = [marker.size, marker.maxSize];\n        var nodeData = [];\n        for (var i = 0; i < xData.length; i++) {\n            var xDatum = xData[i];\n            var yDatum = yData[i];\n            var noDatum = yDatum == null || (isContinuousY && (isNaN(yDatum) || !isFinite(yDatum))) ||\n                xDatum == null || (isContinuousX && (isNaN(xDatum) || !isFinite(xDatum)));\n            if (noDatum) {\n                continue;\n            }\n            var x = xScale.convert(xDatum) + xOffset;\n            if (!xAxis.inRange(x)) {\n                continue;\n            }\n            nodeData.push({\n                series: this,\n                seriesDatum: data[i],\n                point: {\n                    x: x,\n                    y: yScale.convert(yData[i]) + yOffset\n                },\n                size: sizeData.length ? sizeScale.convert(sizeData[i]) : marker.size\n            });\n        }\n        return nodeData;\n    };\n    ScatterSeries.prototype.update = function () {\n        var _a = this, visible = _a.visible, chart = _a.chart, xAxis = _a.xAxis, yAxis = _a.yAxis;\n        this.group.visible = visible;\n        if (!visible || !chart || chart.layoutPending || chart.dataPending || !xAxis || !yAxis) {\n            return;\n        }\n        var nodeData = this.nodeData = this.generateNodeData();\n        this.updateNodeSelection(nodeData);\n        this.updateNodes();\n    };\n    ScatterSeries.prototype.updateNodeSelection = function (nodeData) {\n        var MarkerShape = getMarker(this.marker.shape);\n        var updateSelection = this.nodeSelection.setData(nodeData);\n        updateSelection.exit.remove();\n        var enterSelection = updateSelection.enter.append(Group);\n        enterSelection.append(MarkerShape);\n        this.nodeSelection = updateSelection.merge(enterSelection);\n    };\n    ScatterSeries.prototype.updateNodes = function () {\n        if (!this.chart) {\n            return;\n        }\n        var highlightedDatum = this.chart.highlightedDatum;\n        var _a = this, marker = _a.marker, xKey = _a.xKey, yKey = _a.yKey, fill = _a.fill, stroke = _a.stroke, strokeWidth = _a.strokeWidth, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity;\n        var _b = this.highlightStyle, highlightFill = _b.fill, highlightStroke = _b.stroke;\n        var markerStrokeWidth = marker.strokeWidth !== undefined ? marker.strokeWidth : strokeWidth;\n        var MarkerShape = getMarker(marker.shape);\n        var markerFormatter = marker.formatter;\n        this.nodeSelection.selectByClass(MarkerShape)\n            .each(function (node, datum) {\n            var highlighted = datum === highlightedDatum;\n            var markerFill = highlighted && highlightFill !== undefined ? highlightFill : marker.fill || fill;\n            var markerStroke = highlighted && highlightStroke !== undefined ? highlightStroke : marker.stroke || stroke;\n            var markerFormat = undefined;\n            if (markerFormatter) {\n                markerFormat = markerFormatter({\n                    datum: datum.seriesDatum,\n                    xKey: xKey,\n                    yKey: yKey,\n                    fill: markerFill,\n                    stroke: markerStroke,\n                    strokeWidth: markerStrokeWidth,\n                    size: datum.size,\n                    highlighted: highlighted\n                });\n            }\n            node.fill = markerFormat && markerFormat.fill || markerFill;\n            node.stroke = markerFormat && markerFormat.stroke || markerStroke;\n            node.strokeWidth = markerFormat && markerFormat.strokeWidth !== undefined\n                ? markerFormat.strokeWidth\n                : markerStrokeWidth;\n            node.size = markerFormat && markerFormat.size !== undefined\n                ? markerFormat.size\n                : datum.size;\n            node.fillOpacity = fillOpacity;\n            node.strokeOpacity = strokeOpacity;\n            node.translationX = datum.point.x;\n            node.translationY = datum.point.y;\n            node.visible = marker.enabled && node.size > 0;\n        });\n    };\n    ScatterSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var _a = this, xKey = _a.xKey, yKey = _a.yKey;\n        if (!xKey || !yKey) {\n            return '';\n        }\n        var _b = this, tooltip = _b.tooltip, xName = _b.xName, yName = _b.yName, sizeKey = _b.sizeKey, sizeName = _b.sizeName, labelKey = _b.labelKey, labelName = _b.labelName, fill = _b.fill;\n        var _c = tooltip.renderer, tooltipRenderer = _c === void 0 ? this.tooltipRenderer : _c;\n        var color = fill || 'gray';\n        var title = this.title || yName;\n        var datum = nodeDatum.seriesDatum;\n        var xValue = datum[xKey];\n        var yValue = datum[yKey];\n        var content = \"<b>\" + (xName || xKey) + \"</b>: \" + (typeof xValue === 'number' ? toFixed(xValue) : xValue)\n            + (\"<br><b>\" + (yName || yKey) + \"</b>: \" + (typeof yValue === 'number' ? toFixed(yValue) : yValue));\n        if (sizeKey) {\n            content += \"<br><b>\" + sizeName + \"</b>: \" + datum[sizeKey];\n        }\n        if (labelKey) {\n            content = \"<b>\" + labelName + \"</b>: \" + datum[labelKey] + \"<br>\" + content;\n        }\n        var defaults = {\n            title: title,\n            backgroundColor: color,\n            content: content\n        };\n        if (tooltipRenderer) {\n            return toTooltipHtml(tooltipRenderer({\n                datum: datum,\n                xKey: xKey,\n                xValue: xValue,\n                xName: xName,\n                yKey: yKey,\n                yValue: yValue,\n                yName: yName,\n                sizeKey: sizeKey,\n                sizeName: sizeName,\n                labelKey: labelKey,\n                labelName: labelName,\n                title: title,\n                color: color\n            }), defaults);\n        }\n        return toTooltipHtml(defaults);\n    };\n    ScatterSeries.prototype.listSeriesItems = function (legendData) {\n        var _a = this, id = _a.id, data = _a.data, xKey = _a.xKey, yKey = _a.yKey, yName = _a.yName, title = _a.title, visible = _a.visible, marker = _a.marker, fill = _a.fill, stroke = _a.stroke, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity;\n        if (data && data.length && xKey && yKey) {\n            legendData.push({\n                id: id,\n                itemId: undefined,\n                enabled: visible,\n                label: {\n                    text: title || yName || yKey\n                },\n                marker: {\n                    shape: marker.shape,\n                    fill: marker.fill || fill || 'rgba(0, 0, 0, 0)',\n                    stroke: marker.stroke || stroke || 'rgba(0, 0, 0, 0)',\n                    fillOpacity: fillOpacity,\n                    strokeOpacity: strokeOpacity\n                }\n            });\n        }\n    };\n    ScatterSeries.className = 'ScatterSeries';\n    ScatterSeries.type = 'scatter';\n    __decorate([\n        reactive('layoutChange')\n    ], ScatterSeries.prototype, \"title\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], ScatterSeries.prototype, \"xKey\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], ScatterSeries.prototype, \"yKey\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], ScatterSeries.prototype, \"sizeKey\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], ScatterSeries.prototype, \"labelKey\", void 0);\n    return ScatterSeries;\n}(CartesianSeries));\nexport { ScatterSeries };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { Group } from \"../../../scene/group\";\nimport { Selection } from \"../../../scene/selection\";\nimport { Rect } from \"../../../scene/shape/rect\";\nimport { Text } from \"../../../scene/shape/text\";\nimport { SeriesTooltip } from \"../series\";\nimport { Label } from \"../../label\";\nimport { PointerEvents } from \"../../../scene/node\";\nimport { CartesianSeries } from \"./cartesianSeries\";\nimport { ChartAxisDirection } from \"../../chartAxis\";\nimport { toTooltipHtml } from \"../../chart\";\nimport { numericExtent, finiteExtent } from \"../../../util/array\";\nimport { toFixed } from \"../../../util/number\";\nimport { reactive } from \"../../../util/observable\";\nimport ticks, { tickStep } from \"../../../util/ticks\";\nvar HistogramSeriesNodeTag;\n(function (HistogramSeriesNodeTag) {\n    HistogramSeriesNodeTag[HistogramSeriesNodeTag[\"Bin\"] = 0] = \"Bin\";\n    HistogramSeriesNodeTag[HistogramSeriesNodeTag[\"Label\"] = 1] = \"Label\";\n})(HistogramSeriesNodeTag || (HistogramSeriesNodeTag = {}));\nvar HistogramSeriesLabel = /** @class */ (function (_super) {\n    __extends(HistogramSeriesLabel, _super);\n    function HistogramSeriesLabel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        reactive('change')\n    ], HistogramSeriesLabel.prototype, \"formatter\", void 0);\n    return HistogramSeriesLabel;\n}(Label));\nvar defaultBinCount = 10;\nvar aggregationFunctions = {\n    count: function (bin) { return bin.data.length; },\n    sum: function (bin, yKey) { return bin.data.reduce(function (acc, datum) { return acc + datum[yKey]; }, 0); },\n    mean: function (bin, yKey) { return aggregationFunctions.sum(bin, yKey) / aggregationFunctions.count(bin, yKey); }\n};\nvar HistogramBin = /** @class */ (function () {\n    function HistogramBin(_a) {\n        var domainMin = _a[0], domainMax = _a[1];\n        this.data = [];\n        this.aggregatedValue = 0;\n        this.frequency = 0;\n        this.domain = [domainMin, domainMax];\n    }\n    ;\n    HistogramBin.prototype.addDatum = function (datum) {\n        this.data.push(datum);\n        this.frequency++;\n    };\n    Object.defineProperty(HistogramBin.prototype, \"domainWidth\", {\n        get: function () {\n            var _a = this.domain, domainMin = _a[0], domainMax = _a[1];\n            return domainMax - domainMin;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HistogramBin.prototype, \"relativeHeight\", {\n        get: function () {\n            return this.aggregatedValue / this.domainWidth;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HistogramBin.prototype.calculateAggregatedValue = function (aggregationName, yKey) {\n        if (!yKey) {\n            // not having a yKey forces us into a frequency plot\n            aggregationName = 'count';\n        }\n        var aggregationFunction = aggregationFunctions[aggregationName];\n        this.aggregatedValue = aggregationFunction(this, yKey);\n    };\n    HistogramBin.prototype.getY = function (areaPlot) {\n        return areaPlot ? this.relativeHeight : this.aggregatedValue;\n    };\n    return HistogramBin;\n}());\nexport { HistogramBin };\nvar HistogramSeriesTooltip = /** @class */ (function (_super) {\n    __extends(HistogramSeriesTooltip, _super);\n    function HistogramSeriesTooltip() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        reactive('change')\n    ], HistogramSeriesTooltip.prototype, \"renderer\", void 0);\n    return HistogramSeriesTooltip;\n}(SeriesTooltip));\nexport { HistogramSeriesTooltip };\nvar HistogramSeries = /** @class */ (function (_super) {\n    __extends(HistogramSeries, _super);\n    function HistogramSeries() {\n        var _a;\n        var _this = _super.call(this) || this;\n        // Need to put column and label nodes into separate groups, because even though label nodes are\n        // created after the column nodes, this only guarantees that labels will always be on top of columns\n        // on the first run. If on the next run more columns are added, they might clip the labels\n        // rendered during the previous run.\n        _this.rectGroup = _this.group.appendChild(new Group());\n        _this.textGroup = _this.group.appendChild(new Group());\n        _this.rectSelection = Selection.select(_this.rectGroup).selectAll();\n        _this.textSelection = Selection.select(_this.textGroup).selectAll();\n        _this.binnedData = [];\n        _this.xDomain = [];\n        _this.yDomain = [];\n        _this.label = new HistogramSeriesLabel();\n        _this.seriesItemEnabled = true;\n        _this.tooltip = new HistogramSeriesTooltip();\n        _this.fill = undefined;\n        _this.stroke = undefined;\n        _this.fillOpacity = 1;\n        _this.strokeOpacity = 1;\n        _this.lineDash = undefined;\n        _this.lineDashOffset = 0;\n        _this.directionKeys = (_a = {},\n            _a[ChartAxisDirection.X] = ['xKey'],\n            _a[ChartAxisDirection.Y] = ['yKey'],\n            _a);\n        _this._xKey = '';\n        _this._areaPlot = false;\n        _this._bins = undefined;\n        _this._aggregation = 'count';\n        _this._binCount = undefined;\n        _this._xName = '';\n        _this._yKey = '';\n        _this._yName = '';\n        _this._strokeWidth = 1;\n        _this.highlightStyle = { fill: 'yellow' };\n        _this.label.enabled = false;\n        _this.label.addEventListener('change', _this.update, _this);\n        return _this;\n    }\n    HistogramSeries.prototype.getKeys = function (direction) {\n        var _this = this;\n        var directionKeys = this.directionKeys;\n        var keys = directionKeys && directionKeys[direction];\n        var values = [];\n        if (keys) {\n            keys.forEach(function (key) {\n                var value = _this[key];\n                if (value) {\n                    if (Array.isArray(value)) {\n                        values.push.apply(values, value);\n                    }\n                    else {\n                        values.push(value);\n                    }\n                }\n            });\n        }\n        return values;\n    };\n    Object.defineProperty(HistogramSeries.prototype, \"xKey\", {\n        get: function () {\n            return this._xKey;\n        },\n        set: function (value) {\n            if (this._xKey !== value) {\n                this._xKey = value;\n                this.scheduleData();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HistogramSeries.prototype, \"areaPlot\", {\n        get: function () {\n            return this._areaPlot;\n        },\n        set: function (c) {\n            this._areaPlot = c;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HistogramSeries.prototype, \"bins\", {\n        get: function () {\n            return this._bins;\n        },\n        set: function (bins) {\n            this._bins = bins;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HistogramSeries.prototype, \"aggregation\", {\n        get: function () {\n            return this._aggregation;\n        },\n        set: function (aggregation) {\n            this._aggregation = aggregation;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HistogramSeries.prototype, \"binCount\", {\n        get: function () {\n            return this._binCount;\n        },\n        set: function (binCount) {\n            this._binCount = binCount;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HistogramSeries.prototype, \"xName\", {\n        get: function () {\n            return this._xName;\n        },\n        set: function (value) {\n            if (this._xName !== value) {\n                this._xName = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HistogramSeries.prototype, \"yKey\", {\n        get: function () {\n            return this._yKey;\n        },\n        set: function (yKey) {\n            this._yKey = yKey;\n            this.seriesItemEnabled = true;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HistogramSeries.prototype, \"yName\", {\n        get: function () {\n            return this._yName;\n        },\n        set: function (values) {\n            this._yName = values;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HistogramSeries.prototype, \"strokeWidth\", {\n        get: function () {\n            return this._strokeWidth;\n        },\n        set: function (value) {\n            if (this._strokeWidth !== value) {\n                this._strokeWidth = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(HistogramSeries.prototype, \"shadow\", {\n        get: function () {\n            return this._shadow;\n        },\n        set: function (value) {\n            if (this._shadow !== value) {\n                this._shadow = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HistogramSeries.prototype.onHighlightChange = function () {\n        this.updateRectNodes();\n    };\n    HistogramSeries.prototype.setColors = function (fills, strokes) {\n        this.fill = fills[0];\n        this.stroke = strokes[0];\n    };\n    // During processData phase, used to unify different ways of the user specifying\n    // the bins. Returns bins in format[[min1, max1], [min2, max2], ... ].\n    HistogramSeries.prototype.deriveBins = function () {\n        var _this = this;\n        var _a = this, bins = _a.bins, binCount = _a.binCount;\n        if (!this.data) {\n            return [];\n        }\n        if (bins && binCount) {\n            console.warn('bins and bitCount are mutually exclusive properties.');\n        }\n        if (bins) {\n            return bins;\n        }\n        var xData = this.data.map(function (datum) { return datum[_this.xKey]; });\n        var xDomain = this.fixNumericExtent(finiteExtent(xData), 'x');\n        var binStarts = ticks(xDomain[0], xDomain[1], this.binCount || defaultBinCount);\n        var binSize = tickStep(xDomain[0], xDomain[1], this.binCount || defaultBinCount);\n        var firstBinEnd = binStarts[0];\n        var expandStartToBin = function (n) { return [n, n + binSize]; };\n        return __spreadArrays([\n            [firstBinEnd - binSize, firstBinEnd]\n        ], binStarts.map(expandStartToBin));\n    };\n    HistogramSeries.prototype.placeDataInBins = function (data) {\n        var _this = this;\n        var xKey = this.xKey;\n        var derivedBins = this.deriveBins();\n        // creating a sorted copy allows binning in O(n) rather than O(n²)\n        // but at the expense of more temporary memory\n        var sortedData = data.slice().sort(function (a, b) {\n            if (a[xKey] < b[xKey]) {\n                return -1;\n            }\n            if (a[xKey] > b[xKey]) {\n                return 1;\n            }\n            return 0;\n        });\n        var currentBin = 0;\n        var bins = [new HistogramBin(derivedBins[0])];\n        loop: for (var i = 0, ln = sortedData.length; i < ln; i++) {\n            var datum = sortedData[i];\n            while (datum[xKey] > derivedBins[currentBin][1]) {\n                currentBin++;\n                var bin = derivedBins[currentBin];\n                if (!bin) {\n                    break loop;\n                }\n                bins.push(new HistogramBin(bin));\n            }\n            bins[currentBin].addDatum(datum);\n        }\n        bins.forEach(function (b) { return b.calculateAggregatedValue(_this._aggregation, _this.yKey); });\n        return bins;\n    };\n    Object.defineProperty(HistogramSeries.prototype, \"xMax\", {\n        get: function () {\n            var _this = this;\n            return this.data && this.data.reduce(function (acc, datum) {\n                return Math.max(acc, datum[_this.xKey]);\n            }, Number.NEGATIVE_INFINITY);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    HistogramSeries.prototype.processData = function () {\n        var _this = this;\n        var _a = this, xKey = _a.xKey, data = _a.data;\n        this.binnedData = this.placeDataInBins(xKey && data ? data : []);\n        var yData = this.binnedData.map(function (b) { return b.getY(_this.areaPlot); });\n        var yMinMax = numericExtent(yData);\n        this.yDomain = this.fixNumericExtent([0, yMinMax ? yMinMax[1] : 1], 'y');\n        var firstBin = this.binnedData[0];\n        var lastBin = this.binnedData[this.binnedData.length - 1];\n        var xMin = firstBin.domain[0];\n        var xMax = lastBin.domain[1];\n        this.xDomain = [xMin, xMax];\n        this.fireEvent({ type: 'dataProcessed' });\n        return true;\n    };\n    HistogramSeries.prototype.getDomain = function (direction) {\n        if (direction === ChartAxisDirection.X) {\n            return this.xDomain;\n        }\n        else {\n            return this.yDomain;\n        }\n    };\n    HistogramSeries.prototype.fireNodeClickEvent = function (event, datum) {\n        this.fireEvent({\n            type: 'nodeClick',\n            event: event,\n            series: this,\n            datum: datum.seriesDatum,\n            xKey: this.xKey\n        });\n    };\n    HistogramSeries.prototype.update = function () {\n        var _a = this, visible = _a.visible, chart = _a.chart, xAxis = _a.xAxis, yAxis = _a.yAxis;\n        this.group.visible = visible;\n        if (!xAxis || !yAxis || !visible || !chart || chart.layoutPending || chart.dataPending) {\n            return;\n        }\n        var nodeData = this.generateNodeData();\n        this.updateRectSelection(nodeData);\n        this.updateRectNodes();\n        this.updateTextSelection(nodeData);\n        this.updateTextNodes();\n    };\n    HistogramSeries.prototype.generateNodeData = function () {\n        var _this = this;\n        if (!this.seriesItemEnabled) {\n            return [];\n        }\n        var _a = this, xScale = _a.xAxis.scale, yScale = _a.yAxis.scale, fill = _a.fill, stroke = _a.stroke, strokeWidth = _a.strokeWidth;\n        var nodeData = [];\n        var defaultLabelFormatter = function (params) { return String(params.value); };\n        var _b = this.label, _c = _b.formatter, labelFormatter = _c === void 0 ? defaultLabelFormatter : _c, labelFontStyle = _b.fontStyle, labelFontWeight = _b.fontWeight, labelFontSize = _b.fontSize, labelFontFamily = _b.fontFamily, labelColor = _b.color;\n        this.binnedData.forEach(function (binOfData) {\n            var total = binOfData.aggregatedValue, frequency = binOfData.frequency, _a = binOfData.domain, xDomainMin = _a[0], xDomainMax = _a[1], relativeHeight = binOfData.relativeHeight;\n            var xMinPx = xScale.convert(xDomainMin), xMaxPx = xScale.convert(xDomainMax), \n            // note: assuming can't be negative:\n            y = _this.areaPlot ? relativeHeight : (_this.yKey ? total : frequency), yZeroPx = yScale.convert(0), yMaxPx = yScale.convert(y), w = xMaxPx - xMinPx, h = Math.abs(yMaxPx - yZeroPx);\n            var selectionDatumLabel = y !== 0 ? {\n                text: labelFormatter({ value: binOfData.aggregatedValue }),\n                fontStyle: labelFontStyle,\n                fontWeight: labelFontWeight,\n                fontSize: labelFontSize,\n                fontFamily: labelFontFamily,\n                fill: labelColor,\n                x: xMinPx + w / 2,\n                y: yMaxPx + h / 2\n            } : undefined;\n            nodeData.push({\n                series: _this,\n                seriesDatum: binOfData,\n                // since each selection is an aggregation of multiple data.\n                x: xMinPx,\n                y: yMaxPx,\n                width: w,\n                height: h,\n                fill: fill,\n                stroke: stroke,\n                strokeWidth: strokeWidth,\n                label: selectionDatumLabel,\n            });\n        });\n        return nodeData;\n    };\n    HistogramSeries.prototype.updateRectSelection = function (nodeData) {\n        var updateRects = this.rectSelection.setData(nodeData);\n        updateRects.exit.remove();\n        var enterRects = updateRects.enter.append(Rect).each(function (rect) {\n            rect.tag = HistogramSeriesNodeTag.Bin;\n            rect.crisp = true;\n        });\n        this.rectSelection = updateRects.merge(enterRects);\n    };\n    HistogramSeries.prototype.updateRectNodes = function () {\n        var _this = this;\n        if (!this.chart) {\n            return;\n        }\n        var highlightedDatum = this.chart.highlightedDatum;\n        var _a = this, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity, shadow = _a.shadow, _b = _a.highlightStyle, fill = _b.fill, stroke = _b.stroke;\n        this.rectSelection.each(function (rect, datum) {\n            var highlighted = datum === highlightedDatum;\n            rect.x = datum.x;\n            rect.y = datum.y;\n            rect.width = datum.width;\n            rect.height = datum.height;\n            rect.fill = highlighted && fill !== undefined ? fill : datum.fill;\n            rect.stroke = highlighted && stroke !== undefined ? stroke : datum.stroke;\n            rect.fillOpacity = fillOpacity;\n            rect.strokeOpacity = strokeOpacity;\n            rect.strokeWidth = datum.strokeWidth;\n            rect.lineDash = _this.lineDash;\n            rect.lineDashOffset = _this.lineDashOffset;\n            rect.fillShadow = shadow;\n            rect.visible = datum.height > 0; // prevent stroke from rendering for zero height columns\n        });\n    };\n    HistogramSeries.prototype.updateTextSelection = function (nodeData) {\n        var updateTexts = this.textSelection.setData(nodeData);\n        updateTexts.exit.remove();\n        var enterTexts = updateTexts.enter.append(Text).each(function (text) {\n            text.tag = HistogramSeriesNodeTag.Label;\n            text.pointerEvents = PointerEvents.None;\n            text.textAlign = 'center';\n            text.textBaseline = 'middle';\n        });\n        this.textSelection = updateTexts.merge(enterTexts);\n    };\n    HistogramSeries.prototype.updateTextNodes = function () {\n        var labelEnabled = this.label.enabled;\n        this.textSelection.each(function (text, datum) {\n            var label = datum.label;\n            if (label && labelEnabled) {\n                text.text = label.text;\n                text.x = label.x;\n                text.y = label.y;\n                text.fontStyle = label.fontStyle;\n                text.fontWeight = label.fontWeight;\n                text.fontSize = label.fontSize;\n                text.fontFamily = label.fontFamily;\n                text.fill = label.fill;\n                text.visible = true;\n            }\n            else {\n                text.visible = false;\n            }\n        });\n    };\n    HistogramSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var _a = this, xKey = _a.xKey, yKey = _a.yKey;\n        if (!xKey) {\n            return '';\n        }\n        var _b = this, xName = _b.xName, yName = _b.yName, color = _b.fill, tooltip = _b.tooltip, aggregation = _b.aggregation;\n        var _c = tooltip.renderer, tooltipRenderer = _c === void 0 ? this.tooltipRenderer : _c;\n        var bin = nodeDatum.seriesDatum;\n        var aggregatedValue = bin.aggregatedValue, frequency = bin.frequency, _d = bin.domain, rangeMin = _d[0], rangeMax = _d[1];\n        var title = (xName || xKey) + \": \" + toFixed(rangeMin) + \" - \" + toFixed(rangeMax);\n        var content = yKey ?\n            \"<b>\" + (yName || yKey) + \" (\" + aggregation + \")</b>: \" + toFixed(aggregatedValue) + \"<br>\" :\n            '';\n        content += \"<b>Frequency</b>: \" + frequency;\n        var defaults = {\n            title: title,\n            backgroundColor: color,\n            content: content\n        };\n        if (tooltipRenderer) {\n            return toTooltipHtml(tooltipRenderer({\n                datum: bin,\n                xKey: xKey,\n                xValue: bin.domain,\n                xName: xName,\n                yKey: yKey,\n                yValue: bin.aggregatedValue,\n                yName: yName,\n                color: color\n            }), defaults);\n        }\n        return toTooltipHtml(defaults);\n    };\n    HistogramSeries.prototype.listSeriesItems = function (legendData) {\n        var _a = this, id = _a.id, data = _a.data, yKey = _a.yKey, yName = _a.yName, seriesItemEnabled = _a.seriesItemEnabled, fill = _a.fill, stroke = _a.stroke, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity;\n        if (data && data.length) {\n            legendData.push({\n                id: id,\n                itemId: yKey,\n                enabled: seriesItemEnabled,\n                label: {\n                    text: yName || yKey || 'Frequency'\n                },\n                marker: {\n                    fill: fill || 'rgba(0, 0, 0, 0)',\n                    stroke: stroke || 'rgba(0, 0, 0, 0)',\n                    fillOpacity: fillOpacity,\n                    strokeOpacity: strokeOpacity\n                }\n            });\n        }\n    };\n    HistogramSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n        if (itemId === this.yKey) {\n            this.seriesItemEnabled = enabled;\n        }\n        this.scheduleData();\n    };\n    HistogramSeries.className = 'HistogramSeries';\n    HistogramSeries.type = 'histogram';\n    __decorate([\n        reactive('dataChange')\n    ], HistogramSeries.prototype, \"fill\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], HistogramSeries.prototype, \"stroke\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], HistogramSeries.prototype, \"fillOpacity\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], HistogramSeries.prototype, \"strokeOpacity\", void 0);\n    __decorate([\n        reactive('update')\n    ], HistogramSeries.prototype, \"lineDash\", void 0);\n    __decorate([\n        reactive('update')\n    ], HistogramSeries.prototype, \"lineDashOffset\", void 0);\n    return HistogramSeries;\n}(CartesianSeries));\nexport { HistogramSeries };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Series } from \"../series\";\nimport { reactive } from \"../../../util/observable\";\nvar HierarchySeries = /** @class */ (function (_super) {\n    __extends(HierarchySeries, _super);\n    function HierarchySeries() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.data = undefined;\n        return _this;\n    }\n    __decorate([\n        reactive('dataChange')\n    ], HierarchySeries.prototype, \"data\", void 0);\n    return HierarchySeries;\n}(Series));\nexport { HierarchySeries };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Observable, reactive } from \"../util/observable\";\nvar DropShadow = /** @class */ (function (_super) {\n    __extends(DropShadow, _super);\n    function DropShadow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.enabled = true;\n        _this.color = 'rgba(0, 0, 0, 0.5)';\n        _this.xOffset = 0;\n        _this.yOffset = 0;\n        _this.blur = 5;\n        return _this;\n    }\n    __decorate([\n        reactive('change')\n    ], DropShadow.prototype, \"enabled\", void 0);\n    __decorate([\n        reactive('change')\n    ], DropShadow.prototype, \"color\", void 0);\n    __decorate([\n        reactive('change')\n    ], DropShadow.prototype, \"xOffset\", void 0);\n    __decorate([\n        reactive('change')\n    ], DropShadow.prototype, \"yOffset\", void 0);\n    __decorate([\n        reactive('change')\n    ], DropShadow.prototype, \"blur\", void 0);\n    return DropShadow;\n}(Observable));\nexport { DropShadow };\n","function slice(parent, x0, y0, x1, y1) {\n    var nodes = parent.children;\n    var k = parent.value && (y1 - y0) / parent.value;\n    nodes.forEach(function (node) {\n        node.x0 = x0;\n        node.x1 = x1;\n        node.y0 = y0;\n        node.y1 = y0 += node.value * k;\n    });\n}\nfunction dice(parent, x0, y0, x1, y1) {\n    var nodes = parent.children;\n    var k = parent.value && (x1 - x0) / parent.value;\n    nodes.forEach(function (node) {\n        node.x0 = x0;\n        node.x1 = x0 += node.value * k;\n        node.y0 = y0;\n        node.y1 = y1;\n    });\n}\nfunction roundNode(node) {\n    node.x0 = Math.round(node.x0);\n    node.y0 = Math.round(node.y0);\n    node.x1 = Math.round(node.x1);\n    node.y1 = Math.round(node.y1);\n}\nexport function squarifyRatio(ratio, parent, x0, y0, x1, y1) {\n    var rows = [];\n    var nodes = parent.children;\n    var n = nodes.length;\n    var value = parent.value;\n    var i0 = 0;\n    var i1 = 0;\n    var dx;\n    var dy;\n    var nodeValue;\n    var sumValue;\n    var minValue;\n    var maxValue;\n    var newRatio;\n    var minRatio;\n    var alpha;\n    var beta;\n    while (i0 < n) {\n        dx = x1 - x0;\n        dy = y1 - y0;\n        // Find the next non-empty node.\n        do {\n            sumValue = nodes[i1++].value;\n        } while (!sumValue && i1 < n);\n        minValue = maxValue = sumValue;\n        alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\n        beta = sumValue * sumValue * alpha;\n        minRatio = Math.max(maxValue / beta, beta / minValue);\n        // Keep adding nodes while the aspect ratio maintains or improves.\n        for (; i1 < n; ++i1) {\n            nodeValue = nodes[i1].value;\n            sumValue += nodeValue;\n            if (nodeValue < minValue) {\n                minValue = nodeValue;\n            }\n            if (nodeValue > maxValue) {\n                maxValue = nodeValue;\n            }\n            beta = sumValue * sumValue * alpha;\n            newRatio = Math.max(maxValue / beta, beta / minValue);\n            if (newRatio > minRatio) {\n                sumValue -= nodeValue;\n                break;\n            }\n            minRatio = newRatio;\n        }\n        // Position and record the row orientation.\n        var row = {\n            value: sumValue,\n            dice: dx < dy,\n            children: nodes.slice(i0, i1)\n        };\n        rows.push(row);\n        if (row.dice) {\n            dice(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);\n        }\n        else {\n            slice(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);\n        }\n        value -= sumValue;\n        i0 = i1;\n    }\n    return rows;\n}\nvar phi = (1 + Math.sqrt(5)) / 2;\nvar squarify = (function custom(ratio) {\n    function squarify(parent, x0, y0, x1, y1) {\n        squarifyRatio(ratio, parent, x0, y0, x1, y1);\n    }\n    squarify.ratio = function (x) { return custom((x = +x) > 1 ? x : 1); };\n    return squarify;\n})(phi);\nvar Treemap = /** @class */ (function () {\n    function Treemap() {\n        this.paddingStack = [0];\n        this.dx = 1;\n        this.dy = 1;\n        this.round = true;\n        this.tile = squarify;\n        this.paddingInner = function (_) { return 0; };\n        this.paddingTop = function (_) { return 0; };\n        this.paddingRight = function (_) { return 0; };\n        this.paddingBottom = function (_) { return 0; };\n        this.paddingLeft = function (_) { return 0; };\n    }\n    Object.defineProperty(Treemap.prototype, \"size\", {\n        get: function () {\n            return [this.dx, this.dy];\n        },\n        set: function (size) {\n            this.dx = size[0];\n            this.dy = size[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Treemap.prototype.processData = function (root) {\n        root.x0 = 0;\n        root.y0 = 0;\n        root.x1 = this.dx;\n        root.y1 = this.dy;\n        root.eachBefore(this.positionNode.bind(this));\n        this.paddingStack = [0];\n        if (this.round) {\n            root.eachBefore(roundNode);\n        }\n        return root;\n    };\n    Treemap.prototype.positionNode = function (node) {\n        var p = this.paddingStack[node.depth];\n        var x0 = node.x0 + p;\n        var y0 = node.y0 + p;\n        var x1 = node.x1 - p;\n        var y1 = node.y1 - p;\n        if (x1 < x0) {\n            x0 = x1 = (x0 + x1) / 2;\n        }\n        if (y1 < y0) {\n            y0 = y1 = (y0 + y1) / 2;\n        }\n        node.x0 = x0;\n        node.y0 = y0;\n        node.x1 = x1;\n        node.y1 = y1;\n        if (node.children) {\n            p = this.paddingStack[node.depth + 1] = this.paddingInner(node) / 2;\n            x0 += this.paddingLeft(node) - p;\n            y0 += this.paddingTop(node) - p;\n            x1 -= this.paddingRight(node) - p;\n            y1 -= this.paddingBottom(node) - p;\n            if (x1 < x0) {\n                x0 = x1 = (x0 + x1) / 2;\n            }\n            if (y1 < y0) {\n                y0 = y1 = (y0 + y1) / 2;\n            }\n            this.tile(node, x0, y0, x1, y1);\n        }\n    };\n    return Treemap;\n}());\nexport { Treemap };\n","var HierarchyNode = /** @class */ (function () {\n    function HierarchyNode(data) {\n        this.value = 0;\n        this.depth = 0;\n        this.height = 0;\n        this.parent = undefined;\n        this.children = undefined;\n        this.data = data;\n    }\n    HierarchyNode.prototype.countFn = function (node) {\n        var sum = 0, children = node.children;\n        if (!children || !children.length) {\n            sum = 1;\n        }\n        else {\n            var i = children.length;\n            while (--i >= 0) {\n                sum += children[i].value;\n            }\n        }\n        node.value = sum;\n    };\n    HierarchyNode.prototype.count = function () {\n        return this.eachAfter(this.countFn);\n    };\n    HierarchyNode.prototype.each = function (callback, scope) {\n        var _this = this;\n        var index = -1;\n        this.iterator(function (node) {\n            callback.call(scope, node, ++index, _this);\n        });\n        return this;\n    };\n    /**\n     * Invokes the given callback for each node in post-order traversal.\n     * @param callback\n     * @param scope\n     */\n    HierarchyNode.prototype.eachAfter = function (callback, scope) {\n        var node = this;\n        var nodes = [node];\n        var next = [];\n        while (node = nodes.pop()) {\n            next.push(node);\n            var children = node.children;\n            if (children) {\n                for (var i = 0, n = children.length; i < n; ++i) {\n                    nodes.push(children[i]);\n                }\n            }\n        }\n        var index = -1;\n        while (node = next.pop()) {\n            callback.call(scope, node, ++index, this);\n        }\n        return this;\n    };\n    /**\n     * Invokes the given callback for each node in pre-order traversal.\n     * @param callback\n     * @param scope\n     */\n    HierarchyNode.prototype.eachBefore = function (callback, scope) {\n        var node = this;\n        var nodes = [node];\n        var index = -1;\n        while (node = nodes.pop()) {\n            callback.call(scope, node, ++index, this);\n            var children = node.children;\n            if (children) {\n                for (var i = children.length - 1; i >= 0; --i) {\n                    var child = children[i];\n                    nodes.push(child);\n                }\n            }\n        }\n        return this;\n    };\n    HierarchyNode.prototype.find = function (callback, scope) {\n        var _this = this;\n        var index = -1;\n        var result;\n        this.iterator(function (node) {\n            if (callback.call(scope, node, ++index, _this)) {\n                result = node;\n                return false;\n            }\n        });\n        return result;\n    };\n    HierarchyNode.prototype.sum = function (value) {\n        return this.eachAfter(function (node) {\n            var sum = +value(node.data) || 0;\n            var children = node.children;\n            if (children) {\n                var i = children.length;\n                while (--i >= 0) {\n                    sum += children[i].value;\n                }\n            }\n            node.value = sum;\n        });\n    };\n    HierarchyNode.prototype.sort = function (compare) {\n        return this.eachBefore(function (node) {\n            if (node.children) {\n                node.children.sort(compare);\n            }\n        });\n    };\n    HierarchyNode.prototype.path = function (end) {\n        var start = this;\n        var ancestor = leastCommonAncestor(start, end);\n        var nodes = [start];\n        while (start !== ancestor) {\n            start = start.parent;\n            nodes.push(start);\n        }\n        var k = nodes.length;\n        while (end !== ancestor) {\n            nodes.splice(k, 0, end);\n            end = end.parent;\n        }\n        // const otherBranch = [];\n        // while (end !== ancestor) {\n        //     otherBranch.push(end);\n        //     end = end.parent;\n        // }\n        // nodes.concat(otherBranch.reverse());\n        return nodes;\n    };\n    HierarchyNode.prototype.ancestors = function () {\n        var node = this;\n        var nodes = [node];\n        while (node = node.parent) {\n            nodes.push(node);\n        }\n        return nodes;\n    };\n    HierarchyNode.prototype.descendants = function () {\n        var nodes = [];\n        this.iterator(function (node) { return nodes.push(node); });\n        return nodes;\n    };\n    HierarchyNode.prototype.leaves = function () {\n        var leaves = [];\n        this.eachBefore(function (node) {\n            if (!node.children) {\n                leaves.push(node);\n            }\n        });\n        return leaves;\n    };\n    HierarchyNode.prototype.links = function () {\n        var root = this;\n        var links = [];\n        root.each(function (node) {\n            if (node !== root) { // Don’t include the root’s parent, if any.\n                links.push({ source: node.parent, target: node });\n            }\n        });\n        return links;\n    };\n    HierarchyNode.prototype.copy = function () {\n        // TODO\n    };\n    HierarchyNode.prototype.iterator = function (callback) {\n        var node = this;\n        var next = [node];\n        var current;\n        doLoop: do {\n            current = next.reverse();\n            next = [];\n            while (node = current.pop()) {\n                if (callback(node) === false) {\n                    break doLoop;\n                }\n                var children = node.children;\n                if (children) {\n                    for (var i = 0, n = children.length; i < n; ++i) {\n                        next.push(children[i]);\n                    }\n                }\n            }\n        } while (next.length);\n    };\n    return HierarchyNode;\n}());\nexport { HierarchyNode };\nexport function hierarchy(data, children) {\n    if (data instanceof Map) {\n        data = [undefined, data];\n        if (children === undefined) {\n            children = mapChildren;\n        }\n    }\n    else if (children === undefined) {\n        children = objectChildren;\n    }\n    var root = new HierarchyNode(data);\n    var nodes = [root];\n    var node;\n    var child, childs, i, n;\n    while (node = nodes.pop()) {\n        if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n            node.children = childs;\n            for (i = n - 1; i >= 0; --i) {\n                nodes.push(child = childs[i] = new HierarchyNode(childs[i]));\n                child.parent = node;\n                child.depth = node.depth + 1;\n            }\n        }\n    }\n    return root.eachBefore(computeHeight);\n}\nfunction computeHeight(node) {\n    var height = 0;\n    do {\n        node.height = height;\n    } while ((node = node.parent) && (node.height < ++height));\n}\nfunction mapChildren(d) {\n    return Array.isArray(d) ? d[1] : undefined;\n}\nfunction objectChildren(d) {\n    return d.children;\n}\nfunction leastCommonAncestor(a, b) {\n    if (!(a && b)) {\n        return undefined;\n    }\n    if (a === b) {\n        return a;\n    }\n    var aNodes = a.ancestors();\n    var bNodes = b.ancestors();\n    var c = undefined;\n    a = aNodes.pop();\n    b = bNodes.pop();\n    while (a === b) {\n        c = a;\n        a = aNodes.pop();\n        b = bNodes.pop();\n    }\n    return c;\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Selection } from \"../../../scene/selection\";\nimport { HdpiCanvas } from \"../../../canvas/hdpiCanvas\";\nimport { reactive } from \"../../../util/observable\";\nimport { Label } from \"../../label\";\nimport { SeriesTooltip } from \"../series\";\nimport { HierarchySeries } from \"./hierarchySeries\";\nimport { toTooltipHtml } from \"../../chart\";\nimport { Group } from \"../../../scene/group\";\nimport { Text } from \"../../../scene/shape/text\";\nimport { Rect } from \"../../../scene/shape/rect\";\nimport { DropShadow } from \"../../../scene/dropShadow\";\nimport { LinearScale } from \"../../../scale/linearScale\";\nimport { Treemap } from \"../../../layout/treemap\";\nimport { hierarchy } from \"../../../layout/hierarchy\";\nimport { toFixed } from \"../../../util/number\";\nvar TreemapSeriesTooltip = /** @class */ (function (_super) {\n    __extends(TreemapSeriesTooltip, _super);\n    function TreemapSeriesTooltip() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        reactive('change')\n    ], TreemapSeriesTooltip.prototype, \"renderer\", void 0);\n    return TreemapSeriesTooltip;\n}(SeriesTooltip));\nexport { TreemapSeriesTooltip };\nvar TreemapSeriesLabel = /** @class */ (function (_super) {\n    __extends(TreemapSeriesLabel, _super);\n    function TreemapSeriesLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.padding = 10;\n        return _this;\n    }\n    __decorate([\n        reactive('change')\n    ], TreemapSeriesLabel.prototype, \"padding\", void 0);\n    return TreemapSeriesLabel;\n}(Label));\nexport { TreemapSeriesLabel };\nvar TextNodeTag;\n(function (TextNodeTag) {\n    TextNodeTag[TextNodeTag[\"Name\"] = 0] = \"Name\";\n    TextNodeTag[TextNodeTag[\"Value\"] = 1] = \"Value\";\n})(TextNodeTag || (TextNodeTag = {}));\nvar TreemapSeries = /** @class */ (function (_super) {\n    __extends(TreemapSeries, _super);\n    function TreemapSeries() {\n        var _this = _super.call(this) || this;\n        _this.groupSelection = Selection.select(_this.group).selectAll();\n        _this.labelMap = new Map();\n        _this.layout = new Treemap();\n        _this.title = (function () {\n            var label = new TreemapSeriesLabel();\n            label.fontWeight = 'bold';\n            label.fontSize = 12;\n            label.fontFamily = 'Verdana, sans-serif';\n            label.padding = 15;\n            return label;\n        })();\n        _this.subtitle = (function () {\n            var label = new TreemapSeriesLabel();\n            label.fontSize = 9;\n            label.fontFamily = 'Verdana, sans-serif';\n            label.padding = 13;\n            return label;\n        })();\n        _this.labels = {\n            large: (function () {\n                var label = new Label();\n                label.fontWeight = 'bold';\n                label.fontSize = 18;\n                return label;\n            })(),\n            medium: (function () {\n                var label = new Label();\n                label.fontWeight = 'bold';\n                label.fontSize = 14;\n                return label;\n            })(),\n            small: (function () {\n                var label = new Label();\n                label.fontWeight = 'bold';\n                label.fontSize = 10;\n                return label;\n            })(),\n            color: (function () {\n                var label = new Label();\n                label.color = 'white';\n                return label;\n            })()\n        };\n        _this._nodePadding = 2;\n        _this.labelKey = 'label';\n        _this.sizeKey = 'size';\n        _this.colorKey = 'color';\n        _this.colorDomain = [-5, 5];\n        _this.colorRange = ['#cb4b3f', '#6acb64'];\n        _this.colorParents = false;\n        _this.gradient = true;\n        _this.colorName = 'Change';\n        _this.rootName = 'Root';\n        _this._shadow = (function () {\n            var shadow = new DropShadow();\n            shadow.color = 'rgba(0, 0, 0, 0.4)';\n            shadow.xOffset = 1.5;\n            shadow.yOffset = 1.5;\n            return shadow;\n        })();\n        _this.highlightStyle = { fill: 'yellow' };\n        _this.tooltip = new TreemapSeriesTooltip();\n        _this.shadow.addEventListener('change', _this.update, _this);\n        _this.title.addEventListener('change', _this.update, _this);\n        _this.subtitle.addEventListener('change', _this.update, _this);\n        _this.labels.small.addEventListener('change', _this.update, _this);\n        _this.labels.medium.addEventListener('change', _this.update, _this);\n        _this.labels.large.addEventListener('change', _this.update, _this);\n        _this.labels.color.addEventListener('change', _this.update, _this);\n        return _this;\n    }\n    Object.defineProperty(TreemapSeries.prototype, \"nodePadding\", {\n        get: function () {\n            return this._nodePadding;\n        },\n        set: function (value) {\n            if (this._nodePadding !== value) {\n                this._nodePadding = value;\n                this.updateLayoutPadding();\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TreemapSeries.prototype, \"shadow\", {\n        get: function () {\n            return this._shadow;\n        },\n        set: function (value) {\n            if (this._shadow !== value) {\n                this._shadow = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TreemapSeries.prototype.onHighlightChange = function () {\n        this.updateNodes();\n    };\n    TreemapSeries.prototype.updateLayoutPadding = function () {\n        var _a = this, title = _a.title, subtitle = _a.subtitle, nodePadding = _a.nodePadding, labelKey = _a.labelKey;\n        this.layout.paddingRight = function (_) { return nodePadding; };\n        this.layout.paddingBottom = function (_) { return nodePadding; };\n        this.layout.paddingLeft = function (_) { return nodePadding; };\n        this.layout.paddingTop = function (node) {\n            var name = node.data[labelKey] || '';\n            if (node.children) {\n                name = name.toUpperCase();\n            }\n            var font = node.depth > 1 ? subtitle : title;\n            var textSize = HdpiCanvas.getTextSize(name, [font.fontWeight, font.fontSize + 'px', font.fontFamily].join(' ').trim());\n            var innerNodeWidth = node.x1 - node.x0 - nodePadding * 2;\n            var hasTitle = node.depth > 0 && node.children && textSize.width <= innerNodeWidth;\n            node.hasTitle = hasTitle;\n            return hasTitle ? textSize.height + nodePadding * 2 : nodePadding;\n        };\n    };\n    TreemapSeries.prototype.processData = function () {\n        if (!this.data) {\n            return false;\n        }\n        var _a = this, data = _a.data, sizeKey = _a.sizeKey, labelKey = _a.labelKey, colorKey = _a.colorKey, colorDomain = _a.colorDomain, colorRange = _a.colorRange, colorParents = _a.colorParents;\n        var dataRoot;\n        if (sizeKey) {\n            dataRoot = hierarchy(data).sum(function (datum) { return datum.children ? 1 : datum[sizeKey]; });\n        }\n        else {\n            dataRoot = hierarchy(data).sum(function (datum) { return datum.children ? 0 : 1; });\n        }\n        this.dataRoot = dataRoot;\n        var colorScale = new LinearScale();\n        colorScale.domain = colorDomain;\n        colorScale.range = colorRange;\n        var series = this;\n        function traverse(root, depth) {\n            if (depth === void 0) { depth = 0; }\n            var children = root.children, data = root.data;\n            var label = data[labelKey];\n            var colorValue = colorKey ? data[colorKey] : depth;\n            root.series = series;\n            root.fill = !children || colorParents ? colorScale.convert(colorValue) : '#272931';\n            root.colorValue = colorValue;\n            if (label) {\n                root.label = children ? label.toUpperCase() : label;\n            }\n            else {\n                root.label = '';\n            }\n            if (children) {\n                children.forEach(function (child) { return traverse(child, depth + 1); });\n            }\n        }\n        traverse(this.dataRoot);\n        return true;\n    };\n    TreemapSeries.prototype.getLabelCenterX = function (datum) {\n        return (datum.x0 + datum.x1) / 2;\n    };\n    TreemapSeries.prototype.getLabelCenterY = function (datum) {\n        return (datum.y0 + datum.y1) / 2 + 2;\n    };\n    TreemapSeries.prototype.update = function () {\n        var _a = this, chart = _a.chart, dataRoot = _a.dataRoot;\n        if (!chart || !dataRoot) {\n            return;\n        }\n        var seriesRect = chart.getSeriesRect();\n        if (!seriesRect) {\n            return;\n        }\n        this.layout.size = [seriesRect.width, seriesRect.height];\n        this.updateLayoutPadding();\n        var descendants = this.layout.processData(dataRoot).descendants();\n        var updateGroups = this.groupSelection.setData(descendants);\n        updateGroups.exit.remove();\n        var enterGroups = updateGroups.enter.append(Group);\n        enterGroups.append(Rect);\n        enterGroups.append(Text).each(function (node) { return node.tag = TextNodeTag.Name; });\n        enterGroups.append(Text).each(function (node) { return node.tag = TextNodeTag.Value; });\n        this.groupSelection = updateGroups.merge(enterGroups);\n        this.updateNodes();\n    };\n    TreemapSeries.prototype.updateNodes = function () {\n        var _this = this;\n        var chart = this.chart;\n        if (!chart) {\n            return;\n        }\n        var highlightedDatum = chart.highlightedDatum;\n        var _a = this.highlightStyle, highlightFill = _a.fill, highlightStroke = _a.stroke;\n        var _b = this, colorKey = _b.colorKey, labelMap = _b.labelMap, nodePadding = _b.nodePadding, title = _b.title, subtitle = _b.subtitle, labels = _b.labels, shadow = _b.shadow, gradient = _b.gradient;\n        this.groupSelection.selectByClass(Rect).each(function (rect, datum) {\n            var highlighted = datum === highlightedDatum;\n            var fill = highlighted && highlightFill !== undefined\n                ? highlightFill\n                : datum.fill;\n            var stroke = highlighted && highlightStroke !== undefined\n                ? highlightStroke\n                : datum.depth < 2 ? undefined : 'black';\n            rect.fill = fill;\n            rect.stroke = stroke;\n            rect.strokeWidth = 1;\n            rect.crisp = true;\n            rect.gradient = gradient;\n            rect.x = datum.x0;\n            rect.y = datum.y0;\n            rect.width = datum.x1 - datum.x0;\n            rect.height = datum.y1 - datum.y0;\n        });\n        this.groupSelection.selectByTag(TextNodeTag.Name).each(function (text, datum, index) {\n            var isLeaf = !datum.children;\n            var innerNodeWidth = datum.x1 - datum.x0 - nodePadding * 2;\n            var innerNodeHeight = datum.y1 - datum.y0 - nodePadding * 2;\n            var hasTitle = datum.hasTitle;\n            var highlighted = datum === highlightedDatum;\n            var label;\n            if (isLeaf) {\n                if (innerNodeWidth > 40 && innerNodeWidth > 40) {\n                    label = labels.large;\n                }\n                else if (innerNodeWidth > 20 && innerNodeHeight > 20) {\n                    label = labels.medium;\n                }\n                else {\n                    label = labels.small;\n                }\n            }\n            else {\n                if (datum.depth > 1) {\n                    label = subtitle;\n                }\n                else {\n                    label = title;\n                }\n            }\n            text.fontWeight = label.fontWeight;\n            text.fontSize = label.fontSize;\n            text.fontFamily = label.fontFamily;\n            text.textBaseline = isLeaf ? 'bottom' : (hasTitle ? 'top' : 'middle');\n            text.textAlign = hasTitle ? 'left' : 'center';\n            text.text = datum.label;\n            var textBBox = text.computeBBox();\n            var hasLabel = isLeaf && !!textBBox\n                && textBBox.width <= innerNodeWidth\n                && textBBox.height * 2 + 8 <= innerNodeHeight;\n            labelMap.set(index, text);\n            text.fill = highlighted ? 'black' : 'white';\n            text.fillShadow = hasLabel && !highlighted ? shadow : undefined;\n            text.visible = hasTitle || hasLabel;\n            if (hasTitle) {\n                text.x = datum.x0 + nodePadding;\n                text.y = datum.y0 + nodePadding;\n            }\n            else {\n                text.x = _this.getLabelCenterX(datum);\n                text.y = _this.getLabelCenterY(datum);\n            }\n        });\n        this.groupSelection.selectByTag(TextNodeTag.Value).each(function (text, datum, index) {\n            var innerNodeWidth = datum.x1 - datum.x0 - nodePadding * 2;\n            var highlighted = datum === highlightedDatum;\n            var value = datum.colorValue;\n            var label = labels.color;\n            text.fontSize = label.fontSize;\n            text.fontFamily = label.fontFamily;\n            text.fontStyle = label.fontStyle;\n            text.fontWeight = label.fontWeight;\n            text.textBaseline = 'top';\n            text.textAlign = 'center';\n            text.text = typeof value === 'number' && isFinite(value)\n                ? String(toFixed(datum.colorValue)) + '%'\n                : '';\n            var textBBox = text.computeBBox();\n            var nameNode = labelMap.get(index);\n            var hasLabel = !!nameNode && nameNode.visible;\n            var isVisible = !!colorKey && hasLabel && !!textBBox && textBBox.width < innerNodeWidth;\n            text.fill = highlighted ? 'black' : label.color;\n            text.fillShadow = highlighted ? undefined : shadow;\n            text.visible = isVisible;\n            if (isVisible) {\n                text.x = _this.getLabelCenterX(datum);\n                text.y = _this.getLabelCenterY(datum);\n            }\n            else {\n                if (nameNode && !(datum.children && datum.children.length)) {\n                    nameNode.textBaseline = 'middle';\n                    nameNode.y = _this.getLabelCenterY(datum);\n                }\n            }\n        });\n    };\n    TreemapSeries.prototype.getDomain = function (direction) {\n        return [0, 1];\n    };\n    TreemapSeries.prototype.getTooltipHtml = function (datum) {\n        var _a = this, tooltip = _a.tooltip, sizeKey = _a.sizeKey, labelKey = _a.labelKey, colorKey = _a.colorKey, colorName = _a.colorName, rootName = _a.rootName;\n        var data = datum.data;\n        var tooltipRenderer = tooltip.renderer;\n        var title = datum.depth ? data[labelKey] : (rootName || data[labelKey]);\n        var content = undefined;\n        var color = datum.fill || 'gray';\n        if (colorKey && colorName) {\n            var colorValue = data[colorKey];\n            if (typeof colorValue === 'number' && isFinite(colorValue)) {\n                content = \"<b>\" + colorName + \"</b>: \" + toFixed(data[colorKey]);\n            }\n        }\n        var defaults = {\n            title: title,\n            backgroundColor: color,\n            content: content\n        };\n        if (tooltipRenderer) {\n            return toTooltipHtml(tooltipRenderer({\n                datum: datum,\n                sizeKey: sizeKey,\n                labelKey: labelKey,\n                colorKey: colorKey,\n                title: title,\n                color: color\n            }), defaults);\n        }\n        return toTooltipHtml(defaults);\n    };\n    TreemapSeries.prototype.listSeriesItems = function (legendData) {\n    };\n    TreemapSeries.className = 'TreemapSeries';\n    TreemapSeries.type = 'treemap';\n    __decorate([\n        reactive('dataChange')\n    ], TreemapSeries.prototype, \"labelKey\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], TreemapSeries.prototype, \"sizeKey\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], TreemapSeries.prototype, \"colorKey\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], TreemapSeries.prototype, \"colorDomain\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], TreemapSeries.prototype, \"colorRange\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], TreemapSeries.prototype, \"colorParents\", void 0);\n    __decorate([\n        reactive('update')\n    ], TreemapSeries.prototype, \"gradient\", void 0);\n    return TreemapSeries;\n}(HierarchySeries));\nexport { TreemapSeries };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Shape } from \"./shape\";\nimport { Path2D } from \"../path2D\";\nimport { normalizeAngle360 } from \"../../util/angle\";\nimport { isEqual } from \"../../util/number\";\nimport { BBox } from \"../bbox\";\nvar Sector = /** @class */ (function (_super) {\n    __extends(Sector, _super);\n    function Sector() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.path = new Path2D();\n        _this._dirtyPath = true;\n        _this._centerX = 0;\n        _this._centerY = 0;\n        _this._centerOffset = 0;\n        _this._innerRadius = 10;\n        _this._outerRadius = 20;\n        _this._startAngle = 0;\n        _this._endAngle = Math.PI * 2;\n        _this._angleOffset = 0;\n        return _this;\n    }\n    Object.defineProperty(Sector.prototype, \"dirtyPath\", {\n        get: function () {\n            return this._dirtyPath;\n        },\n        set: function (value) {\n            if (this._dirtyPath !== value) {\n                this._dirtyPath = value;\n                if (value) {\n                    this.dirty = true;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"centerX\", {\n        get: function () {\n            return this._centerX;\n        },\n        set: function (value) {\n            if (this._centerX !== value) {\n                this._centerX = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"centerY\", {\n        get: function () {\n            return this._centerY;\n        },\n        set: function (value) {\n            if (this._centerY !== value) {\n                this._centerY = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"centerOffset\", {\n        get: function () {\n            return this._centerOffset;\n        },\n        set: function (value) {\n            if (this._centerOffset !== value) {\n                this._centerOffset = Math.max(0, value);\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"innerRadius\", {\n        get: function () {\n            return this._innerRadius;\n        },\n        set: function (value) {\n            if (this._innerRadius !== value) {\n                this._innerRadius = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"outerRadius\", {\n        get: function () {\n            return this._outerRadius;\n        },\n        set: function (value) {\n            if (this._outerRadius !== value) {\n                this._outerRadius = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"startAngle\", {\n        get: function () {\n            return this._startAngle;\n        },\n        set: function (value) {\n            if (this._startAngle !== value) {\n                this._startAngle = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"endAngle\", {\n        get: function () {\n            return this._endAngle;\n        },\n        set: function (value) {\n            if (this._endAngle !== value) {\n                this._endAngle = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Sector.prototype, \"angleOffset\", {\n        get: function () {\n            return this._angleOffset;\n        },\n        set: function (value) {\n            if (this._angleOffset !== value) {\n                this._angleOffset = value;\n                this.dirtyPath = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Sector.prototype.computeBBox = function () {\n        var radius = this.outerRadius;\n        return new BBox(this.centerX - radius, this.centerY - radius, radius * 2, radius * 2);\n    };\n    Sector.prototype.isPointInPath = function (x, y) {\n        var point = this.transformPoint(x, y);\n        return this.path.isPointInPath(point.x, point.y);\n    };\n    Sector.prototype.isPointInStroke = function (x, y) {\n        return false;\n    };\n    Object.defineProperty(Sector.prototype, \"fullPie\", {\n        get: function () {\n            return isEqual(normalizeAngle360(this.startAngle), normalizeAngle360(this.endAngle));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Sector.prototype.updatePath = function () {\n        if (!this.dirtyPath) {\n            return;\n        }\n        var path = this.path;\n        var angleOffset = this.angleOffset;\n        var startAngle = Math.min(this.startAngle, this.endAngle) + angleOffset;\n        var endAngle = Math.max(this.startAngle, this.endAngle) + angleOffset;\n        var midAngle = (startAngle + endAngle) * 0.5;\n        var innerRadius = Math.min(this.innerRadius, this.outerRadius);\n        var outerRadius = Math.max(this.innerRadius, this.outerRadius);\n        var centerOffset = this.centerOffset;\n        var fullPie = this.fullPie;\n        var centerX = this.centerX;\n        var centerY = this.centerY;\n        path.clear();\n        if (centerOffset) {\n            centerX += centerOffset * Math.cos(midAngle);\n            centerY += centerOffset * Math.sin(midAngle);\n        }\n        if (!fullPie) {\n            path.moveTo(centerX + innerRadius * Math.cos(startAngle), centerY + innerRadius * Math.sin(startAngle));\n            // if (showTip) {\n            //     path.lineTo(\n            //         centerX + 0.5 * (innerRadius + outerRadius) * Math.cos(startAngle) + tipOffset * Math.cos(startAngle + Math.PI / 2),\n            //         centerY + 0.5 * (innerRadius + outerRadius) * Math.sin(startAngle) + tipOffset * Math.sin(startAngle + Math.PI / 2)\n            //     );\n            // }\n            path.lineTo(centerX + outerRadius * Math.cos(startAngle), centerY + outerRadius * Math.sin(startAngle));\n        }\n        path.cubicArc(centerX, centerY, outerRadius, outerRadius, 0, startAngle, endAngle, 0);\n        // path[fullPie ? 'moveTo' : 'lineTo'](\n        //     centerX + innerRadius * Math.cos(endAngle),\n        //     centerY + innerRadius * Math.sin(endAngle)\n        // );\n        if (fullPie) {\n            path.moveTo(centerX + innerRadius * Math.cos(endAngle), centerY + innerRadius * Math.sin(endAngle));\n        }\n        else {\n            // if (showTip) {\n            //     path.lineTo(\n            //         centerX + 0.5 * (innerRadius + outerRadius) * Math.cos(endAngle) + tipOffset * Math.cos(endAngle + Math.PI / 2),\n            //         centerY + 0.5 * (innerRadius + outerRadius) * Math.sin(endAngle) + tipOffset * Math.sin(endAngle + Math.PI / 2)\n            //     );\n            // }\n            // Temp workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=993330\n            // Revert this commit when fixed ^^.\n            var x = centerX + innerRadius * Math.cos(endAngle);\n            path.lineTo(Math.abs(x) < 1e-8 ? 0 : x, centerY + innerRadius * Math.sin(endAngle));\n        }\n        path.cubicArc(centerX, centerY, innerRadius, innerRadius, 0, endAngle, startAngle, 1);\n        path.closePath();\n        this.dirtyPath = false;\n    };\n    Sector.prototype.render = function (ctx) {\n        if (this.dirtyTransform) {\n            this.computeTransformMatrix();\n        }\n        this.matrix.toContext(ctx);\n        this.updatePath();\n        this.scene.appendPath(this.path);\n        this.fillStroke(ctx);\n        this.dirty = false;\n    };\n    Sector.className = 'Sector';\n    return Sector;\n}(Shape));\nexport { Sector };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Group } from \"../../../scene/group\";\nimport { Line } from \"../../../scene/shape/line\";\nimport { Text } from \"../../../scene/shape/text\";\nimport { Selection } from \"../../../scene/selection\";\nimport { LinearScale } from \"../../../scale/linearScale\";\nimport { Sector } from \"../../../scene/shape/sector\";\nimport { SeriesTooltip } from \"./../series\";\nimport { Label } from \"../../label\";\nimport { PointerEvents } from \"../../../scene/node\";\nimport { normalizeAngle180, toRadians } from \"../../../util/angle\";\nimport { Color } from \"../../../util/color\";\nimport { toFixed } from \"../../../util/number\";\nimport { reactive, Observable } from \"../../../util/observable\";\nimport { PolarSeries } from \"./polarSeries\";\nimport { ChartAxisDirection } from \"../../chartAxis\";\nimport { toTooltipHtml } from \"../../chart\";\nvar PieNodeTag;\n(function (PieNodeTag) {\n    PieNodeTag[PieNodeTag[\"Sector\"] = 0] = \"Sector\";\n    PieNodeTag[PieNodeTag[\"Callout\"] = 1] = \"Callout\";\n    PieNodeTag[PieNodeTag[\"Label\"] = 2] = \"Label\";\n})(PieNodeTag || (PieNodeTag = {}));\nvar PieSeriesLabel = /** @class */ (function (_super) {\n    __extends(PieSeriesLabel, _super);\n    function PieSeriesLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.offset = 3; // from the callout line\n        _this.minAngle = 20; // in degrees\n        return _this;\n    }\n    __decorate([\n        reactive('change')\n    ], PieSeriesLabel.prototype, \"offset\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeriesLabel.prototype, \"minAngle\", void 0);\n    return PieSeriesLabel;\n}(Label));\nvar PieSeriesCallout = /** @class */ (function (_super) {\n    __extends(PieSeriesCallout, _super);\n    function PieSeriesCallout() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.colors = [];\n        _this.length = 10;\n        _this.strokeWidth = 1;\n        return _this;\n    }\n    __decorate([\n        reactive('change')\n    ], PieSeriesCallout.prototype, \"colors\", void 0);\n    __decorate([\n        reactive('change')\n    ], PieSeriesCallout.prototype, \"length\", void 0);\n    __decorate([\n        reactive('change')\n    ], PieSeriesCallout.prototype, \"strokeWidth\", void 0);\n    return PieSeriesCallout;\n}(Observable));\nvar PieSeriesTooltip = /** @class */ (function (_super) {\n    __extends(PieSeriesTooltip, _super);\n    function PieSeriesTooltip() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        reactive('change')\n    ], PieSeriesTooltip.prototype, \"renderer\", void 0);\n    return PieSeriesTooltip;\n}(SeriesTooltip));\nexport { PieSeriesTooltip };\nvar PieSeries = /** @class */ (function (_super) {\n    __extends(PieSeries, _super);\n    function PieSeries() {\n        var _this = _super.call(this) || this;\n        _this.radiusScale = new LinearScale();\n        _this.groupSelection = Selection.select(_this.group).selectAll();\n        /**\n         * The processed data that gets visualized.\n         */\n        _this.groupSelectionData = [];\n        _this.angleScale = (function () {\n            var scale = new LinearScale();\n            // Each slice is a ratio of the whole, where all ratios add up to 1.\n            scale.domain = [0, 1];\n            // Add 90 deg to start the first pie at 12 o'clock.\n            scale.range = [-Math.PI, Math.PI].map(function (angle) { return angle + Math.PI / 2; });\n            return scale;\n        })();\n        // When a user toggles a series item (e.g. from the legend), its boolean state is recorded here.\n        _this.seriesItemEnabled = [];\n        _this.label = new PieSeriesLabel();\n        _this.callout = new PieSeriesCallout();\n        _this.tooltip = new PieSeriesTooltip();\n        /**\n         * The key of the numeric field to use to determine the angle (for example,\n         * a pie slice angle).\n         */\n        _this.angleKey = '';\n        _this.angleName = '';\n        _this._fills = [\n            '#c16068',\n            '#a2bf8a',\n            '#ebcc87',\n            '#80a0c3',\n            '#b58dae',\n            '#85c0d1'\n        ];\n        _this._strokes = [\n            '#874349',\n            '#718661',\n            '#a48f5f',\n            '#5a7088',\n            '#7f637a',\n            '#5d8692'\n        ];\n        _this.fillOpacity = 1;\n        _this.strokeOpacity = 1;\n        _this.lineDash = undefined;\n        _this.lineDashOffset = 0;\n        /**\n         * The series rotation in degrees.\n         */\n        _this.rotation = 0;\n        _this.outerRadiusOffset = 0;\n        _this.innerRadiusOffset = 0;\n        _this.strokeWidth = 1;\n        _this.highlightStyle = { fill: 'yellow' };\n        _this.addEventListener('update', _this.update, _this);\n        _this.label.addEventListener('change', _this.scheduleLayout, _this);\n        _this.label.addEventListener('dataChange', _this.scheduleData, _this);\n        _this.callout.addEventListener('change', _this.scheduleLayout, _this);\n        _this.callout.colors = _this.strokes;\n        _this.addPropertyListener('data', function (event) {\n            if (event.value) {\n                event.source.seriesItemEnabled = event.value.map(function () { return true; });\n            }\n        });\n        return _this;\n    }\n    Object.defineProperty(PieSeries.prototype, \"title\", {\n        get: function () {\n            return this._title;\n        },\n        set: function (value) {\n            var oldTitle = this._title;\n            if (oldTitle !== value) {\n                if (oldTitle) {\n                    oldTitle.removeEventListener('change', this.scheduleLayout);\n                    this.group.removeChild(oldTitle.node);\n                }\n                if (value) {\n                    value.node.textBaseline = 'bottom';\n                    value.addEventListener('change', this.scheduleLayout);\n                    this.group.appendChild(value.node);\n                }\n                this._title = value;\n                this.scheduleLayout();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"fills\", {\n        get: function () {\n            return this._fills;\n        },\n        set: function (values) {\n            this._fills = values;\n            this.strokes = values.map(function (color) { return Color.fromString(color).darker().toHexString(); });\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"strokes\", {\n        get: function () {\n            return this._strokes;\n        },\n        set: function (values) {\n            this._strokes = values;\n            this.callout.colors = values;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PieSeries.prototype.onHighlightChange = function () {\n        this.updateNodes();\n    };\n    PieSeries.prototype.setColors = function (fills, strokes) {\n        this.fills = fills;\n        this.strokes = strokes;\n        this.callout.colors = strokes;\n    };\n    PieSeries.prototype.getDomain = function (direction) {\n        if (direction === ChartAxisDirection.X) {\n            return this.angleScale.domain;\n        }\n        else {\n            return this.radiusScale.domain;\n        }\n    };\n    PieSeries.prototype.processData = function () {\n        var _this = this;\n        var _a = this, angleKey = _a.angleKey, radiusKey = _a.radiusKey, seriesItemEnabled = _a.seriesItemEnabled, angleScale = _a.angleScale, groupSelectionData = _a.groupSelectionData;\n        var data = angleKey && this.data ? this.data : [];\n        var angleData = data.map(function (datum, index) { return seriesItemEnabled[index] && Math.abs(+datum[angleKey]) || 0; });\n        var angleDataTotal = angleData.reduce(function (a, b) { return a + b; }, 0);\n        // The ratios (in [0, 1] interval) used to calculate the end angle value for every pie slice.\n        // Each slice starts where the previous one ends, so we only keep the ratios for end angles.\n        var angleDataRatios = (function () {\n            var sum = 0;\n            return angleData.map(function (datum) { return sum += datum / angleDataTotal; });\n        })();\n        var labelKey = this.label.enabled && this.labelKey;\n        var labelData = labelKey ? data.map(function (datum) { return String(datum[labelKey]); }) : [];\n        var radiusData = [];\n        if (radiusKey) {\n            var _b = this, radiusMin = _b.radiusMin, radiusMax = _b.radiusMax;\n            var radii = data.map(function (datum) { return Math.abs(datum[radiusKey]); });\n            var min_1 = radiusMin !== undefined ? radiusMin : Math.min.apply(Math, radii);\n            var max = radiusMax !== undefined ? radiusMax : Math.max.apply(Math, radii);\n            var delta_1 = max - min_1;\n            radiusData = radii.map(function (value) { return delta_1 ? (value - min_1) / delta_1 : 1; });\n        }\n        groupSelectionData.length = 0;\n        var rotation = toRadians(this.rotation);\n        var halfPi = Math.PI / 2;\n        var datumIndex = 0;\n        // Simply use reduce here to pair up adjacent ratios.\n        angleDataRatios.reduce(function (start, end) {\n            var radius = radiusKey ? radiusData[datumIndex] : 1;\n            var startAngle = angleScale.convert(start) + rotation;\n            var endAngle = angleScale.convert(end) + rotation;\n            var midAngle = (startAngle + endAngle) / 2;\n            var span = Math.abs(endAngle - startAngle);\n            var midCos = Math.cos(midAngle);\n            var midSin = Math.sin(midAngle);\n            var labelMinAngle = toRadians(_this.label.minAngle);\n            var labelVisible = labelKey && span > labelMinAngle;\n            var midAngle180 = normalizeAngle180(midAngle);\n            // Split the circle into quadrants like so: ⊗\n            var quadrantStart = -3 * Math.PI / 4; // same as `normalizeAngle180(toRadians(-135))`\n            var textAlign;\n            var textBaseline;\n            if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n                textAlign = 'center';\n                textBaseline = 'bottom';\n            }\n            else if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n                textAlign = 'left';\n                textBaseline = 'middle';\n            }\n            else if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n                textAlign = 'center';\n                textBaseline = 'hanging';\n            }\n            else {\n                textAlign = 'right';\n                textBaseline = 'middle';\n            }\n            groupSelectionData.push({\n                series: _this,\n                seriesDatum: data[datumIndex],\n                index: datumIndex,\n                radius: radius,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                midAngle: midAngle,\n                midCos: midCos,\n                midSin: midSin,\n                label: labelVisible ? {\n                    text: labelData[datumIndex],\n                    textAlign: textAlign,\n                    textBaseline: textBaseline\n                } : undefined\n            });\n            datumIndex++;\n            return end;\n        }, 0);\n        return true;\n    };\n    PieSeries.prototype.update = function () {\n        var chart = this.chart;\n        var visible = this.group.visible = this.visible && this.seriesItemEnabled.indexOf(true) >= 0;\n        if (!visible || !chart || chart.dataPending || chart.layoutPending) {\n            return;\n        }\n        var _a = this, radius = _a.radius, innerRadiusOffset = _a.innerRadiusOffset, outerRadiusOffset = _a.outerRadiusOffset, title = _a.title;\n        this.radiusScale.range = [\n            innerRadiusOffset ? radius + innerRadiusOffset : 0,\n            radius + (outerRadiusOffset || 0)\n        ];\n        this.group.translationX = this.centerX;\n        this.group.translationY = this.centerY;\n        if (title) {\n            title.node.translationY = -radius - outerRadiusOffset - 2;\n            title.node.visible = title.enabled;\n        }\n        this.updateGroupSelection();\n        this.updateNodes();\n    };\n    PieSeries.prototype.updateGroupSelection = function () {\n        var updateGroups = this.groupSelection.setData(this.groupSelectionData);\n        updateGroups.exit.remove();\n        var enterGroups = updateGroups.enter.append(Group);\n        enterGroups.append(Sector).each(function (node) { return node.tag = PieNodeTag.Sector; });\n        enterGroups.append(Line).each(function (node) {\n            node.tag = PieNodeTag.Callout;\n            node.pointerEvents = PointerEvents.None;\n        });\n        enterGroups.append(Text).each(function (node) {\n            node.tag = PieNodeTag.Label;\n            node.pointerEvents = PointerEvents.None;\n        });\n        this.groupSelection = updateGroups.merge(enterGroups);\n    };\n    PieSeries.prototype.updateNodes = function () {\n        var _this = this;\n        if (!this.chart) {\n            return;\n        }\n        var _a = this, fills = _a.fills, strokes = _a.strokes, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity, strokeWidth = _a.strokeWidth, outerRadiusOffset = _a.outerRadiusOffset, radiusScale = _a.radiusScale, callout = _a.callout, shadow = _a.shadow, _b = _a.highlightStyle, fill = _b.fill, stroke = _b.stroke, centerOffset = _b.centerOffset, angleKey = _a.angleKey, radiusKey = _a.radiusKey, formatter = _a.formatter;\n        var highlightedDatum = this.chart.highlightedDatum;\n        var centerOffsets = [];\n        var innerRadius = radiusScale.convert(0);\n        this.groupSelection.selectByTag(PieNodeTag.Sector).each(function (sector, datum, index) {\n            var radius = radiusScale.convert(datum.radius);\n            var outerRadius = Math.max(0, radius + outerRadiusOffset);\n            var highlighted = datum === highlightedDatum;\n            var sectorFill = highlighted && fill !== undefined ? fill : fills[index % fills.length];\n            var sectorStroke = highlighted && stroke !== undefined ? stroke : strokes[index % strokes.length];\n            var format = undefined;\n            if (formatter) {\n                format = formatter({\n                    datum: datum.seriesDatum,\n                    fill: sectorFill,\n                    stroke: sectorStroke,\n                    strokeWidth: strokeWidth,\n                    highlighted: highlighted,\n                    angleKey: angleKey,\n                    radiusKey: radiusKey\n                });\n            }\n            sector.innerRadius = innerRadius;\n            sector.outerRadius = radius;\n            sector.startAngle = datum.startAngle;\n            sector.endAngle = datum.endAngle;\n            sector.fill = format && format.fill || sectorFill;\n            sector.stroke = format && format.stroke || sectorStroke;\n            sector.strokeWidth = format && format.strokeWidth !== undefined ? format.strokeWidth : strokeWidth;\n            sector.fillOpacity = fillOpacity;\n            sector.strokeOpacity = strokeOpacity;\n            sector.lineDash = _this.lineDash;\n            sector.lineDashOffset = _this.lineDashOffset;\n            sector.centerOffset = highlighted && centerOffset !== undefined ? centerOffset : 0;\n            sector.fillShadow = shadow;\n            sector.lineJoin = 'round';\n            centerOffsets.push(sector.centerOffset);\n        });\n        var calloutColors = callout.colors, calloutLength = callout.length, calloutStrokeWidth = callout.strokeWidth;\n        this.groupSelection.selectByTag(PieNodeTag.Callout).each(function (line, datum, index) {\n            if (datum.label) {\n                var radius = radiusScale.convert(datum.radius);\n                line.strokeWidth = calloutStrokeWidth;\n                line.stroke = calloutColors[index % calloutColors.length];\n                line.x1 = datum.midCos * radius;\n                line.y1 = datum.midSin * radius;\n                line.x2 = datum.midCos * (radius + calloutLength);\n                line.y2 = datum.midSin * (radius + calloutLength);\n            }\n            else {\n                line.stroke = undefined;\n            }\n        });\n        {\n            var _c = this.label, offset_1 = _c.offset, fontStyle_1 = _c.fontStyle, fontWeight_1 = _c.fontWeight, fontSize_1 = _c.fontSize, fontFamily_1 = _c.fontFamily, color_1 = _c.color;\n            this.groupSelection.selectByTag(PieNodeTag.Label).each(function (text, datum, index) {\n                var label = datum.label;\n                if (label) {\n                    var radius = radiusScale.convert(datum.radius);\n                    var labelRadius = centerOffsets[index] + radius + calloutLength + offset_1;\n                    text.fontStyle = fontStyle_1;\n                    text.fontWeight = fontWeight_1;\n                    text.fontSize = fontSize_1;\n                    text.fontFamily = fontFamily_1;\n                    text.text = label.text;\n                    text.x = datum.midCos * labelRadius;\n                    text.y = datum.midSin * labelRadius;\n                    text.fill = color_1;\n                    text.textAlign = label.textAlign;\n                    text.textBaseline = label.textBaseline;\n                }\n                else {\n                    text.fill = undefined;\n                }\n            });\n        }\n    };\n    PieSeries.prototype.fireNodeClickEvent = function (event, datum) {\n        this.fireEvent({\n            type: 'nodeClick',\n            event: event,\n            series: this,\n            datum: datum.seriesDatum,\n            angleKey: this.angleKey,\n            labelKey: this.labelKey,\n            radiusKey: this.radiusKey\n        });\n    };\n    PieSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var angleKey = this.angleKey;\n        if (!angleKey) {\n            return '';\n        }\n        var _a = this, fills = _a.fills, tooltip = _a.tooltip, angleName = _a.angleName, radiusKey = _a.radiusKey, radiusName = _a.radiusName, labelKey = _a.labelKey, labelName = _a.labelName;\n        var _b = tooltip.renderer, tooltipRenderer = _b === void 0 ? this.tooltipRenderer : _b;\n        var color = fills[nodeDatum.index % fills.length];\n        var datum = nodeDatum.seriesDatum;\n        var label = labelKey ? datum[labelKey] + \": \" : '';\n        var angleValue = datum[angleKey];\n        var formattedAngleValue = typeof angleValue === 'number' ? toFixed(angleValue) : angleValue.toString();\n        var title = this.title ? this.title.text : undefined;\n        var content = label + formattedAngleValue;\n        var defaults = {\n            title: title,\n            backgroundColor: color,\n            content: content\n        };\n        if (tooltipRenderer) {\n            return toTooltipHtml(tooltipRenderer({\n                datum: datum,\n                angleKey: angleKey,\n                angleValue: angleValue,\n                angleName: angleName,\n                radiusKey: radiusKey,\n                radiusValue: radiusKey ? datum[radiusKey] : undefined,\n                radiusName: radiusName,\n                labelKey: labelKey,\n                labelName: labelName,\n                title: title,\n                color: color,\n            }), defaults);\n        }\n        return toTooltipHtml(defaults);\n    };\n    PieSeries.prototype.listSeriesItems = function (legendData) {\n        var _this = this;\n        var _a = this, labelKey = _a.labelKey, data = _a.data;\n        if (data && data.length && labelKey) {\n            var _b = this, fills_1 = _b.fills, strokes_1 = _b.strokes, id_1 = _b.id;\n            data.forEach(function (datum, index) {\n                legendData.push({\n                    id: id_1,\n                    itemId: index,\n                    enabled: _this.seriesItemEnabled[index],\n                    label: {\n                        text: String(datum[labelKey])\n                    },\n                    marker: {\n                        fill: fills_1[index % fills_1.length],\n                        stroke: strokes_1[index % strokes_1.length],\n                        fillOpacity: _this.fillOpacity,\n                        strokeOpacity: _this.strokeOpacity\n                    }\n                });\n            });\n        }\n    };\n    PieSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n        this.seriesItemEnabled[itemId] = enabled;\n        this.scheduleData();\n    };\n    PieSeries.className = 'PieSeries';\n    PieSeries.type = 'pie';\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"angleKey\", void 0);\n    __decorate([\n        reactive('update')\n    ], PieSeries.prototype, \"angleName\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"radiusKey\", void 0);\n    __decorate([\n        reactive('update')\n    ], PieSeries.prototype, \"radiusName\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"radiusMin\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"radiusMax\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"labelKey\", void 0);\n    __decorate([\n        reactive('update')\n    ], PieSeries.prototype, \"labelName\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], PieSeries.prototype, \"fillOpacity\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], PieSeries.prototype, \"strokeOpacity\", void 0);\n    __decorate([\n        reactive('update')\n    ], PieSeries.prototype, \"lineDash\", void 0);\n    __decorate([\n        reactive('update')\n    ], PieSeries.prototype, \"lineDashOffset\", void 0);\n    __decorate([\n        reactive('update')\n    ], PieSeries.prototype, \"formatter\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"rotation\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], PieSeries.prototype, \"outerRadiusOffset\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"innerRadiusOffset\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], PieSeries.prototype, \"strokeWidth\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], PieSeries.prototype, \"shadow\", void 0);\n    return PieSeries;\n}(PolarSeries));\nexport { PieSeries };\n","import { CountableTimeInterval } from \"./interval\";\nimport { durationMinute } from \"./duration\";\nfunction floor(date) {\n    date.setUTCSeconds(0, 0);\n}\nfunction offset(date, minutes) {\n    date.setTime(date.getTime() + minutes * durationMinute);\n}\nfunction count(start, end) {\n    return (end.getTime() - start.getTime()) / durationMinute;\n}\nfunction field(date) {\n    return date.getUTCMinutes();\n}\nexport var utcMinute = new CountableTimeInterval(floor, offset, count, field);\nexport default utcMinute;\n","import { CountableTimeInterval } from \"./interval\";\nimport { durationHour } from \"./duration\";\nfunction floor(date) {\n    date.setUTCMinutes(0, 0, 0);\n}\nfunction offset(date, hours) {\n    date.setTime(date.getTime() + hours * durationHour);\n}\nfunction count(start, end) {\n    return (end.getTime() - start.getTime()) / durationHour;\n}\nfunction field(date) {\n    return date.getUTCHours();\n}\nexport var utcHour = new CountableTimeInterval(floor, offset, count, field);\nexport default utcHour;\n","import { CountableTimeInterval } from \"./interval\";\nfunction floor(date) {\n    date.setUTCDate(1);\n    date.setUTCHours(0, 0, 0, 0);\n}\nfunction offset(date, months) {\n    date.setUTCMonth(date.getUTCMonth() + months);\n}\nfunction count(start, end) {\n    return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}\nfunction field(date) {\n    return date.getUTCMonth();\n}\nexport var utcMonth = new CountableTimeInterval(floor, offset, count, field);\nexport default utcMonth;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { deepMerge, getValue, isObject } from \"../../util/object\";\nimport { copy } from \"../../util/array\";\nimport { Padding } from \"../../util/padding\";\nimport { Chart } from \"../chart\";\nvar palette = {\n    fills: [\n        '#f3622d',\n        '#fba71b',\n        '#57b757',\n        '#41a9c9',\n        '#4258c9',\n        '#9a42c8',\n        '#c84164',\n        '#888888'\n    ],\n    strokes: [\n        '#aa4520',\n        '#b07513',\n        '#3d803d',\n        '#2d768d',\n        '#2e3e8d',\n        '#6c2e8c',\n        '#8c2d46',\n        '#5f5f5f'\n    ]\n};\nvar ChartTheme = /** @class */ (function () {\n    function ChartTheme(options) {\n        var defaults = this.createChartConfigPerSeries(this.getDefaults());\n        if (isObject(options)) {\n            var mergeOptions_1 = { arrayMerge: arrayMerge };\n            options = deepMerge({}, options, mergeOptions_1);\n            var overrides_1 = options.overrides;\n            if (overrides_1) {\n                if (isObject(overrides_1.common)) {\n                    ChartTheme.seriesTypes.concat(['cartesian', 'polar']).forEach(function (seriesType) {\n                        defaults[seriesType] = deepMerge(defaults[seriesType], overrides_1.common, mergeOptions_1);\n                    });\n                }\n                if (overrides_1.cartesian) {\n                    defaults.cartesian = deepMerge(defaults.cartesian, overrides_1.cartesian, mergeOptions_1);\n                    ChartTheme.cartesianSeriesTypes.forEach(function (seriesType) {\n                        defaults[seriesType] = deepMerge(defaults[seriesType], overrides_1.cartesian, mergeOptions_1);\n                    });\n                }\n                if (overrides_1.polar) {\n                    defaults.polar = deepMerge(defaults.polar, overrides_1.polar, mergeOptions_1);\n                    ChartTheme.polarSeriesTypes.forEach(function (seriesType) {\n                        defaults[seriesType] = deepMerge(defaults[seriesType], overrides_1.polar, mergeOptions_1);\n                    });\n                }\n                ChartTheme.seriesTypes.forEach(function (seriesType) {\n                    var _a;\n                    var chartConfig = overrides_1[seriesType];\n                    if (chartConfig) {\n                        if (chartConfig.series) {\n                            chartConfig.series = (_a = {}, _a[seriesType] = chartConfig.series, _a);\n                        }\n                        defaults[seriesType] = deepMerge(defaults[seriesType], chartConfig, mergeOptions_1);\n                    }\n                });\n            }\n        }\n        this.palette = options && options.palette ? options.palette : this.getPalette();\n        this.config = Object.freeze(defaults);\n    }\n    ChartTheme.prototype.getPalette = function () {\n        return palette;\n    };\n    ChartTheme.getAxisDefaults = function () {\n        return {\n            top: {},\n            right: {},\n            bottom: {},\n            left: {},\n            title: {\n                padding: {\n                    top: 10,\n                    right: 10,\n                    bottom: 10,\n                    left: 10\n                },\n                text: 'Axis Title',\n                fontStyle: undefined,\n                fontWeight: 'bold',\n                fontSize: 12,\n                fontFamily: this.fontFamily,\n                color: 'rgb(70, 70, 70)'\n            },\n            label: {\n                fontStyle: undefined,\n                fontWeight: undefined,\n                fontSize: 12,\n                fontFamily: this.fontFamily,\n                padding: 5,\n                rotation: 0,\n                color: 'rgb(87, 87, 87)',\n                formatter: undefined\n            },\n            line: {\n                width: 1,\n                color: 'rgb(195, 195, 195)'\n            },\n            tick: {\n                width: 1,\n                size: 6,\n                color: 'rgb(195, 195, 195)',\n                count: 10\n            },\n            gridStyle: [{\n                    stroke: 'rgb(219, 219, 219)',\n                    lineDash: [4, 2]\n                }]\n        };\n    };\n    ChartTheme.getSeriesDefaults = function () {\n        return {\n            tooltip: {\n                enabled: true,\n                renderer: undefined,\n                format: undefined\n            },\n            visible: true,\n            showInLegend: true\n        };\n    };\n    ChartTheme.getBarSeriesDefaults = function () {\n        return __assign(__assign({}, this.getSeriesDefaults()), { flipXY: false, fillOpacity: 1, strokeOpacity: 1, xKey: '', xName: '', yKeys: [], yNames: [], grouped: false, normalizedTo: undefined, strokeWidth: 1, lineDash: undefined, lineDashOffset: 0, tooltipRenderer: undefined, highlightStyle: {\n                fill: 'yellow'\n            }, label: {\n                enabled: false,\n                fontStyle: undefined,\n                fontWeight: undefined,\n                fontSize: 12,\n                fontFamily: this.fontFamily,\n                color: 'rgb(70, 70, 70)',\n                formatter: undefined\n            }, shadow: {\n                enabled: false,\n                color: 'rgba(0, 0, 0, 0.5)',\n                xOffset: 3,\n                yOffset: 3,\n                blur: 5\n            } });\n    };\n    ChartTheme.getCartesianSeriesMarkerDefaults = function () {\n        return {\n            enabled: true,\n            shape: 'circle',\n            size: 6,\n            maxSize: 30,\n            strokeWidth: 1,\n            formatter: undefined\n        };\n    };\n    ChartTheme.getChartDefaults = function () {\n        return {\n            width: 600,\n            height: 300,\n            autoSize: true,\n            background: {\n                visible: true,\n                fill: 'white'\n            },\n            padding: {\n                top: 20,\n                right: 20,\n                bottom: 20,\n                left: 20\n            },\n            title: {\n                enabled: false,\n                padding: {\n                    top: 10,\n                    right: 10,\n                    bottom: 10,\n                    left: 10\n                },\n                text: 'Title',\n                fontStyle: undefined,\n                fontWeight: 'bold',\n                fontSize: 16,\n                fontFamily: this.fontFamily,\n                color: 'rgb(70, 70, 70)'\n            },\n            subtitle: {\n                enabled: false,\n                padding: {\n                    top: 10,\n                    right: 10,\n                    bottom: 10,\n                    left: 10\n                },\n                text: 'Subtitle',\n                fontStyle: undefined,\n                fontWeight: undefined,\n                fontSize: 12,\n                fontFamily: this.fontFamily,\n                color: 'rgb(140, 140, 140)'\n            },\n            legend: {\n                enabled: true,\n                position: 'right',\n                spacing: 20,\n                item: {\n                    paddingX: 16,\n                    paddingY: 8,\n                    marker: {\n                        shape: undefined,\n                        size: 15,\n                        strokeWidth: 1,\n                        padding: 8\n                    },\n                    label: {\n                        color: 'black',\n                        fontStyle: undefined,\n                        fontWeight: undefined,\n                        fontSize: 12,\n                        fontFamily: this.fontFamily\n                    }\n                }\n            },\n            tooltip: {\n                enabled: true,\n                tracking: true,\n                delay: 0,\n                class: Chart.defaultTooltipClass\n            }\n        };\n    };\n    ChartTheme.prototype.createChartConfigPerSeries = function (config) {\n        var typeToAliases = {\n            cartesian: ChartTheme.cartesianSeriesTypes,\n            polar: ChartTheme.polarSeriesTypes\n        };\n        var _loop_1 = function (type) {\n            typeToAliases[type].forEach(function (alias) {\n                if (!config[alias]) {\n                    config[alias] = deepMerge({}, config[type], { arrayMerge: arrayMerge });\n                }\n            });\n        };\n        for (var type in typeToAliases) {\n            _loop_1(type);\n        }\n        return config;\n    };\n    ChartTheme.prototype.getConfig = function (path) {\n        return getValue(this.config, path);\n    };\n    /**\n     * Meant to be overridden in subclasses. For example:\n     * ```\n     *     getDefaults() {\n     *         const subclassDefaults = { ... };\n     *         return this.mergeWithParentDefaults(subclassDefaults);\n     *     }\n     * ```\n     */\n    ChartTheme.prototype.getDefaults = function () {\n        return deepMerge({}, ChartTheme.defaults, { arrayMerge: arrayMerge });\n    };\n    ChartTheme.prototype.mergeWithParentDefaults = function (defaults) {\n        var mergeOptions = { arrayMerge: arrayMerge };\n        var proto = Object.getPrototypeOf(Object.getPrototypeOf(this));\n        if (proto === Object.prototype) {\n            var config = deepMerge({}, ChartTheme.defaults, mergeOptions);\n            config = deepMerge(config, defaults, mergeOptions);\n            return config;\n        }\n        var parentDefaults = proto.getDefaults();\n        return deepMerge(parentDefaults, defaults, mergeOptions);\n    };\n    ChartTheme.prototype.setSeriesColors = function (series, seriesOptions, firstColorIndex) {\n        var palette = this.palette;\n        var colorCount = this.getSeriesColorCount(seriesOptions);\n        if (colorCount === Infinity) {\n            series.setColors(palette.fills, palette.strokes);\n        }\n        else {\n            var fills = copy(palette.fills, firstColorIndex, colorCount);\n            var strokes = copy(palette.strokes, firstColorIndex, colorCount);\n            series.setColors(fills, strokes);\n            firstColorIndex += colorCount;\n        }\n        return firstColorIndex;\n    };\n    /**\n     * This would typically correspond to the number of dependent variables the series plots.\n     * If the color count is not fixed, for example it's data-dependent with one color per data point,\n     * return Infinity to fetch all unique colors and manage them in the series.\n     */\n    ChartTheme.prototype.getSeriesColorCount = function (seriesOptions) {\n        var type = seriesOptions.type;\n        switch (type) {\n            case 'bar':\n            case 'column':\n            case 'area':\n                return seriesOptions.yKeys ? seriesOptions.yKeys.length : 0;\n            case 'pie':\n                return Infinity;\n            default:\n                return 1;\n        }\n    };\n    ChartTheme.fontFamily = 'Verdana, sans-serif';\n    ChartTheme.cartesianDefaults = __assign(__assign({}, ChartTheme.getChartDefaults()), { axes: {\n            number: __assign({}, ChartTheme.getAxisDefaults()),\n            category: __assign({}, ChartTheme.getAxisDefaults()),\n            groupedCategory: __assign({}, ChartTheme.getAxisDefaults()),\n            time: __assign({}, ChartTheme.getAxisDefaults())\n        }, series: {\n            column: __assign(__assign({}, ChartTheme.getBarSeriesDefaults()), { flipXY: false }),\n            bar: __assign(__assign({}, ChartTheme.getBarSeriesDefaults()), { flipXY: true }),\n            line: __assign(__assign({}, ChartTheme.getSeriesDefaults()), { title: undefined, xKey: '', xName: '', yKey: '', yName: '', strokeWidth: 2, strokeOpacity: 1, lineDash: undefined, lineDashOffset: 0, tooltipRenderer: undefined, highlightStyle: {\n                    fill: 'yellow'\n                }, marker: __assign({}, ChartTheme.getCartesianSeriesMarkerDefaults()) }),\n            scatter: __assign(__assign({}, ChartTheme.getSeriesDefaults()), { title: undefined, xKey: '', yKey: '', sizeKey: undefined, labelKey: undefined, xName: '', yName: '', sizeName: 'Size', labelName: 'Label', strokeWidth: 2, fillOpacity: 1, strokeOpacity: 1, tooltipRenderer: undefined, highlightStyle: {\n                    fill: 'yellow'\n                }, marker: __assign({}, ChartTheme.getCartesianSeriesMarkerDefaults()) }),\n            area: __assign(__assign({}, ChartTheme.getSeriesDefaults()), { title: undefined, xKey: '', xName: '', yKeys: [], yNames: [], normalizedTo: undefined, fillOpacity: 0.8, strokeOpacity: 1, strokeWidth: 2, lineDash: undefined, lineDashOffset: 0, shadow: {\n                    enabled: false,\n                    color: 'rgba(0, 0, 0, 0.5)',\n                    xOffset: 3,\n                    yOffset: 3,\n                    blur: 5\n                }, tooltipRenderer: undefined, highlightStyle: {\n                    fill: 'yellow'\n                }, marker: __assign(__assign({}, ChartTheme.getCartesianSeriesMarkerDefaults()), { enabled: false }) }),\n            histogram: __assign(__assign({}, ChartTheme.getSeriesDefaults()), { title: undefined, xKey: '', yKey: '', xName: '', yName: '', strokeWidth: 1, fillOpacity: 1, strokeOpacity: 1, lineDash: undefined, lineDashOffset: 0, areaPlot: false, binCount: undefined, bins: undefined, aggregation: 'sum', tooltipRenderer: undefined, highlightStyle: {\n                    fill: 'yellow'\n                }, label: {\n                    enabled: false,\n                    fontStyle: undefined,\n                    fontWeight: undefined,\n                    fontSize: 12,\n                    fontFamily: ChartTheme.fontFamily,\n                    color: 'rgb(70, 70, 70)',\n                    formatter: undefined\n                } })\n        }, navigator: {\n            enabled: false,\n            height: 30,\n            min: 0,\n            max: 1,\n            mask: {\n                fill: '#999999',\n                stroke: '#999999',\n                strokeWidth: 1,\n                fillOpacity: 0.2\n            },\n            minHandle: {\n                fill: '#f2f2f2',\n                stroke: '#999999',\n                strokeWidth: 1,\n                width: 8,\n                height: 16,\n                gripLineGap: 2,\n                gripLineLength: 8\n            },\n            maxHandle: {\n                fill: '#f2f2f2',\n                stroke: '#999999',\n                strokeWidth: 1,\n                width: 8,\n                height: 16,\n                gripLineGap: 2,\n                gripLineLength: 8\n            }\n        } });\n    ChartTheme.defaults = {\n        cartesian: ChartTheme.cartesianDefaults,\n        groupedCategory: ChartTheme.cartesianDefaults,\n        polar: __assign(__assign({}, ChartTheme.getChartDefaults()), { series: {\n                pie: __assign(__assign({}, ChartTheme.getSeriesDefaults()), { title: {\n                        enabled: true,\n                        padding: new Padding(0),\n                        text: '',\n                        fontStyle: undefined,\n                        fontWeight: undefined,\n                        fontSize: 12,\n                        fontFamily: ChartTheme.fontFamily,\n                        color: 'rgb(70, 70, 70)'\n                    }, angleKey: '', angleName: '', radiusKey: undefined, radiusName: undefined, labelKey: undefined, labelName: undefined, label: {\n                        enabled: true,\n                        fontStyle: undefined,\n                        fontWeight: undefined,\n                        fontSize: 12,\n                        fontFamily: ChartTheme.fontFamily,\n                        color: 'rgb(70, 70, 70)',\n                        offset: 3,\n                        minAngle: 20\n                    }, callout: {\n                        length: 10,\n                        strokeWidth: 2\n                    }, fillOpacity: 1, strokeOpacity: 1, strokeWidth: 1, lineDash: undefined, lineDashOffset: 0, rotation: 0, outerRadiusOffset: 0, innerRadiusOffset: 0, highlightStyle: {\n                        fill: 'yellow'\n                    }, shadow: {\n                        enabled: false,\n                        color: 'rgba(0, 0, 0, 0.5)',\n                        xOffset: 3,\n                        yOffset: 3,\n                        blur: 5\n                    } })\n            } }),\n        hierarchy: __assign(__assign({}, ChartTheme.getChartDefaults()), { series: {\n                treemap: __assign({}, ChartTheme.getSeriesDefaults())\n            } })\n    };\n    ChartTheme.cartesianSeriesTypes = ['line', 'area', 'bar', 'column', 'scatter', 'histogram'];\n    ChartTheme.polarSeriesTypes = ['pie'];\n    ChartTheme.seriesTypes = ChartTheme.cartesianSeriesTypes.concat(ChartTheme.polarSeriesTypes);\n    return ChartTheme;\n}());\nexport { ChartTheme };\nfunction arrayMerge(target, source, options) {\n    return source;\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { ChartTheme } from \"./chartTheme\";\nvar DarkTheme = /** @class */ (function (_super) {\n    __extends(DarkTheme, _super);\n    function DarkTheme(options) {\n        return _super.call(this, options) || this;\n    }\n    DarkTheme.prototype.getDefaults = function () {\n        var fontColor = 'rgb(200, 200, 200)';\n        var mutedFontColor = 'rgb(150, 150, 150)';\n        var axisDefaults = {\n            title: {\n                color: fontColor\n            },\n            label: {\n                color: fontColor\n            },\n            gridStyle: [{\n                    stroke: 'rgb(88, 88, 88)',\n                    lineDash: [4, 2]\n                }]\n        };\n        var seriesLabelDefaults = {\n            label: {\n                color: fontColor\n            }\n        };\n        var chartDefaults = {\n            background: {\n                fill: 'rgb(34, 38, 41)'\n            },\n            title: {\n                color: fontColor\n            },\n            subtitle: {\n                color: mutedFontColor\n            },\n            axes: {\n                number: __assign({}, axisDefaults),\n                category: __assign({}, axisDefaults),\n                time: __assign({}, axisDefaults)\n            },\n            legend: {\n                item: {\n                    label: {\n                        color: fontColor\n                    }\n                }\n            }\n        };\n        return this.mergeWithParentDefaults({\n            cartesian: __assign(__assign({}, chartDefaults), { series: {\n                    bar: __assign({}, seriesLabelDefaults),\n                    column: __assign({}, seriesLabelDefaults),\n                    histogram: __assign({}, seriesLabelDefaults)\n                } }),\n            polar: __assign(__assign({}, chartDefaults), { series: {\n                    pie: __assign(__assign({}, seriesLabelDefaults), { title: {\n                            color: fontColor\n                        } })\n                } })\n        });\n    };\n    return DarkTheme;\n}(ChartTheme));\nexport { DarkTheme };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ChartTheme } from \"./chartTheme\";\nvar palette = {\n    fills: [\n        '#f44336',\n        '#e91e63',\n        '#9c27b0',\n        '#673ab7',\n        '#3f51b5',\n        '#2196f3',\n        '#03a9f4',\n        '#00bcd4',\n        '#009688',\n        '#4caf50',\n        '#8bc34a',\n        '#cddc39',\n        '#ffeb3b',\n        '#ffc107',\n        '#ff9800',\n        '#ff5722'\n    ],\n    strokes: [\n        '#ab2f26',\n        '#a31545',\n        '#6d1b7b',\n        '#482980',\n        '#2c397f',\n        '#1769aa',\n        '#0276ab',\n        '#008494',\n        '#00695f',\n        '#357a38',\n        '#618834',\n        '#909a28',\n        '#b3a429',\n        '#b38705',\n        '#b36a00',\n        '#b33d18'\n    ]\n};\nvar MaterialLight = /** @class */ (function (_super) {\n    __extends(MaterialLight, _super);\n    function MaterialLight() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MaterialLight.prototype.getPalette = function () {\n        return palette;\n    };\n    return MaterialLight;\n}(ChartTheme));\nexport { MaterialLight };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { DarkTheme } from \"./darkTheme\";\nvar palette = {\n    fills: [\n        '#f44336',\n        '#e91e63',\n        '#9c27b0',\n        '#673ab7',\n        '#3f51b5',\n        '#2196f3',\n        '#03a9f4',\n        '#00bcd4',\n        '#009688',\n        '#4caf50',\n        '#8bc34a',\n        '#cddc39',\n        '#ffeb3b',\n        '#ffc107',\n        '#ff9800',\n        '#ff5722'\n    ],\n    strokes: [\n        '#ab2f26',\n        '#a31545',\n        '#6d1b7b',\n        '#482980',\n        '#2c397f',\n        '#1769aa',\n        '#0276ab',\n        '#008494',\n        '#00695f',\n        '#357a38',\n        '#618834',\n        '#909a28',\n        '#b3a429',\n        '#b38705',\n        '#b36a00',\n        '#b33d18'\n    ]\n};\nvar MaterialDark = /** @class */ (function (_super) {\n    __extends(MaterialDark, _super);\n    function MaterialDark() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MaterialDark.prototype.getPalette = function () {\n        return palette;\n    };\n    return MaterialDark;\n}(DarkTheme));\nexport { MaterialDark };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ChartTheme } from \"./chartTheme\";\nvar palette = {\n    fills: [\n        '#c16068',\n        '#a2bf8a',\n        '#ebcc87',\n        '#80a0c3',\n        '#b58dae',\n        '#85c0d1'\n    ],\n    strokes: [\n        '#874349',\n        '#718661',\n        '#a48f5f',\n        '#5a7088',\n        '#7f637a',\n        '#5d8692'\n    ]\n};\nvar PastelLight = /** @class */ (function (_super) {\n    __extends(PastelLight, _super);\n    function PastelLight() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PastelLight.prototype.getPalette = function () {\n        return palette;\n    };\n    return PastelLight;\n}(ChartTheme));\nexport { PastelLight };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { DarkTheme } from \"./darkTheme\";\nvar palette = {\n    fills: [\n        '#c16068',\n        '#a2bf8a',\n        '#ebcc87',\n        '#80a0c3',\n        '#b58dae',\n        '#85c0d1'\n    ],\n    strokes: [\n        '#874349',\n        '#718661',\n        '#a48f5f',\n        '#5a7088',\n        '#7f637a',\n        '#5d8692'\n    ]\n};\nvar PastelDark = /** @class */ (function (_super) {\n    __extends(PastelDark, _super);\n    function PastelDark() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PastelDark.prototype.getPalette = function () {\n        return palette;\n    };\n    return PastelDark;\n}(DarkTheme));\nexport { PastelDark };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ChartTheme } from \"./chartTheme\";\nvar palette = {\n    fills: [\n        '#febe76',\n        '#ff7979',\n        '#badc58',\n        '#f9ca23',\n        '#f0932b',\n        '#eb4c4b',\n        '#6ab04c',\n        '#7ed6df',\n        '#e056fd',\n        '#686de0'\n    ],\n    strokes: [\n        '#b28553',\n        '#b35555',\n        '#829a3e',\n        '#ae8d19',\n        '#a8671e',\n        '#a43535',\n        '#4a7b35',\n        '#58969c',\n        '#9d3cb1',\n        '#494c9d'\n    ]\n};\nvar SolarLight = /** @class */ (function (_super) {\n    __extends(SolarLight, _super);\n    function SolarLight() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SolarLight.prototype.getPalette = function () {\n        return palette;\n    };\n    return SolarLight;\n}(ChartTheme));\nexport { SolarLight };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { DarkTheme } from \"./darkTheme\";\nvar palette = {\n    fills: [\n        '#febe76',\n        '#ff7979',\n        '#badc58',\n        '#f9ca23',\n        '#f0932b',\n        '#eb4c4b',\n        '#6ab04c',\n        '#7ed6df',\n        '#e056fd',\n        '#686de0'\n    ],\n    strokes: [\n        '#b28553',\n        '#b35555',\n        '#829a3e',\n        '#ae8d19',\n        '#a8671e',\n        '#a43535',\n        '#4a7b35',\n        '#58969c',\n        '#9d3cb1',\n        '#494c9d'\n    ]\n};\nvar SolarDark = /** @class */ (function (_super) {\n    __extends(SolarDark, _super);\n    function SolarDark() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SolarDark.prototype.getPalette = function () {\n        return palette;\n    };\n    return SolarDark;\n}(DarkTheme));\nexport { SolarDark };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ChartTheme } from \"./chartTheme\";\nvar palette = {\n    fills: [\n        '#5BC0EB',\n        '#FDE74C',\n        '#9BC53D',\n        '#E55934',\n        '#FA7921',\n        '#fa3081'\n    ],\n    strokes: [\n        '#4086a4',\n        '#b1a235',\n        '#6c8a2b',\n        '#a03e24',\n        '#af5517',\n        '#af225a'\n    ]\n};\nvar VividLight = /** @class */ (function (_super) {\n    __extends(VividLight, _super);\n    function VividLight() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    VividLight.prototype.getPalette = function () {\n        return palette;\n    };\n    return VividLight;\n}(ChartTheme));\nexport { VividLight };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { DarkTheme } from \"./darkTheme\";\nvar palette = {\n    fills: [\n        '#5BC0EB',\n        '#FDE74C',\n        '#9BC53D',\n        '#E55934',\n        '#FA7921',\n        '#fa3081'\n    ],\n    strokes: [\n        '#4086a4',\n        '#b1a235',\n        '#6c8a2b',\n        '#a03e24',\n        '#af5517',\n        '#af225a'\n    ]\n};\nvar VividDark = /** @class */ (function (_super) {\n    __extends(VividDark, _super);\n    function VividDark() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    VividDark.prototype.getPalette = function () {\n        return palette;\n    };\n    return VividDark;\n}(DarkTheme));\nexport { VividDark };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar _a, _b, _c, _d, _e;\nimport { Padding } from \"../util/padding\";\nimport { CartesianChart } from \"./cartesianChart\";\nimport { GroupedCategoryChart } from \"./groupedCategoryChart\";\nimport { NumberAxis } from \"./axis/numberAxis\";\nimport { CategoryAxis } from \"./axis/categoryAxis\";\nimport { GroupedCategoryAxis } from \"./axis/groupedCategoryAxis\";\nimport { LineSeries } from \"./series/cartesian/lineSeries\";\nimport { BarSeries } from \"./series/cartesian/barSeries\";\nimport { HistogramSeries } from \"./series/cartesian/histogramSeries\";\nimport { ScatterSeries } from \"./series/cartesian/scatterSeries\";\nimport { AreaSeries } from \"./series/cartesian/areaSeries\";\nimport { PolarChart } from \"./polarChart\";\nimport { PieSeries } from \"./series/polar/pieSeries\";\nimport { AxisLabel, AxisTick } from \"../axis\";\nimport { TimeAxis } from \"./axis/timeAxis\";\nimport { Caption } from \"../caption\";\nimport { DropShadow } from \"../scene/dropShadow\";\nimport { Legend, LegendPosition, LegendItem, LegendMarker, LegendLabel } from \"./legend\";\nimport { Navigator } from \"./navigator/navigator\";\nimport { NavigatorMask } from \"./navigator/navigatorMask\";\nimport { NavigatorHandle } from \"./navigator/navigatorHandle\";\nimport { CartesianSeriesMarker } from \"./series/cartesian/cartesianSeries\";\nimport { Chart } from \"./chart\";\nimport { HierarchyChart } from \"./hierarchyChart\";\nimport { TreemapSeries } from \"./series/hierarchy/treemapSeries\";\n/*\n    This file defines the specs for creating different kinds of charts, but\n    contains no code that uses the specs to actually create charts\n*/\nvar chartPadding = 20;\nvar commonChartMappings = {\n    background: {\n        meta: {\n            defaults: {\n                visible: true,\n                fill: 'white'\n            }\n        }\n    },\n    padding: {\n        meta: {\n            constructor: Padding,\n            defaults: {\n                top: chartPadding,\n                right: chartPadding,\n                bottom: chartPadding,\n                left: chartPadding\n            }\n        }\n    },\n    tooltip: {\n        meta: {\n            defaults: {\n                enabled: true,\n                tracking: true,\n                delay: 0,\n                class: Chart.defaultTooltipClass\n            }\n        }\n    },\n    title: {\n        meta: {\n            constructor: Caption,\n            defaults: {\n                enabled: false,\n                padding: {\n                    meta: {\n                        constructor: Padding,\n                        defaults: {\n                            top: 10,\n                            right: 10,\n                            bottom: 10,\n                            left: 10\n                        }\n                    }\n                },\n                text: 'Title',\n                fontStyle: undefined,\n                fontWeight: 'bold',\n                fontSize: 14,\n                fontFamily: 'Verdana, sans-serif',\n                color: 'rgb(70, 70, 70)'\n            }\n        }\n    },\n    subtitle: {\n        meta: {\n            constructor: Caption,\n            defaults: {\n                enabled: false,\n                padding: {\n                    meta: {\n                        constructor: Padding,\n                        defaults: {\n                            top: 10,\n                            right: 10,\n                            bottom: 10,\n                            left: 10\n                        }\n                    }\n                },\n                text: 'Subtitle',\n                fontStyle: undefined,\n                fontWeight: undefined,\n                fontSize: 12,\n                fontFamily: 'Verdana, sans-serif',\n                color: 'rgb(140, 140, 140)'\n            }\n        }\n    },\n    legend: {\n        meta: {\n            constructor: Legend,\n            defaults: {\n                enabled: true,\n                position: LegendPosition.Right,\n                spacing: 20\n            }\n        },\n        item: {\n            meta: {\n                constructor: LegendItem,\n                defaults: {\n                    paddingX: 16,\n                    paddingY: 8\n                }\n            },\n            marker: {\n                meta: {\n                    constructor: LegendMarker,\n                    defaults: {\n                        shape: undefined,\n                        size: 15,\n                        strokeWidth: 1,\n                        padding: 8\n                    }\n                }\n            },\n            label: {\n                meta: {\n                    constructor: LegendLabel,\n                    defaults: {\n                        color: 'black',\n                        fontStyle: undefined,\n                        fontWeight: undefined,\n                        fontSize: 12,\n                        fontFamily: 'Verdana, sans-serif'\n                    }\n                }\n            }\n        }\n    }\n};\nvar chartDefaults = {\n    container: undefined,\n    autoSize: true,\n    width: 600,\n    height: 300,\n    data: [],\n    title: undefined,\n    subtitle: undefined,\n    padding: {},\n    background: {},\n    legend: {\n        item: {\n            marker: {},\n            label: {}\n        }\n    },\n    navigator: {\n        mask: {},\n        minHandle: {},\n        maxHandle: {}\n    },\n    listeners: undefined\n};\nvar chartMeta = {\n    // Charts components' constructors normally don't take any parameters (which makes things consistent -- everything\n    // is configured the same way, via the properties, and makes the factory pattern work well) but the charts\n    // themselves are the exceptions.\n    // If a chart config has the (optional) `document` property, it will be passed to the constructor.\n    // There is no actual `document` property on the chart, it can only be supplied during instantiation.\n    constructorParams: ['document'],\n    setAsIs: ['container', 'data', 'tooltipOffset'],\n    nonSerializable: ['container', 'data']\n};\nvar axisDefaults = {\n    defaults: {\n        visibleRange: [0, 1],\n        label: {},\n        tick: {},\n        title: {},\n        line: {},\n        gridStyle: [{\n                stroke: 'rgb(219, 219, 219)',\n                lineDash: [4, 2]\n            }]\n    }\n};\nvar seriesDefaults = {\n    visible: true,\n    showInLegend: true,\n    listeners: undefined\n};\nvar columnSeriesDefaults = {\n    fillOpacity: 1,\n    strokeOpacity: 1,\n    xKey: '',\n    xName: '',\n    yKeys: [],\n    yNames: [],\n    grouped: false,\n    normalizedTo: undefined,\n    strokeWidth: 1,\n    lineDash: undefined,\n    lineDashOffset: 0,\n    shadow: undefined,\n    highlightStyle: {\n        fill: 'yellow'\n    }\n};\nvar shadowMapping = {\n    shadow: {\n        meta: {\n            constructor: DropShadow,\n            defaults: {\n                enabled: true,\n                color: 'rgba(0, 0, 0, 0.5)',\n                xOffset: 0,\n                yOffset: 0,\n                blur: 5\n            }\n        }\n    }\n};\nvar labelDefaults = {\n    enabled: true,\n    fontStyle: undefined,\n    fontWeight: undefined,\n    fontSize: 12,\n    fontFamily: 'Verdana, sans-serif',\n    color: 'rgb(70, 70, 70)'\n};\nvar barLabelMapping = {\n    label: {\n        meta: {\n            defaults: __assign(__assign({}, labelDefaults), { formatter: undefined })\n        }\n    }\n};\nvar tooltipMapping = {\n    tooltip: {\n        meta: {\n            defaults: {\n                enabled: true,\n                renderer: undefined,\n                format: undefined\n            }\n        }\n    }\n};\nvar axisMappings = {\n    line: {\n        meta: {\n            defaults: {\n                width: 1,\n                color: 'rgb(195, 195, 195)'\n            }\n        }\n    },\n    title: {\n        meta: {\n            constructor: Caption,\n            defaults: {\n                padding: {\n                    meta: {\n                        constructor: Padding,\n                        defaults: {\n                            top: 10,\n                            right: 10,\n                            bottom: 10,\n                            left: 10\n                        }\n                    }\n                },\n                text: 'Axis Title',\n                fontStyle: undefined,\n                fontWeight: 'bold',\n                fontSize: 12,\n                fontFamily: 'Verdana, sans-serif',\n                color: 'rgb(70, 70, 70)'\n            }\n        }\n    },\n    label: {\n        meta: {\n            constructor: AxisLabel,\n            defaults: {\n                fontStyle: undefined,\n                fontWeight: undefined,\n                fontSize: 12,\n                fontFamily: 'Verdana, sans-serif',\n                padding: 5,\n                rotation: 0,\n                color: 'rgb(87, 87, 87)',\n                formatter: undefined\n            }\n        }\n    },\n    tick: {\n        meta: {\n            constructor: AxisTick,\n            defaults: {\n                width: 1,\n                size: 6,\n                color: 'rgb(195, 195, 195)',\n                count: 10\n            }\n        }\n    }\n};\nvar mappings = (_a = {},\n    _a[CartesianChart.type] = __assign(__assign({ meta: __assign(__assign({ constructor: CartesianChart }, chartMeta), { defaults: __assign(__assign({}, chartDefaults), { axes: [{\n                        type: NumberAxis.type,\n                        position: 'left'\n                    }, {\n                        type: CategoryAxis.type,\n                        position: 'bottom'\n                    }] }) }) }, commonChartMappings), { axes: (_b = {},\n            _b[NumberAxis.type] = __assign({ meta: __assign({ constructor: NumberAxis, setAsIs: ['gridStyle', 'visibleRange'] }, axisDefaults) }, axisMappings),\n            _b[CategoryAxis.type] = __assign({ meta: __assign({ constructor: CategoryAxis, setAsIs: ['gridStyle', 'visibleRange'] }, axisDefaults) }, axisMappings),\n            _b[GroupedCategoryAxis.type] = __assign({ meta: __assign({ constructor: GroupedCategoryAxis, setAsIs: ['gridStyle', 'visibleRange'] }, axisDefaults) }, axisMappings),\n            _b[TimeAxis.type] = __assign({ meta: __assign({ constructor: TimeAxis, setAsIs: ['gridStyle', 'visibleRange'] }, axisDefaults) }, axisMappings),\n            _b), series: (_c = {\n                column: __assign(__assign(__assign({ meta: {\n                        constructor: BarSeries,\n                        setAsIs: ['lineDash'],\n                        defaults: __assign(__assign({ flipXY: false }, seriesDefaults), columnSeriesDefaults)\n                    }, highlightStyle: {} }, tooltipMapping), barLabelMapping), shadowMapping)\n            },\n            _c[BarSeries.type] = __assign(__assign(__assign({ meta: {\n                    constructor: BarSeries,\n                    setAsIs: ['lineDash'],\n                    defaults: __assign(__assign({ flipXY: true }, seriesDefaults), columnSeriesDefaults)\n                }, highlightStyle: {} }, tooltipMapping), barLabelMapping), shadowMapping),\n            _c[LineSeries.type] = __assign(__assign({ meta: {\n                    constructor: LineSeries,\n                    setAsIs: ['lineDash'],\n                    defaults: __assign(__assign({}, seriesDefaults), { title: undefined, xKey: '', xName: '', yKey: '', yName: '', strokeWidth: 2, strokeOpacity: 1, lineDash: undefined, lineDashOffset: 0, highlightStyle: {\n                            fill: 'yellow'\n                        } })\n                } }, tooltipMapping), { highlightStyle: {}, marker: {\n                    meta: {\n                        constructor: CartesianSeriesMarker,\n                        defaults: {\n                            enabled: true,\n                            shape: 'circle',\n                            size: 6,\n                            maxSize: 30,\n                            strokeWidth: 1,\n                            formatter: undefined\n                        }\n                    }\n                } }),\n            _c[ScatterSeries.type] = __assign(__assign({ meta: {\n                    constructor: ScatterSeries,\n                    defaults: __assign(__assign({}, seriesDefaults), { title: undefined, xKey: '', yKey: '', sizeKey: undefined, labelKey: undefined, xName: '', yName: '', sizeName: 'Size', labelName: 'Label', strokeWidth: 2, fillOpacity: 1, strokeOpacity: 1, highlightStyle: {\n                            fill: 'yellow'\n                        } })\n                } }, tooltipMapping), { highlightStyle: {}, marker: {\n                    meta: {\n                        constructor: CartesianSeriesMarker,\n                        defaults: {\n                            enabled: true,\n                            shape: 'circle',\n                            size: 6,\n                            maxSize: 30,\n                            strokeWidth: 1,\n                            formatter: undefined\n                        }\n                    }\n                } }),\n            _c[AreaSeries.type] = __assign(__assign(__assign({ meta: {\n                    constructor: AreaSeries,\n                    setAsIs: ['lineDash'],\n                    defaults: __assign(__assign({}, seriesDefaults), { xKey: '', xName: '', yKeys: [], yNames: [], normalizedTo: undefined, fillOpacity: 1, strokeOpacity: 1, strokeWidth: 2, lineDash: undefined, lineDashOffset: 0, shadow: undefined, highlightStyle: {\n                            fill: 'yellow'\n                        } })\n                } }, tooltipMapping), { highlightStyle: {}, marker: {\n                    meta: {\n                        constructor: CartesianSeriesMarker,\n                        defaults: {\n                            enabled: true,\n                            shape: 'circle',\n                            size: 6,\n                            maxSize: 30,\n                            strokeWidth: 1,\n                            formatter: undefined\n                        }\n                    }\n                } }), shadowMapping),\n            _c[HistogramSeries.type] = __assign(__assign(__assign({ meta: {\n                    constructor: HistogramSeries,\n                    setAsIs: ['lineDash'],\n                    defaults: __assign(__assign({}, seriesDefaults), { title: undefined, xKey: '', yKey: '', xName: '', yName: '', strokeWidth: 1, fillOpacity: 1, strokeOpacity: 1, lineDash: undefined, lineDashOffset: 0, areaPlot: false, binCount: undefined, bins: undefined, aggregation: 'sum', highlightStyle: {\n                            fill: 'yellow'\n                        } })\n                } }, tooltipMapping), { highlightStyle: {}, label: {\n                    meta: {\n                        defaults: __assign(__assign({}, labelDefaults), { formatter: undefined })\n                    }\n                } }), shadowMapping),\n            _c), navigator: {\n            meta: {\n                constructor: Navigator,\n                defaults: {\n                    enabled: false,\n                    height: 30,\n                    min: 0,\n                    max: 1\n                }\n            },\n            mask: {\n                meta: {\n                    constructor: NavigatorMask,\n                    defaults: {\n                        fill: '#999999',\n                        stroke: '#999999',\n                        strokeWidth: 1,\n                        fillOpacity: 0.2\n                    }\n                }\n            },\n            minHandle: {\n                meta: {\n                    constructor: NavigatorHandle,\n                    defaults: {\n                        fill: '#f2f2f2',\n                        stroke: '#999999',\n                        strokeWidth: 1,\n                        width: 8,\n                        height: 16,\n                        gripLineGap: 2,\n                        gripLineLength: 8\n                    }\n                }\n            },\n            maxHandle: {\n                meta: {\n                    constructor: NavigatorHandle,\n                    defaults: {\n                        fill: '#f2f2f2',\n                        stroke: '#999999',\n                        strokeWidth: 1,\n                        width: 8,\n                        height: 16,\n                        gripLineGap: 2,\n                        gripLineLength: 8\n                    }\n                }\n            }\n        } }),\n    _a[PolarChart.type] = __assign(__assign({ meta: __assign(__assign({ constructor: PolarChart }, chartMeta), { defaults: __assign(__assign({}, chartDefaults), { padding: {\n                    meta: {\n                        constructor: Padding,\n                        defaults: {\n                            top: 40,\n                            right: 40,\n                            bottom: 40,\n                            left: 40\n                        }\n                    }\n                } }) }) }, commonChartMappings), { series: (_d = {},\n            _d[PieSeries.type] = __assign(__assign(__assign({ meta: {\n                    constructor: PieSeries,\n                    setAsIs: ['lineDash'],\n                    defaults: __assign(__assign({}, seriesDefaults), { title: undefined, angleKey: '', angleName: '', radiusKey: undefined, radiusName: undefined, labelKey: undefined, labelName: undefined, callout: {}, fillOpacity: 1, strokeOpacity: 1, rotation: 0, outerRadiusOffset: 0, innerRadiusOffset: 0, strokeWidth: 1, lineDash: undefined, lineDashOffset: 0, shadow: undefined })\n                } }, tooltipMapping), { highlightStyle: {}, title: {\n                    meta: {\n                        constructor: Caption,\n                        defaults: {\n                            enabled: true,\n                            padding: {\n                                meta: {\n                                    constructor: Padding,\n                                    defaults: {\n                                        top: 10,\n                                        right: 10,\n                                        bottom: 10,\n                                        left: 10\n                                    }\n                                }\n                            },\n                            text: 'Series Title',\n                            fontStyle: undefined,\n                            fontWeight: 'bold',\n                            fontSize: 14,\n                            fontFamily: 'Verdana, sans-serif',\n                            color: 'black'\n                        }\n                    }\n                }, label: {\n                    meta: {\n                        defaults: __assign(__assign({}, labelDefaults), { offset: 3, minAngle: 20 })\n                    }\n                }, callout: {\n                    meta: {\n                        defaults: {\n                            length: 10,\n                            strokeWidth: 1\n                        }\n                    }\n                } }), shadowMapping),\n            _d) }),\n    _a[HierarchyChart.type] = __assign(__assign({ meta: __assign(__assign({ constructor: HierarchyChart }, chartMeta), { defaults: __assign({}, chartDefaults) }) }, commonChartMappings), { series: (_e = {},\n            _e[TreemapSeries.type] = __assign({ meta: {\n                    constructor: TreemapSeries,\n                    defaults: __assign(__assign({}, seriesDefaults), { showInLegend: false })\n                } }, tooltipMapping),\n            _e) }),\n    _a);\n// Amend the `mappings` object with aliases for different chart types.\n{\n    var typeToAliases = {\n        cartesian: ['line', 'area', 'bar', 'column'],\n        polar: ['pie'],\n        hierarchy: ['treemap']\n    };\n    var _loop_1 = function (type) {\n        typeToAliases[type].forEach(function (alias) {\n            mappings[alias] = mappings[type];\n        });\n    };\n    for (var type in typeToAliases) {\n        _loop_1(type);\n    }\n}\n// Special handling for scatter and histogram charts, for which both axes should default to type `number`.\nmappings['scatter'] =\n    mappings['histogram'] = __assign(__assign({}, mappings.cartesian), { meta: __assign(__assign({}, mappings.cartesian.meta), { defaults: __assign(__assign({}, chartDefaults), { axes: [{\n                        type: 'number',\n                        position: 'bottom'\n                    }, {\n                        type: 'number',\n                        position: 'left'\n                    }] }) }) });\nvar groupedCategoryChartMapping = Object.create(mappings[CartesianChart.type]);\nvar groupedCategoryChartMeta = Object.create(groupedCategoryChartMapping.meta);\ngroupedCategoryChartMeta.constructor = GroupedCategoryChart;\ngroupedCategoryChartMapping.meta = groupedCategoryChartMeta;\nmappings[GroupedCategoryChart.type] = groupedCategoryChartMapping;\nexport default mappings;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { Series } from \"./series/series\";\nimport { LegendMarker } from \"./legend\";\nimport { ChartTheme } from \"./themes/chartTheme\";\nimport { DarkTheme } from './themes/darkTheme';\nimport { MaterialLight } from \"./themes/materialLight\";\nimport { MaterialDark } from \"./themes/materialDark\";\nimport { PastelLight } from \"./themes/pastelLight\";\nimport { PastelDark } from \"./themes/pastelDark\";\nimport { SolarLight } from \"./themes/solarLight\";\nimport { SolarDark } from \"./themes/solarDark\";\nimport { VividLight } from \"./themes/vividLight\";\nimport { VividDark } from \"./themes/vividDark\";\nimport { find } from \"../util/array\";\nimport { deepMerge, getValue, isObject } from \"../util/object\";\nimport mappings from './agChartMappings';\nvar lightTheme = new ChartTheme();\nvar darkTheme = new DarkTheme();\nexport var lightThemes = {\n    'undefined': lightTheme,\n    'null': lightTheme,\n    'ag-default': lightTheme,\n    'ag-material': new MaterialLight(),\n    'ag-pastel': new PastelLight(),\n    'ag-solar': new SolarLight(),\n    'ag-vivid': new VividLight(),\n};\nexport var darkThemes = {\n    'undefined': darkTheme,\n    'null': darkTheme,\n    'ag-default-dark': darkTheme,\n    'ag-material-dark': new MaterialDark(),\n    'ag-pastel-dark': new PastelDark(),\n    'ag-solar-dark': new SolarDark(),\n    'ag-vivid-dark': new VividDark(),\n};\nexport var themes = __assign(__assign({}, darkThemes), lightThemes);\nexport function getChartTheme(value) {\n    if (value instanceof ChartTheme) {\n        return value;\n    }\n    var stockTheme = themes[value];\n    if (stockTheme) {\n        return stockTheme;\n    }\n    value = value;\n    if (value.baseTheme || value.overrides || value.palette) {\n        var baseTheme = getChartTheme(value.baseTheme);\n        return new baseTheme.constructor(value);\n    }\n    return lightTheme;\n}\nvar firstColorIndex = 0;\nvar AgChart = /** @class */ (function () {\n    function AgChart() {\n    }\n    AgChart.create = function (options, container, data) {\n        options = Object.create(options); // avoid mutating user provided options\n        if (container) {\n            options.container = container;\n        }\n        if (data) {\n            options.data = data;\n        }\n        // special handling when both `autoSize` and `width` / `height` are present in the options\n        var autoSize = options && options.autoSize !== false;\n        var theme = getChartTheme(options.theme);\n        firstColorIndex = 0;\n        var chart = create(options, undefined, undefined, theme);\n        if (chart) {\n            if (autoSize) { // `autoSize` takes precedence over `width` / `height`\n                chart.autoSize = true;\n            }\n        }\n        return chart;\n    };\n    AgChart.update = function (chart, options, container, data) {\n        if (!(chart && options)) {\n            return;\n        }\n        options = Object.create(options);\n        if (container) {\n            options.container = container;\n        }\n        if (data) {\n            options.data = data;\n        }\n        var autoSize = options && options.autoSize !== false;\n        var theme = getChartTheme(options.theme);\n        firstColorIndex = 0;\n        update(chart, options, undefined, theme);\n        if (autoSize) {\n            chart.autoSize = true;\n        }\n    };\n    AgChart.save = function (component) {\n        var target = {};\n        save(component, target);\n        return target;\n    };\n    AgChart.createComponent = create;\n    return AgChart;\n}());\nexport { AgChart };\nvar pathToSeriesTypeMap = {\n    'cartesian.series': 'line',\n    'line.series': 'line',\n    'area.series': 'area',\n    'bar.series': 'bar',\n    'column.series': 'column',\n    'histogram.series': 'histogram',\n    'scatter.series': 'scatter',\n    'polar.series': 'pie',\n    'pie.series': 'pie'\n};\nvar actualSeriesTypeMap = (function () {\n    var map = {};\n    var actualSeries = ['area', 'bar', 'histogram', 'line', 'pie', 'scatter'];\n    actualSeries.forEach(function (series) { return map[series] = series; });\n    // Aliases:\n    map['column'] = 'bar';\n    return map;\n})();\nfunction save(component, target, mapping) {\n    if (target === void 0) { target = {}; }\n    if (mapping === void 0) { mapping = mappings; }\n    if (component.constructor && component.constructor.type && !mapping.meta) {\n        mapping = mapping[component.constructor.type];\n    }\n    var defaults = mapping && mapping.meta && mapping.meta.defaults;\n    var keys = Object.keys(defaults);\n    keys.forEach(function (key) {\n        var value = component[key];\n        if (isObject(value) && (!mapping.meta.nonSerializable || mapping.meta.nonSerializable.indexOf(key) < 0)) {\n            target[key] = {};\n            // save(value, target[key], mapping[key]);\n        }\n        else if (Array.isArray(value)) {\n            // target[key] = [];\n            // save(value, target[key], map[key]);\n        }\n        else {\n            target[key] = component[key];\n        }\n    });\n}\nfunction create(options, path, component, theme) {\n    var _a;\n    // Deprecate `chart.legend.item.marker.type` in integrated chart options.\n    options = Object.create(options);\n    if (component instanceof LegendMarker) {\n        if (options.type) {\n            options.shape = options.type;\n        }\n    }\n    else {\n        options = provideDefaultType(options, path);\n        if (path) {\n            if (options.type) {\n                path = path + '.' + options.type;\n            }\n        }\n        else {\n            path = options.type;\n        }\n    }\n    if (!path) {\n        return;\n    }\n    var mapping = getValue(mappings, path);\n    if (mapping) {\n        options = provideDefaultOptions(path, options, mapping, theme);\n        var meta = mapping.meta || {};\n        var constructorParams = meta.constructorParams || [];\n        var skipKeys = ['type', 'listeners'].concat(constructorParams);\n        // TODO: Constructor params processing could be improved, but it's good enough for current params.\n        var constructorParamValues = constructorParams\n            .map(function (param) { return options[param]; })\n            .filter(function (value) { return value !== undefined; });\n        if (!component) {\n            component = new ((_a = meta.constructor).bind.apply(_a, __spreadArrays([void 0], constructorParamValues)))();\n            if (theme && component instanceof Series) {\n                firstColorIndex = theme.setSeriesColors(component, options, firstColorIndex);\n            }\n        }\n        var _loop_1 = function (key) {\n            // Process every non-special key in the config object.\n            if (skipKeys.indexOf(key) < 0) {\n                var value = options[key];\n                if (value && key in mapping && !(meta.setAsIs && meta.setAsIs.indexOf(key) >= 0)) {\n                    if (Array.isArray(value)) {\n                        var subComponents = value\n                            .map(function (config) {\n                            var axis = create(config, path + '.' + key, undefined, theme);\n                            if (theme && key === 'axes') {\n                                var fakeTheme = {\n                                    getConfig: function (path) {\n                                        var parts = path.split('.');\n                                        var modifiedPath = parts.slice(0, 3).join('.') + '.' + axis.position;\n                                        var after = parts.slice(3);\n                                        if (after.length) {\n                                            modifiedPath += '.' + after.join('.');\n                                        }\n                                        var config = theme.getConfig(path);\n                                        var modifiedConfig = theme.getConfig(modifiedPath);\n                                        isObject(theme.getConfig(modifiedPath));\n                                        if (isObject(config) && isObject(modifiedConfig)) {\n                                            return deepMerge(config, modifiedConfig);\n                                        }\n                                        return modifiedConfig;\n                                    }\n                                };\n                                update(axis, config, path + '.' + key, fakeTheme);\n                            }\n                            return axis;\n                        })\n                            .filter(function (instance) { return !!instance; });\n                        component[key] = subComponents;\n                    }\n                    else {\n                        if (mapping[key] && component[key]) {\n                            // The instance property already exists on the component (e.g. chart.legend).\n                            // Simply configure the existing instance, without creating a new one.\n                            create(value, path + '.' + key, component[key], theme);\n                        }\n                        else {\n                            var subComponent = create(value, value.type ? path : path + '.' + key, undefined, theme);\n                            if (subComponent) {\n                                component[key] = subComponent;\n                            }\n                        }\n                    }\n                }\n                else { // if (key in meta.constructor.defaults) { // prevent users from creating custom properties\n                    component[key] = value;\n                }\n            }\n        };\n        for (var key in options) {\n            _loop_1(key);\n        }\n        var listeners = options.listeners;\n        if (component && component.addEventListener && listeners) {\n            for (var key in listeners) {\n                if (listeners.hasOwnProperty(key)) {\n                    var listener = listeners[key];\n                    if (typeof listener === 'function') {\n                        component.addEventListener(key, listener);\n                    }\n                }\n            }\n        }\n        return component;\n    }\n}\nfunction update(component, options, path, theme) {\n    if (!(options && isObject(options))) {\n        return;\n    }\n    // Deprecate `chart.legend.item.marker.type` in integrated chart options.\n    if (component instanceof LegendMarker) {\n        if (options.type) {\n            options.shape = options.type;\n        }\n    }\n    else {\n        options = provideDefaultType(options, path);\n        if (path) {\n            if (options.type) {\n                path = path + '.' + options.type;\n            }\n        }\n        else {\n            path = options.type;\n        }\n    }\n    if (!path) {\n        return;\n    }\n    var chart = path in mappings ? component : undefined;\n    var mapping = getValue(mappings, path);\n    if (mapping) {\n        options = provideDefaultOptions(path, options, mapping, theme);\n        var meta = mapping.meta || {};\n        var constructorParams = meta && meta.constructorParams || [];\n        var skipKeys = ['type'].concat(constructorParams);\n        for (var key in options) {\n            if (skipKeys.indexOf(key) < 0) {\n                var value = options[key];\n                var keyPath = path + '.' + key;\n                if (meta.setAsIs && meta.setAsIs.indexOf(key) >= 0) {\n                    component[key] = value;\n                }\n                else {\n                    var oldValue = component[key];\n                    if (Array.isArray(oldValue) && Array.isArray(value)) {\n                        if (chart) {\n                            if (key === 'series') {\n                                updateSeries(component, value, keyPath, theme);\n                            }\n                            else if (key === 'axes') {\n                                updateAxes(component, value, keyPath, theme);\n                            }\n                        }\n                        else {\n                            component[key] = value;\n                        }\n                    }\n                    else if (isObject(oldValue)) {\n                        if (value) {\n                            update(oldValue, value, value.type ? path : keyPath, theme);\n                        }\n                        else if (key in options) {\n                            component[key] = value;\n                        }\n                    }\n                    else {\n                        var subComponent = isObject(value) && create(value, value.type ? path : keyPath, undefined, theme);\n                        if (subComponent) {\n                            component[key] = subComponent;\n                        }\n                        else {\n                            if (chart && options.autoSize && (key === 'width' || key === 'height')) {\n                                continue;\n                            }\n                            component[key] = value;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    if (chart) {\n        chart.layoutPending = true;\n    }\n}\nfunction updateSeries(chart, configs, keyPath, theme) {\n    var allSeries = chart.series.slice();\n    var prevSeries;\n    var i = 0;\n    for (; i < configs.length; i++) {\n        var config = configs[i];\n        var series = allSeries[i];\n        if (series) {\n            config = provideDefaultType(config, keyPath);\n            var type = actualSeriesTypeMap[config.type];\n            if (series.type === type) {\n                if (theme) {\n                    firstColorIndex = theme.setSeriesColors(series, config, firstColorIndex);\n                }\n                update(series, config, keyPath, theme);\n            }\n            else {\n                var newSeries = create(config, keyPath, undefined, theme);\n                chart.removeSeries(series);\n                chart.addSeriesAfter(newSeries, prevSeries);\n                series = newSeries;\n            }\n        }\n        else { // more new configs than existing series\n            var newSeries = create(config, keyPath, undefined, theme);\n            chart.addSeries(newSeries);\n        }\n        prevSeries = series;\n    }\n    // more existing series than new configs\n    for (; i < allSeries.length; i++) {\n        var series = allSeries[i];\n        if (series) {\n            chart.removeSeries(series);\n        }\n    }\n}\nfunction updateAxes(chart, configs, keyPath, theme) {\n    var axes = chart.axes;\n    var axesToAdd = [];\n    var axesToUpdate = [];\n    var _loop_2 = function (config) {\n        var axisToUpdate = find(axes, function (axis) {\n            return axis.type === config.type && axis.position === config.position;\n        });\n        if (axisToUpdate) {\n            axesToUpdate.push(axisToUpdate);\n            update(axisToUpdate, config, keyPath, theme);\n        }\n        else {\n            var axisToAdd = create(config, keyPath, undefined, theme);\n            if (axisToAdd) {\n                axesToAdd.push(axisToAdd);\n            }\n        }\n    };\n    for (var _i = 0, configs_1 = configs; _i < configs_1.length; _i++) {\n        var config = configs_1[_i];\n        _loop_2(config);\n    }\n    chart.axes = axesToUpdate.concat(axesToAdd);\n}\nfunction provideDefaultChartType(options) {\n    if (options.type) {\n        return options;\n    }\n    // If chart type is not specified, try to infer it from the type of first series.\n    var series = options.series && options.series[0];\n    if (series && series.type) {\n        outerLoop: for (var chartType in mappings) {\n            for (var seriesType in mappings[chartType].series) {\n                if (series.type === seriesType) {\n                    options = Object.create(options);\n                    options.type = chartType;\n                    break outerLoop;\n                }\n            }\n        }\n    }\n    if (!options.type) {\n        options = Object.create(options);\n        options.type = 'cartesian';\n    }\n    return options;\n}\nfunction provideDefaultType(options, path) {\n    if (!path) { // if `path` is undefined, `options` is a top-level (chart) config\n        path = '';\n        options = provideDefaultChartType(options);\n    }\n    if (!options.type) {\n        var seriesType = pathToSeriesTypeMap[path];\n        if (seriesType) {\n            options = Object.create(options);\n            options.type = seriesType;\n        }\n    }\n    return options;\n}\nfunction skipThemeKey(key) {\n    return ['axes', 'series'].indexOf(key) >= 0;\n}\nvar enabledKey = 'enabled';\n/**\n * If certain options were not provided by the user, use the defaults from the theme and the mapping.\n * All three objects are provided for the current path in the config tree, not necessarily top-level.\n */\nfunction provideDefaultOptions(path, options, mapping, theme) {\n    var isChartConfig = path.indexOf('.') < 0;\n    var themeDefaults = theme && theme.getConfig(path);\n    var defaults = mapping && mapping.meta && mapping.meta.defaults;\n    var isExplicitlyDisabled = options.enabled === false; // by the user\n    if (defaults || themeDefaults) {\n        options = Object.create(options);\n    }\n    // Fill in the gaps for properties not configured by the user using theme provided values.\n    for (var key in themeDefaults) {\n        // The default values for these special chart configs always come from the mappings, not theme.\n        if (isChartConfig && skipThemeKey(key)) {\n            continue;\n        }\n        if (!(key in options)) {\n            options[key] = themeDefaults[key];\n        }\n    }\n    // Fill in the gaps for properties not configured by the user, nor theme using chart mappings.\n    for (var key in defaults) {\n        if ((!themeDefaults || !(key in themeDefaults) || skipThemeKey(key)) && !(key in options)) {\n            options[key] = defaults[key];\n        }\n    }\n    // Special handling for the 'enabled' property. For example:\n    // title: { text: 'Quarterly Revenue' } // means title is enabled\n    // legend: {} // means legend is enabled\n    var hasEnabledKey = (themeDefaults && enabledKey in themeDefaults) ||\n        (defaults && enabledKey in defaults);\n    if (hasEnabledKey && !isExplicitlyDisabled) {\n        options[enabledKey] = true;\n    }\n    return options;\n}\n","export * from \"./caption\";\nexport * from \"./chart/axis/numberAxis\";\nexport * from \"./chart/axis/categoryAxis\";\nexport * from \"./chart/axis/groupedCategoryAxis\";\nexport * from \"./chart/axis/timeAxis\";\nexport * from \"./chart/cartesianChart\";\nexport * from \"./chart/hierarchyChart\";\nexport * from \"./chart/chart\";\nexport * from \"./chart/chartAxis\";\nexport * from \"./chart/groupedCategoryChart\";\nexport * from \"./chart/polarChart\";\nexport * from \"./chart/marker/marker\";\nexport * from \"./chart/legend\";\nexport * from \"./chart/series/cartesian/areaSeries\";\nexport * from \"./chart/series/cartesian/barSeries\";\nexport * from \"./chart/series/cartesian/lineSeries\";\nexport * from \"./chart/series/cartesian/scatterSeries\";\nexport * from \"./chart/series/cartesian/histogramSeries\";\nexport * from \"./chart/series/hierarchy/treemapSeries\";\nexport * from \"./chart/series/polar/pieSeries\";\nexport * from \"./scale/bandScale\";\nexport * from \"./scale/linearScale\";\nexport * from \"./scene/clipRect\";\nexport * from \"./scene/dropShadow\";\nexport * from \"./scene/group\";\nexport * from \"./scene/scene\";\nexport * from \"./scene/shape/arc\";\nexport * from \"./scene/shape/line\";\nexport * from \"./scene/shape/path\";\nexport * from \"./scene/shape/rect\";\nexport * from \"./scene/shape/sector\";\nexport * from \"./scene/shape/shape\";\nexport * from \"./util/angle\";\nexport * from \"./util/array\";\nexport * from \"./util/padding\";\nimport { millisecond } from \"./util/time/millisecond\";\nimport { second } from \"./util/time/second\";\nimport { minute } from \"./util/time/minute\";\nimport { hour } from \"./util/time/hour\";\nimport { day } from \"./util/time/day\";\nimport { sunday, monday, tuesday, wednesday, thursday, friday, saturday } from \"./util/time/week\";\nimport { month } from \"./util/time/month\";\nimport { year } from \"./util/time/year\";\nimport { utcMinute } from \"./util/time/utcMinute\";\nimport { utcHour } from \"./util/time/utcHour\";\nimport { utcDay } from \"./util/time/utcDay\";\nimport { utcMonth } from \"./util/time/utcMonth\";\nimport { utcYear } from \"./util/time/utcYear\";\nexport var time = {\n    millisecond: millisecond,\n    second: second,\n    minute: minute,\n    hour: hour,\n    day: day,\n    sunday: sunday, monday: monday, tuesday: tuesday, wednesday: wednesday, thursday: thursday, friday: friday, saturday: saturday,\n    month: month,\n    year: year,\n    utcMinute: utcMinute,\n    utcHour: utcHour,\n    utcDay: utcDay,\n    utcMonth: utcMonth,\n    utcYear: utcYear\n};\nexport * from \"./chart/agChart\";\nexport * from \"./chart/themes/chartTheme\";\n","export const revenueData = [\n    {\n        quarter: \"Q1'18\",\n        iphone: 140,\n        mac: 16,\n        ipad: 14,\n        wearables: 12,\n        services: 20,\n    },\n    {\n        quarter: \"Q2'18\",\n        iphone: 124,\n        mac: 20,\n        ipad: 14,\n        wearables: 12,\n        services: 30,\n    },\n    {\n        quarter: \"Q3'18\",\n        iphone: 112,\n        mac: 20,\n        ipad: 18,\n        wearables: 14,\n        services: 36,\n    },\n    {\n        quarter: \"Q4'18\",\n        iphone: 118,\n        mac: 24,\n        ipad: 14,\n        wearables: 14,\n        services: 36,\n    },\n    {\n        quarter: \"Q1'19\",\n        iphone: 124,\n        mac: 18,\n        ipad: 16,\n        wearables: 18,\n        services: 26,\n    },\n    {\n        quarter: \"Q2'19\",\n        iphone: 108,\n        mac: 20,\n        ipad: 16,\n        wearables: 18,\n        services: 40,\n    },\n    {\n        quarter: \"Q3'19\",\n        iphone: 96,\n        mac: 22,\n        ipad: 18,\n        wearables: 24,\n        services: 42,\n    },\n    {\n        quarter: \"Q4'19\",\n        iphone: 104,\n        mac: 22,\n        ipad: 14,\n        wearables: 20,\n        services: 40,\n    },\n];\n","import * as agCharts from \"ag-charts-community\";\nimport { revenueData } from './services-data';\n\nvar myTheme = {\n  overrides: {\n    cartesian: {\n      series: {\n        column: {\n          highlightStyle: {\n            fill: 'rgba(0,0,0,0)',\n          },\n        },\n      },\n    },\n  },\n};\n\nvar options = {\n  theme: myTheme,\n  container: document.getElementById('myChart'),\n  title: {\n    text: \"Apple's revenue by product category\",\n  },\n  subtitle: {\n    text: 'in billion U.S. dollars',\n  },\n  data: revenueData,\n  series: [\n    {\n      type: 'column',\n      xKey: 'quarter',\n      yKeys: ['iphone', 'mac', 'wearables', 'services'],\n    },\n  ],\n};\n\nagCharts.AgChart.create(options);\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}